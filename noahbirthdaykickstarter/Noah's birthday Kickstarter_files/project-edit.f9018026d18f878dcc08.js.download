webpackJsonp([3,28,36,44,51],{"+/oj":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");n("jAPW"),(0,a.default)(function(){(0,a.default)(document).on("click",".js-read_more",function(e){var t=(0,a.default)(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),r=t.find(".js-more");i.addClass("hide"),i.find(".video-player").trigger("ksr_video:pause"),r.removeClass("hide"),a.default.scrollTo(t),n&&(0,o.track)(n+" Read More"),e.preventDefault()}),(0,a.default)(document).on("click",".js-read_less",function(e){var t=(0,a.default)(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),r=t.find(".js-more");i.removeClass("hide"),r.addClass("hide"),r.find(".video-player").trigger("ksr_video:pause"),a.default.scrollTo(t),n&&(0,o.track)(n+" Read Less"),e.preventDefault()})})},"+4Bd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unboundValidator=t.validate=t.isValid=t.convertErrorsToObject=t.getErrors=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("p5aI");t.getErrors=function(e){var t=o(e());return t.isSuccess?{}:a(t.value)};var a=t.convertErrorsToObject=function(e){var t=e.errors;return Object.keys(t).reduce(function(e,n){var r=t[n];return i({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,r.value))},{})},o=(t.isValid=function(e){return o(e()).isSuccess},t.validate=function(e){return e.reduce(function(e,t){return e.concat(t)},(0,r.Success)())});t.unboundValidator=function(e){return function(t){var n=t.state,i=t.fields,r=n.touched,a=n.errors,o=i.filter(function(e){return!(!r[e]||!a[e])}).map(function(e){return a[e]}).reduce(function(e,t){return e.concat(t)},[]).map(function(t){return e[t]||t});return o.length>0?o:null}}},"+4yP":function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("shXp")),a=l(n("9VV1")),o=l(n("wmCY")),s=l(n("c5nH"));function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,i.default)("body").on("DOMNodeInserted","form#new_comment",function(){var e=(0,i.default)(this);e.on("click",":submit",function(t){if(s.default&&s.default.get("comments_loaded")&&s.default.get("comments_count")-s.default.get("comments_loaded")>50)return!0;t.preventDefault();var n=e.find("input.submit"),l=n.val(),d=function(){var t=e.closest(".js-comments").find(".list-comments li.comment:first");if(s.default&&s.default.get("comments_loaded")&&t.length)return parseInt(t.attr("id").match(/\d+/)[0],10)}(),c=r.default.reduce(e.serializeArray(),function(e,t){return e[t.name]=t.value,e},{});d&&(c.cursor=d),n.hasClass("disabled")||(n.addClass("disabled"),n.val(o.default.t("onloads.views.comments.form.Posting")),i.default.ajax({type:e.attr("method"),url:e.attr("action"),dataType:"json",data:c,success:function(t){var n=e.closest(".js-comments"),o=n.find(".list-comments"),l=n.find("header");r.default.isArray(t.flash)&&r.default.isArray(t.flash[0])&&(t.flash=r.default.object(t.flash)),(0,a.default)(t.flash),t.html&&(e.each(function(){void 0!==this.reset&&this.reset()}),o.length||(o=(0,i.default)('<ol class="list-comments click"><li class="page"><ol class="comments"></ol></li></ol>'),l.length?l.after(o):n.append(o)),t.comments_count&&s.default&&s.default.get("comments_loaded")&&(s.default.set("comments_loaded",s.default.get("comments_loaded")+(0,i.default)(t.html).length),s.default.set("comments_count",t.comments_count)),(0,i.default)("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)+1}),o.closest(".project_preview_comments").addClass("has_comments"),(0,i.default)("body#proposals_show").length?o.append(t.html):o.find(".page ol.comments").prepend(t.html))},complete:function(){n.removeClass("disabled"),n.val(l)}}))})})})},"+V2Z":function(e,t,n){"use strict";var i,r=n("I1z3"),a=(i=r)&&i.__esModule?i:{default:i};var o=n("l/Rs");n("l/Rs");o.browser=a.default},"+YRa":function(e,t,n){"use strict";n("452R"),n("v6Dq"),n("mjY1");var i=p(n("rXeC")),r=p(n("hBlz")),a=p(n("shXp")),o=p(n("eF8u")),s=p(n("8NzR")),l=p(n("L3hI")),d=n("4RZc"),c=n("Z6GA"),u=p(n("GiK3")),f=p(n("O27J")),h=n("31kD");function p(e){return e&&e.__esModule?e:{default:e}}(0,s.default)("#discover_advanced",function(e){var t,n,s,p=(0,i.default)(document.body),m=e.find("#advanced_container"),g=e.find("#NS_discover__landing"),v=(0,i.default)("#NS__discover_advanced_sentence").find("form"),_=e.find("#projects_list"),y=e.find(".load_more"),b=e.find(".NS_discover__spotlight_projects"),w=e.find(".NS_discover__footer"),E=500,C=!1,k=_.data("seed"),S=1,T=!0;function A(){return a.default.map(_.find(".row > li > .project-card, .js-react-proj-card"),function(e){return(0,i.default)(e).data("pid")})}function R(e){var t=A();return a.default.filter(e,function(e){return-1===a.default.indexOf(t,e.id)})}function x(e){var t=document.createElement("div");return t.setAttribute("data-project",JSON.stringify(e)),t.className="js-react-async-proj-card col-full col-sm-12-24 col-lg-8-24",t.id=e.slug+"-"+(0,c.uuidNoDashes)(),t}function I(e,t){return e.filter(function(e){return(0,i.default)(e).data("project").state===t})}function D(e){var t=document.createElement("div");t.className="grid-row flex flex-wrap";var n=document.createDocumentFragment();return e.forEach(function(e){return n.appendChild(e)}),t.appendChild(n),t}function N(e,t){var n=(t||{}).append_results;if(n||(_.children().remove(),k=e.seed,y.show(),_.siblings(".title").find(".count").text(l.default.format_number(e.total_hits,{precision:0})+l.default.pluralize(" project",e.total_hits)).siblings(".category").hide()),e.projects.length>0){m.removeClass("no_results");var r=document.createElement("div");if(r.className="grid-row flex flex-wrap",_.is("[data-discover_past_project_header]")){var a=R(e.projects).map(x),o=I(a,"live"),s=I(a,"successful");if(o.length&&_.append(D(o)),s.length){if(!_.children().find("#js-past-projects-header").length){var d=_.children().last()[0];f.default.render(u.default.createElement(h.ExploreHeader,{projectCount:e.past_projects_count}),d)}_.append(D(s))}}else{var c=document.createDocumentFragment();R(e.projects).map(x).forEach(function(e){return c.appendChild(e)}),r.appendChild(c),_.append(r)}(0,i.default)(document).trigger("discovery:loaded_more")}else y.hide(),n||P()}function j(e,o){o=o||{},C=!0,(e=v.length?e||(0,r.default)("?"+v.serialize()).query(!0):e||(0,r.default)().query(!0)).seed=k,e=a.default.pick(e||{},a.default.filter(a.default.keys(e),function(t){return!!e[t]})),t&&t.abort(),o.paging?(e.page=S+1,m.addClass("loading-pagination")):(e.page=S=1,m.addClass("loading")),clearTimeout(n),n=setTimeout(function(){t=i.default.ajax({url:"/discover/advanced?google_chrome_workaround",data:e,dataType:"json",success:function(t){N(t,{append_results:o.paging}),t.has_more||(T=!1,y.hide()),History.replaceState({},document.title,"/discover/advanced?"+i.default.param(e)),S=e.page},complete:function(e){0!==e.status&&m.removeClass("loading loading-pagination"),t=!1,C=!1}})},E)}function P(){var e=(0,r.default)().query(!0);m.addClass("no_results"),(e.social||e.backed||e.starred)&&a.default.isUndefined(o.default)?(m.find(".requires_login_empty_state").show(),m.find(".general_empty_state").hide()):(m.find(".requires_login_empty_state").hide(),m.find(".general_empty_state").show())}function L(){var e=s;s=p.scrollTop()||(0,i.default)(window).scrollTop(),!C&&T&&s>e&&p.height()-s<2e3&&j(void 0,{paging:!0})}y.on("click",function(e){e.preventDefault(),s=p.scrollTop(),(0,i.default)(document).on("scroll",L),j(void 0,{paging:!0}),_.children().children().show()}),e.find(".login, .signup").on("click",function(e){window.location=(0,i.default)(this).data("url")+"?then="+encodeURIComponent(window.location.href),e.preventDefault()}),e.find("li.sample_search a").on("click",function(e){var t=(0,i.default)(this).closest("li").data("sample")||{};t.category_id=(t.category||{}).id,t.location_id=(t.location||{}).id,t.tag_id=(t.tag||{}).id,(0,i.default)(document).trigger("discovery:sentence:load_sample",t),(0,i.default)(document).trigger("discovery:categories:load_sample",t),(0,i.default)(document).trigger("discovery:locations:load_sample",t),(0,i.default)(document).trigger("discovery:sorts:load_sample",t),(0,i.default)(document).trigger("discovery:filters:load_sample",t),(0,i.default)(document).trigger("discovery:sentence:show_sentence",t),g.hide(),b.hide(),w.hide(),(0,d.track)("Discovery Sample Sentence Click",{discover_sample_sentence_ref:t.mp_ref}),e.preventDefault()}),e.on("click",".project-card-wrap .project-meta li a",function(e){var t=(0,i.default)(this).data("location");(0,i.default)(document).trigger("discovery:locations:load_sample",{location:t}),(0,d.track)("Discover Baseball Card Location Clicked"),e.preventDefault()}),(0,i.default)(document).on("discovery:sentence:changed",function(e,t){1===parseInt(t.social,10)?_.addClass("social"):_.removeClass("social"),0===t.category_id?(g.hide(),b.hide()):v.is(":visible")&&(g.remove(),b.remove()),j(t)}),(0,i.default)(document).on("discovery:sentence:term_changed",function(e,t){j(t)}),(0,i.default)(document).on("discovery:hero:select_subcategory",function(){g.hide(),b.hide()}),(0,i.default)(document).on("discovery:hero:unselect_subcategory",function(){g.show(),b.show()});var O=A().length;O||P(),O<6&&y.hide()})},"+fgJ":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){"use strict";e(n("l/Rs"))}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,r,a,o=n.initialIframeSrc||"javascript:false;";return{send:function(s,l){(i=e('<form style="display:none;"></form>')).attr("accept-charset",n.formAcceptCharset),a=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+a+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+a+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+a+"_method=PATCH",n.type="POST"),r=e('<iframe src="'+o+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,a=e.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var t;try{if(!(t=r.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+o+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",a[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var r=e(t[n]);e(i).prop("name",r.prop("name")).attr("form",r.attr("form")),r.replaceWith(i)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",o),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})},"/RUt":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_spotlight_projects__carousel",function(e){var t=e.find(".featured-projects-list"),n=e.find(".next"),r=e.find(".previous"),o=640;function s(){(0,i.default)(window).width()<o?t.cycle("destroy"):t.cycle({autoHeight:0,timeout:0,slides:".project-group",speed:600,fx:"scrollHorz",pager:".dots",next:".next",prev:".previous",log:!1})}t.on("cycle-after cycle-before",function(e,t){1===t.slideNum?(n.addClass("visible"),r.removeClass("visible")):t.slideNum===t.slideCount?(r.addClass("visible"),n.removeClass("visible")):(r.addClass("visible"),n.addClass("visible")),"cycle-after"===e.type&&(0,a.track)("Watch Cycle Featured Projects")}),(0,i.default)(document).resize(function(){s()}),s()})},"/V0p":function(e,t,n){(function(i){var r;!function(){var a;function o(e){var t,n,i,r="",a=-1;if(e&&e.length)for(i=e.length;(a+=1)<i;)t=e.charCodeAt(a),n=a+1<i?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),a+=1),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}function d(e,t){for(var n,i=t?"0123456789ABCDEF":"0123456789abcdef",r="",a=0,o=e.length;a<o;a+=1)n=e.charCodeAt(a),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r}function c(e){var t,n=32*e.length,i="";for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return i}function u(e){var t,n=32*e.length,i="";for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function f(e){var t,n=8*e.length,i=Array(e.length>>2),r=i.length;for(t=0;t<r;t+=1)i[t]=0;for(t=0;t<n;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function h(e){var t,n=8*e.length,i=Array(e.length>>2),r=i.length;for(t=0;t<r;t+=1)i[t]=0;for(t=0;t<n;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return i}function p(e,t){var n,i,r,a,o,s,l,d,c=t.length,u=Array();for(a=(s=Array(Math.ceil(e.length/2))).length,n=0;n<a;n+=1)s[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);for(;s.length>0;){for(o=Array(),r=0,n=0;n<s.length;n+=1)r=(r<<16)+s[n],r-=(i=Math.floor(r/c))*c,(o.length>0||i>0)&&(o[o.length]=i);u[u.length]=r,s=o}for(l="",n=u.length-1;n>=0;n--)l+=t.charAt(u[n]);for(d=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),n=l.length;n<d;n+=1)l=t[0]+l;return l}function m(e,t){var n,i,r,a="",o=e.length;for(t=t||"=",n=0;n<o;n+=3)for(r=e.charCodeAt(n)<<16|(n+1<o?e.charCodeAt(n+1)<<8:0)|(n+2<o?e.charCodeAt(n+2):0),i=0;i<4;i+=1)8*n+6*i>8*e.length?a+=t:a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-i)&63);return a}a={VERSION:"1.0.6",Base64:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="=",n=!0;this.encode=function(i){var r,a,s,l="",d=i.length;for(t=t||"=",i=n?o(i):i,r=0;r<d;r+=3)for(s=i.charCodeAt(r)<<16|(r+1<d?i.charCodeAt(r+1)<<8:0)|(r+2<d?i.charCodeAt(r+2):0),a=0;a<4;a+=1)l+=8*r+6*a>8*d?t:e.charAt(s>>>6*(3-a)&63);return l},this.decode=function(i){var r,a,o,s,l,d,c,u,f="",h=[];if(!i)return i;r=u=0,i=i.replace(new RegExp("\\"+t,"gi"),"");do{a=(c=e.indexOf(i.charAt(r+=1))<<18|e.indexOf(i.charAt(r+=1))<<12|(l=e.indexOf(i.charAt(r+=1)))<<6|(d=e.indexOf(i.charAt(r+=1))))>>16&255,o=c>>8&255,s=255&c,h[u+=1]=64===l?String.fromCharCode(a):64===d?String.fromCharCode(a,o):String.fromCharCode(a,o,s)}while(r<i.length);return f=h.join(""),f=n?function(e){var t,n,i,r,a,o,s=[];if(t=n=i=r=a=0,e&&e.length)for(o=e.length,e+="";t<o;)n+=1,(i=e.charCodeAt(t))<128?(s[n]=String.fromCharCode(i),t+=1):i>191&&i<224?(r=e.charCodeAt(t+1),s[n]=String.fromCharCode((31&i)<<6|63&r),t+=2):(r=e.charCodeAt(t+1),a=e.charCodeAt(t+2),s[n]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&a),t+=3);return s.join("")}(f):f},this.setPad=function(e){return t=e||t,this},this.setTab=function(t){return e=t||e,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},CRC32:function(e){var t,n,i,r=0,a=0;for(e=o(e),t=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),r^=-1,n=0,i=e.length;n<i;n+=1)a=255&(r^e.charCodeAt(n)),r=r>>>8^"0x"+t.substr(9*a,8);return(-1^r)>>>0},MD5:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,n=e&&"string"==typeof e.pad?e.pad:"=",i=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return u(c(f(e=i?o(e):e),8*e.length))}function a(e,t){var n,r,a,s,l;for(e=i?o(e):e,t=i?o(t):t,(n=f(e)).length>16&&(n=c(n,8*e.length)),r=Array(16),a=Array(16),l=0;l<16;l+=1)r[l]=909522486^n[l],a[l]=1549556828^n[l];return s=c(r.concat(f(t)),512+8*t.length),u(c(a.concat(s),640))}function c(e,t){var n,i,r,a,o,l=1732584193,d=-271733879,c=-1732584194,u=271733878;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,n=0;n<e.length;n+=16)i=l,r=d,a=c,o=u,d=y(d=y(d=y(d=y(d=_(d=_(d=_(d=_(d=v(d=v(d=v(d=v(d=g(d=g(d=g(d=g(d,c=g(c,u=g(u,l=g(l,d,c,u,e[n+0],7,-680876936),d,c,e[n+1],12,-389564586),l,d,e[n+2],17,606105819),u,l,e[n+3],22,-1044525330),c=g(c,u=g(u,l=g(l,d,c,u,e[n+4],7,-176418897),d,c,e[n+5],12,1200080426),l,d,e[n+6],17,-1473231341),u,l,e[n+7],22,-45705983),c=g(c,u=g(u,l=g(l,d,c,u,e[n+8],7,1770035416),d,c,e[n+9],12,-1958414417),l,d,e[n+10],17,-42063),u,l,e[n+11],22,-1990404162),c=g(c,u=g(u,l=g(l,d,c,u,e[n+12],7,1804603682),d,c,e[n+13],12,-40341101),l,d,e[n+14],17,-1502002290),u,l,e[n+15],22,1236535329),c=v(c,u=v(u,l=v(l,d,c,u,e[n+1],5,-165796510),d,c,e[n+6],9,-1069501632),l,d,e[n+11],14,643717713),u,l,e[n+0],20,-373897302),c=v(c,u=v(u,l=v(l,d,c,u,e[n+5],5,-701558691),d,c,e[n+10],9,38016083),l,d,e[n+15],14,-660478335),u,l,e[n+4],20,-405537848),c=v(c,u=v(u,l=v(l,d,c,u,e[n+9],5,568446438),d,c,e[n+14],9,-1019803690),l,d,e[n+3],14,-187363961),u,l,e[n+8],20,1163531501),c=v(c,u=v(u,l=v(l,d,c,u,e[n+13],5,-1444681467),d,c,e[n+2],9,-51403784),l,d,e[n+7],14,1735328473),u,l,e[n+12],20,-1926607734),c=_(c,u=_(u,l=_(l,d,c,u,e[n+5],4,-378558),d,c,e[n+8],11,-2022574463),l,d,e[n+11],16,1839030562),u,l,e[n+14],23,-35309556),c=_(c,u=_(u,l=_(l,d,c,u,e[n+1],4,-1530992060),d,c,e[n+4],11,1272893353),l,d,e[n+7],16,-155497632),u,l,e[n+10],23,-1094730640),c=_(c,u=_(u,l=_(l,d,c,u,e[n+13],4,681279174),d,c,e[n+0],11,-358537222),l,d,e[n+3],16,-722521979),u,l,e[n+6],23,76029189),c=_(c,u=_(u,l=_(l,d,c,u,e[n+9],4,-640364487),d,c,e[n+12],11,-421815835),l,d,e[n+15],16,530742520),u,l,e[n+2],23,-995338651),c=y(c,u=y(u,l=y(l,d,c,u,e[n+0],6,-198630844),d,c,e[n+7],10,1126891415),l,d,e[n+14],15,-1416354905),u,l,e[n+5],21,-57434055),c=y(c,u=y(u,l=y(l,d,c,u,e[n+12],6,1700485571),d,c,e[n+3],10,-1894986606),l,d,e[n+10],15,-1051523),u,l,e[n+1],21,-2054922799),c=y(c,u=y(u,l=y(l,d,c,u,e[n+8],6,1873313359),d,c,e[n+15],10,-30611744),l,d,e[n+6],15,-1560198380),u,l,e[n+13],21,1309151649),c=y(c,u=y(u,l=y(l,d,c,u,e[n+4],6,-145523070),d,c,e[n+11],10,-1120210379),l,d,e[n+2],15,718787259),u,l,e[n+9],21,-343485551),l=s(l,i),d=s(d,r),c=s(c,a),u=s(u,o);return Array(l,d,c,u)}function h(e,t,n,i,r,a){return s(l(s(s(t,e),s(i,a)),r),n)}function g(e,t,n,i,r,a,o){return h(t&n|~t&i,e,t,r,a,o)}function v(e,t,n,i,r,a,o){return h(t&i|n&~i,e,t,r,a,o)}function _(e,t,n,i,r,a,o){return h(t^n^i,e,t,r,a,o)}function y(e,t,n,i,r,a,o){return h(n^(t|~i),e,t,r,a,o)}this.hex=function(e){return d(r(e),t)},this.b64=function(e){return m(r(e),n)},this.any=function(e,t){return p(r(e),t)},this.raw=function(e){return r(e)},this.hex_hmac=function(e,n){return d(a(e,n),t)},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(i=e),this}},SHA1:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,n=e&&"string"==typeof e.pad?e.pad:"=",i=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return c(u(h(e=i?o(e):e),8*e.length))}function a(e,t){var n,r,a,s,l;for(e=i?o(e):e,t=i?o(t):t,(n=h(e)).length>16&&(n=u(n,8*e.length)),r=Array(16),a=Array(16),s=0;s<16;s+=1)r[s]=909522486^n[s],a[s]=1549556828^n[s];return l=u(r.concat(h(t)),512+8*t.length),c(u(a.concat(l),672))}function u(e,t){var n,i,r,a,o,d,c,u,h=Array(80),p=1732584193,m=-271733879,v=-1732584194,_=271733878,y=-1009589776;for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,n=0;n<e.length;n+=16){for(a=p,o=m,d=v,c=_,u=y,i=0;i<80;i+=1)h[i]=i<16?e[n+i]:l(h[i-3]^h[i-8]^h[i-14]^h[i-16],1),r=s(s(l(p,5),f(i,m,v,_)),s(s(y,h[i]),g(i))),y=_,_=v,v=l(m,30),m=p,p=r;p=s(p,a),m=s(m,o),v=s(v,d),_=s(_,c),y=s(y,u)}return Array(p,m,v,_,y)}function f(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function g(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}this.hex=function(e){return d(r(e),t)},this.b64=function(e){return m(r(e),n)},this.any=function(e,t){return p(r(e),t)},this.raw=function(e){return r(e)},this.hex_hmac=function(e,t){return d(a(e,t))},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(i=e),this}},SHA256:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,n=e&&"string"==typeof e.pad?e.pad:"=",i=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e,t){return c(b(h(e=t?o(e):e),8*e.length))}function a(e,t){e=i?o(e):e,t=i?o(t):t;var n,r=0,a=h(e),s=Array(16),l=Array(16);for(a.length>16&&(a=b(a,8*e.length));r<16;r+=1)s[r]=909522486^a[r],l[r]=1549556828^a[r];return n=b(s.concat(h(t)),512+8*t.length),c(b(l.concat(n),768))}function l(e,t){return e>>>t|e<<32-t}function u(e,t){return e>>>t}function f(e,t,n){return e&t^~e&n}function g(e,t,n){return e&t^e&n^t&n}function v(e){return l(e,2)^l(e,13)^l(e,22)}function _(e){return l(e,6)^l(e,11)^l(e,25)}function y(e){return l(e,7)^l(e,18)^u(e,3)}function b(e,n){var i,r,a,o,d,c,h,p,m,b,w,E,C,k=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],S=new Array(64);for(e[n>>5]|=128<<24-n%32,e[15+(n+64>>9<<4)]=n,m=0;m<e.length;m+=16){for(i=k[0],r=k[1],a=k[2],o=k[3],d=k[4],c=k[5],h=k[6],p=k[7],b=0;b<64;b+=1)S[b]=b<16?e[b+m]:s(s(s(l(C=S[b-2],17)^l(C,19)^u(C,10),S[b-7]),y(S[b-15])),S[b-16]),w=s(s(s(s(p,_(d)),f(d,c,h)),t[b]),S[b]),E=s(v(i),g(i,r,a)),p=h,h=c,c=d,d=s(o,w),o=a,a=r,r=i,i=s(w,E);k[0]=s(i,k[0]),k[1]=s(r,k[1]),k[2]=s(a,k[2]),k[3]=s(o,k[3]),k[4]=s(d,k[4]),k[5]=s(c,k[5]),k[6]=s(h,k[6]),k[7]=s(p,k[7])}return k}this.hex=function(e){return d(r(e,i))},this.b64=function(e){return m(r(e,i),n)},this.any=function(e,t){return p(r(e,i),t)},this.raw=function(e){return r(e,i)},this.hex_hmac=function(e,t){return d(a(e,t))},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(i=e),this},t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,n=e&&"string"==typeof e.pad?e.pad:"=",i=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return c(s(h(e=i?o(e):e),8*e.length))}function a(e,t){e=i?o(e):e,t=i?o(t):t;var n,r=0,a=h(e),l=Array(32),d=Array(32);for(a.length>32&&(a=s(a,8*e.length));r<32;r+=1)l[r]=909522486^a[r],d[r]=1549556828^a[r];return n=s(l.concat(h(t)),1024+8*t.length),c(s(d.concat(n),1536))}function s(e,n){var i,r,a,o=new Array(80),s=new Array(16),d=[new l(1779033703,-205731576),new l(-1150833019,-2067093701),new l(1013904242,-23791573),new l(-1521486534,1595750129),new l(1359893119,-1377402159),new l(-1694144372,725511199),new l(528734635,-79577749),new l(1541459225,327033209)],c=new l(0,0),h=new l(0,0),p=new l(0,0),m=new l(0,0),w=new l(0,0),E=new l(0,0),C=new l(0,0),k=new l(0,0),S=new l(0,0),T=new l(0,0),A=new l(0,0),R=new l(0,0),x=new l(0,0),I=new l(0,0),D=new l(0,0),N=new l(0,0),j=new l(0,0);for(void 0===t&&(t=[new l(1116352408,-685199838),new l(1899447441,602891725),new l(-1245643825,-330482897),new l(-373957723,-2121671748),new l(961987163,-213338824),new l(1508970993,-1241133031),new l(-1841331548,-1357295717),new l(-1424204075,-630357736),new l(-670586216,-1560083902),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,-704662302),new l(1925078388,-226784913),new l(-2132889090,991336113),new l(-1680079193,633803317),new l(-1046744716,-815192428),new l(-459576895,-1628353838),new l(-272742522,944711139),new l(264347078,-1953704523),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,-1119749164),new l(1996064986,-2096016459),new l(-1740746414,-295247957),new l(-1473132947,766784016),new l(-1341970488,-1728372417),new l(-1084653625,-1091629340),new l(-958395405,1034457026),new l(-710438585,-1828018395),new l(113926993,-536640913),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,-1651133473),new l(1695183700,-1951439906),new l(1986661051,1014477480),new l(-2117940946,1206759142),new l(-1838011259,344077627),new l(-1564481375,1290863460),new l(-1474664885,-1136513023),new l(-1035236496,-789014639),new l(-949202525,106217008),new l(-778901479,-688958952),new l(-694614492,1432725776),new l(-200395387,1467031594),new l(275423344,851169720),new l(430227734,-1194143544),new l(506948616,1363258195),new l(659060556,-544281703),new l(883997877,-509917016),new l(958139571,-976659869),new l(1322822218,-482243893),new l(1537002063,2003034995),new l(1747873779,-692930397),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(-2067236844,-1578062990),new l(-1933114872,442776044),new l(-1866530822,593698344),new l(-1538233109,-561857047),new l(-1090935817,-1295615723),new l(-965641998,-479046869),new l(-903397682,-366583396),new l(-779700025,566280711),new l(-354779690,-840897762),new l(-176337025,-294727304),new l(116418474,1914138554),new l(174292421,-1563912026),new l(289380356,-1090974290),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,-1676669620),new l(1288033470,-885112138),new l(1501505948,-60457430),new l(1607167915,987167468),new l(1816402316,1246189591)]),r=0;r<80;r+=1)o[r]=new l(0,0);for(e[n>>5]|=128<<24-(31&n),e[31+(n+128>>10<<5)]=n,a=e.length,r=0;r<a;r+=32){for(u(p,d[0]),u(m,d[1]),u(w,d[2]),u(E,d[3]),u(C,d[4]),u(k,d[5]),u(S,d[6]),u(T,d[7]),i=0;i<16;i+=1)o[i].h=e[r+2*i],o[i].l=e[r+2*i+1];for(i=16;i<80;i+=1)f(D,o[i-2],19),g(N,o[i-2],29),v(j,o[i-2],6),R.l=D.l^N.l^j.l,R.h=D.h^N.h^j.h,f(D,o[i-15],1),f(N,o[i-15],8),v(j,o[i-15],7),A.l=D.l^N.l^j.l,A.h=D.h^N.h^j.h,y(o[i],R,o[i-7],A,o[i-16]);for(i=0;i<80;i+=1)x.l=C.l&k.l^~C.l&S.l,x.h=C.h&k.h^~C.h&S.h,f(D,C,14),f(N,C,18),g(j,C,9),R.l=D.l^N.l^j.l,R.h=D.h^N.h^j.h,f(D,p,28),g(N,p,2),g(j,p,7),A.l=D.l^N.l^j.l,A.h=D.h^N.h^j.h,I.l=p.l&m.l^p.l&w.l^m.l&w.l,I.h=p.h&m.h^p.h&w.h^m.h&w.h,b(c,T,R,x,t[i],o[i]),_(h,A,I),u(T,S),u(S,k),u(k,C),_(C,E,c),u(E,w),u(w,m),u(m,p),_(p,c,h);_(d[0],d[0],p),_(d[1],d[1],m),_(d[2],d[2],w),_(d[3],d[3],E),_(d[4],d[4],C),_(d[5],d[5],k),_(d[6],d[6],S),_(d[7],d[7],T)}for(r=0;r<8;r+=1)s[2*r]=d[r].h,s[2*r+1]=d[r].l;return s}function l(e,t){this.h=e,this.l=t}function u(e,t){e.h=t.h,e.l=t.l}function f(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n|t.l<<32-n}function g(e,t,n){e.l=t.h>>>n|t.l<<32-n,e.h=t.l>>>n|t.h<<32-n}function v(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n}function _(e,t,n){var i=(65535&t.l)+(65535&n.l),r=(t.l>>>16)+(n.l>>>16)+(i>>>16),a=(65535&t.h)+(65535&n.h)+(r>>>16),o=(t.h>>>16)+(n.h>>>16)+(a>>>16);e.l=65535&i|r<<16,e.h=65535&a|o<<16}function y(e,t,n,i,r){var a=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&r.l),o=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(a>>>16),s=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(o>>>16),l=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(s>>>16);e.l=65535&a|o<<16,e.h=65535&s|l<<16}function b(e,t,n,i,r,a){var o=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&r.l)+(65535&a.l),s=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(a.l>>>16)+(o>>>16),l=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(65535&a.h)+(s>>>16),d=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(a.h>>>16)+(l>>>16);e.l=65535&o|s<<16,e.h=65535&l|d<<16}this.hex=function(e){return d(r(e))},this.b64=function(e){return m(r(e),n)},this.any=function(e,t){return p(r(e),t)},this.raw=function(e){return r(e)},this.hex_hmac=function(e,t){return d(a(e,t))},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(i=e),this}},RMD160:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t=e&&"string"==typeof e.pad?e.pa:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8,i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],r=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],a=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function u(e){return g(v(f(e=n?o(e):e),8*e.length))}function h(e,t){e=n?o(e):e,t=n?o(t):t;var i,r,a=f(e),s=Array(16),l=Array(16);for(a.length>16&&(a=v(a,8*e.length)),i=0;i<16;i+=1)s[i]=909522486^a[i],l[i]=1549556828^a[i];return r=v(s.concat(f(t)),512+8*t.length),g(v(l.concat(r),672))}function g(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function v(e,t){var n,o,d,u,f,h,p,m,g,v,w,E,C,k,S=1732584193,T=4023233417,A=2562383102,R=271733878,x=3285377520;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,u=e.length,d=0;d<u;d+=16){for(f=v=S,h=w=T,p=E=A,m=C=R,g=k=x,o=0;o<=79;o+=1)n=s(l(n=s(n=s(n=s(f,_(o,h,p,m)),e[d+i[o]]),y(o)),a[o]),g),f=g,g=m,m=l(p,10),p=h,h=n,n=s(l(n=s(n=s(n=s(v,_(79-o,w,E,C)),e[d+r[o]]),b(o)),c[o]),k),v=k,k=C,C=l(E,10),E=w,w=n;n=s(T,s(p,C)),T=s(A,s(m,k)),A=s(R,s(g,v)),R=s(x,s(f,w)),x=s(S,s(h,E)),S=n}return[S,T,A,R,x]}function _(e,t,n,i){return 0<=e&&e<=15?t^n^i:16<=e&&e<=31?t&n|~t&i:32<=e&&e<=47?(t|~n)^i:48<=e&&e<=63?t&i|n&~i:64<=e&&e<=79?t^(n|~i):"rmd160_f: j out of range"}function y(e){return 0<=e&&e<=15?0:16<=e&&e<=31?1518500249:32<=e&&e<=47?1859775393:48<=e&&e<=63?2400959708:64<=e&&e<=79?2840853838:"rmd160_K1: j out of range"}function b(e){return 0<=e&&e<=15?1352829926:16<=e&&e<=31?1548603684:32<=e&&e<=47?1836072691:48<=e&&e<=63?2053994217:64<=e&&e<=79?0:"rmd160_K2: j out of range"}this.hex=function(e){return d(u(e))},this.b64=function(e){return m(u(e),t)},this.any=function(e,t){return p(u(e),t)},this.raw=function(e){return u(e)},this.hex_hmac=function(e,t){return d(h(e,t))},this.b64_hmac=function(e,n){return m(h(e,n),t)},this.any_hmac=function(e,t,n){return p(h(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return void 0!==e&&(t=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}}},t&&"object"==typeof i&&i&&i.global,void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()}).call(t,n("DuR2"))},"/Vlt":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSelects=t.createShippingSelects=t.TotalCostInput=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("Z5jf"),l=n("oLWu"),d=n("Z6GA"),c=n("9vef"),u=n("h+ZX"),f=n("J1uj"),h=n("YzsH"),p=n("B7AS"),m=n("8UPI");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,f.addSibling)(function(e){var t,n,i,r=e.pledgeData,a=e.idForKey;return o.default.createElement("div",{key:a,className:"new-form__currency-box"},o.default.createElement("span",{className:"new-form__currency-box__text"},(n=(t=r).currencySymbol,i=t.usdSymbol,"$"===n&&"international"===i?"US$":n)))}),_=(0,f.addFooter)(function(e){var t=e.convert,n=e.conversionAtoms,i=e.idForKey,r=e.pledgeData,a=e.value,s=Math.floor(+a*r.currentFxRate),l=""+r.currentCurrencySymbol+s;return!!t&&o.default.createElement(m.ConversionEstimate,{key:"currency-"+i,amount:l,atoms:n})}),y=(0,d.compose)(f.addHeaderLabel,v,_,f.addErrors)(f.NumberInputField),b=(t.TotalCostInput=function(e){var t=e.convert,n=e.errors,i=e.idForField,r=e.idForKey,a=e.label,c=e.minPledge,u=e.onBlurField,f=e.onChange,h=e.onClick,p=e.onSelect,m=e.pledgeData,g=e.value,v=void 0===g?c.amount:g,_=(0,d.computedAtoms)("new-form__amount",m.isRight&&"new-form__amount--right",m.isSymbolic&&"new-form__amount--symbol"),b=a?(0,s.boundT)("project_page.reward_form.Pledge_amount"):null;return o.default.createElement(y,{"aria-invalid":!!n,"aria-required":"true",convert:t,conversionAtoms:["block text-uppercase type-10 track-loose pt2"],errors:n,headerLabel:b,id:i,idForKey:r,inputAtoms:["new-form__input--numbers"],name:"name",onBlur:u,onChange:f,onClick:h,onSelect:p,pledgeData:m,value:(0,l.floatsOnly)(v),wrapperAtoms:_})},t.createShippingSelects=function(e){return(0,c.createAsyncDropdown)(u.getShippingRules)(e)});t.generateSelects=function(e){if(!Array.isArray(e))return{shippingDropdowns:{},shippingReducers:{},shippingStates:{}};return e.reduce(function(e,t){var n,i=t.id,a=b(i),o=a.reducers,s=a.Component;return e.shippingDropdowns[i]=s,e.shippingReducers=r({},e.shippingReducers,r({},o)),e.shippingStates=r({},e.shippingStates,(g(n={},i+"-async",p.initialState),g(n,i+"-select",h.baseSelectState),n)),e},{shippingDropdowns:{},shippingReducers:{},shippingStates:{}})}},"/b7f":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("wmCY")),a=o(n("TGXB"));function o(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,i.default)(function(){var e=".NS_comments__comment";(0,i.default)(".js-could-have-comments").length&&((0,i.default)(document).on("click",e+" a.report_spam",function(e){e.preventDefault();var t=(0,i.default)(this),n=this,o=t.closest(".comment");i.default.modal_confirm(function(){return a.default.get(t.data("url"),"post",o.find(".ajax-container"),n)},{message:r.default.t("onloads.views.comments.comment.We_review_all_reports_with_care_but_please_keep_in_mind"),title:r.default.t("onloads.views.comments.comment.Report_this_comment_to_Kickstarter"),confirm_text:r.default.t("onloads.views.comments.comment.Yes_report_as_spam")})}),(0,i.default)(document).on("ksr_json:complete",e+" .spam_reported",function(e,t){var n=(0,i.default)(this).closest(".comment"),r=n.find(".report_spam");r.hide(),200!==t.status||r.is(".admin")||n.find(".body").hide()}))})},"/fAy":function(e,t,n){"use strict";var i=o(n("8NzR")),r=o(n("+bVi")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,i.default)("#happening_layouts_show",function(e){var t=e.find(".js-load-more");t.loadMore(),t.on("mobius:loading_page",function(){(0,a.track)("Happening See More Click")}),r.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},"/qyH":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#site_press",function(){(0,i.default)(".js-stats-button").click(function(){(0,a.track)("About KSR Press Stats Button Click")}),(0,i.default)(".js-faq-list input").click(function(){(0,a.track)("About KSR Press FAQ Item Click")}),(0,i.default)(".js-toggle-founding-story").click(function(){(0,a.track)("About KSR Press Founding Story Toggle")})})},"/uZq":function(module,exports,__webpack_require__){var rangy=__webpack_require__("5Nri"),jQuery=__webpack_require__("l/Rs"),$=__webpack_require__("l/Rs");WYMeditor.editor.prototype.init=function(){var WymClass=!1,SaxListener,prop,h,iframeHtml,boxHtml,aTools,sTools,oTool,sTool,i,aClasses,sClasses,oClass,sClass,aContainers,sContainers,sContainer,oContainer,wym;if(jQuery.browser.msie?WymClass=new WYMeditor.WymClassExplorer(this):jQuery.browser.mozilla?WymClass=new WYMeditor.WymClassMozilla(this):jQuery.browser.opera?WymClass=new WYMeditor.WymClassOpera(this):(jQuery.browser.safari||jQuery.browser.webkit||jQuery.browser.chrome)&&(WymClass=new WYMeditor.WymClassSafari(this)),!1!==WymClass){for(prop in jQuery.isFunction(this._options.preInit)&&this._options.preInit(this),this.parser=null,this.helper=null,this._options.disable_sanitization||(SaxListener=new WYMeditor.XhtmlSaxListener,this.parser=new WYMeditor.XhtmlParser(SaxListener)),this.helper=new WYMeditor.XmlHelper,WymClass)this[prop]=WymClass[prop];for(wym=this,wym._box=jQuery(wym._element).hide().after(wym._options.boxHtml).next().addClass("wym_box_"+wym._index),jQuery.isFunction(jQuery.fn.data)&&(jQuery.data(wym._box.get(0),WYMeditor.WYM_INDEX,wym._index),jQuery.data(wym._element.get(0),WYMeditor.WYM_INDEX,wym._index)),h=WYMeditor.Helper,iframeHtml=wym._options.iframeHtml,iframeHtml=h.replaceAll(iframeHtml,WYMeditor.INDEX,wym._index),iframeHtml=h.replaceAll(iframeHtml,WYMeditor.IFRAME_BASE_PATH,wym._options.iframeBasePath),boxHtml=jQuery(wym._box).html(),boxHtml=h.replaceAll(boxHtml,WYMeditor.LOGO,wym._options.logoHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS,wym._options.toolsHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS,wym._options.containersHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES,wym._options.classesHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.HTML,wym._options.htmlHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.IFRAME,iframeHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.STATUS,wym._options.statusHtml),aTools=eval(wym._options.toolsItems),sTools="",i=0;i<aTools.length;i+=1)oTool=aTools[i],oTool.html?sTool=oTool.html:(sTool="",oTool.name&&oTool.title&&(sTool=wym._options.toolsItemHtml),sTool=h.replaceAll(sTool,WYMeditor.TOOL_NAME,oTool.name),sTool=h.replaceAll(sTool,WYMeditor.TOOL_TITLE,wym._options.stringDelimiterLeft+oTool.title+wym._options.stringDelimiterRight),sTool=h.replaceAll(sTool,WYMeditor.TOOL_CLASS,oTool.css)),sTools+=sTool;for(boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS_ITEMS,sTools),aClasses=eval(wym._options.classesItems),sClasses="",i=0;i<aClasses.length;i+=1)oClass=aClasses[i],sClass="",oClass.name&&oClass.title&&(sClass=wym._options.classesItemHtml),sClass=h.replaceAll(sClass,WYMeditor.CLASS_NAME,oClass.name),sClass=h.replaceAll(sClass,WYMeditor.CLASS_TITLE,oClass.title),sClasses+=sClass;for(boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES_ITEMS,sClasses),aContainers=eval(wym._options.containersItems),sContainers="",i=0;i<aContainers.length;i+=1)oContainer=aContainers[i],sContainer="",oContainer.name&&oContainer.title&&(sContainer=wym._options.containersItemHtml),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_NAME,oContainer.name),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_TITLE,wym._options.stringDelimiterLeft+oContainer.title+wym._options.stringDelimiterRight),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_CLASS,oContainer.css),sContainers+=sContainer;boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS_ITEMS,sContainers),boxHtml=wym.replaceStrings(boxHtml),jQuery(wym._box).html(boxHtml),jQuery(wym._box).find(wym._options.htmlSelector).hide(),wym.documentStructureManager=new WYMeditor.DocumentStructureManager(wym,wym._options.structureRules.defaultRootContainer),wym._iframe_initialized=!1,jQuery(wym._box).find("iframe").load(function(){!0!==wym._iframe_initialized&&(wym._iframe_initialized=wym.initIframe(this))}),wym.initSkin()}},WYMeditor.editor.prototype.bindEvents=function(){var wym=this,$html_val;jQuery(this._box).find(this._options.toolSelector).click(function(e){wym._iframe.contentWindow.focus(),wym.exec(jQuery(this).attr(WYMeditor.NAME)),e.preventDefault()}),jQuery(this._box).find(this._options.containerSelector).click(function(e){wym.container(jQuery(this).attr(WYMeditor.NAME)),e.preventDefault()}),$html_val=jQuery(this._box).find(this._options.htmlValSelector),$html_val.keyup(function(){jQuery(wym._doc.body).html(jQuery(this).val())}),$html_val.focus(function(){jQuery(this).toggleClass("hasfocus")}),$html_val.blur(function(){jQuery(this).toggleClass("hasfocus")}),this._element.bind("change",function(){jQuery(wym._doc.body).html(jQuery(this).val())}),jQuery(this._box).find(this._options.classSelector).click(function(e){var aClasses=eval(wym._options.classesItems),sName=jQuery(this).attr(WYMeditor.NAME),oClass=WYMeditor.Helper.findByName(aClasses,sName),jqexpr;oClass&&(jqexpr=oClass.expr,wym.toggleClass(sName,jqexpr)),wym._iframe.contentWindow.focus(),e.preventDefault()}),jQuery(this._options.updateSelector).bind(this._options.updateEvent,function(){wym.update(!0)})},WYMeditor.editor.prototype.ready=function(){return null!==this._doc},WYMeditor.editor.prototype.box=function(){return this._box},WYMeditor.editor.prototype._html=function(e){if("string"!=typeof e)return jQuery(this._doc.body).html();jQuery(this._doc.body).html(e),this.update()},WYMeditor.editor.prototype.html=function(e){if(WYMeditor.console.warn("The function WYMeditor.editor.html() is deprecated. Use either WYMeditor.editor.xhtml() or WYMeditor.editor._html() instead."),"string"!=typeof e)return this._html();this._html(e)},WYMeditor.editor.prototype.xhtml=function(){return this._options.disable_sanitization?this._html():this.parser.parse(this._html())},WYMeditor.editor.prototype.exec=function(e,t){var n,i,r,a=this;switch(e){case WYMeditor.CREATE_LINK:(this.container()||this._selectedImage)&&this.dialog(WYMeditor.DIALOG_LINK);break;case WYMeditor.UNLINK:if(this.selection&&this.selection_collapsed()&&(r=this.selected_parents_contains("a")).length){r.each(function(){jQuery(this).replaceWith(this.childNodes)});break}this._exec(e);break;case WYMeditor.INSERT_IMAGE:this.dialog(WYMeditor.DIALOG_IMAGE);break;case WYMeditor.INSERT_TABLE:this.dialog(WYMeditor.DIALOG_TABLE);break;case WYMeditor.PASTE:this.dialog(WYMeditor.DIALOG_PASTE);break;case WYMeditor.TOGGLE_HTML:jQuery(this._box).find(this._options.htmlValSelector).not(".hasfocus").val(this.xhtml()),this.toggleHtml();break;case WYMeditor.PREVIEW:this.dialog(WYMeditor.PREVIEW,this._options.dialogFeaturesPreview);break;case WYMeditor.INSERT_ORDEREDLIST:this.insertOrderedlist();break;case WYMeditor.INSERT_UNORDEREDLIST:this.insertUnorderedlist();break;case WYMeditor.INDENT:this.indent();break;case WYMeditor.OUTDENT:this.outdent();break;default:i=jQuery.merge([],this._options.customCommands),jQuery.merge(i,WYMeditor.CUSTOM_COMMANDS),jQuery.each(i,function(){if(e===this.name)return n=!0,this.run.apply(a,t),!1}),n||this._exec(e)}e!==WYMeditor.TOGGLE_HTML&&(this.update_selections(),this._element.trigger(WYMeditor.EVENTS.documentHTMLUpdated,[this,jQuery(this._doc.body).html()]))},WYMeditor.editor.prototype.selection=function(){window.rangy&&!rangy.initialized&&rangy.init();var e=this._iframe;return rangy.getIframeSelection(e)},WYMeditor.editor.prototype.selected=function(){var e,t,n,i=this.selection(),r=i.focusNode;return r?(jQuery.browser.msie&&(t=r.tagName&&"body"===r.tagName.toLowerCase(),n="#text"===r.nodeName,i.isCollapsed&&(t||n)&&(e=this._iframe.contentWindow.document.caretPos)&&e.parentElement&&(r=e.parentElement())),"#text"===r.nodeName?r.parentNode:r):null},WYMeditor.editor.prototype.selection_collapsed=function(){var e=this.selection(),t=!1;return jQuery.each(e.getAllRanges(),function(){if(this.collapsed)return t=!0,!1}),t},WYMeditor.editor.prototype.selected_contains=function(e){var t=this.selection(),n=[];return jQuery.each(t.getAllRanges(),function(){jQuery.each(this.getNodes(),function(){jQuery(this).is(e)&&n.push(this)})}),n},WYMeditor.editor.prototype.selected_parents_contains=function(e){var t=jQuery([]),n=jQuery(this.selected());return n.is(e)&&(t=t.add(n)),t=t.add(n.parents(e))},WYMeditor.editor.prototype.container=function(e){if(void 0===e)return this.selected();var t,n,i,r,a,o,s,l=null;if(e.toLowerCase()===WYMeditor.TH){switch((l=this.container()).tagName.toLowerCase()){case WYMeditor.TD:case WYMeditor.TH:break;default:t=[WYMeditor.TD,WYMeditor.TH],l=this.findUp(this.container(),t)}null!==l&&(e=WYMeditor.TD,l.tagName.toLowerCase()===WYMeditor.TD&&(e=WYMeditor.TH),this.switchTo(l,e,!1),this.update())}else if(t=[WYMeditor.P,WYMeditor.DIV,WYMeditor.H1,WYMeditor.H2,WYMeditor.H3,WYMeditor.H4,WYMeditor.H5,WYMeditor.H6,WYMeditor.PRE,WYMeditor.BLOCKQUOTE],l=this.findUp(this.container(),t)){if(e.toLowerCase()===WYMeditor.BLOCKQUOTE)if(null===(i=this.findUp(this.container(),WYMeditor.BLOCKQUOTE)))n=this._doc.createElement(e),l.parentNode.insertBefore(n,l),n.appendChild(l),this.setFocusToNode(n.firstChild);else{for((a=(r=i.childNodes).length)>0&&(o=r.item(0)),s=0;s<a;s+=1)i.parentNode.insertBefore(r.item(0),i);i.parentNode.removeChild(i),o&&this.setFocusToNode(o)}else this.switchTo(l,e);this.update()}return!1},WYMeditor.editor.prototype.isForbiddenMainContainer=function(e){return jQuery.inArray(e.toLowerCase(),WYMeditor.FORBIDDEN_MAIN_CONTAINERS)>-1},WYMeditor.editor.prototype.keyCanCreateBlockElement=function(e){return jQuery.inArray(e,WYMeditor.POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS)>-1},WYMeditor.editor.prototype.toggleClass=function(e,t){var n=null;n=this._selectedImage?this._selectedImage:jQuery(this.selected()),n=jQuery(n).parentsOrSelf(t),jQuery(n).toggleClass(e),jQuery(n).attr(WYMeditor.CLASS)||jQuery(n).removeAttr(this._class)},WYMeditor.editor.prototype.findUp=function(e,t){if(void 0===e||null===e)return null;"#text"===e.nodeName&&(e=e.parentNode);var n,i,r=e.tagName.toLowerCase();if(typeof t===WYMeditor.STRING)for(;r!==t&&r!==WYMeditor.BODY;)r=(e=e.parentNode).tagName.toLowerCase();else for(n=!1;!n&&r!==WYMeditor.BODY;){for(i=0;i<t.length;i+=1)if(r===t[i]){n=!0;break}if(!n){if(null===(e=e.parentNode))return null;r=e.tagName.toLowerCase()}}return r===WYMeditor.BODY?null:e},WYMeditor.editor.prototype.switchTo=function(e,t,n){var i,r=this._doc.createElement(t),a=jQuery(e).html(),o=e.attributes;if(!n)for(i=0;i<o.length;++i)r.setAttribute(o.item(i).nodeName,o.item(i).nodeValue);r.innerHTML=a,e.parentNode.replaceChild(r,e),this.setFocusToNode(r)},WYMeditor.editor.prototype.replaceStrings=function(e){var t;if(!WYMeditor.STRINGS[this._options.lang])return WYMeditor.console.error("WYMeditor: language '"+this._options.lang+"' not found."),WYMeditor.console.error("Unable to perform i10n."),e;for(t in WYMeditor.STRINGS[this._options.lang])WYMeditor.STRINGS[this._options.lang].hasOwnProperty(t)&&(e=WYMeditor.Helper.replaceAll(e,this._options.stringDelimiterLeft+t+this._options.stringDelimiterRight,WYMeditor.STRINGS[this._options.lang][t]));return e},WYMeditor.editor.prototype.encloseString=function(e){return this._options.stringDelimiterLeft+e+this._options.stringDelimiterRight},WYMeditor.editor.prototype.status=function(e){jQuery(this._box).find(this._options.statusSelector).html(e)},WYMeditor.editor.prototype.update=function(e){var t;this._options.before_update&&e&&this._options.before_update.apply(this),t=this.xhtml(),jQuery(this._element).val(t),jQuery(this._box).find(this._options.htmlValSelector).not(".hasfocus").val(t),this.fixBodyHtml()},WYMeditor.editor.prototype.fixBodyHtml=function(){this.spaceBlockingElements(),this.fixDoubleBr(),jQuery(this._element).trigger(WYMeditor.EVENTS.postBlockMaybeCreated,this)},WYMeditor.editor.prototype.spaceBlockingElements=function(){var e,t,n,i,r,a=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION.join(", "),o=jQuery(this._doc).find("body.wym_iframe"),s=o.children();e=jQuery.browser.mozilla?'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'" _moz_editor_bogus_node="TRUE" _moz_dirty=""/>':'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'"/>',s.length>0&&(t=jQuery(s[0]),n=jQuery(s[s.length-1]),t.is(a)&&t.before(e),!n.is(a)||jQuery.browser.msie&&jQuery.browser.version<"7.0"||n.after(e)),i=this._getBlockSepSelector(),o.find(i).before(e),r=this._getBlockInListSepSelector(),o.find(r).each(function(){var t=jQuery(this);t.next(a).length||t.next(WYMeditor.BR).length||t.after(e)})},WYMeditor.editor.prototype._getBlockSepSelector=function(){if(void 0!==this._blockSpacersSel)return this._blockSpacersSel;var e,t=[],n=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION;return e=jQuery.grep(this.documentStructureManager.structureRules.validRootContainers,function(e){return-1===jQuery.inArray(e,n)}),jQuery.each(n,function(e,i){jQuery.each(n,function(e,n){t.push(i+" + "+n)})}),jQuery.each(n,function(n,i){jQuery.each(e,function(e,n){t.push(i+" + "+n),t.push(n+" + "+i)})}),this._blockSpacersSel=t.join(", "),this._blockSpacersSel},WYMeditor.editor.prototype._getBlockInListSepSelector=function(){if(void 0!==this._blockInListSpacersSel)return this._blockInListSpacersSel;var e=[];return jQuery.each(WYMeditor.LIST_TYPE_ELEMENTS,function(t,n){jQuery.each(WYMeditor.BLOCKING_ELEMENTS,function(t,i){e.push(n+" "+i)})}),this._blockInListSpacersSel=e.join(", "),this._blockInListSpacersSel},WYMeditor.editor.prototype.fixDoubleBr=function(){var e,t=jQuery(this._doc).find("body.wym_iframe");t.children("br + br").filter(":not(pre br)").remove(),t.find("p + br").next("p").prev("br").remove(),(e=t.find("p + br").slice(-1)).length>0&&0===e.next().length&&e.remove()},WYMeditor.editor.prototype.dialog=function(e,t,n){var i,r,a,o=t||this._wym._options.dialogFeatures,s=window.open("","dialog",o),l=WYMeditor.Helper;if(s){switch(i="",e){case WYMeditor.DIALOG_LINK:i=this._options.dialogLinkHtml;break;case WYMeditor.DIALOG_IMAGE:i=this._options.dialogImageHtml;break;case WYMeditor.DIALOG_TABLE:i=this._options.dialogTableHtml;break;case WYMeditor.DIALOG_PASTE:i=this._options.dialogPasteHtml;break;case WYMeditor.PREVIEW:i=this._options.dialogPreviewHtml;break;default:i=n}r=this._options.dialogHtml,r=l.replaceAll(r,WYMeditor.BASE_PATH,this._options.basePath),r=l.replaceAll(r,WYMeditor.DIRECTION,this._options.direction),r=l.replaceAll(r,WYMeditor.WYM_PATH,this._options.wymPath),r=l.replaceAll(r,WYMeditor.JQUERY_PATH,this._options.jQueryPath),r=l.replaceAll(r,WYMeditor.DIALOG_TITLE,this.encloseString(e)),r=l.replaceAll(r,WYMeditor.DIALOG_BODY,i),r=l.replaceAll(r,WYMeditor.INDEX,this._index),r=this.replaceStrings(r),(a=s.document).write(r),a.close()}},WYMeditor.editor.prototype.toggleHtml=function(){var e=jQuery(this._box).find(this._options.htmlSelector),t=jQuery(this._box).find(".wym_iframe"),n=this._box.find(".wym_tools_html");e.is(":visible")?(e.hide(),n.removeClass("selected"),jQuery(this._box).find(".ui-resizable-handle").show(),t.css("visibility","visible"),jQuery(this._doc).focus()):(e.show(),e.find("textarea").height(t.height()-10),e.find("textarea").width(t.width()-10),n.addClass("selected"),t.css("visibility","hidden"),jQuery(this._box).find(".ui-resizable-handle").hide())},WYMeditor.editor.prototype.uniqueStamp=function(){return"wym-"+(new Date).getTime()},WYMeditor.editor.prototype._handleMultilineBlockContainerPaste=function(e,t,n,i){var r,a,o,s,l,d,c,u,f,h,p;for(a=jQuery(h),s="p",t.is("li")&&(s="li"),n.splitBoundaries(),p=(h=e.findUp(n.startContainer,["p","h1","h2","h3","h4","h5","h6","li"])).tagName,l=[],d=[],jQuery(h).contents().each(function(e,t){(c=n.compareNode(t))===n.NODE_BEFORE||c===n.NODE_BEFORE_AND_AFTER&&n.startOffset===n.startContainer.length?l.push(t):d.push(t)}),r=0;r<l.length;r++)jQuery(l[r]).remove();for(r=0;r<d.length;r++)jQuery(d[r]).remove();for(l.length>0&&jQuery(h).prepend(l),d.length>0&&((u=jQuery("<"+p+"></"+p+">",e._doc)).insertAfter(jQuery(h)),u.append(d)),f=i.splice(0,1)[0].split(WYMeditor.NEWLINE).join("<br />"),jQuery(h).html(jQuery(h).html()+f),a=jQuery(h),r=0;r<i.length;r++)o="<"+s+">"+i[r].split(WYMeditor.NEWLINE).join("<br />")+"</"+s+">",a=jQuery(o,e._doc).insertAfter(a)},WYMeditor.editor.prototype.paste=function(e){var t,n,i,r,a,o,s,l,d,c,u=this.selected(),f="",h=!1;if(this,d=(s=rangy.getIframeSelection(this._iframe)).getRangeAt(0),a=jQuery(u),d.collapse(!0),1===(t=e.split(new RegExp(WYMeditor.NEWLINE+"{2,}","g"))).length&&(h=!0),void 0===u||u&&u.tagName.toLowerCase()===WYMeditor.BODY)if(h)jQuery("<p>"+t[0]+"</p>",this._doc).appendTo(this._doc.body);else for(r="p",o=t.length-1;o>=0;o-=1)for(f="<"+r+">"+t[o].split(WYMeditor.NEWLINE).join("<br />")+"</"+r+">",n=(c=jQuery(f,this._doc)).length-1;n>=0;n--)d.insertNode(c[n]);else if(h||a.is("pre"))l=this._doc.createTextNode(e),d.insertNode(l);else if(a.is("p,h1,h2,h3,h4,h5,h6,li"))this._handleMultilineBlockContainerPaste(this,a,d,t);else for(o=(i=e.split(WYMeditor.NEWLINE)).length-1;o>=0;o-=1)l=this._doc.createTextNode(i[o]),d.insertNode(l),o>0&&d.insertNode(jQuery("<br />",this._doc).get(0));""===jQuery(u).text()&&jQuery(u).remove(),jQuery("body > br",this._doc).remove(),this.setFocusToNode(s.focusNode)},WYMeditor.editor.prototype.insert=function(e){var t,n,i=this._iframe.contentWindow.getSelection();null!==i.focusNode?(n=(t=i.getRangeAt(0)).createContextualFragment(e),t.deleteContents(),t.insertNode(n)):this.paste(e)},WYMeditor.editor.prototype.insertBlock=function(e){var t,n=this.selection(),i=n.focusNode,r=n.focusOffset,a="after";i&&(t=jQuery(i).closest("div, p, h1, h2, h3, embed, cite")[0])&&t!==i&&(3===i.nodeType&&r>0&&r<i.length&&rangy.dom.splitDataNode(i,r),rangy.CssClassApplier.util.splitNodeAt(t,i,r)),0===r&&(a="before"),n.deleteFromDocument(),this.insert_next(e,a)},WYMeditor.editor.prototype.insertText=function(e){var t;(t=this.selection().getRangeAt(0)).deleteContents(),t.insertNode(document.createTextNode(e))},WYMeditor.editor.prototype.insert_next=function(e,t){var n,i,r=this.selected(),a=jQuery(r),o=a.closest("blockquote");t||(t="after"),null!==r?a.is("body")?"after"===t?a.append(e):a.prepend(e):(o.length?"after"===t?o.after(e):o.before(e):(n=a.closest("div, p, h1, h2, h3, embed, cite")).length?"after"===t?n.after(e):n.before(e):"after"===t?a.closest("body").append(e):a.closest("body").prepend(e),(i=a.clone()).find("br, span").remove(),i.is(":empty")&&a.remove(),i.remove()):jQuery(this._doc.body).prepend(e),jQuery(this._element).trigger(WYMeditor.EVENTS.documentHTMLUpdated,[this,jQuery(this._doc.body).html()])},WYMeditor.editor.prototype.insert_empty_p_if_next_block_is_uneditable=function(){jQuery("[contenteditable=false]",this._doc).each(function(){var e=jQuery(this),t=e.next();!t.length||"false"===t[0].contentEditable||t.is("span.rangySelectionBoundary")?e.after("<p>&nbsp;</p>"):t.height()||t.append("&nbsp;")})},WYMeditor.editor.prototype.wrap=function(e,t){this.insert(e+this._iframe.contentWindow.getSelection().toString()+t)},WYMeditor.editor.prototype.unwrap=function(){this.insert(this._iframe.contentWindow.getSelection().toString())},WYMeditor.editor.prototype.setFocusToNode=function(e,t){var n=rangy.createRange(this._doc),i=rangy.getIframeSelection(this._iframe);t=t||!1,n.selectNodeContents(e),n.collapse(t),i.setSingleRange(n)},WYMeditor.editor.prototype.splitListItemContents=function(e){var t,n,i,r=!1,a={itemContents:[],sublistContents:[]};for(t=e.contents(),n=0;n<t.length;n++)i=t.get(n),r||jQuery(i).is("ol,ul")?(r=!0,a.sublistContents.push(i)):a.itemContents.push(i);return a},WYMeditor.editor.prototype.joinAdjacentLists=function(e,t){var n;void 0!==e&&void 0!==t&&e.nextSibling===t&&e.tagName.toLowerCase()===t.tagName.toLowerCase()&&((n=jQuery(t).contents()).unwrap(),n.detach(),jQuery(e).append(n))},WYMeditor.editor.prototype._indentSingleItem=function(e){var t,n,i,r,a,o,s,l,d,c,u;n=(t=jQuery(e)).parent()[0].tagName.toLowerCase(),a=this.splitListItemContents(t),o=jQuery(a.sublistContents),jQuery(a.itemContents),0===(s=t.prev().filter("li")).length&&(i='<li class="spacer_li"></li>',t.before(i),s=t.prev()),(l=s.contents().last().filter("ol,ul")).length>0?(l.append(t),o.detach(),s.append(o),d=o.first(),this.joinAdjacentLists(l.get(0),d.get(0))):(o.length>0?(o.detach(),s.append(o),l=o.first()):(r="<"+n+"></"+n+">",s.append(r),l=s.contents().last()),l.prepend(t)),t.next().is(".spacer_li")&&((u=(c=t.next(".spacer_li")).contents()).detach(),t.append(u),c.remove())},WYMeditor.editor.prototype._outdentSingleItem=function(e){var t,n,i,r,a,o,s,l,d,c;n=(t=jQuery(e)).parent()[0].tagName.toLowerCase(),t.parent().parent().is("ol,ul,li")&&(t.parent().parent().is("li")||(WYMeditor.console.log("Attempting to fix invalid list nesting before outdenting."),this.correctInvalidListNesting(e)),r=this.splitListItemContents(t),a=jQuery(r.sublistContents),jQuery(r.itemContents),0!==(o=t.parent().parent("li")).length?(s=t.parent(),l=t.nextAllContents(),d=s.nextAllContents(),t.detach(),o.after(t),a.length>0&&(i="<"+n+'><li class="spacer_li"></li></'+n+">",t.append(i),c=t.children().last(),a.detach(),c.children("li").append(a)),l.length>0&&(void 0===c&&(i="<"+n+"></"+n+">",t.append(i),c=t.children().last()),l.detach(),c.append(l)),d.length>0&&(d.detach(),t.contents().length>0&&t.contents().last()[0].nodeType===WYMeditor.NODE.TEXT&&d[0].nodeType===WYMeditor.NODE.TEXT&&t.append("<br />"),t.append(d)),0===s.contents().length&&s.remove(),0===o.contents().length&&o.remove()):WYMeditor.console.error("Invalid list. No parentLi found, so aborting outdent"))},WYMeditor.editor.prototype.correctInvalidListNesting=function(e,t){var n,i,r=e;if(void 0===t&&(t=!1),!r)return t;for(;r.parentNode&&(n=r.parentNode).nodeType===WYMeditor.NODE.ELEMENT&&("ol"===(i=n.tagName.toLowerCase())||"ul"===i||"li"===i);)r=n;return jQuery(r).is("li")?(WYMeditor.console.log("Correcting orphaned root li before correcting invalid list nesting."),this._correctOrphanedListItem(r),this.correctInvalidListNesting(r,!0)):jQuery(r).is("ol,ul")?this._correctInvalidListNesting(r,t):(WYMeditor.console.error("Can't correct invalid list nesting. No root list found"),t)},WYMeditor.editor.prototype._correctOrphanedListItem=function(e){var t,n,i,r,a=jQuery();t=jQuery(e).prevContentsUntil(":not(li)"),n=jQuery(e).nextContentsUntil(":not(li)"),(r=(a=(a=(a=a.add(t)).add(e)).add(n))[0].previousSibling)&&jQuery(r).is("ol,ul")?i=r:(a.before("<ol></ol>"),i=a.prev()[0]),jQuery(i).append(a)},WYMeditor.editor.prototype._correctInvalidListNesting=function(e,t){var n,i,r,a,o,s,l=e,d=e,c=!1;for(void 0!==t&&(c=t);d;)if(d._wym_visited){if(d._wym_visited=!1,d===l)break;d=d.previousSibling?d.previousSibling:d.parentNode}else{if(d!==l&&!jQuery(d).is("li"))for(r=d;r.parentNode&&(r=r.parentNode,!jQuery(r).is("li"))&&r.nodeType===WYMeditor.NODE.ELEMENT;)if("ol"===(i=r.tagName.toLowerCase())||"ul"===i){for(WYMeditor.console.log("Fixing orphaned list content"),c=!0,a=[d],n=d,o=null;n.previousSibling;){if(n=n.previousSibling,jQuery(n).is("li")){o=n;break}a.push(n)}a.reverse(),o||1!==a.length||jQuery(d.nextSibling).is("li")&&(o=d.nextSibling),o||(jQuery(a[0]).before('<li class="spacer_li"></li>'),o=jQuery(a[0]).prev()[0]),1===(s=jQuery(o).contents().last()).length&&s[0].nodeType===WYMeditor.NODE.TEXT&&a[0].nodeType===WYMeditor.NODE.TEXT&&jQuery(o).append("<br />"),jQuery(o).append(jQuery(a));break}d.lastChild?(d._wym_visited=!0,d=d.lastChild):d=d.previousSibling?d.previousSibling:d.parentNode}return c},WYMeditor.editor.prototype.getCommonParentList=function(e,t){var n,i,r,a=!0;return 0===(e=jQuery(e).filter("li")).length?null:(n=e[0],i=jQuery(n).parents("ol,ul"),0===(i=t?i.first():i.last()).length?null:(r=i[0],jQuery(e).each(function(e,n){i=jQuery(n).parents("ol,ul"),0!==(i=t?i.first():i.last()).length&&i[0]===r||(a=!1)}),a?r:null))},WYMeditor.editor.prototype._getSelectedListItems=function(e){var t,n,i,r,a,o,s,l=[],d=[];for(a=function(e){var t;if(rangy.dom.isCharacterDataNode(e))return e;try{t=i.containsNodeText(e)}catch(e){return!0}return!0===t||void 0},t=0;t<e.rangeCount;t++)if(!0===(i=e.getRangeAt(t)).collapsed)(r=this.findUp(i.startContainer,"li"))&&(l=l.concat([r]));else{for(l=l.concat(i.getNodes([],a)),o=[],n=0;n<l.length;n++)if(s=l[n],!jQuery(s).is("li,ol,ul"))for(;s.parentNode;)if(s=s.parentNode,jQuery(s).is("li")){o.push(s);break}for(n=0;n<o.length;n++)-1===jQuery.inArray(o[n],l)&&l.push(o[n])}for(t=0;t<l.length;t++)l[t].nodeType===WYMeditor.NODE.ELEMENT&&l[t].tagName.toLowerCase()===WYMeditor.LI&&d.push(l[t]);return d},WYMeditor.editor.prototype._selectionOnlyInList=function(e){var t,n,i,r=this._wym;for(i=0;i<e.rangeCount;++i){if(t=r.findUp(e.getRangeAt(i).startContainer,["li"]),n=r.findUp(e.getRangeAt(i).endContainer,["li"]),!t||!n)return!1;if(!r.getCommonParentList([t,n],!1))return!1}return!0},WYMeditor.editor.prototype.indent=function(){var e,t,n,i=this._wym,r=rangy.getIframeSelection(this._iframe);return t=function(){var e=i.selected(),t=i.findUp(e,["ol","ul","li"]);return i.correctInvalidListNesting(t)},!!i.restoreSelectionAfterManipulation(t)||(r=rangy.getIframeSelection(this._iframe),!!i._selectionOnlyInList(r)&&(0!==(e=i._getSelectedListItems(r)).length&&(t=function(){var t=!1;for(n=0;n<e.length;n++)i._indentSingleItem(e[n]),t=!0;return t},i.restoreSelectionAfterManipulation(t))))},WYMeditor.editor.prototype.outdent=function(){var e,t,n,i=this._wym,r=rangy.getIframeSelection(this._iframe);return t=function(){var e=i.selected(),t=i.findUp(e,["ol","ul","li"]);return i.correctInvalidListNesting(t)},!!i.restoreSelectionAfterManipulation(t)||(r=rangy.getIframeSelection(this._iframe),!!i._selectionOnlyInList(r)&&(0!==(e=i._getSelectedListItems(r)).length&&(t=function(){var t=!1;for(n=0;n<e.length;n++)i._outdentSingleItem(e[n]),t=!0;return t},i.restoreSelectionAfterManipulation(t))))},WYMeditor.editor.prototype.restoreSelectionAfterManipulation=function(e){var t=rangy.saveSelection(rangy.dom.getIframeWindow(this._iframe)),n=!0;try{(n=e())?rangy.restoreSelection(t):rangy.removeMarkers(t)}catch(e){WYMeditor.console.error("Error during manipulation"),WYMeditor.console.error(e),rangy.removeMarkers(t)}return n},WYMeditor.editor.prototype.insertOrderedlist=function(){var e,t=this;return e=function(){var e=t.selected(),n=t.findUp(e,["ol","ul","li"]);return t.correctInvalidListNesting(n)},!!t.restoreSelectionAfterManipulation(e)||(e=function(){return t._insertList("ol")},t.restoreSelectionAfterManipulation(e))},WYMeditor.editor.prototype.insertUnorderedlist=function(){var e,t=this;return e=function(){var e=t.selected(),n=t.findUp(e,["ol","ul","li"]);return t.correctInvalidListNesting(n)},!!t.restoreSelectionAfterManipulation(e)||(e=function(){return t._insertList("ul")},t.restoreSelectionAfterManipulation(e))},WYMeditor.editor.prototype._insertList=function(e){var t,n,i=this._wym,r=rangy.getIframeSelection(this._iframe),a=this.selection().getAllRanges();return 0!==(t=i._getSelectedListItems(r)).length?!!(n=i.getCommonParentList(t,!0))&&(this._changeListType(n,e),!0):(jQuery.each(a,function(){this.collapsed&&i._ensureListItem(i.selected(),e),jQuery.each(this.getNodes(),function(){i._ensureListItem(this,e)})}),!1)},WYMeditor.editor.prototype._ensureListItem=function(e,t){var n,i,r=this._wym,a=r.findUp(e,WYMeditor.POTENTIAL_LIST_ELEMENTS);if(a)return 1===(i=(n=jQuery(a)).prev(t).add(n.next(t))).length?i.append(r._convertToListItem(jQuery(a))):r._convertToList(a,t),!0},WYMeditor.editor.prototype._changeListType=function(e,t){return WYMeditor.changeNodeType(e,t)},WYMeditor.editor.prototype._convertToListItem=function(e){var t=jQuery([]);return e.each(function(){var e=jQuery(this),n=jQuery("<li></li>");n.append(e.html()),e.remove(),t=t.add(n)}),t},WYMeditor.editor.prototype._convertToList=function(e,t){var n,i,r=jQuery(e),a=this._wym;return n="<"+t+"><li></li></"+t+">",this.findUp(e,WYMeditor.MAIN_CONTAINERS)===e?((i=jQuery(n)).empty(),r.after(i),i.append(a._convertToListItem(r)),r.remove()):(r.wrapInner(n),i=r.children()),i.get(0)},WYMeditor.editor.prototype.insertTable=function(e,t,n,i){if(!(e<=0||t<=0)){var r,a,o,s,l=this._doc.createElement(WYMeditor.TABLE),d=null;for(l.createCaption().innerHTML=n,r=0;r<e;r+=1)for(d=l.insertRow(r),a=0;a<t;a+=1)d.insertCell(a);if(""!==i&&jQuery(l).attr("summary",i),(o=jQuery(this.findUp(this.container(),WYMeditor.POTENTIAL_TABLE_INSERT_ELEMENTS)).get(0))&&o.parentNode)if(jQuery.inArray(o.nodeName.toLowerCase(),WYMeditor.INLINE_TABLE_INSERTION_ELEMENTS)>-1){if(s=this.selection().focusNode,jQuery.inArray(s.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS)>-1||jQuery.inArray(s.parentNode.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS)>-1)for(;s.nodeName.toLowerCase()!==WYMeditor.TABLE;)s=s.parentNode;s.nodeName.toLowerCase()===WYMeditor.LI?jQuery(s).append(l):jQuery(s).after(l)}else jQuery(o).after(l);else jQuery(this._doc.body).append(l);return this.afterInsertTable(l),this.fixBodyHtml(),l}},WYMeditor.editor.prototype.afterInsertTable=function(){},WYMeditor.editor.prototype.listen=function(){var e=this;jQuery(this._doc.body).bind("mouseup keyup change",function(t){e.update_selections.apply(e,[t])}),jQuery(e._doc.body).bind("mousedown",function(t){e.mousedown(t)}),jQuery(e._doc).bind("paste",function(){e.handlePasteEvent()})},WYMeditor.editor.prototype.handlePasteEvent=function(){var e=this;window.setTimeout(function(){jQuery(e._element).trigger(WYMeditor.EVENTS.postBlockMaybeCreated,e)},20)},WYMeditor.editor.prototype.mousedown=function(e){this._selectedImage=null,e.target.tagName.toLowerCase()===WYMeditor.IMG&&(this._selectedImage=e.target)},WYMeditor.editor.prototype.update_selections=function(){var e=this;e._box.find(".wym_tools ul > li:not(.wym_tools_html)").removeClass("selected").removeClass("partially_selected"),this.selected_parents_contains("b").length&&e._box.find(".wym_tools_strong").addClass("selected"),this.selected_parents_contains("i").length&&e._box.find(".wym_tools_emphasis").addClass("selected"),this.selected_parents_contains("a").length&&e._box.find(".wym_tools_link, .wym_tools_unlink").addClass("selected"),this.selected_parents_contains("li").length&&e._box.find(".wym_tools_unordered_list").addClass("selected"),this.selected_parents_contains("h1").length&&e._box.find(".wym_tools_header").addClass("selected"),this.selected_parents_contains("blockquote").length&&e._box.find(".wym_tools_blockquote").addClass("selected"),jQuery.each(["b","i","a","li","ul"],function(){e.selected_contains(this).length&&("b"===this?e._box.find(".wym_tools_strong").addClass("partially_selected"):"i"===this?e._box.find(".wym_tools_emphasis").addClass("partially_selected"):"a"===this?e._box.find(".wym_tools_link, .wym_tools_unlink").addClass("partially_selected"):"li"===this||"ul"===this?e._box.find(".wym_tools_unordered_list").addClass("partially_selected"):"h1"===this?e._box.find(".wym_tools_header").addClass("partially_selected"):"blockquote"===this&&e._box.find(".wym_tools_blockquote").addClass("partially_selected"))})},WYMeditor.editor.prototype.initSkin=function(){jQuery(this._box).addClass("wym_skin_"+this._options.skin),void 0!==WYMeditor.SKINS[this._options.skin]?"function"==typeof WYMeditor.SKINS[this._options.skin].init&&WYMeditor.SKINS[this._options.skin].init(this):WYMeditor.console.warn("Chosen skin _"+this.options.skin+"_ not found.")}},"01q7":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("MA+5"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS-assets__list",function(e){var t=new window.AssetsListController(e.data("assets"),e.data("assets_list_options"));e.on("assets_list:item_added",function(e,n){t.add_item(n)}),e.define_renderer(function(t){e.html(t.map(function(t,n){var r=t.get();r.item_index=n;var o=(0,a.default)(e.data("assets_list_options").item_template,r,["assets/_fields_template"]),s=(0,i.default)(o);return s.on("click",".js-asset-destroy",function(e){e.preventDefault(),t.set("_destroy",!0)}),s}))}),t.attach(e)})},"0GqO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectFlagging=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("xQXO"),l=n("Gks7"),d=n("3zBZ"),c=n("7e+d"),u=n("Z5jf"),f=n("wJt9"),h=n("b04z"),p=n("ci1u");t.ProjectFlagging=function(e){var t=e.state,n=e.dispatch,i=e.DropdownComponent,a=window.current_user?{onClick:function(){return n((0,s.initFlaggingAction)((0,l.currentProjectSlug)()))}}:{href:"/login?then="+(0,l.currentProjectEncodedPath)()};switch(t.container.flaggingStatus){case d.USER_HAS_FLAGGED_PROJECT:return o.default.createElement("p",null,o.default.createElement(u.BoundTranslate,{i18nKey:"project_page.flagging.Already_flagged",ourRulesLink:o.default.createElement("a",{target:"blank",href:"/rules"},(0,u.boundT)("project_page.flagging.Our_rules")),communityGuidelinesLink:c.communityGuidelinesLink}));case d.USER_HAS_NOT_FLAGGED_PROJECT:return o.default.createElement(f.FlaggingWorkflow,{state:t,dispatch:n,DropdownComponent:i});case d.FLAGGING_UNKNOWN:return o.default.createElement(h.Button,r({color:"white"},a),o.default.createElement(u.BoundTranslate,{i18nKey:"project_page.flagging.Report_project"}));case d.FETCHING_FLAGGING:return o.default.createElement("div",null,o.default.createElement(p.Icon,{size:"large",name:"icon--circle-loader"}));case d.FLAGGING_FETCH_FAILED:return o.default.createElement("div",{className:"red"},(0,u.boundT)("project_page.flagging.Fetch_flagging_failed_message"));default:return o.default.createElement("div",null,(0,u.boundT)("project_page.flagging.Unknown_error"))}}},"0JET":function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");!function(e){e.fn.preload_background_image=function(){return this.each(function(){var t=function(e){var t=e.css("backgroundImage");try{return/[("]([^()"]+)[")]/.exec(t)[1]}catch(e){return!1}}(e(this));t&&((new Image).src=t)})}}(i)},"0SSf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_pledged_at=(0,r.format)("ll",1e3*e.pledged_at),e.formatted_survey_answered_at=(0,r.format)("ll",1e3*e.survey_answered_at),e.formatted_amount=i.default.money(e.amount,{precision:2,currency:a.default.get("currency")}),e.is_registered||(e.name=s.default.t("backer_report.row.Guest",{backer_uid:e.backer_uid})),e.isCreator=a.default.get("creator.id")===o.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var i=l(n("L3hI")),r=n("kVy0"),a=l(n("c5nH")),o=l(n("eF8u")),s=l(n("wmCY"));function l(e){return e&&e.__esModule?e:{default:e}}},"0qc1":function(e,t,n){var i,r,a,o,l,d;n("l/Rs"),n("l/Rs");"undefined"==typeof jwplayer&&(jwplayer=function(){if(jwplayer.api)return jwplayer.api.selectPlayer.apply(this,arguments)},jwplayer.version="6.12.4956",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(){var e={},t=Array.prototype,n=Object.prototype,i=t.slice,r=t.concat,a=n.toString,o=n.hasOwnProperty,s=t.map,l=t.forEach,d=t.filter,c=t.every,u=t.some,f=t.indexOf,h=(n=Array.isArray,Object.keys),p=function(e){return e instanceof p?e:this instanceof p?void 0:new p(e)},m=p.each=p.forEach=function(t,n,i){if(null==t)return t;if(l&&t.forEach===l)t.forEach(n,i);else if(t.length===+t.length){for(var r=0,a=t.length;r<a;r++)if(n.call(i,t[r],r,t)===e)return}else{var o=p.keys(t);for(r=0,a=o.length;r<a;r++)if(n.call(i,t[o[r]],o[r],t)===e)return}return t};p.map=p.collect=function(e,t,n){var i=[];return null==e?i:s&&e.map===s?e.map(t,n):(m(e,function(e,r,a){i.push(t.call(n,e,r,a))}),i)},p.find=p.detect=function(e,t,n){var i;return g(e,function(e,r,a){if(t.call(n,e,r,a))return i=e,!0}),i},p.filter=p.select=function(e,t,n){var i=[];return null==e?i:d&&e.filter===d?e.filter(t,n):(m(e,function(e,r,a){t.call(n,e,r,a)&&i.push(e)}),i)},p.every=p.all=function(t,n,i){n||(n=p.identity);var r=!0;return null==t?r:c&&t.every===c?t.every(n,i):(m(t,function(t,a,o){if(!(r=r&&n.call(i,t,a,o)))return e}),!!r)};var g=p.some=p.any=function(t,n,i){n||(n=p.identity);var r=!1;return null==t?r:u&&t.some===u?t.some(n,i):(m(t,function(t,a,o){if(r||(r=n.call(i,t,a,o)))return e}),!!r)};p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.after=function(e,t){return function(){if(1>--e)return t.apply(this,arguments)}},p.sortedIndex=function(e,t,n,i){t=(n=null==n?p.identity:p.isFunction(n)?n:p.property(n)).call(i,t);for(var r=0,a=e.length;r<a;){var o=r+a>>>1;n.call(i,e[o])<t?r=o+1:a=o}return r},p.find=p.detect=function(e,t,n){var i;return g(e,function(e,r,a){if(t.call(n,e,r,a))return i=e,!0}),i},g=p.some=p.any=function(t,n,i){n||(n=p.identity);var r=!1;return null==t?r:u&&t.some===u?t.some(n,i):(m(t,function(t,a,o){if(r||(r=n.call(i,t,a,o)))return e}),!!r)},p.contains=p.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=p.values(e)),0<=p.indexOf(e,t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.difference=function(e){var n=r.apply(t,i.call(arguments,1));return p.filter(e,function(e){return!p.contains(n,e)})},p.without=function(e){return p.difference(e,i.call(arguments,1))},p.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return e[i=p.sortedIndex(e,t)]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(f&&e.indexOf===f)return e.indexOf(t,n);for(;i<r;i++)if(e[i]===t)return i;return-1},p.partial=function(e){var t=i.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,a=i.length;r<a;r++)i[r]===p&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},p.memoize=function(e,t){var n={};return t||(t=p.identity),function(){var i=t.apply(this,arguments);return p.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},p.delay=function(e,t){var n=i.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(i.call(arguments,1)))},p.keys=function(e){if(!p.isObject(e))return[];if(h)return h(e);var t,n=[];for(t in e)p.has(e,t)&&n.push(t);return n},p.pick=function(e){var n={},a=r.apply(t,i.call(arguments,1));return m(a,function(t){t in e&&(n[t]=e[t])}),n},p.isArray=n||function(e){return"[object Array]"==a.call(e)},p.isObject=function(e){return e===Object(e)},m("Arguments Function String Number Date RegExp".split(" "),function(e){p["is"+e]=function(t){return a.call(t)=="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return!(!e||!p.has(e,"callee"))}),"function"!=typeof/./&&(p.isFunction=function(e){return"function"==typeof e}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!=+e},p.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==a.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return o.call(e,t)},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},p.result=function(e,t){if(null!=e){var n=e[t];return p.isFunction(n)?n.call(e):n}},this._=p}.call(jwplayer),function(e){function t(e){return function(){return o(e)}}function n(e,t,n,r,a){return function(){var o,s;if(a)n(e);else{try{if((o=e.responseXML)&&(s=o.firstChild,o.lastChild&&"parsererror"===o.lastChild.nodeName))return void(r&&r("Invalid XML",t,e))}catch(e){}if(o&&s)return n(e);(o=i.parseXML(e.responseText))&&o.firstChild?(e=i.extend({},e,{responseXML:o}),n(e)):r&&r(e.responseText?"Invalid XML":t,t,e)}}}var i=e.utils={},r=e._;i.exists=function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},i.styleDimension=function(e){return e+(0<e.toString().indexOf("%")?"":"px")},i.getAbsolutePath=function(e,t){if(i.exists(t)||(t=document.location.href),i.exists(e)){var n;if(i.exists(e)){n=e.indexOf("://");var r=e.indexOf("?");n=0<n&&(0>r||r>n)}else n=void 0;if(n)return e;n=t.substring(0,t.indexOf("://")+3);var a;r=t.substring(n.length,t.indexOf("/",n.length+1));0===e.indexOf("/")?a=e.split("/"):a=(a=(a=t.split("?")[0]).substring(n.length+r.length+1,a.lastIndexOf("/"))).split("/").concat(e.split("/"));for(var o=[],s=0;s<a.length;s++)a[s]&&i.exists(a[s])&&"."!==a[s]&&(".."===a[s]?o.pop():o.push(a[s]));return n+r+"/"+o.join("/")}},i.extend=function(){var e=Array.prototype.slice.call(arguments,0);if(1<e.length){for(var t=e[0],n=function(e,n){void 0!==n&&null!==n&&(t[e]=n)},r=1;r<e.length;r++)i.foreach(e[r],n);return t}return null};var a=window.console=window.console||{log:function(){}};i.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof a.log?a.log(e):a.log.apply(a,e)};var o=r.memoize(function(e){return null!==navigator.userAgent.toLowerCase().match(e)});i.isFF=t(/firefox/i),i.isChrome=t(/chrome/i),i.isIPod=t(/iP(hone|od)/i),i.isIPad=t(/iPad/i),i.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),i.isIETrident=function(e){return e?(e=parseFloat(e).toFixed(1),o(RegExp("trident/.+rv:\\s*"+e,"i"))):o(/trident/i)},i.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),o(RegExp("msie\\s*"+e,"i"))):o(/msie/i)},i.isIE=function(e){return e?11<=(e=parseFloat(e).toFixed(1))?i.isIETrident(e):i.isMSIE(e):i.isMSIE()||i.isIETrident()},i.isSafari=function(){return o(/safari/i)&&!o(/chrome/i)&&!o(/chromium/i)&&!o(/android/i)},i.isIOS=function(e){return o(e?RegExp("iP(hone|ad|od).+\\sOS\\s"+e,"i"):/iP(hone|ad|od)/i)},i.isAndroidNative=function(e){return i.isAndroid(e,!0)},i.isAndroid=function(e,t){return!(t&&o(/chrome\/[123456789]/i)&&!o(/chrome\/18/))&&(e?(i.isInt(e)&&!/\./.test(e)&&(e+="."),o(RegExp("Android\\s*"+e,"i"))):o(/Android/i))},i.isMobile=function(){return i.isIOS()||i.isAndroid()},i.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},i.saveCookie=function(e,t){document.cookie="jwplayer."+e+"="+t+"; path=/"},i.getCookies=function(){for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var i=t[n].split("=");0===i[0].indexOf("jwplayer.")&&(e[i[0].substring(9,i[0].length)]=i[1])}return e},i.isInt=function(e){return 0==parseFloat(e)%1},i.typeOf=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&r.isArray(e)?"array":t},i.translateEventResponse=function(t,n){var r=i.extend({},n);if(t!==e.events.JWPLAYER_FULLSCREEN||r.fullscreen)if("object"==typeof r.data){var a=r.data;delete r.data,r=i.extend(r,a)}else"object"==typeof r.metadata&&i.deepReplaceKeyName(r.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);else r.fullscreen="true"===r.message,delete r.message;return i.foreach(["position","duration","offset"],function(e,t){r[t]&&(r[t]=Math.round(1e3*r[t])/1e3)}),r},i.flashVersion=function(){if(i.isAndroid())return 0;var e,t=navigator.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(e){}if(void 0!==window.ActiveXObject)try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(e){}return 0},i.getScriptPath=function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src;if(i&&0<=i.indexOf(e))return i.substr(0,i.indexOf(e))}return""},i.deepReplaceKeyName=function(t,n,r){switch(e.utils.typeOf(t)){case"array":for(var a=0;a<t.length;a++)t[a]=e.utils.deepReplaceKeyName(t[a],n,r);break;case"object":i.foreach(t,function(i,a){var o;if(n instanceof Array&&r instanceof Array){if(n.length!==r.length)return;o=n}else o=[n];for(var s=i,l=0;l<o.length;l++)s=s.replace(RegExp(n[l],"g"),r[l]);t[s]=e.utils.deepReplaceKeyName(a,n,r),i!==s&&delete t[i]})}return t};var s=i.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};i.getPluginPathType=function(e){if("string"==typeof e){var t=(e=e.split("?")[0]).indexOf("://");if(0<t)return s.ABSOLUTE;var n=e.indexOf("/");return e=i.extension(e),!(0>t&&0>n)||e&&isNaN(e)?s.RELATIVE:s.CDN}},i.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},i.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},i.isYouTube=function(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},i.youTubeID=function(e){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e).slice(1).join("").replace("?","")}catch(e){return""}},i.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"===t},i.foreach=function(e,t){var n;for(n in e)"function"===i.typeOf(e.hasOwnProperty)?e.hasOwnProperty(n)&&t(n,e[n]):t(n,e[n])},i.isHTTPS=function(){return 0===window.location.href.indexOf("https")},i.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{i.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(e){}return t},i.versionCheck=function(t){t=("0"+t).split(/\W/);var n=e.version.split(/\W/),i=parseFloat(t[0]),r=parseFloat(n[0]);return!(i>r||i===r&&parseFloat("0"+t[1])>parseFloat(n[1]))},i.ajax=function(e,t,r,a){var o,s=!1;if(0<e.indexOf("#")&&(e=e.replace(/#.*$/,"")),e&&0<=e.indexOf("://")&&e.split("/")[2]!==window.location.href.split("/")[2]&&i.exists(window.XDomainRequest))(o=new window.XDomainRequest).onload=n(o,e,t,r,a),o.ontimeout=o.onprogress=function(){},o.timeout=5e3;else{if(!i.exists(window.XMLHttpRequest))return r&&r("",e,o),o;var l=o=new window.XMLHttpRequest,d=e;o.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 200:n(l,d,t,r,a)();break;case 404:r("File not found",d,l)}}}o.overrideMimeType&&o.overrideMimeType("text/xml");var c=e,u=o;o.onerror=function(){r("Error loading file",c,u)};try{o.open("GET",e,!0)}catch(e){s=!0}return setTimeout(function(){if(s)r&&r(e,e,o);else try{o.send()}catch(t){r&&r(e,e,o)}},0),o},i.parseXML=function(e){var t;try{if(window.DOMParser){if((t=(new window.DOMParser).parseFromString(e,"text/xml")).childNodes&&t.childNodes.length&&"parsererror"===t.childNodes[0].firstChild.nodeName)return}else(t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)}catch(e){return}return t},i.between=function(e,t,n){return Math.max(Math.min(e,n),t)},i.seconds=function(e){if(r.isNumber(e))return e;var t=(e=e.replace(",",".")).split(":"),n=0;return"s"===e.slice(-1)?n=parseFloat(e):"m"===e.slice(-1)?n=60*parseFloat(e):"h"===e.slice(-1)?n=3600*parseFloat(e):1<t.length?(n=parseFloat(t[t.length-1]),n+=60*parseFloat(t[t.length-2]),3===t.length&&(n+=3600*parseFloat(t[t.length-3]))):n=parseFloat(e),n},i.serialize=function(e){return null===e?null:"true"===e.toString().toLowerCase()||"false"!==e.toString().toLowerCase()&&(isNaN(Number(e))||5<e.length||0===e.length?e:Number(e))},i.addClass=function(e,t){var n=r.isString(e.className)?e.className.split(" "):[],a=r.isArray(t)?t:t.split(" ");r.each(a,function(e){r.contains(n,e)||n.push(e)}),e.className=i.trim(n.join(" "))},i.removeClass=function(e,t){var n=r.isString(e.className)?e.className.split(" "):[],a=r.isArray(t)?t:t.split(" ");e.className=i.trim(r.difference(n,a).join(" "))},i.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},i.indexOf=r.indexOf,i.noop=function(){},i.canCast=function(){var t=e.cast;return!(!t||!r.isFunction(t.available)||!t.available())}}(jwplayer),function(e){function t(e){var t=document.createElement("style");return e&&t.appendChild(document.createTextNode(e)),t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),t}function n(e,t,n){return o.exists(t)?(n=n?" !important":"","string"==typeof t&&isNaN(t)?/png|gif|jpe?g/i.test(t)&&0>t.indexOf("url")?"url("+t+")":t+n:0===t||"z-index"===e||"opacity"===e?""+t+n:/color/i.test(e)?"#"+o.pad(t.toString(16).replace(/^0x/i,""),6)+n:Math.ceil(t)+"px"+n):""}function i(e,t){for(var n=0;n<e.length;n++){var i,r,a=e[n];if(void 0!==a&&null!==a)for(i in t){r=(r=i).split("-");for(var o=1;o<r.length;o++)r[o]=r[o].charAt(0).toUpperCase()+r[o].slice(1);r=r.join(""),a.style[r]!==t[i]&&(a.style[r]=t[i])}}}function r(e){var t,n,i,r=s[e].sheet;if(r){t=r.cssRules,n=c[e];var a=l[i=e];for(var o in i+=" { ",a)i+=o+": "+a[o]+"; ";if(i+="}",void 0!==n&&n<t.length&&t[n].selectorText===e){if(i===t[n].cssText)return;r.deleteRule(n)}else n=t.length,c[e]=n;try{r.insertRule(i,n)}catch(e){}}}var a,o=e.utils,s={},l={},d=null,c={};o.cssKeyframes=function(e,n){(i=s.keyframes)||(i=t(),s.keyframes=i);var i=i.sheet,r="@keyframes "+e+" { "+n+" }";try{i.insertRule(r,i.cssRules.length)}catch(e){}r=r.replace(/(keyframes|transform)/g,"-webkit-$1");try{i.insertRule(r,i.cssRules.length)}catch(e){}};var u=o.css=function(e,i,o){l[e]||(l[e]={});var c=l[e];o=o||!1;var u,f,h=!1;for(u in i)""!==(f=n(u,i[u],o))?f!==c[u]&&(c[u]=f,h=!0):void 0!==c[u]&&(delete c[u],h=!0);h&&(s[e]||(i=a&&a.sheet&&a.sheet.cssRules&&a.sheet.cssRules.length||0,(!a||5e4<i)&&(a=t()),s[e]=a),null!==d?d.styleSheets[e]=l[e]:r(e))};u.style=function(t,r,a){if(void 0!==t&&null!==t){void 0===t.length&&(t=[t]);var o,s={};for(o in r)s[o]=n(o,r[o]);if(null===d||a)i(t,s);else{for(var l in r=(r=t.__cssRules)||{},s)r[l]=s[l];t.__cssRules=r,0>e._.indexOf(d.elements,t)&&d.elements.push(t)}}},u.block=function(e){null===d&&(d={id:e,styleSheets:{},elements:[]})},u.unblock=function(e){if(d&&(!e||d.id===e)){for(var t in d.styleSheets)r(t);for(e=0;e<d.elements.length;e++)i(t=d.elements[e],t.__cssRules);d=null}},o.clearCss=function(e){for(var t in l)0<=t.indexOf(e)&&delete l[t];for(var n in s)0<=n.indexOf(e)&&r(n)},o.transform=function(e,t){var n={};t=t||"",n.transform=t,n["-webkit-transform"]=t,n["-ms-transform"]=t,n["-moz-transform"]=t,n["-o-transform"]=t,"string"==typeof e?u(e,n):u.style(e,n)},o.dragStyle=function(e,t){u(e,{"-webkit-user-select":t,"-moz-user-select":t,"-ms-user-select":t,"-webkit-user-drag":t,"user-select":t,"user-drag":t})},o.transitionStyle=function(e,t){navigator.userAgent.match(/5\.\d(\.\d)? safari/i)||u(e,{"-webkit-transition":t,"-moz-transition":t,"-o-transition":t,transition:t})},o.rotate=function(e,t){o.transform(e,"rotate("+t+"deg)")},o.rgbHex=function(e){return 3===(e=String(e).replace("#","")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e.substr(-6)},o.hexToRgba=function(e,t){var n="rgb",i=[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)];return void 0!==t&&100!==t&&(n+="a",i.push(t/100)),n+"("+i.join(",")+")"}}(jwplayer),i=jwplayer.utils,r=jwplayer._,a=i.foreach,l={mp4:(o={mp4:"video/mp4",ogg:"video/ogg",oga:"audio/ogg",vorbis:"audio/ogg",webm:"video/webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"}).mp4,f4v:o.mp4,m4v:o.mp4,mov:o.mp4,m4a:o.aac,f4a:o.aac,aac:o.aac,mp3:o.mp3,ogv:o.ogg,ogg:o.ogg,oga:o.vorbis,vorbis:o.vorbis,webm:o.webm,m3u8:o.hls,m3u:o.hls,hls:o.hls},d=i.extensionmap={},a(l,function(e,t){d[e]={html5:t}}),a({flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},function(e,t){d[e]||(d[e]={}),d[e].flash=t}),d.types=o,d.mimeType=function(e){var t;return r.find(o,function(n,i){if(n===e)return t=i,!0}),t},d.extType=function(e){return d.mimeType(l[e])},function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};e.scriptloader=function(n){function i(e){s=t.ERROR,o.sendEvent(a.ERROR,e)}function r(e){s=t.COMPLETE,o.sendEvent(a.COMPLETE,e)}var a=jwplayer.events,o=e.extend(this,new a.eventdispatcher),s=t.NEW;this.load=function(){if(s===t.NEW){var o=e.scriptloader.loaders[n];if(o&&2>(s=o.getStatus()))return o.addEventListener(a.ERROR,i),void o.addEventListener(a.COMPLETE,r);var l=document.getElementsByTagName("head")[0]||document.documentElement,d=document.createElement("script"),c=!1;d.onload=d.onreadystatechange=function(e){c||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c=!0,r(e),d.onload=d.onreadystatechange=null,l&&d.parentNode&&l.removeChild(d))},d.onerror=i,d.src=n,l.insertBefore(d,l.firstChild),s=t.LOADING,e.scriptloader.loaders[n]=this}},this.getStatus=function(){return s}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},e.pad=function(e,t,n){for(n||(n="0");e.length<t;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()===t.toLowerCase())return e.attributes[n].value.toString();return""},e.extension=function(e){return e&&"rtmp"!==e.substr(0,4)?(t=-1<e.indexOf("(format=m3u8-")&&"m3u8")?t:-1<(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0]).lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0:"";var t},e.stringToColor=function(e){return 3===(e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){var t="touchmove",n="touchstart";e.touch=function(i){function r(e){e.type===n?(l=!0,c=o(f.DRAG_START,e)):e.type===t?l&&(u||(a(f.DRAG_START,e,c),u=!0),a(f.DRAG,e)):(l&&(u?a(f.DRAG_END,e):(e.cancelBubble=!0,a(f.TAP,e))),l=u=!1,c=null)}function a(e,t,n){d[e]&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),t=n||o(e,t))&&d[e](t)}function o(e,t){var n=null;if(t.touches&&t.touches.length?n=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(n=t.changedTouches[0]),!n)return null;var i=s.getBoundingClientRect();n={type:e,target:s,x:n.pageX-window.pageXOffset-i.left,y:n.pageY,deltaX:0,deltaY:0};return e!==f.TAP&&c&&(n.deltaX=n.x-c.x,n.deltaY=n.y-c.y),n}var s=i,l=!1,d={},c=null,u=!1,f=e.touchEvents;return document.addEventListener(t,r),document.addEventListener("touchend",function(e){l&&u&&a(f.DRAG_END,e),l=u=!1,c=null}),document.addEventListener("touchcancel",r),i.addEventListener(n,r),i.addEventListener("touchend",r),this.addEventListener=function(e,t){d[e]=t},this.removeEventListener=function(e){delete d[e]},this}}(jwplayer.utils),jwplayer.utils.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"},function(e){e.key=function(t){var n,i,r;this.edition=function(){return r&&r.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return i},e.exists(t)||(t="");try{var a=(t=e.tea.decrypt(t,"36QXq4W@GSBV^teR")).split("/");(n=a[0])?/^(free|pro|premium|enterprise|ads)$/i.test(n)?(i=a[1],a[2]&&0<parseInt(a[2])&&(r=new Date).setTime(String(a[2]))):n="invalid":n="free"}catch(e){n="invalid"}}}(jwplayer.utils),function(e){var t=jwplayer.utils.tea={};t.encrypt=function(e,r){if(0==e.length)return"";var a=t.strToLongs(i.encode(e));1>=a.length&&(a[1]=0);for(var o,s=t.strToLongs(i.encode(r).slice(0,16)),l=a.length,d=a[l-1],c=a[0],u=Math.floor(6+52/l),f=0;0<u--;){o=(f+=2654435769)>>>2&3;for(var h=0;h<l;h++)d=(d>>>5^(c=a[(h+1)%l])<<2)+(c>>>3^d<<4)^(f^c)+(s[3&h^o]^d),d=a[h]+=d}return a=t.longsToStr(a),n.encode(a)},t.decrypt=function(e,r){if(0==e.length)return"";for(var a,o=t.strToLongs(n.decode(e)),s=t.strToLongs(i.encode(r).slice(0,16)),l=o.length,d=o[l-1],c=o[0],u=2654435769*Math.floor(6+52/l);0!=u;){a=u>>>2&3;for(var f=l-1;0<=f;f--)d=((d=o[0<f?f-1:l-1])>>>5^c<<2)+(c>>>3^d<<4)^(u^c)+(s[3&f^a]^d),c=o[f]-=d;u-=2654435769}return o=(o=t.longsToStr(o)).replace(/\0+$/,""),i.decode(o)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(255&e[n],e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")};var n={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var r,a,o,s,l,d,c=[],u="",f=n.code;if(0<(l=(d=void 0!==t&&t?i.encode(e):e).length%3))for(;3>l++;)u+="=",d+="\0";for(l=0;l<d.length;l+=3)r=(s=(r=d.charCodeAt(l))<<16|(a=d.charCodeAt(l+1))<<8|(o=d.charCodeAt(l+2)))>>18&63,a=s>>12&63,o=s>>6&63,s&=63,c[l/3]=f.charAt(r)+f.charAt(a)+f.charAt(o)+f.charAt(s);return(c=c.join("")).slice(0,c.length-u.length)+u},decode:function(e,t){t=void 0!==t&&t;var r,a,o,s,l,d,c=[],u=n.code;d=t?i.decode(e):e;for(var f=0;f<d.length;f+=4)r=(o=(r=u.indexOf(d.charAt(f)))<<18|(a=u.indexOf(d.charAt(f+1)))<<12|(s=u.indexOf(d.charAt(f+2)))<<6|(l=u.indexOf(d.charAt(f+3))))>>>16&255,a=o>>>8&255,o&=255,c[f/4]=String.fromCharCode(r,a,o),64==l&&(c[f/4]=String.fromCharCode(r,a)),64==s&&(c[f/4]=String.fromCharCode(r));return s=c.join(""),t?i.decode(s):s}},i={encode:function(e){return(e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)})).replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},decode:function(e){return(e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)})).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)})}}}(),jwplayer.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_AUDIO_TRACKS:"jwplayerAudioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"jwplayerAudioTrackChanged",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_PROVIDER_CLICK:"jwplayerProviderClick",JWPLAYER_VIEW_TAB_FOCUS:"jwplayerViewTabFocus",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped",JWPLAYER_AD_PLAY:"jwplayerAdPlay",JWPLAYER_AD_PAUSE:"jwplayerAdPause",JWPLAYER_AD_META:"jwplayerAdMeta",JWPLAYER_CAST_AVAILABLE:"jwplayerCastAvailable",JWPLAYER_CAST_SESSION:"jwplayerCastSession",JWPLAYER_CAST_AD_CHANGED:"jwplayerCastAdChanged"},function(e){var t=e.utils;e.events.eventdispatcher=function(n,i){function r(e,n,i){if(e)for(var r=0;r<e.length;r++){var a=e[r];if(a){null!==a.count&&0==--a.count&&delete e[r];try{a.listener(n)}catch(e){t.log('Error handling "'+i+'" event listener ['+r+"]: "+e.toString(),a.listener,n)}}}}var a,o;this.resetEventListeners=function(){a={},o=[]},this.resetEventListeners(),this.addEventListener=function(e,n,i){try{t.exists(a[e])||(a[e]=[]),"string"===t.typeOf(n)&&(n=new Function("return "+n)()),a[e].push({listener:n,count:i||null})}catch(e){t.log("error",e)}return!1},this.removeEventListener=function(e,n){var i;if(a[e]){try{if(void 0===n)return void(a[e]=[]);for(i=0;i<a[e].length;i++)if(a[e][i].listener.toString()===n.toString()){a[e].splice(i,1);break}}catch(e){t.log("error",e)}return!1}},this.addGlobalListener=function(e,n){try{"string"===t.typeOf(e)&&(e=new Function("return "+e)()),o.push({listener:e,count:n||null})}catch(e){t.log("error",e)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=o.length;n--;)o[n].listener.toString()===e.toString()&&o.splice(n,1)}catch(e){t.log("error",e)}return!1}},this.sendEvent=function(s,l){t.exists(l)||(l={}),t.extend(l,{id:n,version:e.version,type:s}),i&&t.log(s,l),r(a[s],l,s),r(o,l,s)}}}(window.jwplayer),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(i,r){return n[i]=new e.plugins.pluginloader(new e.plugins.model(t),r),n[i]},e.plugins.registerPlugin=function(n,i,r,a){var o=e.utils.getPluginName(n);t[o]||(t[o]=new e.plugins.plugin(n)),t[o].registerPlugin(n,i,r,a)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var i=e.utils.getPluginName(n);return t[i]||(t[i]=new e.plugins.plugin(n)),t[i]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(i){function r(){switch(t.getPluginPathType(i)){case t.pluginPathType.ABSOLUTE:return i;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(i,window.location.href)}}function a(){c=setTimeout(function(){u=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE)},1e3)}function o(){u=t.loaderstatus.ERROR,f.sendEvent(n.ERROR,{url:i})}var s,l,d,c,u=t.loaderstatus.NEW,f=new n.eventdispatcher;t.extend(this,f),this.load=function(){if(u===t.loaderstatus.NEW)if(0<i.lastIndexOf(".swf"))s=i,u=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE);else if(t.getPluginPathType(i)===t.pluginPathType.CDN)u=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE);else{u=t.loaderstatus.LOADING;var e=new t.scriptloader(r());e.addEventListener(n.COMPLETE,a),e.addEventListener(n.ERROR,o),e.load()}},this.registerPlugin=function(e,i,r,a){c&&(clearTimeout(c),c=void 0),d=i,r&&a?(s=a,l=r):"string"==typeof r?s=r:"function"==typeof r?l=r:!r&&!a&&(s=e),u=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE)},this.getStatus=function(){return u},this.getPluginName=function(){return t.getPluginName(i)},this.getFlashPath=function(){if(s)switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return 0<i.lastIndexOf(".swf")?t.getAbsolutePath(s,window.location.href):t.getAbsolutePath(s,r())}return null},this.getJS=function(){return l},this.getTarget=function(){return d},this.getPluginmode=function(){return void 0!==s&&void 0!==l?e.pluginmodes.HYBRID:void 0!==s?e.pluginmodes.FLASH:void 0!==l?e.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,n){return new l(e,t,n)},this.getURL=function(){return i}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events,i=e._,r=t.foreach;e.plugins.pluginloader=function(e,a){function o(){u||(u=!0,c=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE))}function s(){if(!p&&((!f||0===i.keys(f).length)&&o(),!u)){var r=e.getPlugins();d=i.after(h,o),t.foreach(f,function(e){e=t.getPluginName(e),e=(i=r[e]).getJS();var i,a=i.getTarget();(i=i.getStatus())===t.loaderstatus.LOADING||i===t.loaderstatus.NEW||(e&&!t.versionCheck(a)&&m.sendEvent(n.ERROR,{message:"Incompatible player version"}),d())})}}function l(e){p||(m.sendEvent(n.ERROR,{message:"File not found"}),e.url&&t.log("File not found",e.url),s())}var d,c=t.loaderstatus.NEW,u=!1,f=a,h=i.size(f),p=!1,m=new n.eventdispatcher;t.extend(this,m),this.setupPlugins=function(n,i,a){var o={length:0,plugins:{}},s=0,l={},d=e.getPlugins();return r(i.plugins,function(e,r){var c=t.getPluginName(e),u=d[c],f=u.getFlashPath(),h=u.getJS(),p=u.getURL();f&&(o.plugins[f]=t.extend({},r),o.plugins[f].pluginmode=u.getPluginmode(),o.length++);try{if(h&&i.plugins&&i.plugins[p]){var m=document.createElement("div");m.id=n.id+"_"+c,m.style.position="absolute",m.style.top=0,m.style.zIndex=s+10,l[c]=u.getNewInstance(n,t.extend({},i.plugins[p]),m),s++,n.onReady(a(l[c],m,!0)),n.onResize(a(l[c],m))}}catch(e){t.log("ERROR: Failed to load "+c+".")}}),n.plugins=l,o},this.load=function(){if(!t.exists(a)||"object"===t.typeOf(a)){c=t.loaderstatus.LOADING,r(a,function(i){t.exists(i)&&((i=e.addPlugin(i)).addEventListener(n.COMPLETE,s),i.addEventListener(n.ERROR,l))});var i=e.getPlugins();r(i,function(e,t){t.load()})}s()},this.destroy=function(){p=!0,m&&(m.resetEventListeners(),m=null)},this.pluginFailed=l,this.getStatus=function(){return c}}}(jwplayer),function(e){e.parsers={localName:function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},textContent:function(t){return t?t.textContent?e.utils.trim(t.textContent):t.text?e.utils.trim(t.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}(jwplayer),function(e){var t=e.parsers;(t.jwparser=function(){}).parseEntry=function(n,i){for(var r=[],a=[],o=e.utils.xmlAttribute,s=0;s<n.childNodes.length;s++){var l=n.childNodes[s];if("jwplayer"===l.prefix){var d=t.localName(l);"source"===d?(delete i.sources,r.push({file:o(l,"file"),default:o(l,"default"),label:o(l,"label"),type:o(l,"type")})):"track"===d?(delete i.tracks,a.push({file:o(l,"file"),default:o(l,"default"),kind:o(l,"kind"),label:o(l,"label")})):(i[d]=e.utils.serialize(t.textContent(l)),"file"===d&&i.sources&&delete i.sources)}i.file||(i.file=i.link)}if(r.length)for(i.sources=[],s=0;s<r.length;s++)0<r[s].file.length&&(r[s].default="true"===r[s].default,r[s].label.length||delete r[s].label,i.sources.push(r[s]));if(a.length)for(i.tracks=[],s=0;s<a.length;s++)0<a[s].file.length&&(a[s].default="true"===a[s].default,a[s].kind=a[s].kind.length?a[s].kind:"captions",a[s].label.length||delete a[s].label,i.tracks.push(a[s]));return i}}(jwplayer),function(e){var t=jwplayer.utils,n=t.xmlAttribute,i=e.localName,r=e.textContent,a=e.numChildren,o=e.mediaparser=function(){};o.parseGroup=function(e,s){var l,d,c=[];for(d=0;d<a(e);d++)if("media"===(l=e.childNodes[d]).prefix&&i(l))switch(i(l).toLowerCase()){case"content":n(l,"duration")&&(s.duration=t.seconds(n(l,"duration"))),0<a(l)&&(s=o.parseGroup(l,s)),n(l,"url")&&(s.sources||(s.sources=[]),s.sources.push({file:n(l,"url"),type:n(l,"type"),width:n(l,"width"),label:n(l,"label")}));break;case"title":s.title=r(l);break;case"description":s.description=r(l);break;case"guid":s.mediaid=r(l);break;case"thumbnail":s.image||(s.image=n(l,"url"));break;case"group":o.parseGroup(l,s);break;case"subtitle":var u={};if(u.file=n(l,"url"),u.kind="captions",0<n(l,"lang").length){var f=u,h={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};l=h[l=n(l,"lang")]?h[l]:l,f.label=l}c.push(u)}for(s.hasOwnProperty("tracks")||(s.tracks=[]),d=0;d<c.length;d++)s.tracks.push(c[d]);return s}}(jwplayer.parsers),function(e){function t(t){for(var r={},a=0;a<t.childNodes.length;a++){var s=t.childNodes[a],l=o(s);if(l)switch(l.toLowerCase()){case"enclosure":r.file=n.xmlAttribute(s,"url");break;case"title":r.title=i(s);break;case"guid":r.mediaid=i(s);break;case"pubdate":r.date=i(s);break;case"description":r.description=i(s);break;case"link":r.link=i(s);break;case"category":r.tags=r.tags?r.tags+i(s):i(s)}}return r=e.mediaparser.parseGroup(t,r),r=e.jwparser.parseEntry(t,r),new jwplayer.playlist.item(r)}var n=jwplayer.utils,i=e.textContent,r=e.getChildNode,a=e.numChildren,o=e.localName;e.rssparser={},e.rssparser.parse=function(e){for(var n=[],i=0;i<a(e);i++){var s=r(e,i);if("channel"===o(s).toLowerCase())for(var l=0;l<a(s);l++){var d=r(s,l);"item"===o(d).toLowerCase()&&n.push(t(d))}}return n}}(jwplayer.parsers),function(e){var t=e.utils,n=e._;e.playlist=function(t){var i=[];return t=n.isArray(t)?t:[t],n.each(t,function(t){i.push(new e.playlist.item(t))}),i},e.playlist.filterPlaylist=function(e,r){var a=[];return n.each(e,function(e){if((e=t.extend({},e)).sources=i(e.sources,!1,r),e.sources.length){for(var n=0;n<e.sources.length;n++)e.sources[n].label=e.sources[n].label||n.toString();a.push(e)}}),a};var i=e.playlist.filterSources=function(i,r,a){var o,s=[],l=r?e.embed.flashCanPlay:e.embed.html5CanPlay;if(i)return n.each(i,function(e){if(e&&e.file){var n=t.trim(""+e.file),i=e.type;i||(i=t.extension(n),i=t.extensionmap.extType(i)),e=t.extend({},e,{file:n,type:i})}else e=void 0;e&&l(e.file,e.type,a)&&(o=o||e.type,e.type===o&&s.push(e))}),s}}(jwplayer),function(e){var t=e.item=function(n){var i,r,a=jwplayer.utils,o=a.extend({},t.defaults,n);for(o.tracks=n&&a.exists(n.tracks)?n.tracks:[],0===o.sources.length&&(o.sources=[new e.source(o)]),i=0;i<o.sources.length;i++)r=o.sources[i].default,o.sources[i].default=!!r&&"true"===r.toString(),o.sources[i]=new e.source(o.sources[i]);if(o.captions&&!a.exists(n.tracks)){for(n=0;n<o.captions.length;n++)o.tracks.push(o.captions[n]);delete o.captions}for(i=0;i<o.tracks.length;i++)o.tracks[i]=new e.track(o.tracks[i]);return o};t.defaults={description:void 0,image:void 0,mediaid:void 0,title:void 0,sources:[],tracks:[]}}(jwplayer.playlist),function(e){var t=e.utils,n=e.events,i=e.parsers;e.playlist.loader=function(){function r(t){try{var r=t.responseXML.childNodes;t="";for(var a=0;a<r.length&&8===(t=r[a]).nodeType;a++);if("xml"===i.localName(t)&&(t=t.nextSibling),"rss"!==i.localName(t))o("Not a valid RSS feed");else{var l=new e.playlist(i.rssparser.parse(t));s.sendEvent(n.JWPLAYER_PLAYLIST_LOADED,{playlist:l})}}catch(e){o()}}function a(e){o(e.match(/invalid/i)?"Not a valid RSS feed":"")}function o(e){s.sendEvent(n.JWPLAYER_ERROR,{message:e||"Error loading file"})}var s=new n.eventdispatcher;t.extend(this,s),this.load=function(e){t.ajax(e,r,a)}}}(jwplayer),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,type:void 0,default:void 0};e.source=function(e){var i=t.extend({},n);return t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i.type&&0<i.type.indexOf("/")&&(i.type=t.extensionmap.mimeType(i.type)),"m3u8"===i.type&&(i.type="hls"),"smil"===i.type&&(i.type="rtmp"),i}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,kind:"captions",default:!1};e.track=function(e){var i=t.extend({},n);return e||(e={}),t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i}}(jwplayer.playlist),function(e){function t(e,t,i){var r=e.style;r.backgroundColor="#000",r.color="#FFF",r.width=n.styleDimension(i.width),r.height=n.styleDimension(i.height),r.display="table",r.opacity=1,(r=(i=document.createElement("p")).style).verticalAlign="middle",r.textAlign="center",r.display="table-cell",r.font="15px/20px Arial, Helvetica, sans-serif",i.innerHTML=t.replace(":",":<br>"),e.innerHTML="",e.appendChild(i)}var n=e.utils,i=e.events,r=e._,a=e.embed=function(o){function s(){if(!w){var t=p.playlist;if(r.isArray(t)){if(0===t.length)return void c();if(!(1!==t.length||t[0].sources&&0!==t[0].sources.length&&t[0].sources[0].file))return void c()}if(!b)if(r.isString(t))(h=new e.playlist.loader).addEventListener(i.JWPLAYER_PLAYLIST_LOADED,function(e){p.playlist=e.playlist,b=!1,s()}),h.addEventListener(i.JWPLAYER_ERROR,function(e){b=!1,c(e)}),b=!0,h.load(p.playlist);else if(y.getStatus()===n.loaderstatus.COMPLETE){for(t=0;t<p.modes.length;t++){var d=p.modes[t],f=d.type;if(f&&a[f]){var m=n.extend({},p);if((E=new a[f](S,d,m,y,o)).supportsConfig())return E.addEventListener(i.ERROR,l),E.embed(),n.css("object.jwswf, .jwplayer:focus",{outline:"none"}),n.css(".jw-tab-focus:focus",{outline:"solid 2px #0B7EF4"}),o}}p.fallback?(u(t="No suitable players found and fallback enabled",!0),n.log(t),new a.download(S,p,c)):(u(t="No suitable players found and fallback disabled",!1),n.log(t))}}}function l(e){f(v+e.message)}function d(e){o.dispatchEvent(i.JWPLAYER_ERROR,{message:"Could not load plugin: "+e.message})}function c(e){e&&e.message?f("Error loading playlist: "+e.message):f(v+"No playable sources found")}function u(e,t){clearTimeout(C),C=setTimeout(function(){o.dispatchEvent(i.JWPLAYER_SETUP_ERROR,{message:e,fallback:t})},0)}function f(e){w||(_.parentNode.replaceChild(S,_),p.fallback?(w=!0,t(S,e,p),u(e,!0)):u(e,!1))}var h,p=new a.config(o.config),m=p.width,g=p.height,v="Error loading player: ",_=document.getElementById(o.id),y=e.plugins.loadPlugins(o.id,p.plugins),b=!1,w=!1,E=null,C=-1;p.id=o.id,p.aspectratio?o.config.aspectratio=p.aspectratio:delete o.config.aspectratio;var k=o;n.foreach(p.events,function(e,t){var n=k[e];"function"==typeof n&&n.call(k,t)});var S=document.createElement("div");return S.id=_.id,S.style.width=0<m.toString().indexOf("%")?m:m+"px",S.style.height=0<g.toString().indexOf("%")?g:g+"px",this.embed=function(){w||(y.addEventListener(i.COMPLETE,s),y.addEventListener(i.ERROR,d),y.load())},this.destroy=function(){E&&(E.destroy(),E=null),y&&(y.destroy(),y=null),h&&(h.resetEventListeners(),h=null)},this.errorScreen=f,this};e.embed.errorScreen=t}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;t<e.playlist.length;t++)e.playlist[t]=new r(e.playlist[t]);else{var a={};i.foreach(r.defaults,function(t){n(e,a,t)}),a.sources||(e.levels?(a.sources=e.levels,delete e.levels):(n(e,t={},"file"),n(e,t,"type"),a.sources=t.file?[t]:[])),e.playlist=[new r(a)]}}function n(e,t,n){i.exists(e[n])&&(t[n]=e[n],delete e[n])}var i=e.utils,r=e.playlist.item;(e.embed.config=function(n){var r={fallback:!0,height:270,primary:"html5",width:480,base:n.base?n.base:i.getScriptPath("jwplayer.js"),aspectratio:""},a=(r={type:"html5",src:(n=i.extend({},r,e.defaults,n)).base+"jwplayer.html5.js"},{type:"flash",src:n.base+"jwplayer.flash.swf"});if(n.modes="flash"===n.primary?[a,r]:[r,a],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position,n.playlistlayout=n.listbar.layout),n.flashplayer&&(a.src=n.flashplayer),n.html5player&&(r.src=n.html5player),t(n),"string"==typeof(a=n.aspectratio)&&i.exists(a)){var o=a.indexOf(":");-1===o?r=0:(r=parseFloat(a.substr(0,o)),a=parseFloat(a.substr(o+1)),r=0>=r||0>=a?0:a/r*100+"%")}else r=0;return-1===n.width.toString().indexOf("%")?delete n.aspectratio:r?n.aspectratio=r:delete n.aspectratio,n}).addConfig=function(e,n){return t(n),i.extend(e,n)}}(jwplayer),function(e){function t(e,t){function i(e,t){r[a].style[e]=t}for(var r=document.querySelectorAll(e),a=0;a<r.length;a++)n.foreach(t,i)}var n=e.utils;e.embed.download=function(e,i,r){function a(e,t,n){return e=document.createElement(e),t&&(e.className="jwdownload"+t),n&&n.appendChild(e),e}var o,s,l,d,c,u,f,h,p=n.extend({},i),m=p.width?p.width:480,g=p.height?p.height:320;if(i=i.logo?i.logo:{prefix:n.repo(),file:"logo.png",margin:10},d=p.playlist,p=["mp4","aac","mp3"],d&&d.length){for(u=(c=d[0]).sources,d=0;d<u.length;d++)(f=u[d]).file&&(h=f.type||n.extensionmap.extType(n.extension(f.file)),0<=n.indexOf(p,h)?(o=f.file,s=c.image):n.isYouTube(f.file,h)&&(l=f.file));o?(r=o,e&&(a("div","icon",o=a("a","display",e)),a("div","logo",o),r&&o.setAttribute("href",n.getAbsolutePath(r))),r="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",t(r+"display",{width:n.styleDimension(Math.max(320,m)),height:n.styleDimension(Math.max(180,g)),background:"black center no-repeat "+(s?"url("+s+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),t(r+"display div",{position:"absolute",width:"100%",height:"100%"}),t(r+"logo",{top:i.margin+"px",right:i.margin+"px",background:"top right no-repeat url("+i.prefix+i.file+")"}),t(r+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):l?(i=l,(e=a("iframe","",e)).src="http://www.youtube.com/embed/"+n.youTubeID(i),e.width=m,e.height=g,e.style.border="none"):r()}}}(jwplayer),function(e){var t=e.utils,n=e.events,i={};(e.embed.flash=function(a,o,s,l,d){function c(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function u(e,t,n){return function(){try{n&&document.getElementById(d.id+"_wrapper").appendChild(t);var i=document.getElementById(d.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(i.width,i.height),t.style.left=i.x,t.style.top=i.h}catch(e){}}}var f=new e.events.eventdispatcher,h=t.flashVersion();t.extend(this,f),this.embed=function(){if(s.id=d.id,10>h)return f.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,r,p=a.id,m=d.config.listbar,g=t.extend({},s);if((e=document.getElementById(d.id)).parentNode.replaceChild(a,e),p+"_wrapper"===a.parentNode.id)e=document.getElementById(p+"_wrapper");else{if(e=document.createElement("div"),(r=document.createElement("div")).style.display="none",r.id=p+"_aspect",e.id=p+"_wrapper",e.style.position="relative",e.style.display="block",e.style.width=t.styleDimension(g.width),e.style.height=t.styleDimension(g.height),d.config.aspectratio){var v=parseFloat(d.config.aspectratio);r.style.display="block",r.style.marginTop=d.config.aspectratio,e.style.height="auto",e.style.display="inline-block",m&&("bottom"===m.position?r.style.paddingBottom=m.size+"px":"right"===m.position&&(r.style.marginBottom=-1*m.size*(v/100)+"px"))}a.parentNode.replaceChild(e,a),e.appendChild(a),e.appendChild(r)}for(0<(m=l.setupPlugins(d,g,u)).length?t.extend(g,function(e){if(!e)return{};var n={},i=[];return t.foreach(e,function(e,r){var a=t.getPluginName(e);i.push(e),t.foreach(r,function(e,t){n[a+"."+e]=t})}),n.plugins=i.join(","),n}(m.plugins)):delete g.plugins,void 0!==g["dock.position"]&&"false"===g["dock.position"].toString().toLowerCase()&&(g.dock=g["dock.position"],delete g["dock.position"]),m=g.wmode||(g.height&&40>=g.height?"transparent":"opaque"),r="height width modes events primary base fallback volume".split(" "),v=0;v<r.length;v++)delete g[r[v]];r=t.getCookies(),t.foreach(r,function(e,t){void 0===g[e]&&(g[e]=t)}),(r=window.location.href.split("/")).splice(r.length-1,1),r=r.join("/"),g.base=r+"/",i[p]=g,t.isMSIE()?(a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+p+'" name="'+p+'" tabindex="0"><param name="movie" value="'+o.src+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="seamlesstabbing" value="true"><param name="wmode" value="'+m+'"><param name="bgcolor" value="#000000"></object>',(e=e.getElementsByTagName("object")[0]).style.outline="none"):((e=document.createElement("object")).setAttribute("type","application/x-shockwave-flash"),e.setAttribute("data",o.src),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("bgcolor","#000000"),e.setAttribute("id",p),e.setAttribute("name",p),e.className="jwswf",c(e,"allowfullscreen","true"),c(e,"allowscriptaccess","always"),c(e,"seamlesstabbing","true"),c(e,"wmode",m),a.parentNode.replaceChild(e,a)),d.config.aspectratio&&(e.style.position="absolute",e.style.left="0"),d.container=e,d.setPlayer(e,"flash")},this.supportsConfig=function(){if(h){if(!s)return!0;if("string"===t.typeOf(s.playlist))return!0;try{var e=s.playlist[0].sources;if(void 0===e)return!0;for(var n=0;n<e.length;n++)if(e[n].file&&r(e[n].file,e[n].type))return!0}catch(e){}}return!1},this.destroy=function(){}}).getVars=function(e){return i[e]};var r=e.embed.flashCanPlay=function(e,n){if(t.isYouTube(e,n)||t.isRtmp(e,n)||"hls"===n)return!0;var i=t.extensionmap[n||t.extension(e)];return!!i&&!!i.flash}}(jwplayer),function(e){var t,n=e.utils,i=n.extensionmap,r=e.events;e.embed.html5=function(i,a,o,s,l){function d(e,t,n){return function(){try{var r=document.querySelector("#"+i.id+" .jwmain");n&&r.appendChild(t),"function"==typeof e.resize&&(e.resize(r.clientWidth,r.clientHeight),setTimeout(function(){e.resize(r.clientWidth,r.clientHeight)},400)),t.left=r.style.left,t.top=r.style.top}catch(e){}}}var c=new r.eventdispatcher;n.extend(this,c),this.embed=function(){if(e.html5){s.setupPlugins(l,o,d),n.emptyElement(i);var t=e.utils.extend({},o);delete t.volume,t=new e.html5.player(t),l.setPlayer(t,"html5")}else this.loadEmbedder()},this.loadEmbedder=function(){(t=t||new n.scriptloader(a.src)).addEventListener(r.ERROR,this.loadError),t.addEventListener(r.COMPLETE,this.embed),t.load()},this.loadError=function(e){this.sendEvent(e.type,{message:"HTML5 player not found"})},this.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"===n.typeOf(o.playlist))return!0;for(var t=o.playlist[0].sources,i=0;i<t.length;i++)if(e.embed.html5CanPlay(t[i].file,t[i].type,o.androidhls))return!0}catch(e){}return!1},this.destroy=function(){t&&(t.resetEventListeners(),t=null)}},e.embed.html5CanPlay=function(t,r,a){if(null!==navigator.userAgent.match(/BlackBerry/i)||n.isIE(9))return!1;if(n.isYouTube(t,r))return!0;var o,s=n.extension(t);if("hls"===(r=r||i.extType(s)))if(a){if((a=n.isAndroidNative)(2)||a(3)||a("4.0"))return!1;if(n.isAndroid())return!0}else if(n.isAndroid())return!1;if(n.isRtmp(t,r))return!1;if(!(t=i[r]||i[s])||t.flash&&!t.html5)return!1;e:if(t=t.html5){try{o=!!e.vid.canPlayType(t);break e}catch(e){}o=!1}else o=!0;return o}}(jwplayer),function(e){var t=e.embed,n=e.embed.html5CanPlay,i=e.utils,r=e._,a=/\.(js|swf)$/;e.cast=e.cast||{},e.embed=i.extend(function(n){function r(){o="Adobe SiteCatalyst Error: Could not find Media Module"}var o,s=i.repo(),l=i.extend({},e.defaults),d=i.extend({},l,n.config),c=n.config,u=d.plugins,f=d.analytics,h=s+"jwpsrv.js",p=s+"sharing.js",m=s+"related.js",g=s+"gapro.js",v=(l=e.key?e.key:l.key,new e.utils.key(l).edition());u=u||{};switch("ads"==v&&d.advertising&&(a.test(d.advertising.client)?u[d.advertising.client]=d.advertising:u[s+d.advertising.client+".js"]=d.advertising),delete c.advertising,c.key=l,d.analytics&&a.test(d.analytics.client)&&(h=d.analytics.client),delete c.analytics,f&&"ads"!==v&&"enterprise"!==v&&delete f.enabled,"free"!=v&&f&&!1===f.enabled||(u[h]=f||{}),delete u.sharing,delete u.related,v){case"ads":case"enterprise":if(c.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new e.embed.sitecatalyst(n):r()}catch(e){r()}case"premium":d.related&&(a.test(d.related.client)&&(m=d.related.client),u[m]=d.related),d.ga&&(a.test(d.ga.client)&&(g=d.ga.client),u[g]=d.ga);case"pro":d.sharing&&(a.test(d.sharing.client)&&(p=d.sharing.client),u[p]=d.sharing),d.skin&&(c.skin=d.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,i.repo()+"skins/$1.xml"))}return c.plugins=u,n.config=c,n=new t(n),o&&n.errorScreen(o),n},e.embed),e.embed.html5CanPlay=function(t,i){var a={file:t,type:i};return!!(e.html5&&e.html5.chooseProvider?e.html5.chooseProvider(a)!==e.html5.VideoProvider:r.any(e.unregisteredProviders,function(e){return e.supports(a)}))||n.apply(this,arguments)}}(jwplayer),function(e){var t=jwplayer.utils;e.sitecatalyst=function(e){function n(e){f.debug&&t.log(e)}function i(e){return(e=(e=(e=e.split("/"))[e.length-1]).split("?"))[0]}function r(){if(!p){p=!0;var e=u.getPosition();n("stop: "+o+" : "+e),s.Media.stop(o,e)}}function a(){m||(r(),m=!0,n("close: "+o),s.Media.close(o),c=!0,d=0)}var o,l,d,c,u=e,f=t.extend({},u.config.sitecatalyst),h={onPlay:function(){if(!c){var e=u.getPosition();p=!1,n("play: "+o+" : "+e),s.Media.play(o,e)}},onPause:r,onBuffer:r,onIdle:a,onPlaylistItem:function(e){try{var n;if(c=!0,a(),d=0,f.mediaName)n=f.mediaName;else{var r=u.getPlaylistItem(e.index);n=r.title?r.title:r.file?i(r.file):r.sources&&r.sources.length?i(r.sources[0].file):""}o=n,l=f.playerName?f.playerName:u.id}catch(e){t.log(e)}},onTime:function(){if(c){var e=u.getDuration();if(-1==e)return;m=p=c=!1,n("open: "+o+" : "+e+" : "+l),s.Media.open(o,e,l),n("play: "+o+" : 0"),s.Media.play(o,0)}if(e=u.getPosition(),3<=Math.abs(e-d)){var t=d;n("seek: "+t+" to "+e),n("stop: "+o+" : "+t),s.Media.stop(o,t),n("play: "+o+" : "+e),s.Media.play(o,e)}d=e},onComplete:a},p=!0,m=!0;t.foreach(h,function(e){u[e](h[e])})}}(jwplayer.embed),function(e){function t(e,t){e[t]&&(e[t]=n.getAbsolutePath(e[t]))}var n=e.utils,i=e._,r=window.location.href;e.cast.setupCastConfig=function(i,a){var o=n.extend({},i.config);o.cast=n.extend({pageUrl:r},a);for(var s="base autostart controls fallback fullscreen width height mobilecontrols modes playlistlayout playlistposition playlistsize primary stretching sharing related ga skin logo listbar events".split(" "),l=s.length;l--;)delete o[s[l]];for(var d in s=o.plugins,delete o.plugins,s)if(s.hasOwnProperty(d)){var c=s[d];if(c.client&&(/[\.\/]/.test(c.client)&&t(c,"client"),-1<c.client.indexOf("vast"))){if(l=o,(c=n.extend({},c)).client="vast",delete c.companiondiv,c.schedule){var u=void 0;for(u in c.schedule)c.schedule.hasOwnProperty(u)&&t(c.schedule[u].ad||c.schedule[u],"tag")}t(c,"tag"),l.advertising=c}}return i.position&&(o.position=i.position),0<i.item&&(o.item=i.item),o.captionLabel=n.getCookies().captionLabel,o.playerVersion=e.version,o},e.cast.setupFlashCastConfig=function(t){var r,a=t.config;return a.playlist=t.getPlaylist(),(r=i.find(a.plugins,function(e,t){return 0<t.indexOf("vast.js")}))?(r.client="vast",r={advertising:r}):r={},(a=i.pick(a,"id captionLabel cast key playlist repeat".split(" "))).cast.pageUrl=window.location.href,n.extend(a,{playerVersion:e.version,captionLabel:n.getCookies().captionLabel,volume:t.getVolume(),mute:t.getMute(),id:t.id,position:t.getPosition(),item:t.getPlaylistIndex()},r),a}}(window.jwplayer),function(e,t){function n(e,t){e[t]&&(e[t]=r.getAbsolutePath(e[t]))}var i=t.cast,r=t.utils,a=t.events,o=a.state,s={};i.NS="urn:x-cast:com.longtailvideo.jwplayer",i.debug=!1,i.availability=null,i.available=function(t){t=t||i.availability;var n=e.chrome,r="available";return n.cast&&n.cast.ReceiverAvailability&&(r=n.cast.ReceiverAvailability.AVAILABLE),t===r},i.controller=function(l,d){var c,u;function f(e,t){i.log("send command",e,t);var n={command:e};void 0!==t&&(n.args=t),N.sendMessage(i.NS,n,I,function(e){i.log("error message",e),"Invalid namespace"===e.description&&_()})}function h(e,n){var r=JSON.parse(n);if(!r)throw"Message not proper JSON";if(r.reconcile){B.removeMessageListener(i.NS,h);var o=r.diff,s=B;o.id&&r.appid&&r.pageUrl||(o.id=t().id,r.appid=D.appid,r.pageUrl=L,B=N=null),o.id===l.id&&r.appid===D.appid&&r.pageUrl===L&&(N||(l.jwInstreamState()&&l.jwInstreamDestroy(!0),b(s),d.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:o.oldstate,newstate:o.newstate})),S(r)),B=null}}function p(e){var t;j.active=!!e,e=j,t=N&&N.receiver?N.receiver.friendlyName:"",e.deviceName=t,m(a.JWPLAYER_CAST_SESSION)}function m(e){var t=r.extend({},j);d.sendEvent(e,t)}function g(t){var n=e.chrome;t.code!==n.cast.ErrorCode.CANCEL&&(i.log("Cast Session Error:",t,N),t.code===n.cast.ErrorCode.SESSION_ERROR&&_())}function v(t){var n=e.chrome;t.code!==n.cast.ErrorCode.CANCEL&&(i.log("Cast Session Error:",t,N),t.code===n.cast.ErrorCode.SESSION_ERROR&&_())}function _(){N?(C(),N.stop(E,y),T({item:0}),S({type:"state",diff:{buffer:0,position:0,duration:0}})):E()}function y(e){i.error("Cast Session Stop error:",e,N),E()}function b(n){if(i.log("Session started:",n),N)_(),H=n;else{(N=n).addMessageListener(i.NS,k),N.addUpdateListener(w),l.jwPause(!0),l.jwSetFullscreen(!1),F=d.getVideo(),c=d.volume,u=d.mute,(O=new i.provider(f)).init(),d.setVideoProvider(O),l.jwPlay=function(e){!1===e?O.pause():O.play()},l.jwPause=function(e){l.jwPlay(!!e)},l.jwLoad=function(e){"number"===r.typeOf(e)&&d.setItem(e),O.load(e)},l.jwPlaylistItem=function(e){"number"===r.typeOf(e)&&d.setItem(e),O.playlistItem(e)},l.jwPlaylistNext=function(){l.jwPlaylistItem(d.item+1)},l.jwPlaylistPrev=function(){l.jwPlaylistItem(d.item-1)},l.jwSetVolume=function(e){r.exists(e)&&(R(e=0|Math.min(Math.max(0,e),100))&&(e=Math.max(0,Math.min(e/100,1)),N.setReceiverVolumeLevel(e,A,function(e){i.error("set volume error",e),A()})))},l.jwSetMute=function(e){r.exists(e)||(e=!P.mute),x(e)&&N.setReceiverMuted(!!e,A,function(e){i.error("set muted error",e),A()})},l.jwGetVolume=function(){return 0|P.volume},l.jwGetMute=function(){return!!P.mute},l.jwIsBeforePlay=function(){return!1};var s=l.jwSetCurrentCaptions;l.jwSetCurrentCaptions=function(e){s(e),O.sendCommand("caption",e)},l.jwSkipAd=function(e){M&&(M.skipAd(e),(e=M.getAdModel()).complete=!0,d.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,e))},l.jwClickAd=function(n){if(M&&300<M.timeSinceClick()&&(M.clickAd(n),d.state!==o.PAUSED)){var i={tag:n.tag};n.sequence&&(i.sequence=n.sequence),n.podcount&&(i.podcount=n.podcount),t(l.id).dispatchEvent(a.JWPLAYER_AD_CLICK,i),e.open(n.clickthrough)}},l.jwPlayAd=l.jwPauseAd=l.jwSetControls=l.jwForceState=l.jwReleaseState=l.jwSetFullscreen=l.jwDetachMedia=l.jwAttachMedia=I;var h=t(l.id).plugins;h.vast&&h.vast.jwPauseAd!==I&&(U={jwPlayAd:h.vast.jwPlayAd,jwPauseAd:h.vast.jwPauseAd},h.vast.jwPlayAd=h.vast.jwPauseAd=I),A(),p(!0),n!==B&&(O.setup(t.cast.setupCastConfig(d,D),d),t.cast.loader.sendDummyMedia(n))}}function w(e){i.log("Cast Session status",e),e?A():(O.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:d.state,newstate:o.BUFFERING}),E())}function E(){if(i.log("_sessionStopped"),N&&(C(),N=null),F){delete l.jwSkipAd,delete l.jwClickAd,l.initializeAPI();var e=t(l.id).plugins;e.vast&&r.extend(e.vast,U),d.volume=c,d.mute=u,d.setVideoProvider(F),d.duration=0,O&&(O.destroy(),O=null),M&&(M.destroy(),M=null),d.state!==o.IDLE?r.isIPad()||r.isIPod()?(l.jwStop(!0),F.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:o.BUFFERING,newstate:o.IDLE})):(d.state=o.IDLE,l.jwPlay(!0),l.jwSeek(d.position)):F.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:o.BUFFERING,newstate:o.IDLE}),F=null}p(!1),null!==H&&(b(H),H=null)}function C(){N.removeUpdateListener(w),N.removeMessageListener(i.NS,k)}function k(e,t){var n=JSON.parse(t);if(!n)throw"Message not proper JSON";S(n)}function S(e){if("state"===e.type)M&&(e.diff.newstate||e.diff.position)&&(M.destroy(),M=null,d.setVideoProvider(O),d.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,{done:!0})),O.updateModel(e.diff,e.type),T(e.diff);else if("ad"===e.type){null===M&&((M=new i.adprovider(i.NS,N)).init(),d.setVideoProvider(M)),M.updateModel(e.diff,e.type);var t=M.getAdModel();e.diff.clickthrough&&(t.onClick=l.jwClickAd),e.diff.skipoffset&&(t.onSkipAd=l.jwSkipAd),d.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,t),e.diff.complete&&M.resetAdModel()}else"connection"===e.type?!0===e.closed&&_():i.error("received unhandled message",e.type,e)}function T(e){void 0!==e.item&&d.item!==e.item&&(d.item=e.item,d.sendEvent(a.JWPLAYER_PLAYLIST_ITEM,{index:d.item}))}function A(){if(N&&N.receiver){var e=N.receiver.volume;if(e){var t=100*e.level|0;x(!!e.muted),R(t)}}}function R(e){var t=P.volume!==e;return t&&(P.volume=e,O.sendEvent(a.JWPLAYER_MEDIA_VOLUME,{volume:e})),t}function x(e){var t=P.mute!==e;return t&&(P.mute=e,O.sendEvent(a.JWPLAYER_MEDIA_MUTE,{mute:e})),t}function I(){}var D,N=null,j={available:!1,active:!1,deviceName:""},P={volume:null,mute:null},L=r.getAbsolutePath(e.location.href),O=null,M=null,F=null;c=d.volume,u=d.mute;var B=null,H=null,U=null;n(D=r.extend({},s,d.cast),"loadscreen"),n(D,"endscreen"),n(D,"logo"),!D.appid||e.cast&&e.cast.receiver||(i.loader.addEventListener("availability",function(e){e=!!i.available(e.availability),j.available!==e&&(j.available=e,m(a.JWPLAYER_CAST_AVAILABLE))}),i.loader.addEventListener("session",function(e){i.log("existing session",e),!N&&!B&&(B=e.session).addMessageListener(i.NS,h)}),i.loader.initialize(D.appid)),this.startCasting=function(){N||l.jwInstreamState()||e.chrome.cast.requestSession(b,g)},this.stopCasting=_,this.openExtension=function(){l.jwInstreamState()||e.chrome.cast.requestSession(b,v)}},i.log=function(){if(i.debug){var e=Array.prototype.slice.call(arguments,0);console.log.apply(console,e)}},i.error=function(){var e=Array.prototype.slice.call(arguments,0);console.error.apply(console,e)}}(window,jwplayer),function(e){function t(e){g.log("existing session",e),!m&&!h&&(h=e.session).addMessageListener(g.NS,n)}function n(t,i){var r=JSON.parse(i),o=h;if(!r)throw"Message not proper JSON";r.reconcile&&(h.removeMessageListener(g.NS,n),r.receiverFriendlyName=h.receiver.friendlyName,r.pageUrl&&r.diff.id&&r.appid||(r.pageUrl=E,r.diff.id=e().id,r.appid=f,h=m=null),b[r.diff.id]&&f===r.appid&&r.pageUrl===E&&(u=r.diff.id,f=r.appid,d(u,"jwInstreamDestroy"),a(o),d(u,w.message,r),h=null))}function i(){m&&(m.removeUpdateListener(l),m.removeMessageListener(g.NS,o),m.stop(function(){void 0!==p&&null!==p&&(a(p),p=null)}.bind(this),s.bind(this)),m=null),d(u,w.cleanup)}function r(e,t){m.sendMessage(g.NS,{command:e,args:t},v.noop,function(e){g.error("message send error",e)})}function a(t){var n=e(u);m?(i(),p=t):((m=t).addMessageListener(g.NS,o),m.addUpdateListener(l),n=e.cast.setupFlashCastConfig(n),h!==m&&(r("setup",n),e.cast.loader.sendDummyMedia(m)),d(u,w.connected,{receiverFriendlyName:t.receiver.friendlyName}))}function o(e,t){if(t){var n=JSON.parse(t);if(!n)throw"Message not proper JSON";d(u,w.message,n)}}function s(e){d(u,w.error,e||{})}function l(e){e?c():i()}function d(t,n,i){i?e(t).callInternal(n,i):e(t).callInternal(n)}function c(){if(m&&m.receiver&&(n=m.receiver.volume)){var t=100*n.level|0,n=!!n.muted;e(u).setVolume(t).setMute(n)}}var u,f,h,p,m,g=e.cast,v=e.utils,_=e._,y=window.chrome||{},b={},w={},E=v.getAbsolutePath(window.location.href);g.NS="urn:x-cast:com.longtailvideo.jwplayer",g.flash={checkAvailability:function(e,n,i){w=i,f=n,b[e]=!0,g.loader.addEventListener("availability",function(t){"available"===t.availability&&d(e,w.available,t)}),g.loader.addEventListener("session",t),g.loader.initialize(n)},startCasting:function(e){u=e,y.cast.requestSession(a.bind(this),s.bind(this))},stopCasting:i,openExtension:function(e){u=e,y.cast.requestSession(a.bind(this),s.bind(this))},mute:function(e){m.setReceiverMuted(e,c,function(e){g.error("set muted error",e)})},volume:function(e){e=Math.max(0,Math.min(e/100,1)),m.setReceiverVolumeLevel(e,c,function(e){g.error("set volume error",e)})},messageReceiver:r,canCastItem:function(t){return _.any(t.levels,function(t){return e.embed.html5CanPlay(t.file,t.type)||"hls"===t.type})}}}(window.jwplayer),function(e,t){function n(e){var n=new t.cast.media.MediaInfo("");n.contentType="video/mp4",(n=new t.cast.media.LoadRequest(n)).autoplay=!1,e.loadMedia(n)}function i(){t&&t.cast&&t.cast.isAvailable&&!c.apiConfig?(c.apiConfig=new t.cast.ApiConfig(new t.cast.SessionRequest(p),s,l,t.cast.AutoJoinPolicy.ORIGIN_SCOPED),t.cast.initialize(c.apiConfig,o,a)):15>h++&&setTimeout(i,1e3)}function r(){d&&(d.resetEventListeners(),d=null)}function a(){c.apiConfig=null}function o(){}function s(e){m.sendEvent("session",{session:e}),e.sendMessage(c.NS,{whoami:1}),0===e.media.length&&n(e)}function l(e){c.availability=e,m.sendEvent("availability",{availability:e})}window.chrome=t;var d,c=e.cast,u=e.utils,f=e.events,h=0,p=null,m=u.extend({initialize:function(e){p=e,null!==c.availability?m.sendEvent("availability",{availability:c.availability}):t&&t.cast?i():d||((d=new u.scriptloader("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js")).addEventListener(f.ERROR,r),d.addEventListener(f.COMPLETE,i),d.load())}},new f.eventdispatcher("cast.loader"));e.cast.loader=m,e.cast.loader.sendDummyMedia=n}(window.jwplayer,window.chrome||{}),function(e,t){var n=[],i=e.utils,r=e.events,a=e._,o=0,s=r.state,l="getBuffer getCaptionsList getControls getCurrentCaptions getCurrentQuality getCurrentAudioTrack getDuration getFullscreen getHeight getLockState getMute getPlaylistIndex getSafeRegion getPosition getQualityLevels getState getVolume getWidth isBeforeComplete isBeforePlay releaseState".split(" "),d="playlistNext stop forceState playlistPrev seek setCurrentCaptions setControls setCurrentQuality setVolume setCurrentAudioTrack".split(" "),c={onBufferChange:r.JWPLAYER_MEDIA_BUFFER,onBufferFull:r.JWPLAYER_MEDIA_BUFFER_FULL,onError:r.JWPLAYER_ERROR,onSetupError:r.JWPLAYER_SETUP_ERROR,onFullscreen:r.JWPLAYER_FULLSCREEN,onMeta:r.JWPLAYER_MEDIA_META,onMute:r.JWPLAYER_MEDIA_MUTE,onPlaylist:r.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:r.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:r.JWPLAYER_PLAYLIST_COMPLETE,onReady:r.API_READY,onResize:r.JWPLAYER_RESIZE,onComplete:r.JWPLAYER_MEDIA_COMPLETE,onSeek:r.JWPLAYER_MEDIA_SEEK,onTime:r.JWPLAYER_MEDIA_TIME,onVolume:r.JWPLAYER_MEDIA_VOLUME,onBeforePlay:r.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:r.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:r.JWPLAYER_DISPLAY_CLICK,onControls:r.JWPLAYER_CONTROLS,onQualityLevels:r.JWPLAYER_MEDIA_LEVELS,onQualityChange:r.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:r.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:r.JWPLAYER_CAPTIONS_CHANGED,onAdError:r.JWPLAYER_AD_ERROR,onAdClick:r.JWPLAYER_AD_CLICK,onAdImpression:r.JWPLAYER_AD_IMPRESSION,onAdTime:r.JWPLAYER_AD_TIME,onAdComplete:r.JWPLAYER_AD_COMPLETE,onAdCompanions:r.JWPLAYER_AD_COMPANIONS,onAdSkipped:r.JWPLAYER_AD_SKIPPED,onAdPlay:r.JWPLAYER_AD_PLAY,onAdPause:r.JWPLAYER_AD_PAUSE,onAdMeta:r.JWPLAYER_AD_META,onCast:r.JWPLAYER_CAST_SESSION,onAudioTrackChange:r.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:r.JWPLAYER_AUDIO_TRACKS},u={onBuffer:s.BUFFERING,onPause:s.PAUSED,onPlay:s.PLAYING,onIdle:s.IDLE};e.api=function(o){function f(e,t){i.foreach(e,function(e,n){y[e]=function(e){return t(n,e)}})}function h(e,t){var n="jw"+t.charAt(0).toUpperCase()+t.slice(1);y[t]=function(){var t=g.apply(this,[n].concat(Array.prototype.slice.call(arguments,0)));return e?y:t}}function p(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+y.id+'").dispatchEvent("'+t+'", dat); }')}catch(e){if("flash"===y.renderingMode){var n=document.createElement("a");n.href=v.data,n.protocol!==location.protocol&&i.log("Warning: Your site ["+location.protocol+"] and JWPlayer ["+n.protocol+"] are hosted using different protocols")}i.log("Could not add internal listener")}}function m(e,t){return b[e]||(b[e]=[],v&&E&&p(v,e)),b[e].push(t),y}function g(){if(E){if(v){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if("function"==typeof v[t]){switch(e.length){case 6:return v[t](e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return v[t](e[0],e[1],e[2],e[3],e[4]);case 4:return v[t](e[0],e[1],e[2],e[3]);case 3:return v[t](e[0],e[1],e[2]);case 2:return v[t](e[0],e[1]);case 1:return v[t](e[0])}return v[t]()}}return null}C.push(arguments)}var v,_,y=this,b={},w={},E=!1,C=[],k={},S={};return y.container=o,y.id=o.id,y.setup=function(t){if(e.embed){e.api.destroyPlayer(y.id);var n=new e.api(y.container);return e.api.addPlayer(n),n.config=t,n._embedder=new e.embed(n),n._embedder.embed(),n}return y},y.getContainer=function(){return y.container},y.addButton=function(e,t,n,r){try{S[r]=n,g("jwDockAddButton",e,t,'jwplayer("'+y.id+'").callback("'+r+'")',r)}catch(e){i.log("Could not add dock button"+e.message)}},y.removeButton=function(e){g("jwDockRemoveButton",e)},y.callback=function(e){S[e]&&S[e]()},y.getMeta=function(){return y.getItemMeta()},y.getPlaylist=function(){var e=g("jwGetPlaylist");return"flash"===y.renderingMode&&i.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},y.getPlaylistItem=function(e){return i.exists(e)||(e=y.getPlaylistIndex()),y.getPlaylist()[e]},y.getRenderingMode=function(){return y.renderingMode},y.setFullscreen=function(e){return i.exists(e)?g("jwSetFullscreen",e):g("jwSetFullscreen",!g("jwGetFullscreen")),y},y.setMute=function(e){return i.exists(e)?g("jwSetMute",e):g("jwSetMute",!g("jwGetMute")),y},y.lock=function(){return y},y.unlock=function(){return y},y.load=function(t){return g("jwInstreamDestroy"),e(y.id).plugins.googima&&g("jwDestroyGoogima"),g("jwLoad",t),y},y.playlistItem=function(e){return g("jwPlaylistItem",parseInt(e,10)),y},y.resize=function(e,t){if("flash"!==y.renderingMode)g("jwResize",e,t);else{var n=document.getElementById(y.id+"_wrapper"),r=document.getElementById(y.id+"_aspect");r&&(r.style.display="none"),n&&(n.style.display="block",n.style.width=i.styleDimension(e),n.style.height=i.styleDimension(t))}return y},y.play=function(e){if(e!==t)return g("jwPlay",e),y;e=y.getState();var n=_&&_.getState();return n&&(n===s.IDLE||n===s.PLAYING||n===s.BUFFERING?g("jwInstreamPause"):g("jwInstreamPlay")),e===s.PLAYING||e===s.BUFFERING?g("jwPause"):g("jwPlay"),y},y.pause=function(e){return e===t?(e=y.getState())===s.PLAYING||e===s.BUFFERING?g("jwPause"):g("jwPlay"):g("jwPause",e),y},y.createInstream=function(){return new e.api.instream(this,v)},y.setInstream=function(e){return _=e},y.loadInstream=function(e,t){return(_=y.setInstream(y.createInstream()).init(t)).loadItem(e),_},y.destroyPlayer=function(){E=!0,g("jwPlayerDestroy")},y.playAd=function(t){var n=e(y.id).plugins;n.vast?n.vast.jwPlayAd(t):g("jwPlayAd",t)},y.pauseAd=function(){var t=e(y.id).plugins;t.vast?t.vast.jwPauseAd():g("jwPauseAd")},f(u,function(e,t){return w[e]||(w[e]=[],m(r.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;if(t=t.oldstate,n===e){var i=w[n];if(i)for(var r=0;r<i.length;r++){var a=i[r];"function"==typeof a&&a.call(this,{oldstate:t,newstate:n})}}})),w[e].push(t),y}),f(c,m),i.foreach(l,function(e,t){h(!1,t)}),i.foreach(d,function(e,t){h(!0,t)}),y.remove=function(){this._embedder&&this._embedder.destroy&&this._embedder.destroy(),C=[];var e=1<a.size(a.where(n,{id:y.id}));e||i.clearCss("#"+y.id);var t=document.getElementById(y.id+("flash"===y.renderingMode?"_wrapper":""));if(t){if("html5"===y.renderingMode)y.destroyPlayer();else if(i.isMSIE(8)){var r=document.getElementById(y.id);if(r&&r.parentNode){for(var o in r.style.display="none",r)"function"==typeof r[o]&&(r[o]=null);r.parentNode.removeChild(r)}}e||((e=document.createElement("div")).id=y.id,t.parentNode.replaceChild(e,t))}n=a.filter(n,function(e){return e.uniqueId!==y.uniqueId})},y.registerPlugin=function(t,n,i,r){e.plugins.registerPlugin(t,n,i,r)},y.setPlayer=function(e,t){v=e,y.renderingMode=t},y.detachMedia=function(){if("html5"===y.renderingMode)return g("jwDetachMedia")},y.attachMedia=function(e){if("html5"===y.renderingMode)return g("jwAttachMedia",e)},y.getAudioTracks=function(){return g("jwGetAudioTracks")},y.removeEventListener=function(e,t){var n=b[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},y.dispatchEvent=function(e,t){if(n=b[e])for(var n=n.slice(0),a=i.translateEventResponse(e,t),o=0;o<n.length;o++){var s=n[o];if("function"==typeof s)try{e===r.JWPLAYER_PLAYLIST_LOADED&&i.deepReplaceKeyName(a.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),s.call(this,a)}catch(e){i.log("There was an error calling back an event handler",e)}}},y.dispatchInstreamEvent=function(e){_&&_.dispatchEvent(e,arguments)},y.callInternal=g,y.playerReady=function(e){for(E=!0,v||y.setPlayer(document.getElementById(e.id)),y.container=document.getElementById(y.id),i.foreach(b,function(e){p(v,e)}),m(r.JWPLAYER_PLAYLIST_ITEM,function(){k={}}),m(r.JWPLAYER_MEDIA_META,function(e){i.extend(k,e.metadata)}),m(r.JWPLAYER_VIEW_TAB_FOCUS,function(e){var t=y.getContainer();!0===e.hasFocus?i.addClass(t,"jw-tab-focus"):i.removeClass(t,"jw-tab-focus")}),y.dispatchEvent(r.API_READY);0<C.length;)g.apply(y,C.shift())},y.getItemMeta=function(){return k},y},e.playerReady=function(t){var n=e.api.playerById(t.id);n||(n=e.api.selectPlayer(t.id)),n.playerReady(t)},e.api.selectPlayer=function(t){var r;return i.exists(t)||(t=0),t.nodeType?r=t:"string"==typeof t&&(r=document.getElementById(t)),r?(t=e.api.playerById(r.id))?t:new e.api(r):"number"==typeof t?n[t]:null},e.api.playerById=function(e){for(var t=0;t<n.length;t++)if(n[t].id===e)return n[t];return null},e.api.addPlayer=function(e){for(var t=0;t<n.length;t++)if(n[t]===e)return e;return o++,e.uniqueId=o,n.push(e),e},e.api.destroyPlayer=function(e){e=a.where(n,{id:e}),a.each(e,a.partial(a.result,a,"remove"))}}(window.jwplayer),function(e){var t=e.events,n=e.utils,i=t.state;e.api.instream=function(e,r){function a(t,n){return d[t]||(d[t]=[],r.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+e.id+'").dispatchInstreamEvent("'+t+'", dat); }')),d[t].push(n),this}function o(e,n){return c[e]||(c[e]=[],a(t.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate,i=t.oldstate;if(n===e){var r=c[n];if(r)for(var a=0;a<r.length;a++){var o=r[a];"function"==typeof o&&o.call(this,{oldstate:i,newstate:n,type:t.type})}}})),c[e].push(n),this}var s,l,d={},c={},u=this;u.type="instream",u.init=function(){return e.callInternal("jwInitInstream"),u},u.loadItem=function(t,i){s=t,l=i||{},"array"===n.typeOf(t)?e.callInternal("jwLoadArrayInstream",s,l):e.callInternal("jwLoadItemInstream",s,l)},u.removeEvents=function(){d=c={}},u.removeEventListener=function(e,t){var n=d[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},u.dispatchEvent=function(e,t){if(i=d[e])for(var i=i.slice(0),r=n.translateEventResponse(e,t[1]),a=0;a<i.length;a++){var o=i[a];"function"==typeof o&&o.call(this,r)}},u.onError=function(e){return a(t.JWPLAYER_ERROR,e)},u.onMediaError=function(e){return a(t.JWPLAYER_MEDIA_ERROR,e)},u.onFullscreen=function(e){return a(t.JWPLAYER_FULLSCREEN,e)},u.onMeta=function(e){return a(t.JWPLAYER_MEDIA_META,e)},u.onMute=function(e){return a(t.JWPLAYER_MEDIA_MUTE,e)},u.onComplete=function(e){return a(t.JWPLAYER_MEDIA_COMPLETE,e)},u.onPlaylistComplete=function(e){return a(t.JWPLAYER_PLAYLIST_COMPLETE,e)},u.onPlaylistItem=function(e){return a(t.JWPLAYER_PLAYLIST_ITEM,e)},u.onTime=function(e){return a(t.JWPLAYER_MEDIA_TIME,e)},u.onBuffer=function(e){return o(i.BUFFERING,e)},u.onPause=function(e){return o(i.PAUSED,e)},u.onPlay=function(e){return o(i.PLAYING,e)},u.onIdle=function(e){return o(i.IDLE,e)},u.onClick=function(e){return a(t.JWPLAYER_INSTREAM_CLICK,e)},u.onInstreamDestroyed=function(e){return a(t.JWPLAYER_INSTREAM_DESTROYED,e)},u.onAdSkipped=function(e){return a(t.JWPLAYER_AD_SKIPPED,e)},u.play=function(e){r.jwInstreamPlay(e)},u.pause=function(e){r.jwInstreamPause(e)},u.hide=function(){e.callInternal("jwInstreamHide")},u.destroy=function(){u.removeEvents(),e.callInternal("jwInstreamDestroy")},u.setText=function(e){r.jwInstreamSetText(e||"")},u.getState=function(){return r.jwInstreamState()},u.setClick=function(e){r.jwInstreamClick&&r.jwInstreamClick(e)}}}(jwplayer),function(e){var t=e.api,n=t.selectPlayer,i=e._;t.selectPlayer=function(t){var i=n.apply(this,arguments);return i||{registerPlugin:function(t,n,i){"jwpsrv"!==t&&e.plugins.registerPlugin(t,n,i)}}},e.unregisteredProviders=[],t.registerProvider=function(t){e&&e.html5&&i.isFunction(e.html5.registerProvider)?e.html5.registerProvider(t):e.unregisteredProviders.push(t)}}(jwplayer))},"141G":function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".NS-project_faqs__edit",function(e){var t=(0,i.default)("#faq-template").children().clone(),n=e.find("ul.faqs");function r(){n.find("li.js-faq:not(.deleted) input.position").each(function(e,t){(0,i.default)(t).val(e+1)})}e.on("click","form .js-link-to-new-question",function(){var e=t.clone_form_template();return e.find(".js-delete").val(0),e.removeClass("hidden").appendTo(n),r(),!1}),e.on("click",".js-delete",function(){var e=(0,i.default)(this).closest("li.js-faq").find("input.js-delete").attr("id");(0,i.default)(".js-faq-delete-modal").find(".js-mark-to-delete").data("delete-input",e)}),(0,i.default)(".js-faq-delete-modal").on("click",".js-mark-to-delete",function(e){e.preventDefault();var t=(0,i.default)(this).closest(".js-faq-delete-modal"),n=(0,i.default)(this).data("delete-input"),r=(0,i.default)("#"+n),a=r.closest("li.js-faq");return r.val(1),a.addClass("deleted").fadeOut("slow"),t.trigger("close"),!1}),n.sortable({containment:".NS-project_faqs__edit",placeholder:"project-faq-placeholder",handle:".js-move",axis:"y",tolerance:"pointer",items:"li.js-faq",start:function(e,t){(0,i.default)(".project-faq-placeholder").css("height",t.item.height()+"px"),t.item.addClass("reordering")},stop:function(e,t){t.item.removeClass("reordering")},update:r})})},16:function(e,t,n){n("YBD5"),n("Ciuv"),n("kitm"),e.exports=n("rRm2")},"16WZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupScrollLocking=t.rebindScroll=t.combineHeight=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=o(n("l/Rs")),a=o(n("shXp"));function o(e){return e&&e.__esModule?e:{default:e}}var s=[],l=function(e){var t=e.element,n=e.offsets,i=void 0===n?[]:n,a=e.styles,o=void 0===a?function(){return{onLock:{},offLock:{}}}:a,s=(0,r.default)(t);return s.length?{styles:o,options:e,element:s,offsetTop:s.parent().offset().top,eventName:"scroll."+s.selector,offset:c(i)}:null},d=function(e){var t=e.element,n=e.eventName,a=e.offsetTop,o=e.offset,s=!1,l=(0,e.styles)();(0,r.default)(window).off(n).on(n,function(){var e=this.scrollY;!s&&e>=a-o?(t.addClass("fixed").css(i({top:o+"px"},l.onLock)),s=!0):s&&e<a-o&&(t.removeClass("fixed").css(i({top:""},l.offLock)),s=!1)}).trigger(n)},c=t.combineHeight=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return(0,r.default)(e).height()}).reduce(function(e,t){return e+t})},u=t.rebindScroll=function(){return s.forEach(function(e){return d(l(e.options))})};t.setupScrollLocking=function(e){(0,r.default)(document).on("ready",function(){var t=l(e);t&&(s=s.concat(t),d(t))})};(0,r.default)(window).on("resize",a.default.debounce(u,250))},"17bY":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("LNuh"),(0,a.default)("span.character_counter").livequery(function(){var e=(0,a.default)(this);(0,a.default)(document).on("keyup",e.attr("rel"),function(){e.html(parseInt((0,a.default)(this).attr("maxlength"),10)-(0,a.default)(this).val().length)})})},"1B3E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlaggingForm=t.SubmitButtonContainer=void 0;var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i},o=n("b04z"),s=n("JIXV"),l=n("Z5jf"),d=n("ci1u");var c=t.SubmitButtonContainer=function(e){var t=e.state,n=e.dispatch,i=e.kind,r=t.details;switch(t.flaggingFormStatus){case s.FLAGGING_SUBMITTED:return a.default.createElement("div",null,a.default.createElement(d.Icon,{size:"large",name:"icon--circle-loader",atoms:["ml1"]}),a.default.createElement("em",{className:"ml2 dark-grey-300"},(0,l.boundT)("project_page.flagging.Submitting")));case s.FLAGGING_FAILED:return a.default.createElement("p",{className:"red ml1"},(0,l.boundT)("project_page.flagging.Flagging_failed_message"));default:return a.default.createElement(o.Button,{color:"blue",disabled:!i,onClick:function(){return n((0,s.submitFlaggingAction)(i,r))}},(0,l.boundT)("project_page.flagging.Report_project_submit"))}};t.FlaggingForm=function(e){var t=e.state,n=e.dispatch,i=e.kind,r=e.placeholder,o=t.flaggingFormStatus===s.FLAGGING_SUBMITTED;return a.default.createElement("div",null,a.default.createElement("div",{className:"field mt2"},a.default.createElement("textarea",{onChange:function(e){return n((0,s.updateDetailsAction)(e))},value:t.details,className:"textarea mb2 p3",rows:"5",disabled:o,placeholder:r})),a.default.createElement(c,{state:t,dispatch:n,kind:i}))}},"1C6n":function(e,t,n){"use strict";var i=a(n("8NzR")),r=a(n("l/Rs"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("#events_fourth_birthday",function(){var e;(0,r.default)("#the_right_way").hover(function(){(0,r.default)("body").addClass("reveal")},function(){(0,r.default)("body").removeClass("reveal")}),e=["https://d3mlfyygrfdi2i.cloudfront.net/5429/rsvp-awful.gif"],(0,r.default)(e).each(function(){(new Image).src=this})})},"1LFw":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=new Array(n),r=arguments.length>=2?arguments[1]:void 0,a=0;a<n;a++)a in t&&(i[a]=e.call(r,t[a],a,t));return i});var t="A".charCodeAt(0),n="Z".charCodeAt(0);function i(e){return(e=(e=e.toUpperCase()).substr(4)+e.substr(0,4)).split("").map(function(e){var i=e.charCodeAt(0);return i>=t&&i<=n?i-t+10:e}).join("")}function r(e){for(var t,n=e;n.length>2;)t=n.slice(0,9),n=parseInt(t,10)%97+n.slice(t.length);return parseInt(n,10)%97}function a(e,t,n,i){this.countryCode=e,this.length=t,this.structure=n,this.example=i}a.prototype._regex=function(){return this._cachedRegex||(this._cachedRegex=(e=this.structure,t=e.match(/(.{3})/g).map(function(e){var t,n=e.slice(0,1),i=parseInt(e.slice(1),10);switch(n){case"A":t="0-9A-Za-z";break;case"B":t="0-9A-Z";break;case"C":t="A-Za-z";break;case"F":t="0-9";break;case"L":t="a-z";break;case"U":t="A-Z";break;case"W":t="0-9a-z"}return"(["+t+"]{"+i+"})"}),new RegExp("^"+t.join("")+"$")));var e,t},a.prototype.isValid=function(e){return this.length==e.length&&this.countryCode===e.slice(0,2)&&this._regex().test(e.slice(4))&&1==r(i(e))},a.prototype.toBBAN=function(e,t){return this._regex().exec(e.slice(4)).slice(1).join(t)},a.prototype.fromBBAN=function(e){if(!this.isValidBBAN(e))throw new Error("Invalid BBAN");var t=("0"+(98-r(i(this.countryCode+"00"+e)))).slice(-2);return this.countryCode+t+e},a.prototype.isValidBBAN=function(e){return this.length-4==e.length&&this._regex().test(e)};var o={};function s(e){o[e.countryCode]=e}s(new a("AD",24,"F04F04A12","AD1200012030200359100100")),s(new a("AE",23,"F03F16","AE070331234567890123456")),s(new a("AL",28,"F08A16","AL47212110090000000235698741")),s(new a("AT",20,"F05F11","AT611904300234573201")),s(new a("AZ",28,"U04A20","AZ21NABZ00000000137010001944")),s(new a("BA",20,"F03F03F08F02","BA391290079401028494")),s(new a("BE",16,"F03F07F02","BE68539007547034")),s(new a("BG",22,"U04F04F02A08","BG80BNBG96611020345678")),s(new a("BH",22,"U04A14","BH67BMAG00001299123456")),s(new a("BR",29,"F08F05F10U01A01","BR9700360305000010009795493P1")),s(new a("CH",21,"F05A12","CH9300762011623852957")),s(new a("CR",21,"F03F14","CR0515202001026284066")),s(new a("CY",28,"F03F05A16","CY17002001280000001200527600")),s(new a("CZ",24,"F04F06F10","CZ6508000000192000145399")),s(new a("DE",22,"F08F10","DE89370400440532013000")),s(new a("DK",18,"F04F09F01","DK5000400440116243")),s(new a("DO",28,"U04F20","DO28BAGR00000001212453611324")),s(new a("EE",20,"F02F02F11F01","EE382200221020145685")),s(new a("ES",24,"F04F04F01F01F10","ES9121000418450200051332")),s(new a("FI",18,"F06F07F01","FI2112345600000785")),s(new a("FO",18,"F04F09F01","FO6264600001631634")),s(new a("FR",27,"F05F05A11F02","FR1420041010050500013M02606")),s(new a("GB",22,"U04F06F08","GB29NWBK60161331926819")),s(new a("GE",22,"U02F16","GE29NB0000000101904917")),s(new a("GI",23,"U04A15","GI75NWBK000000007099453")),s(new a("GL",18,"F04F09F01","GL8964710001000206")),s(new a("GR",27,"F03F04A16","GR1601101250000000012300695")),s(new a("GT",28,"A04A20","GT82TRAJ01020000001210029690")),s(new a("HR",21,"F07F10","HR1210010051863000160")),s(new a("HU",28,"F03F04F01F15F01","HU42117730161111101800000000")),s(new a("IE",22,"U04F06F08","IE29AIBK93115212345678")),s(new a("IL",23,"F03F03F13","IL620108000000099999999")),s(new a("IS",26,"F04F02F06F10","IS140159260076545510730339")),s(new a("IT",27,"U01F05F05A12","IT60X0542811101000000123456")),s(new a("KW",30,"U04A22","KW81CBKU0000000000001234560101")),s(new a("KZ",20,"F03A13","KZ86125KZT5004100100")),s(new a("LB",28,"F04A20","LB62099900000001001901229114")),s(new a("LI",21,"F05A12","LI21088100002324013AA")),s(new a("LT",20,"F05F11","LT121000011101001000")),s(new a("LU",20,"F03A13","LU280019400644750000")),s(new a("LV",21,"U04A13","LV80BANK0000435195001")),s(new a("MC",27,"F05F05A11F02","MC5811222000010123456789030")),s(new a("MD",24,"U02F18","MD24AG000225100013104168")),s(new a("ME",22,"F03F13F02","ME25505000012345678951")),s(new a("MK",19,"F03A10F02","MK07250120000058984")),s(new a("MR",27,"F05F05F11F02","MR1300020001010000123456753")),s(new a("MT",31,"U04F05A18","MT84MALT011000012345MTLCAST001S")),s(new a("MU",30,"U04F02F02F12F03U03","MU17BOMM0101101030300200000MUR")),s(new a("NL",18,"U04F10","NL91ABNA0417164300")),s(new a("NO",15,"F04F06F01","NO9386011117947")),s(new a("PK",24,"U04A16","PK36SCBL0000001123456702")),s(new a("PL",28,"F08F16","PL61109010140000071219812874")),s(new a("PS",29,"U04A21","PS92PALS000000000400123456702")),s(new a("PT",25,"F04F04F11F02","PT50000201231234567890154")),s(new a("RO",24,"U04A16","RO49AAAA1B31007593840000")),s(new a("RS",22,"F03F13F02","RS35260005601001611379")),s(new a("SA",24,"F02A18","SA0380000000608010167519")),s(new a("SE",24,"F03F16F01","SE4550000000058398257466")),s(new a("SI",19,"F05F08F02","SI56263300012039086")),s(new a("SK",24,"F04F06F10","SK3112000000198742637541")),s(new a("SM",27,"U01F05F05A12","SM86U0322509800000000270100")),s(new a("TN",24,"F02F03F13F02","TN5910006035183598478831")),s(new a("TR",26,"F05A01A16","TR330006100519786457841326")),s(new a("VG",24,"U04F16","VG96VPVG0000012345678901")),s(new a("AO",25,"F21","AO69123456789012345678901")),s(new a("BF",27,"F23","BF2312345678901234567890123")),s(new a("BI",16,"F12","BI41123456789012")),s(new a("BJ",28,"F24","BJ39123456789012345678901234")),s(new a("CI",28,"U01F23","CI17A12345678901234567890123")),s(new a("CM",27,"F23","CM9012345678901234567890123")),s(new a("CV",25,"F21","CV30123456789012345678901")),s(new a("DZ",24,"F20","DZ8612345678901234567890")),s(new a("IR",26,"F22","IR861234568790123456789012")),s(new a("JO",30,"A04F22","JO15AAAA1234567890123456789012")),s(new a("MG",27,"F23","MG1812345678901234567890123")),s(new a("ML",28,"U01F23","ML15A12345678901234567890123")),s(new a("MZ",25,"F21","MZ25123456789012345678901")),s(new a("QA",29,"U04A21","QA30AAAA123456789012345678901")),s(new a("SN",28,"U01F23","SN52A12345678901234567890123")),s(new a("UA",29,"F25","UA511234567890123456789012345"));var l=/[^a-zA-Z0-9]/g,d=/(.{4})(?!$)/g;function c(e){return"string"==typeof e||e instanceof String}e.isValid=function(e){if(!c(e))return!1;e=this.electronicFormat(e);var t=o[e.slice(0,2)];return!!t&&t.isValid(e)},e.toBBAN=function(e,t){void 0===t&&(t=" "),e=this.electronicFormat(e);var n=o[e.slice(0,2)];if(!n)throw new Error("No country with code "+e.slice(0,2));return n.toBBAN(e,t)},e.fromBBAN=function(e,t){var n=o[e];if(!n)throw new Error("No country with code "+e);return n.fromBBAN(this.electronicFormat(t))},e.isValidBBAN=function(e,t){if(!c(t))return!1;var n=o[e];return n&&n.isValidBBAN(this.electronicFormat(t))},e.printFormat=function(e,t){return void 0===t&&(t=" "),this.electronicFormat(e).replace(d,"$1"+t)},e.electronicFormat=function(e){return e.replace(l,"").toUpperCase()},e.countries=o}(t)},"1Tla":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomSelect=t.handleKeyDown=t.checkForNewSelection=t.reducer=t.noopAction=t.onValidKeyDown=t.onKeyDown=t.changeHighlightedIndex=t.changeSelectedIndex=t.closeSelect=t.checkForBlur=t.toggleSelect=t.initialState=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("EIRz"),l=n("Tvaj"),d=n("Z6GA"),c=n("ci1u"),u=n("uA/L"),f=n("4RZc"),h=n("Z5jf"),p=n("X2U3");var m=t.initialState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{isOpen:!1,currentIndex:e,highlightedIndex:e,isKeySelectionEngaged:!1}},g=t.toggleSelect=function(){return{type:"TOGGLE_SELECT"}},v=t.checkForBlur=function(e){return{type:"ON_BLUR",currentTarget:e.currentTarget}},_=t.closeSelect=function(){return{type:"CLOSE_SELECT"}},y=t.changeSelectedIndex=function(e,t,n){return{type:"CHANGE_SELECTED_INDEX",e:e,newSelectedIndex:t,trackingId:n}},b=t.changeHighlightedIndex=function(e){return{type:"CHANGE_HIGHLIGHTED_INDEX",newHighlightedIndex:e}},w=t.onKeyDown=function(e,t){return{type:"ON_KEYDOWN",options:e,e:t}},E=t.onValidKeyDown=function(e,t){return{type:"ON_VALID_KEYDOWN",keyCode:e,options:t}},C=t.noopAction=function(){return{type:"NOOP"}},k=(t.reducer=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(),n=arguments[1];switch(n.type){case"TOGGLE_SELECT":var i=t.isOpen?A:T;return(0,s.loop)(r({},t,{isOpen:!t.isOpen,highlightedIndex:t.currentIndex}),s.Cmd.run(i,{args:[e]}));case"CLOSE_SELECT":return(0,s.loop)(r({},t,{isOpen:!1}),s.Cmd.run(A,{args:[e]}));case"ON_BLUR":return(0,s.loop)(t,s.Cmd.run(D,{args:[n.currentTarget],successActionCreator:_}));case"CHANGE_SELECTED_INDEX":var a=k(t,n.newSelectedIndex),o=a.currentIndex!==t.currentIndex?s.Cmd.run(R,{args:[e,n.trackingId]}):s.Cmd.none;return(0,s.loop)(a,s.Cmd.batch([s.Cmd.run(x,{args:[n.e]}),o]));case"ON_KEYDOWN":return(0,s.loop)(t,s.Cmd.action(I(n.e,t.isOpen,n.options)));case"ON_VALID_KEYDOWN":return S(t,n.keyCode,n.options);case"CHANGE_HIGHLIGHTED_INDEX":return r({},t,{highlightedIndex:n.newHighlightedIndex});case"NOOP":default:return t}}},t.checkForNewSelection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.highlightedIndex;return t!==e.currentIndex?r({},e,{currentIndex:t,isOpen:!1,isKeySelectionEngaged:!1}):r({},e,{isOpen:!1,isKeySelectionEngaged:!1})}),S=t.handleKeyDown=function(e,t,n){if((0,l.isLetter)(t)){var i=n.findIndex(function(e){return e.label.charAt(0).toUpperCase().charCodeAt(0)==t});return r({},e,{currentIndex:i,highlightedIndex:i,isKeySelectionEngaged:!0})}switch(t){case l.SPACE:return e.isOpen?k(e):r({},e,{isOpen:!0});case l.ENTER:return e.isOpen?k(e):r({},e);case l.ESC:return r({},e,{isOpen:!1,highlightedIndex:e.currentIndex,isKeySelectionEngaged:!1});case l.UP:var a=e.highlightedIndex-1,o=Math.max(a,0);return r({},e,{highlightedIndex:o,isKeySelectionEngaged:!0});case l.DOWN:var s=n.length-1,d=e.highlightedIndex+1,c=Math.min(d,s);return r({},e,{highlightedIndex:c,isKeySelectionEngaged:!0});default:return e}},T=function(e){(0,f.track)("Opened Select",{context:e})},A=function(e){(0,f.track)("Closed Select",{context:e})},R=function(e,t){(0,f.track)("Selected Item",{context:e,id:t})},x=function(e){e.stopPropagation()},I=function(e,t,n){var i=[l.ENTER,l.SPACE,l.ESC,l.DOWN,l.UP].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l.LETTERS));return e.which===l.TAB&&t?(e.preventDefault(),C()):i.includes(e.which)?(e.preventDefault(),E(e.which,n)):C()},D=(0,d.wait)(0,function(e){return e.contains(document.activeElement)?Promise.reject("error"):Promise.resolve()}),N=(t.CustomSelect=function(e){var t=e.theme,n=void 0===t?p.defaultTheme:t,i=e.atoms,a=void 0===i?[]:i,s=e.placeholder,l=e.state,c=e.onStateChange,f=e.onBlur,h=e.options,m=e.small,_=e.titleString,E=e.toLabel,C=e.toId,k=e.hasErrors,S=void 0!==k&&k,T=l.isOpen,A=l.currentIndex,R=l.highlightedIndex,x=m?"h7":"h9",I=m?"body-100":"subhead-300",D=m?"py1":"py2",P=m?"px2 px3-sm":"px3",L=(0,d.computedAtoms)("absolute","w100p","shadow-3","border","shadow-card","scroll-y","max-h50","p1","bg-white","mt1","mb10","rounded","z-dropdown-3","border-box",I,a,"border-"+n["primary-light"],!T&&"visually-hide"),O=null!==A?h[A]:null,M=h.map(function(e,t){var i=A===t,a=R===t;return o.default.createElement(j,r({onOptionSelect:(0,d.compose)(c,y),onOptionHover:(0,d.compose)(c,b)},{option:e,key:t,index:t,isCurrent:i,isHighlighted:a,isOpen:T,toLabel:E,toId:C,theme:n,typeSize:I,yPaddingClass:D}))}),F=(0,d.compose)(c,v,function(e){return f&&f(),e});return o.default.createElement("div",{className:"navy-700"},_&&o.default.createElement(u.Label,{type:"body-100",weight:"medium",atoms:["mb2","soft-black"],"aria-hidden":"true"},_),o.default.createElement("div",{role:"listbox","aria-labelledby":"custom-select-heading-label",onBlur:F,onKeyDown:(0,d.compose)(c,function(e){return w(h,e)}),className:"relative w100p pointer input-keyboard-focusable-"+n["primary-light"]},o.default.createElement(N,{onDropdownContainerClick:(0,d.compose)(c,g),label:O?E(O):s,color:O?"soft-black":"dark-grey-500",heightSize:x,typeSize:I,yPaddingClass:D,xPaddingClasses:P,theme:n,hasErrors:S}),o.default.createElement("ul",{className:L,role:"presentation"},M)))},function(e){var t=e.color,n=e.heightSize,i=e.hasErrors,r=e.label,a=e.onDropdownContainerClick,s=e.theme,l=e.typeSize,f=e.yPaddingClass,p=e.xPaddingClasses,m=(0,d.computedAtoms)("shadow-hover","border",i?"border-red-400":"border-transparent","hover-border-"+s["primary-light"],"transition-all","rounded",f,p,"bg-white flex","items-center","shadow-2",n,"input-keyboard-focusable-"+s["primary-light"]);return o.default.createElement("div",{className:m,onClick:a,"aria-hidden":"true","aria-label":(0,h.boundT)("components.custom_select.select_an_option"),tabIndex:"0"},o.default.createElement(u.Span,{id:"custom-select-heading-label",type:l,atoms:["grow-1","text-truncate","pr1","book",t]},r),o.default.createElement(c.Icon,{name:"delta-down",size:"10",atoms:["flex-noshrink"]}))}),j=function(e){var t=e.option,n=e.index,i=e.isOpen,r=e.onOptionSelect,a=e.onOptionHover,s=e.isCurrent,l=e.isHighlighted,d=e.toLabel,f=e.toId,h=e.theme,p=e.typeSize,m=e.yPaddingClass,g=["px2 flex items-center transition-all lh3 soft-black"].concat(l?["bg-grey-400"]:[]).concat([m]).join(" ");return o.default.createElement("li",{role:"option",tabIndex:i?"0":"-1","aria-selected":s,onClick:function(e){return r(e,n,f(t))},onMouseOver:function(){return a(n)},className:g,onKeyDown:function(){},onFocus:function(){}},o.default.createElement(u.Span,{id:"custom-select-heading-label",type:p,atoms:["mr2"]},d(t)),s&&o.default.createElement("span",{className:"circle flex-noshrink h3 w3 bg-"+h["primary-accent"]+" inline-flex justify-center items-center"},o.default.createElement(c.Icon,{name:"check",size:"9",atoms:["relative","fill-white"]})))}},"1Vzf":function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("h8C7"),n("LNuh"),(0,r.default)(".js-asset-uploads",function(e){var t=e.find(".js-asset-uploads--tracks");e.on("ksr_uploader:uploaded",function(e,n){var r=(0,i.default)(this).data("subtitles-path");r&&0!==t.length&&(t.empty(),i.default.ajax({url:r,method:"GET",data:{captionable_id:n.id,captionable_type:n.type}}).success(function(e){t.html(e.html)}))}),e.on("ksr_uploader:remove",function(){t.empty()})}),(0,i.default)(".js-asset-uploads--tracks").livequery(function(){(0,i.default)(this).videoTracksEditor()})},"1gbM":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("click",".location_list .big_locations li",function(){window.location=(0,a.default)(this).find(".name a").attr("href")})})},"1h7p":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i},o=n("kVy0");t.Time=function(e){var t=e.format,n=e.date;return a.default.createElement("time",{dateTime:n},(0,o.format)(t,n))}},"1i/z":function(e,t,n){var i,r,a,o;o=function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test;var s=/\S/;function l(e){return!function(e,t){return o.call(e,t)}(s,e)}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,u=/\s+/,f=/\s*=/,h=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function v(){this.cache={}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},m.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var r,o,s=this,l=!1;s;){if(e.indexOf(".")>0)for(t=s.view,r=e.split("."),o=0;null!=t&&o<r.length;)o===r.length-1&&(l=a(t,r[o])),t=t[r[o++]];else t=s.view[e],l=a(s.view,e);if(l)break;s=s.parent}n[e]=t}return i(t)&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(t,i){var a=this.cache,o=a[t];return null==o&&(o=a[t]=function(t,i){if(!t)return[];var a,o,s,d=[],g=[],v=[],_=!1,y=!1;function b(){if(_&&!y)for(;v.length;)delete g[v.pop()];else v=[];_=!1,y=!1}function w(e){if("string"==typeof e&&(e=e.split(u,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(r(e[0])+"\\s*"),o=new RegExp("\\s*"+r(e[1])),s=new RegExp("\\s*"+r("}"+e[1]))}w(i||e.tags);for(var E,C,k,S,T,A,R=new m(t);!R.eos();){if(E=R.pos,k=R.scanUntil(a))for(var x=0,I=k.length;x<I;++x)l(S=k.charAt(x))?v.push(g.length):y=!0,g.push(["text",S,E,E+1]),E+=1,"\n"===S&&b();if(!R.scan(a))break;if(_=!0,C=R.scan(p)||"name",R.scan(c),"="===C?(k=R.scanUntil(f),R.scan(f),R.scanUntil(o)):"{"===C?(k=R.scanUntil(s),R.scan(h),R.scanUntil(o),C="&"):k=R.scanUntil(o),!R.scan(o))throw new Error("Unclosed tag at "+R.pos);if(T=[C,k,E,R.pos],g.push(T),"#"===C||"^"===C)d.push(T);else if("/"===C){if(!(A=d.pop()))throw new Error('Unopened section "'+k+'" at '+E);if(A[1]!==k)throw new Error('Unclosed section "'+A[1]+'" at '+E)}else"name"===C||"{"===C||"&"===C?y=!0:"="===C&&w(k)}if(A=d.pop())throw new Error('Unclosed section "'+A[1]+'" at '+R.pos);return function(e){for(var t,n=[],i=n,r=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":i.push(t),r.push(t),i=t[4]=[];break;case"/":r.pop()[5]=t[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],r=0,a=e.length;r<a;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(g))}(t,i)),o},v.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof g?t:new g(t);return this.renderTokens(i,r,n,e)},v.prototype.renderTokens=function(e,t,n,i){for(var r,a,o,s="",l=0,d=e.length;l<d;++l)o=void 0,"#"===(a=(r=e[l])[0])?o=this.renderSection(r,t,n,i):"^"===a?o=this.renderInverted(r,t,n,i):">"===a?o=this.renderPartial(r,t,n,i):"&"===a?o=this.unescapedValue(r,t):"name"===a?o=this.escapedValue(r,t):"text"===a&&(o=this.rawValue(r)),void 0!==o&&(s+=o);return s},v.prototype.renderSection=function(e,t,r,a){var o=this,s="",l=t.lookup(e[1]);if(l){if(n(l))for(var d=0,c=l.length;d<c;++d)s+=this.renderTokens(e[4],t.push(l[d]),r,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],t.push(l),r,a);else if(i(l)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,a.slice(e[3],e[5]),function(e){return o.render(e,t,r)}))&&(s+=l)}else s+=this.renderTokens(e[4],t,r,a);return s}},v.prototype.renderInverted=function(e,t,i,r){var a=t.lookup(e[1]);if(!a||n(a)&&0===a.length)return this.renderTokens(e[4],t,i,r)},v.prototype.renderPartial=function(e,t,n){if(n){var r=i(n)?n(e[1]):n[e[1]];return null!=r?this.renderTokens(this.parse(r),t,n,r):void 0}},v.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},v.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},v.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var _=new v;return e.clearCache=function(){return _.clearCache()},e.parse=function(e,t){return _.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(r=e)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return _.render(e,t,i)},e.to_html=function(t,n,r,a){var o=e.render(t,n,r);if(!i(a))return o;a(o)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return d[e]})},e.Scanner=m,e.Context=g,e.Writer=v,e},"object"==typeof t&&t&&"string"!=typeof t.nodeName?o(t):(r=[t],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a))},"1olO":function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return i.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var i={},r=[];for(var a in e)t.hasOwnProperty(a)?r.length&&(i[a]=r,r=[]):r.push(a);var o=void 0,s={};for(var l in t){if(i.hasOwnProperty(l))for(o=0;o<i[l].length;o++){var d=i[l][o];s[i[l][o]]=n(d)}s[l]=n(l)}for(o=0;o<r.length;o++)s[r[o]]=n(r[o]);return s};var i=n("GiK3")},"1sZt":function(e,t,n){"use strict";var i,r,a,o=u(n("l/Rs")),s=u(n("shXp")),l=u(n("hBlz")),d=n("ZG75"),c=u(n("WO7S"));function u(e){return e&&e.__esModule?e:{default:e}}i=d.ApplicationModel.extend(),r={},a={},void 0!==window.project_profile_color_defaults&&(a=(0,c.default)(window.project_profile_color_defaults)),i.prototype.COLOR_DEFAULTS=a,i.prototype.publishSuccess=function(){this.syncDiscardState(),this.get("feature_image_attributes._destroy")&&this.replace("feature_image_attributes",{}),this.get("background_image_attributes._destroy")&&this.replace("background_image_attributes",{})},i.prototype.syncDiscardState=function(){this.setDiscardState(this.data)},i.prototype.setDiscardState=function(e){r=o.default.extend(!0,{},e)},i.prototype.discard=function(){this.set(r,{overwrite:!0})},i.prototype.tryFixValidationErrors=function(e){var t=this,n=(e=e||{}).default_url;["name","blurb","link_text","link_url"].forEach(function(e){var n=t.get(e);n&&t.set(e,n.trim())});var i=this.get("link_url"),r=this.get("link_text");if(!i&&/^http|^www/.test(r)){var a=this.validateURL(r);this.set("link_url",a),this.set("link_text",this.trimURL(a))}else!i&&r?this.set("link_url",n):i&&!/^http/.test(i)&&this.set("link_url","http://"+i)},i.prototype.validateURL=function(e){return/^http/.test(e)?e:"http://"+e},i.prototype.trimURL=function(e){return new l.default(e).hostname()},i.prototype.validate=function(){var e={};return""===this.get("name").trim()&&(e.name=!0),e},i.prototype.data_for_rails=function(){return s.default.reduce(this.data,function(e,t,n){return e["project_profile["+n+"]"]=t,e},{})},i.set_computed_value("background_image_opacity_percent",function(){return 100*this.background_image_opacity},{changes_on:["background_image_opacity"]}),i.set_computed_value("text_color_or_default",function(){return this.text_color?"#"+this.text_color:"#"+i.prototype.COLOR_DEFAULTS.text_color},{changes_on:["text_color"]}),i.set_computed_value("link_text_color_or_default",function(){return this.link_text_color?"#"+this.link_text_color:"#"+i.prototype.COLOR_DEFAULTS.link_text_color},{changes_on:["link_text_color"]}),i.set_computed_value("background_color_or_default",function(){return""!==this.background_color?"#"+this.background_color:this.background_image_attributes.id&&!this.background_image_attributes._destroy?"#"+i.prototype.COLOR_DEFAULTS.background_color_with_image:"#"+i.prototype.COLOR_DEFAULTS.background_color},{changes_on:["background_image_attributes","background_color"]}),i.set_computed_value("link_background_color_or_default",function(){var e=this.link_background_color;return e?"#"+e:"#"+i.prototype.COLOR_DEFAULTS.link_background_color},{changes_on:["link_background_color"]}),window.CurrentProjectProfile=i},"1w/n":function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("shXp")),a=l(n("8NzR")),o=l(n("+bVi")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,a.default)("body#discover_index",function(e){var t,n=e.find(".js-adjectives-container"),a=e.find(".js-adjectives-list"),l=e.find(".slides"),d=e.find(".js-potd"),c=640,u=!1,f=!0,h=6;function p(t){t=t||{},u=!0,l.cycle({autoHeight:0,timeout:0,slides:".slide",speed:600,fx:"scrollHorz",startingSlide:t.starting_slide||l.children().length-1,next:e.find(".js-next"),prev:e.find(".js-previous"),allowWrap:!1,log:!1})}function m(){u=!1,l.cycle("destroy")}function g(){var e=(0,i.default)(window).width();u&&e<c?m():!u&&e>=c&&p()}function v(){var e=a.find(".js-adjective").eq(h);a.find(".js-adjective").removeClass("active"),e.addClass("active"),n.css({height:e.outerHeight(!0),width:e.find("span").width()}),a.css({top:-e.position().top})}l.on("cycle-before",function(e,t){f&&2===t.nextSlide&&i.default.ajax({url:d.data("potds"),data:{page:parseInt(l.children().length/10+1,10)},dataType:"json",success:function(e){f=10===e.results.length,m();var t=l.children().length;r.default.each(e.results,function(e){l.prepend(e)}),p({starting_slide:l.children().length-t+2})}})}),l.on("cycle-next",function(e,t){(0,s.track)("Discover POTD Next Clicked",{discover_potd_slide:l.children().length-1-t.nextSlide})}),l.on("cycle-prev",function(e,t){(0,s.track)("Discover POTD Previous Clicked",{discover_potd_slide:t.slideCount-1-t.nextSlide})}),o.default["not-touchable"]&&skrollr.init({forceHeight:!1}),(0,i.default)(document).resize(function(){g(),v()}),window.setTimeout(function(){n.removeClass("opacity-0"),v()},500),g(),clearInterval(t),t=setInterval(function(){(h+=1)>=a.find(".js-adjective").length&&(h=0),v()},5e3)})},"2/5V":function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".refund_checkouts_form",function(e){e.on("change","select#refund_checkout_amount",function(){var e=(0,i.default)(this),t=e.closest("li").find(".refund_amount_wrapper"),n=t.find("input#refund_checkout_amount"),r=!1;""===e.val()?(t.addClass("partial"),r=!0):t.removeClass("partial"),n.prop("disabled",!n.is(":visible")),r&&n.focus()}).trigger("change"),-1===i.default.inArray((0,i.default)("input#refund_checkout_amount").val(),[(0,i.default)("select#refund_checkout_amount").val(),""])&&e.find("select#refund_checkout_amount").val("").trigger("change")})},"2OQB":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projArrayToObject=t.reducer=t.loadProjectData=t.loadContainerData=t.clickedWatching=t.initialState=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("EIRz"),a=n("wWf7");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=t.initialState={byId:{}},l=(t.clickedWatching=function(e){return{type:"CLICKED_WATCHING",project:e}},t.loadContainerData=function(e,t){return{type:"LOAD_CONTAINER_DATA",container:e,projectIds:t}},t.loadProjectData=function(e){return{type:"LOAD_PROJECT_DATA",projects:e}},t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"LOAD_PROJECT_DATA":return i({},e,{byId:i({},e.byId,l(t.projects))});case"LOAD_CONTAINER_DATA":return i({},e,o({},t.container,t.projectIds));case"CLICKED_WATCHING":return(0,r.loop)(e,r.Cmd.action((0,a.initiateWatchingUpdate)(t.project)));case"WATCHING_UPDATE_SUCCESS":var n=t.pid;return i({},e,{byId:i({},e.byId,o({},n,i({},e.byId[n],{isWatched:t.isWatching})))});case"NOOP":default:return e}},function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return e[t.pid]=t,e},{})});t.projArrayToObject=l},"2TxY":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_multi_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},t),e(this).each(function(){var n=e(this),i=n.find(".field_with_icon"),r=i.find("input.text"),a=n.find("ol.search-selected,ul.search-selected"),o=r.siblings(".ss-search"),s=n.find(".template"),l=t;l.url=t.url||n.closest("form").attr("action"),r.livesearch_input_dropdown(l),t.sortable&&a.sortable({containment:"document",axis:"y",update:function(){a.find("input.position").each(function(t){e(this).val(t)})}}),n.addClass("search"),a.find("li").each(function(){var n,i;n=e(this),i=e('<a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a>"),n.append(i)}),n.on("click","a.cancel-link",function(t){var n=e(this).closest("li"),i=n.find(".destroy");t.preventDefault(),n.fadeOut(function(){i.length?i.val("1"):n.remove()})}),r.on("livesearch:searching",function(){o.removeClass("ss-search").addClass("icon-loading-small")}),r.on("livesearch:results livesearch:ajax_error",function(){o.removeClass("icon-loading-small").addClass("ss-search")}),n.on("livesearch:selected",function(n,o){if(o){var l=s.clone_form_template();l.find("input.destroy").val(!1),l.find(".name").html(o[0]),l.find(".value").val(o[1]),a.append(l),t.sortable&&a.find("input.position").each(function(t){e(this).val(t)}),r.val(""),i.siblings(".results").slideUp(),r.trigger("livesearch:cancel")}})})}}(i)},"2fYv":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("UQDk"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_banners__social_prompt",function(e){var t=e.data("url");t&&i.default.ajax({url:(0,a.default)(t),type:"get",success:function(t){var n=t.remotely_followed_count;n>0&&(e.find(".js-friend-count").html(n),e.removeClass("banner--is-hidden"))}})})},"3+HK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.checkAndInitApplePay=function(e,t,n){return{type:"CHECK_INIT_APPLE_PAY",dispatch:e,window:t,stripeQualified:n}},t.updateApplePayCapable=function(e){return{type:"REWARD_UPDATE_APPLE_PAY",newValue:e}},t.onApplePayCheckoutFailure=function(e){return{type:"APPLE_PAY_CHECKOUT_FAILURE",err:e}},t.onApplePayRequestFailure=function(e){return{type:"APPLE_PAY_REQ_FAILURE",err:e}},t.onApplePayTrackingError=function(e){return{type:"APPLE_PAY_TRACKING_ERROR",err:e}},t.onApplePayVendorErrors=function(e){return{type:"APPLE_PAY_VENDOR_ERROR",err:e}}},"31kD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExploreHeader=void 0;var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i},o=n("Z5jf");t.ExploreHeader=function(e){var t=e.projectCount;return a.default.createElement("h3",{className:"normal mb3 mb5-sm ml3 title clearfix pt2",id:"js-past-projects-header"},(0,o.boundT)("discovery.advanced.Explore"),a.default.createElement("b",{className:"count ksr-green-500"}," ",(0,o.boundT)("discovery.advanced.Past_Projects",{count:t})))}},"3Vd3":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("obSy"),(0,a.default)(".editor").on("wym-postIframeInitialization",function(){var e,t=(0,a.default)(this),n=a.default.wymeditors(t.data("wym_index"));(e=t.closest("fieldset").find(".character-counter")).length&&t.on("wym-postIframeInitialization",function(){var i=(0,a.default)(n._doc),r=parseInt(e.data("maxlength"),10);function o(){var t=n.html(),i=(0,a.default)("<div>"+t+"</div>").text();e.text(r-i.length)}i.on("keyup paste cut",o),t.on("change",function(){setTimeout(o,100)})})})},"3e15":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toggleSelect=function(){return{type:"TOGGLE_SELECT"}},t.onBlur=function(){return{type:"ON_BLUR"}},t.closeSelect=function(){return{type:"CLOSE_SELECT"}},t.changeSelectedIndex=function(e,t){return{type:"CHANGE_SELECTED_INDEX",newSelectedIndex:e,trackingId:t}},t.changeHighlightedIndex=function(e){return{type:"CHANGE_HIGHLIGHTED_INDEX",newHighlightedIndex:e}},t.onKeyDown=function(e,t){return{type:"ON_KEYDOWN",keyCode:e,options:t}},t.onListScroll=function(){return{type:"ON_LIST_SCROLL"}},t.noopAction=function(){return{type:"NOOP"}},t.selectedValueUpdated=function(e){return{type:"SELECT_ON_VALUE_UPDATE",value:e}}},"3tbO":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("submit",".NS_backer_backing_notes__form",function(){var e=(0,a.default)(this);e.trigger("backer_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})},"3txR":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("yYdC");var o=n("4RZc");(0,a.default)(function(){var e,t,n,i,r,s=(0,a.default)(".js-mega-footer");s.length&&(t=0,n=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],i=0,(r=(0,a.default)("span.scissors",s)).click(function(){e||(e=(0,a.default)(".js-mega-footer__content").width()/3),t+=1,function e(t){t>9||(r.removeClass(n[i]),(i+=1)===n.length&&(i=0),r.addClass(n[i]),setTimeout(function(){e(t+1)},100))}(0),r.animate({marginLeft:e*t},1e3,function(){3===t&&(r.hide(),s.height(s.height()),s.addClass("gone"),(0,a.default)("html").addClass("gone"),(0,a.default)(".js-mini-footer").hide(),s.find(".js-mega-footer__content").animate({marginTop:[s.height(),"easeInOutExpo"],opacity:0},1e3,function(){(0,a.default)(".js-mega-footer__newsletter-signup").fadeIn()}))})}),(0,a.default)(document).on("change",".js-change-language",function(e){var t=e.target.value,n=(0,a.default)("body").attr("id");(0,o.track)("Selected Chosen Language",{property:t,context:n}),(0,a.default)(this).submit()}),(0,a.default)(document).on("change",".js-change-currency",function(e){var t=(0,a.default)(this),n=e.target.value,i=(0,a.default)("body").attr("id");(0,a.default)("#currency-modal").modal_dialog({event:e}),(0,a.default)(".currency-submit").on("click",function(){(0,o.track)("Selected Chosen Currency",{property:n,context:i}),t.submit()})}))})},"3w6W":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("+bVi"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("#NS_discover__categories",function(e){var t,n,r,o=e.hasClass("refresh_enabled");function s(){var t;(0,i.default)(window).width()>599?(t=o?n.find(".js-subcategories.block"):e.find("ul.expanded")).length?e.height(Math.max(r.height(),t.height())):e.height(r.height()):e.css({height:""})}o?(t=e.find(".js-categories"),n=e.find(".js-subcategories_container"),r=e.find(".js-root-categories")):(t=e.find(".categories"),n=e.find(".subcategories_container"),r=e.find(".root-categories")),t.find("> li > a").on("click",function(r){var l=(0,i.default)(this),d=l.closest("li"),c=d.data("category")||{},u=c.id||0,f=e.find("#category_"+u+"_subcategories");o?(t.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),l.addClass("ksr-green-500").removeClass("black")):(t.find(".selected").removeClass("selected"),d.addClass("selected")),o?(n.find(".js-subcategories.block").removeClass("block").addClass("display-none"),f.addClass("block").removeClass("display-none")):(n.find("ul.expanded").removeClass("expanded"),f.addClass("expanded")),f.length?o?((0,i.default)(window).width()>599&&e.css({width:"600px"}),n.removeClass("o-none"),f.find("li.js-subcategory > a").first().trigger("click")):(e.addClass("expanded"),f.find("li.subcategory > a").first().trigger("click")):((0,i.default)(document).trigger("discovery:categories:changed",c),e.trigger("ksr_popover:close"),o?(e.css({width:""}),n.addClass("o-none")):e.removeClass("expanded")),a.default["not-mobile"]&&s(),r.preventDefault()}),n.find("li > a").on("click",function(t){var n=(0,i.default)(this),r=n.closest("li"),a=n.closest("ul"),s=r.data("category");o?(a.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),n.addClass("ksr-green-500").removeClass("black")):(a.find(".selected").removeClass("selected"),r.addClass("selected")),(0,i.default)(document).trigger("discovery:categories:changed",s),t.originalEvent?e.trigger("ksr_popover:close"):e.trigger("ksr_popover:reposition"),t.preventDefault()}),(0,i.default)(document).on("ksr_popover:opened",function(t,r){if(r.$popover.is(e)){if(o)e.find(".js-subcategories.block").length&&(n.removeClass("o-none"),(0,i.default)(window).width()>599?e.css({width:"600px"}):e.css({width:""}));a.default["not-mobile"]&&s()}}),(0,i.default)(document).on("discovery:sentence:changed",function(t,i){i.category_id||(o?(e.css({width:""}),n.find(".js-subcategories.block").removeClass("block").addClass("display-none"),e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),e.find("li:first a").addClass("ksr-green-500").removeClass("black")):(e.removeClass("expanded").find(".selected, .expanded").removeClass("selected expanded"),e.find("li:first").addClass("selected")))}),(0,i.default)(document).on("discovery:categories:load_sample",function(t,n){var i=(n.category||{}).id;e.find("#category_"+i).trigger("click")})})},"3zBZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=t.USER_HAS_NOT_FLAGGED_PROJECT=t.USER_HAS_FLAGGED_PROJECT=t.FLAGGING_FETCH_FAILED=t.FETCHING_FLAGGING=t.FLAGGING_UNKNOWN=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("EIRz"),a=n("O2m/"),o=n("xQXO"),s=n("Gks7"),l=t.FLAGGING_UNKNOWN="unknown",d=t.FETCHING_FLAGGING="fetching_flagging",c=t.FLAGGING_FETCH_FAILED="flagging_fetch_failed",u=t.USER_HAS_FLAGGED_PROJECT="user_has_flagged",f=t.USER_HAS_NOT_FLAGGED_PROJECT="user_has_not_flagged",h=t.initialState={flaggingStatus:l,hasBackedProject:!1,projectState:null};t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1];switch(t.type){case"INIT_FLAGGING":return(0,r.loop)(i({},e,{flaggingStatus:d}),r.Cmd.run(a.fetchProjectFlagging,{successActionCreator:o.flaggingFetchSuccessAction,failActionCreator:o.flaggingFetchFailAction,args:[t.projectSlug]}));case"FLAGGING_FETCH_SUCCESS":if(!t.response.data.project)return(0,r.loop)(e,r.Cmd.action((0,o.flaggingFetchFailAction)(t.response.errors)));var n=t.response.data.project,l=n.backing,p=n.flagging,m=n.state;return i({},e,{flaggingStatus:p?u:f,hasBackedProject:!!l,projectState:m});case"FLAGGING_FETCH_FAIL":return(0,r.loop)(i({},e,{flaggingStatus:c}),r.Cmd.run(s.notifyFetchFailure));default:return e}}},"452R":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n,i=e.console||void 0,r=e.document,a=e.navigator,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,d=e.clearInterval,c=e.JSON,u=e.alert,f=e.History=e.History||{},h=e.history;try{n=e.sessionStorage||!1,sessionStorage.setItem("TEST","1"),sessionStorage.removeItem("TEST")}catch(e){n=!1}if(c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode,void 0!==f.init)throw new Error("History.js Core has already been loaded...");f.init=function(e){return void 0!==f.Adapter&&(void 0!==f.initCore&&f.initCore(),void 0!==f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(t){if(void 0!==f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||r.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var e,t=f.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)d(t[e]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(){var e,t,n,a,o,s=!(void 0===i||void 0===i.log||void 0===i.log.apply),l=r.getElementById("log");for(s?(e=(a=Array.prototype.slice.call(arguments)).shift(),void 0!==i.debug?i.debug.apply(i,[e,a]):i.log.apply(i,[e,a])):e="\n"+arguments[0]+"\n",t=1,n=arguments.length;t<n;++t){if("object"==typeof(o=arguments[t])&&void 0!==c)try{o=c.stringify(o)}catch(e){}e+="\n"+o+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||u(e),!0},f.getInternetExplorerMajorVersion=function(){return f.getInternetExplorerMajorVersion.cached=void 0!==f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},f.isInternetExplorer=function(){return f.isInternetExplorer.cached=void 0!==f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion())},f.options.html4Mode?f.emulated={pushState:!0,hashChange:!0}:f.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(a.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(a.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.cloneObject=function(e){var t,n;return e?(t=c.stringify(e),n=c.parse(t)):n={},n},f.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},f.getBaseHref=function(){var e=r.getElementsByTagName("base"),t="";return 1===e.length&&(t=e[0].href.replace(/[^\/]+$/,"")),(t=t.replace(/\/+$/,""))&&(t+="/"),t},f.getBaseUrl=function(){return f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl()},f.getPageUrl=function(){return((f.getState(!1,!1)||{}).url||f.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},f.getBasePageUrl=function(){return f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},f.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===i?f.getRootUrl()+e.replace(/^\/+/,""):"#"===i?f.getPageUrl().replace(/#.*/,"")+e:"?"===i?f.getPageUrl().replace(/[\?#].*/,"")+e:t?f.getBaseUrl()+e.replace(/^(\.\/)+/,""):f.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(e){var t=e,n=f.getBaseUrl(),i=f.getRootUrl();return f.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),f.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(e){return(e=e||r).URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=f.getLastSavedState();return!n&&t&&(n=f.createStateObject()),e&&((n=f.cloneObject(n)).url=n.cleanUrl||n.url),n},f.getIdByState=function(e){var t,n=f.extractId(e.url);if(!n)if(t=f.getStateString(e),void 0!==f.stateToId[t])n=f.stateToId[t];else if(void 0!==f.store.stateToId[t])n=f.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==f.idToState[n]||void 0!==f.store.idToState[n];);f.stateToId[t]=n,f.idToState[n]=e}return n},f.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),(t={}).normalized=!0,t.title=e.title||"",t.url=f.getFullUrl(e.url?e.url:f.getLocationHref()),t.hash=f.getShortUrl(t.url),t.data=f.cloneObject(e.data),t.id=f.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!f.isEmptyObject(t.data),(t.title||n)&&!0!==f.options.disableSuid&&(t.hash=f.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=f.getFullUrl(t.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},f.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=f.normalizeState(i)},f.getStateById=function(e){return e=String(e),f.idToState[e]||f.store.idToState[e]||void 0},f.getStateString=function(e){var t;return t={data:f.normalizeState(e).data,title:e.title,url:e.url},c.stringify(t)},f.getStateId=function(e){return f.normalizeState(e).id},f.getHashByState=function(e){return f.normalizeState(e).hash},f.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,(t=/(.*)\&_suid=([0-9]+)$/.exec(n))&&t[1]||e,(t?String(t[2]||""):"")||!1},f.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},f.extractState=function(e,t,n){var i,r,a=null;return t=t||!1,(i=f.extractId(e))&&(a=f.getStateById(i)),a||(r=f.getFullUrl(e),(i=f.getIdByUrl(r)||!1)&&(a=f.getStateById(i)),a||!t||f.isTraditionalAnchor(e)||(a=f.createStateObject(null,n||null,r))),a},f.getIdByUrl=function(e){return f.urlToId[e]||f.store.urlToId[e]||void 0},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||void 0},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||void 0},f.hasUrlDuplicate=function(e){var t;return(t=f.extractState(e.url))&&t.id!==e.id},f.storeState=function(e){return f.urlToId[e.url]=e.id,f.storedStates.push(f.cloneObject(e)),e},f.isLastSavedState=function(e){var t=!1;return f.savedStates.length&&(t=e.id===f.getLastSavedState().id),t},f.saveState=function(e){return!f.isLastSavedState(e)&&(f.savedStates.push(f.cloneObject(e)),!0)},f.getStateByIndex=function(e){return void 0===e?f.savedStates[f.savedStates.length-1]:e<0?f.savedStates[f.savedStates.length+e]:f.savedStates[e]},f.getCurrentIndex=function(){return f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(e){var t=f.getLocationHref(e);return f.getHashByUrl(t)},f.unescapeHash=function(e){var t=f.normalizeHash(e);return t=decodeURIComponent(t)},f.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},f.setHash=function(e,t){var n,i;return!1!==t&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:t}),!1):(f.busy(!0),(n=f.extractState(e,!0))&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==e&&(f.bugs.setHash?(i=f.getPageUrl(),f.pushState(null,null,i+"#"+e,!1)):r.location.hash=e),f)},f.escapeHash=function(t){var n=f.normalizeHash(t);return n=e.encodeURIComponent(n),f.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},f.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=f.unescapeHash(t)},f.setTitle=function(e){var t,n=e.title;n||(t=f.getStateByIndex(0))&&t.url===e.url&&(n=t.title),n||(n=f.options.initialTitle);try{r.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return r.title=n,f},f.queues=[],f.busy=function(e){if(void 0!==e?f.busy.flag=e:void 0===f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){s(f.busy.timeout);var t=function(){var e,n,i;if(!f.busy.flag)for(e=f.queues.length-1;e>=0;--e)0!==(n=f.queues[e]).length&&(i=n.shift(),f.fireQueueItem(i),f.busy.timeout=o(t,f.options.busyDelay))};f.busy.timeout=o(t,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(e){return e.callback.apply(e.scope||f,e.args||[])},f.pushQueue=function(e){return f.queues[e.queue||0]=f.queues[e.queue||0]||[],f.queues[e.queue||0].push(e),f},f.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),f.busy()?f.pushQueue(e):f.fireQueueItem(e),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(s(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(e){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=o(function(){return f.doubleCheckClear(),f.stateChanged||e(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var t=f.extractState(f.getLocationHref());if(!f.isLastSavedState(t))return t||f.createStateObject(),f.Adapter.trigger(e,"popstate"),f},f.back=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),h.go(-1),!0)},f.forward=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),h.go(1),!0)},f.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)f.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)f.back(t)}return f},f.emulated.pushState){var p=function(){};f.pushState=f.pushState||p,f.replaceState=f.replaceState||p}else f.onPopState=function(t,n){var i,r,a,o=!1;return f.doubleCheckComplete(),(r=f.getHash())?((a=f.extractState(r||f.getLocationHref(),!0))?f.replaceState(a.data,a.title,a.url,!1):(f.Adapter.trigger(e,"anchorchange"),f.busy(!1)),f.expectedStateId=!1,!1):((o=(i=f.Adapter.extractEventData("state",t,n)||!1)?f.getStateById(i):f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()))||(o=f.createStateObject(null,null,f.getLocationHref())),f.expectedStateId=!1,f.isLastSavedState(o)?(f.busy(!1),!1):(f.storeState(o),f.saveState(o),f.setTitle(o),f.Adapter.trigger(e,"statechange"),f.busy(!1),!0))},f.Adapter.bind(e,"popstate",f.onPopState),f.pushState=function(t,n,i,r){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:r}),!1;f.busy(!0);var a=f.createStateObject(t,n,i);return f.isLastSavedState(a)?f.busy(!1):(f.storeState(a),f.expectedStateId=a.id,h.pushState(a.id,a.title,a.url),f.Adapter.trigger(e,"popstate")),!0},f.replaceState=function(t,n,i,r){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:r}),!1;f.busy(!0);var a=f.createStateObject(t,n,i);return f.isLastSavedState(a)?f.busy(!1):(f.storeState(a),f.expectedStateId=a.id,h.replaceState(a.id,a.title,a.url),f.Adapter.trigger(e,"popstate")),!0};if(n){try{f.store=c.parse(n.getItem("History.store"))||{}}catch(e){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(e,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0,r.title))),n&&(f.onUnload=function(){var e,t,i;try{e=c.parse(n.getItem("History.store"))||{}}catch(t){e={}}for(t in e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{},f.idToState)f.idToState.hasOwnProperty(t)&&(e.idToState[t]=f.idToState[t]);for(t in f.urlToId)f.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=f.urlToId[t]);for(t in f.stateToId)f.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=f.stateToId[t]);f.store=e,f.normalizeStore(),i=c.stringify(e);try{sessionStorage.setItem("History.store",i)}catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR||1014===e.code)try{sessionStorage.length&&(sessionStorage.removeItem("History.store"),sessionStorage.setItem("History.store",i))}catch(e){}}},f.intervalList.push(l(f.onUnload,f.options.storeInterval)),f.Adapter.bind(e,"beforeunload",f.onUnload),f.Adapter.bind(e,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(l(f.safariStatePoll,f.options.safariPollInterval)),"Apple Computer, Inc."!==a.vendor&&"Mozilla"!==(a.appCodeName||"")||(f.Adapter.bind(e,"hashchange",function(){f.Adapter.trigger(e,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(e,"hashchange")})))},f.options&&f.options.delayInit||f.init()}}(window)},"45vE":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,n){var i=new RegExp(n.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),r=e.makeArray(arguments);return r.shift(),t.replace(i,function(t,n){var i,a,o,s,l=n.split(".");for(i=0;i<r.length;i++)if(o=r[i]){if(l.length>1)for(s=o,a=0;a<l.length;a++)o=s,s=s[l[a]]||n;else s=o[n];if(e.isFunction(s))return s.apply(o,r);if(void 0!==s&&null!==s&&s!=n)return s}return n})}})}(i)},"49v0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateApplePayCapable=t.toggleApplePayClasses=t.thanksPage=t.reducer=t.paymentCompletion=t.paddedString=t.onApplePayVendorErrors=t.onApplePayTrackingError=t.onApplePayRequestFailure=t.onApplePayCheckoutFailure=t.notify=t.initApplePay=t.finalizeCharge=t.createPledge=t.createApplePayCheckout=t.checkAndInitApplePay=t.checkApplePay=t.canMakePaymentsWithApplePayCard=t.buildRequest=void 0;var i=n("3+HK"),r=n("tV3C"),a=n("tAtq");t.buildRequest=r.buildRequest,t.canMakePaymentsWithApplePayCard=r.canMakePaymentsWithApplePayCard,t.checkApplePay=r.checkApplePay,t.checkAndInitApplePay=i.checkAndInitApplePay,t.createApplePayCheckout=r.createApplePayCheckout,t.createPledge=r.createPledge,t.finalizeCharge=r.finalizeCharge,t.initApplePay=r.initApplePay,t.notify=a.notify,t.onApplePayCheckoutFailure=i.onApplePayCheckoutFailure,t.onApplePayRequestFailure=i.onApplePayRequestFailure,t.onApplePayTrackingError=i.onApplePayTrackingError,t.onApplePayVendorErrors=i.onApplePayVendorErrors,t.paddedString=r.paddedString,t.paymentCompletion=r.paymentCompletion,t.reducer=a.reducer,t.thanksPage=r.thanksPage,t.toggleApplePayClasses=r.toggleApplePayClasses,t.updateApplePayCapable=i.updateApplePayCapable},"4Apx":function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i};n("axe2"),(0,a.default)(".NS_video_tracks__caption_video",function(){var e=new window.VideoTrack(window.videoTrackJSON);new window.VideoTrackView({model:e,el:"#video_track"}).render()})},"4C6Z":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){"use strict";!function(e){function t(t){var n="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var r=i.dataTransfer;r&&-1!==e.inArray("Files",r.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:i}))&&(i.preventDefault(),n&&(r.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||!1!==n.autoUpload&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,r=t.files[0],a=t.multipart||!e.support.xhrFileUpload,o="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),a&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),a?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:o,value:t.blob}):e.each(t.files,function(i,r){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||o,value:r})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(o,t.blob,r.name):e.each(t.files,function(r,a){(i._isInstanceOf("File",a)||i._isInstanceOf("Blob",a))&&n.append("array"===e.type(t.paramName)&&t.paramName[r]||o,a,a.uploadName||a.name)})),t.data=n):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var r=e.Deferred(),a=r.promise();return n=n||this.options.context||a,!0===t?r.resolveWith(n,i):!1===t&&r.rejectWith(n,i),a.abort=r.promise,this._enhancePromise(a)},_addConvenienceMethods:function(t,n){var i=this,r=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,a){return(t||a)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).then(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():r(arguments)}).then(t,a)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=!1!==i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,r,a=this,o=t.files[0],s=o.size,l=t.uploadedBytes,d=t.maxChunkSize||s,c=this._blobSlice,u=e.Deferred(),f=u.promise();return!(!(this._isXHRUpload(t)&&c&&(l||d<s))||t.data)&&(!!n||(l>=s?(o.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",o.error])):(r=function(){var n=e.extend({},t),f=n._progress.loaded;n.blob=c.call(o,l,l+d,o.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,a._initXHRData(n),a._initProgressListener(n),i=(!1!==a._trigger("chunksend",null,n)&&e.ajax(n)||a._getXHRPromise(!1,n.context)).done(function(i,o,d){l=a._getUploadedBytes(d)||l+n.chunkSize,f+n.chunkSize-n._progress.loaded&&a._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=o,n.jqXHR=d,a._trigger("chunkdone",null,n),a._trigger("chunkalways",null,n),l<s?r():u.resolveWith(n.context,[i,o,d])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,a._trigger("chunkfail",null,n),a._trigger("chunkalways",null,n),u.rejectWith(n.context,[e,t,i])})},this._enhancePromise(f),f.abort=function(){return i.abort()},r(),f)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,r){var a=r._progress.total,o=r._response;r._progress.loaded<a&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:a,total:a}),r),o.result=r.result=t,o.textStatus=r.textStatus=n,o.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(e,t,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=e,r.textStatus=i.textStatus=t,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,r,a,o,s=this,l=s._getAJAXSettings(n),d=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,i=i||((r||!1===s._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&s._getXHRPromise(!1,l.context,r)||s._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){s._onDone(e,t,n,l)}).fail(function(e,t,n){s._onFail(e,t,n,l)}).always(function(e,t,n){if(s._onAlways(e,t,n,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=e.Deferred(),this._slots.push(a),o=a.then(d)):(this._sequence=this._sequence.then(d,d),o=this._sequence),o.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(a&&a.rejectWith(l.context,r),d())},this._enhancePromise(o)):d()},_onAdd:function(t,n){var i,r,a,o,s=this,l=!0,d=e.extend({},this.options,n),c=n.files,u=c.length,f=d.limitMultiFileUploads,h=d.limitMultiFileUploadSize,p=d.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(d),v=0;if(!u)return!1;if(h&&void 0===c[0].size&&(h=void 0),(d.singleFileUploads||f||h)&&this._isXHRUpload(d))if(d.singleFileUploads||h||!f)if(!d.singleFileUploads&&h)for(a=[],i=[],o=0;o<u;o+=1)m+=c[o].size+p,(o+1===u||m+c[o+1].size+p>h||f&&o+1-v>=f)&&(a.push(c.slice(v,o+1)),(r=g.slice(v,o+1)).length||(r=g),i.push(r),v=o+1,m=0);else i=g;else for(a=[],i=[],o=0;o<u;o+=f)a.push(c.slice(o,o+f)),(r=g.slice(o,o+f)).length||(r=g),i.push(r);else a=[c],i=[g];return n.originalFiles=c,e.each(a||c,function(r,o){var d=e.extend({},n);return d.files=a?o:[o],d.paramName=i[r],s._initResponseObject(d),s._initProgressObject(d),s._addConvenienceMethods(t,d),l=s._trigger("add",e.Event("add",{delegatedEvent:t}),d)}),l},_replaceFileInput:function(t){var n=t.fileInput,i=n.clone(!0),r=n.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),n.after(i).detach(),r&&i.focus(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?i[0]:t}),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,n){var i,r=this,a=e.Deferred(),o=function(e){e&&!e.entry&&(e.entry=t),a.resolve([e])},s=function(){i.readEntries(function(e){e.length?(l=l.concat(e),s()):function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){a.resolve(e)}).fail(o)}(l)},o)},l=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,a.resolve(t._file)):t.file(function(e){e.relativePath=n,a.resolve(e)},o):t.isDirectory?(i=t.createReader(),s()):a.resolve([]),a.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){var n=(t=t||{}).items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var n,i,r=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if((n=e.makeArray(t.prop("files"))).length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(i=t.prop("value")))return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i),!1!==n._trigger("change",e.Event("change",{delegatedEvent:t}),i)&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,r={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,!1!==n._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)&&n._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=this.element.data();e.each(this.element[0].attributes,function(e,r){var a,o=r.name.toLowerCase();/^data-/.test(o)&&(o=o.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),a=i[o],t._isRegExpOption(o,a)&&(a=t._getRegExp(a)),n[o]=a)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,r=this,a=e.Deferred(),o=a.promise();return o.abort=function(){return i=!0,n?n.abort():(a.reject(null,"abort","abort"),o)},this._getFileInputFiles(t.fileInput).always(function(e){i||(e.length?(t.files=e,(n=r._onSend(null,t)).then(function(e,t,n){a.resolve(e,t,n)},function(e,t,n){a.reject(e,t,n)})):a.reject())}),this._enhancePromise(o)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}(n("l/Rs"),n("v4vi"))}()},"4D4H":function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("shXp")),a=l(n("8NzR")),o=l(n("+bVi")),s=n("Tvaj");function l(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#NS_discover__filters",function(e){var t,n,a,l,d,c,u,f,h,p,m,g,v=e.hasClass("refresh_enabled"),_=e.find(".tags");function y(){e.trigger("ksr_popover:close"),(0,i.default)(document).trigger("discovery:filters:changed",b())}function b(){var e={};return e.term=t.val(),e.state=f.find("select").val(),e.goal=h.find("select").val(),e.pledged=p.find("select").val(),e.raised=m.find("select").val(),v?(e.recommended=l.find("a").is(".ksr-green-500"),e.staff_picks=a.find("a").is(".ksr-green-500"),e.starred=d.find("a").is(".ksr-green-500"),e.social=c.find("a").is(".ksr-green-500"),e.backed=u.find("a").is(".ksr-green-500")):(e.recommended=l.is(".selected"),e.staff_picks=a.is(".selected"),e.starred=d.is(".selected"),e.social=c.is(".selected"),e.backed=u.is(".selected")),e}function w(e){t.val(e.term);var n={recommended:l,staff_picks:a,starred:d,social:c,backed:u};r.default.forEach(n,function(t,n){v?e[n]?t.find("a").addClass("ksr-green-500").removeClass("black"):t.find("a").removeClass("ksr-green-500").addClass("black"):e[n]?t.addClass("selected"):t.removeClass("selected")}),_.find(".selected").removeClass("selected"),_.find("#tag_"+(e.tag_id||0)).addClass("selected"),f.find("select").ksr_val(e.state||""),h.find("select").ksr_val(e.goal||""),p.find("select").ksr_val(e.pledged||""),m.find("select").ksr_val(e.raised||"")}v?(t=e.find(".js-search_term input"),n=e.find(".js-featured"),a=n.find(".js-staff_picks"),l=n.find(".js-recommended"),d=n.find(".js-starred"),c=n.find(".js-social"),u=n.find(".js-backed"),f=e.find(".js-states"),h=e.find(".js-goals"),p=e.find(".js-pledged"),m=e.find(".js-raised")):(t=e.find(".search_term input"),n=e.find(".featured"),a=n.find(".staff_picks"),l=n.find(".recommended"),d=n.find(".starred"),c=n.find(".social"),u=n.find(".backed"),f=e.find(".states"),h=e.find(".goals"),p=e.find(".pledged"),m=e.find(".raised")),t.on("cut paste input keydown",function(t){t.keyCode===s.ENTER?y():-1===r.default.indexOf(s.NOT_INPUT,t.keyCode)&&((0,i.default)(document).trigger("discovery:filters:term_changed",b()),e.trigger("ksr_popover:reposition"))}),e.find(".js-search_term_button").on("click",function(){y()}).on("keydown",function(e){e.keyCode!==s.ENTER&&e.keyCode!==s.SPACE||y()}),n.find("li > a").on("click",function(t){var n=(0,i.default)(this),r=n.closest("li");v?n.toggleClass("ksr-green-500").toggleClass("black"):r.toggleClass("selected"),(0,i.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition"),t.preventDefault()}),_.find("li > a").on("click",function(t){var n=(0,i.default)(this).closest("li");n.siblings(".selected").removeClass("selected"),n.toggleClass("selected"),(0,i.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition"),t.preventDefault()}),e.find("select").on("change",function(){(0,i.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition")}),(0,i.default)(document).on("discovery:sentence:changed",function(e,t){w(t)}),(0,i.default)(document).on("discovery:sentence:term_changed",function(e,n){t.val(n.term)}),(0,i.default)(document).on("discovery:filters:load_sample",function(e,t){w({tag_id:(t.tag||{}).id})}),e.on("ksr_popover:opened",function(){g=t.val()||"",o.default["not-touchable"]&&t.focus()}),e.on("ksr_popover:closed",function(){var n=t.val()||"";i.default.trim(n)!==i.default.trim(g)&&((0,i.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition"))})})},"5ErT":function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)("body#events_filmfest2014_brooklyn",function(){(0,o.trackLinks)(".download_booklet","2014 Kickstarter Film Festival Download Booklet")})},"5GF7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.ancestor_locations=e.ancestor_locations||[],e.ancestor_locations=e.ancestor_locations.reverse(),e.nearby_locations=e.nearby_locations||[],e}},"5Nri":function(e,t,n){var i,r;void 0===(r="function"==typeof(i=function(){var e="object",t="function",n="undefined",i=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],r=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],a=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],o=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function s(n,i){var r=typeof n[i];return r==t||!(r!=e||!n[i])||"unknown"==r}function l(t,n){return!(typeof t[n]!=e||!t[n])}function d(e,t){return typeof e[t]!=n}function c(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}var u=c(s),f=c(l),h=c(d);function p(e){return e&&u(e,o)&&h(e,a)}function m(e){return l(e,"body")?e.body:e.getElementsByTagName("body")[0]}var g,v,_={},y=typeof window!=n&&typeof document!=n,b={isHostMethod:s,isHostObject:l,isHostProperty:d,areHostMethods:u,areHostObjects:f,areHostProperties:h,isTextRange:p,getBody:m,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,i=e.length;n<i;++n)t(e[n],n)}},w={version:"1.3.0",initialized:!1,isBrowser:y,supported:!0,util:b,features:{},modules:_,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==n||rangyAutoInitialize}};function E(e){typeof console!=n&&s(console,"log")&&console.log(e)}function C(e,t){y&&t?alert(e):E(e)}function k(e){w.initialized=!0,w.supported=!1,C("Rangy is not supported in this environment. Reason: "+e,w.config.alertOnFail)}w.fail=k,w.warn=function(e){C("Rangy warning: "+e,w.config.alertOnWarn)},!{}.hasOwnProperty?k("hasOwnProperty not supported"):(b.extend=g=function(e,t,n){var i,r;for(var a in t)t.hasOwnProperty(a)&&(i=e[a],r=t[a],n&&null!==i&&"object"==typeof i&&null!==r&&"object"==typeof r&&g(i,r,!0),e[a]=r);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},b.createOptions=function(e,t){var n={};return g(n,t),e&&g(n,e),n}),y||k("Rangy can only run in a browser"),function(){var e;if(y){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,i=e.length;n<i;++n)t[n]=e[n];return t}),b.toArray=e}(),y&&(s(document,"addEventListener")?v=function(e,t,n){e.addEventListener(t,n,!1)}:s(document,"attachEvent")?v=function(e,t,n){e.attachEvent("on"+t,n)}:k("Document does not have required addEventListener or attachEvent method"),b.addListener=v);var S=[];function T(e){return e.message||e.description||String(e)}function A(){if(y&&!w.initialized){var e,t=!1,n=!1;s(document,"createRange")&&(e=document.createRange(),u(e,r)&&h(e,i)&&(t=!0));var a=m(document);if(a&&"body"==a.nodeName.toLowerCase())if(a&&s(a,"createTextRange")&&p(e=a.createTextRange())&&(n=!0),t||n){var o;for(var l in w.initialized=!0,w.features={implementsDomRange:t,implementsTextRange:n},_)(o=_[l])instanceof D&&o.init(o,w);for(var d=0,c=S.length;d<c;++d)try{S[d](w)}catch(e){E("Rangy init listener threw an exception. Continuing. Detail: "+T(e))}}else k("Neither Range nor TextRange are available");else k("No body element found")}}function R(e,t,n){n&&(e+=" in module "+n.name),w.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function x(e,t,n,i){e[t]=function(){return R(t,n,i),e[n].apply(e,b.toArray(arguments))}}b.deprecationNotice=R,b.createAliasForDeprecatedMethod=x,w.init=A,w.addInitListener=function(e){w.initialized?e(w):S.push(e)};var I=[];function D(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function N(e,t,n){var i=new D(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(w,t),t.supported=!0}catch(t){E("Module '"+e+"' failed to load: "+T(t)),t.stack&&E(t.stack)}}});return _[e]=i,i}function j(){}w.addShimListener=function(e){I.push(e)},y&&(w.shim=w.createMissingNativeApi=function(e){e=e||window,A();for(var t=0,n=I.length;t<n;++t)I[t](e)},x(w,"createMissingNativeApi","shim")),D.prototype={init:function(){for(var e,t,n=this.dependencies||[],i=0,r=n.length;i<r;++i){if(t=n[i],!((e=_[t])&&e instanceof D))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){w.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){w.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},w.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var i=N(e,n,t);w.initialized&&w.supported&&i.init()},w.createCoreModule=function(e,t,n){N(e,t,n)},w.RangePrototype=j,w.rangePrototype=new j,w.selectionPrototype=new function(){},w.createCoreModule("DomUtil",[],function(e,t){var n="undefined",i=e.util,r=i.getBody;i.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),i.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var a=document.createElement("div");i.areHostMethods(a,["insertBefore","appendChild","cloneNode"]||!i.areHostObjects(a,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),i.isHostProperty(a,"innerHTML")||t.fail("Element is missing innerHTML property");var o=document.createTextNode("test");i.areHostMethods(o,["splitText","deleteData","insertData","appendData","cloneNode"]||!i.areHostObjects(a,["previousSibling","nextSibling","childNodes","parentNode"])||!i.areHostProperties(o,["data"]))||t.fail("Incomplete Text Node implementation");var s=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function l(e){for(var t=0;e=e.previousSibling;)++t;return t}function d(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(s(i,n))return n;return null}function c(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function u(e,t,n){for(var i,r=n?e:e.parentNode;r;){if((i=r.parentNode)===t)return r;r=i}return null}function f(e){var t=e.nodeType;return 3==t||4==t||8==t}function h(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function p(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return p(e.parentNode);throw t.createError("getDocument: no document found for node")}function m(e){var i=p(e);if(typeof i.defaultView!=n)return i.defaultView;if(typeof i.parentWindow!=n)return i.parentWindow;throw t.createError("Cannot get a window object for node")}function g(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){return e&&i.isHostMethod(e,"setTimeout")&&i.isHostObject(e,"document")}var _,y=!1;function b(e){try{return e.parentNode,!1}catch(e){return!0}}function w(e){if(!e)return"[No node]";if(y&&b(e))return"[Broken node]";if(f(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+l(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function E(e){this.root=e,this._next=e}function C(e,t){this.node=e,this.offset=t}function k(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",y=b(n),e.features.crashyTextNodes=y}(),typeof window.getComputedStyle!=n?_=function(e,t){return m(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=n?_=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),E.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},C.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+w(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},k.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},k.prototype.toString=function(){return this.message},e.dom={arrayContains:s,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:l,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:d,isAncestorOf:c,isOrIsAncestorOf:function(e,t){return c(e,t,!0)},getClosestAncestorIn:u,isCharacterDataNode:f,isTextOrCommentNode:function(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t},insertAfter:h,splitDataNode:function(e,t,n){var i=e.cloneNode(!1);if(i.deleteData(0,t),e.deleteData(t,e.length-t),h(i,e),n)for(var r,a=0;r=n[a++];)r.node==e&&r.offset>t?(r.node=i,r.offset-=t):r.node==e.parentNode&&r.offset>l(e)&&++r.offset;return i},getDocument:p,getWindow:m,getIframeWindow:function(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:g,getBody:r,isWindow:v,getContentDocument:function(e,t,n){var r;if(e?i.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?g(e):p(e):v(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,n,i,r){var a,o,s,c,f;if(e==i)return n===r?0:n<r?-1:1;if(a=u(i,e,!0))return n<=l(a)?-1:1;if(a=u(e,i,!0))return l(a)<r?-1:1;if(!(o=d(e,i)))throw new Error("comparePoints error: nodes have no common ancestor");if((s=e===o?o:u(e,o,!0))===(c=i===o?o:u(i,o,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(f=o.firstChild;f;){if(f===s)return-1;if(f===c)return 1;f=f.nextSibling}},isBrokenNode:b,inspectNode:w,getComputedStyleProperty:_,createTestElement:function(e,t,n){var i=r(e),a=e.createElement("div");a.contentEditable=""+!!n,t&&(a.innerHTML=t);var o=i.firstChild;return o?i.insertBefore(a,o):i.appendChild(a),a},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){for(var t,n=p(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new E(e)},DomPosition:C},e.DOMException=k}),w.createCoreModule("DomRange",["DomUtil"],function(e,t){var n=e.dom,i=e.util,r=n.DomPosition,a=e.DOMException,o=n.isCharacterDataNode,s=n.getNodeIndex,l=n.isOrIsAncestorOf,d=n.getDocument,c=n.comparePoints,u=n.splitDataNode,f=n.getClosestAncestorIn,h=n.getNodeLength,p=n.arrayContains,m=n.getRootContainer,g=e.features.crashyTextNodes,v=n.removeNode;function _(e,t){return 3!=e.nodeType&&(l(e,t.startContainer)||l(e,t.endContainer))}function y(e){return e.document||d(e.startContainer)}function b(e){return new r(e.parentNode,s(e))}function w(e){return new r(e.parentNode,s(e)+1)}function E(e,t,i){var r=11==e.nodeType?e.firstChild:e;return o(t)?i==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0==i?t:u(t,i)):i>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[i]),r}function C(e,t,n){if(Y(e),Y(t),y(t)!=y(e))throw new a("WRONG_DOCUMENT_ERR");var i=c(e.startContainer,e.startOffset,t.endContainer,t.endOffset),r=c(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?i<=0&&r>=0:i<0&&r>0}function k(e,t,i){var r,a,o,s;for(i=i||{stop:!1};o=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(o))return void(i.stop=!0);if(k(s=e.getSubtreeIterator(),t,i),s.detach(),i.stop)return}else for(r=n.createIterator(o);a=r.next();)if(!1===t(a))return void(i.stop=!0)}function S(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(S(t=e.getSubtreeIterator()),t.detach()):e.remove()}function T(e){for(var t,n,i=y(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(T(n)),n.detach()):e.remove(),10==t.nodeType)throw new a("HIERARCHY_REQUEST_ERR");i.appendChild(t)}return i}function A(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function R(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&o(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||o(this.sc)?f(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||o(this.ec)?f(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}R.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,o(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!o(n)||n!==this.sc&&n!==this.ec?n.parentNode&&v(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return _(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new fe(y(this.range));var t=this._current,n=t,i=0,r=t,a=h(t);l(t,this.sc)&&(n=this.sc,i=this.so),l(t,this.ec)&&(r=this.ec,a=this.eo),ue(e,n,i,r,a)}return new R(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var x=[1,3,4,5,7,8,10],I=[2,9,11],D=[1,3,4,5,7,8,10,11],N=[1,3,4,5,7,8];function j(e){return function(t,n){for(var i,r=n?t:t.parentNode;r;){if(i=r.nodeType,p(e,i))return r;r=r.parentNode}return null}}var P=j([9,11]),L=j([5,6,10,12]),O=j([6,10,12]);function M(e,t){if(O(e,t))throw new a("INVALID_NODE_TYPE_ERR")}function F(e,t){if(!p(t,e.nodeType))throw new a("INVALID_NODE_TYPE_ERR")}function B(e,t){if(t<0||t>(o(e)?e.length:e.childNodes.length))throw new a("INDEX_SIZE_ERR")}function H(e,t){if(P(e,!0)!==P(t,!0))throw new a("WRONG_DOCUMENT_ERR")}function U(e){if(L(e,!0))throw new a("NO_MODIFICATION_ALLOWED_ERR")}function W(e,t){if(!e)throw new a(t)}function z(e,t){return t<=(o(e)?e.length:e.childNodes.length)}function G(e){return!!e.startContainer&&!!e.endContainer&&!(g&&(n.isBrokenNode(e.startContainer)||n.isBrokenNode(e.endContainer)))&&m(e.startContainer)==m(e.endContainer)&&z(e.startContainer,e.startOffset)&&z(e.endContainer,e.endOffset)}function Y(e){if(!G(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var $=document.createElement("style"),V=!1;try{$.innerHTML="<b>x</b>",V=3==$.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=V;var q=V?function(e){var t=this.startContainer,i=d(t);if(!t)throw new a("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:o(t)&&(r=n.parentElement(t)),(r=null===r||"HTML"==r.nodeName&&n.isHtmlNamespace(d(r).documentElement)&&n.isHtmlNamespace(r)?i.createElement("body"):r.cloneNode(!1)).innerHTML=e,n.fragmentFromNodeChildren(r)}:function(e){var t=y(this).createElement("body");return t.innerHTML=e,n.fragmentFromNodeChildren(t)};function K(e,t){Y(e);var n=e.startContainer,i=e.startOffset,r=e.endContainer,a=e.endOffset,l=n===r;o(r)&&a>0&&a<r.length&&u(r,a,t),o(n)&&i>0&&i<n.length&&(n=u(n,i,t),l?(a-=i,r=n):r==n.parentNode&&a>=s(n)&&a++,i=0),e.setStartAndEnd(n,i,r,a)}function X(e){Y(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var Q=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],J=0,Z=1,ee=2,te=3,ne=0,ie=1,re=2,ae=3;function oe(e){e.START_TO_START=J,e.START_TO_END=Z,e.END_TO_END=ee,e.END_TO_START=te,e.NODE_BEFORE=ne,e.NODE_AFTER=ie,e.NODE_BEFORE_AND_AFTER=re,e.NODE_INSIDE=ae}function se(e){oe(e),oe(e.prototype)}function le(e,t){return function(){Y(this);var n,i=this.startContainer,r=this.startOffset,a=this.commonAncestorContainer,o=new R(this,!0);i!==a&&(i=(n=w(f(i,a,!0))).node,r=n.offset),k(o,U),o.reset();var s=e(o);return o.detach(),t(this,i,r,i,r),s}}function de(t,n){function r(e,t){return function(n){F(n,x),F(m(n),I);var i=(e?b:w)(n);(t?a:l)(this,i.node,i.offset)}}function a(e,t,i){var r=e.endContainer,a=e.endOffset;t===e.startContainer&&i===e.startOffset||(m(t)==m(r)&&1!=c(t,i,r,a)||(r=t,a=i),n(e,t,i,r,a))}function l(e,t,i){var r=e.startContainer,a=e.startOffset;t===e.endContainer&&i===e.endOffset||(m(t)==m(r)&&-1!=c(t,i,r,a)||(r=t,a=i),n(e,r,a,t,i))}var d=function(){};d.prototype=e.rangePrototype,t.prototype=new d,i.extend(t.prototype,{setStart:function(e,t){M(e,!0),B(e,t),a(this,e,t)},setEnd:function(e,t){M(e,!0),B(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],i=e[1],r=t,a=i;switch(e.length){case 3:a=e[2];break;case 4:r=e[2],a=e[3]}n(this,t,i,r,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:r(!0,!0),setStartAfter:r(!1,!0),setEndBefore:r(!0,!1),setEndAfter:r(!1,!1),collapse:function(e){Y(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){M(e,!0),n(this,e,0,e,h(e))},selectNode:function(e){M(e,!1),F(e,x);var t=b(e),i=w(e);n(this,t.node,t.offset,i.node,i.offset)},extractContents:le(T,n),deleteContents:le(S,n),canSurroundContents:function(){Y(this),U(this.startContainer),U(this.endContainer);var e=new R(this,!0),t=e._first&&_(e._first,this)||e._last&&_(e._last,this);return e.detach(),!t},splitBoundaries:function(){K(this)},splitBoundariesPreservingPositions:function(e){K(this,e)},normalizeBoundaries:function(){Y(this);var e,t=this.startContainer,i=this.startOffset,r=this.endContainer,a=this.endOffset,l=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(r=e,a=e.length,e.appendData(t.data),v(t))},d=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var o=e.length;if(i=n.length,e.insertData(0,n.data),v(n),t==r)a+=i,r=t;else if(r==e.parentNode){var l=s(e);a==l?(r=e,a=o):a>l&&a--}}},c=!0;if(o(r))a==r.length?l(r):0==a&&(e=r.previousSibling)&&e.nodeType==r.nodeType&&(a=e.length,t==r&&(c=!1),e.appendData(r.data),v(r),r=e);else{if(a>0){var u=r.childNodes[a-1];u&&o(u)&&l(u)}c=!this.collapsed}if(c){if(o(t))0==i?d(t):i==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(r==e&&(r=t,a+=t.length),t.appendData(e.data),v(e));else if(i<t.childNodes.length){var f=t.childNodes[i];f&&o(f)&&d(f)}}else t=r,i=a;n(this,t,i,r,a)},collapseToPoint:function(e,t){M(e,!0),B(e,t),this.setStartAndEnd(e,t)}}),se(t)}function ce(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function ue(e,t,i,r,a){e.startContainer=t,e.startOffset=i,e.endContainer=r,e.endOffset=a,e.document=n.getDocument(t),ce(e)}function fe(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,ce(this)}i.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,i,r,a;Y(this),H(this.startContainer,t.startContainer);var o=e==te||e==J?"start":"end",s=e==Z||e==J?"start":"end";return n=this[o+"Container"],i=this[o+"Offset"],r=t[s+"Container"],a=t[s+"Offset"],c(n,i,r,a)},insertNode:function(e){if(Y(this),F(e,D),U(this.startContainer),l(e,this.startContainer))throw new a("HIERARCHY_REQUEST_ERR");var t=E(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(Y(this),this.collapsed)return y(this).createDocumentFragment();if(this.startContainer===this.endContainer&&o(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=y(this).createDocumentFragment()).appendChild(e),t;var n=new R(this,!0);return e=function e(t){for(var n,i,r,o=y(t.range).createDocumentFragment();i=t.next();){if(n=t.isPartiallySelectedSubtree(),i=i.cloneNode(!n),n&&(r=t.getSubtreeIterator(),i.appendChild(e(r)),r.detach()),10==i.nodeType)throw new a("HIERARCHY_REQUEST_ERR");o.appendChild(i)}return o}(n),n.detach(),e},canSurroundContents:function(){Y(this),U(this.startContainer),U(this.endContainer);var e=new R(this,!0),t=e._first&&_(e._first,this)||e._last&&_(e._last,this);return e.detach(),!t},surroundContents:function(e){if(F(e,N),!this.canSurroundContents())throw new a("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);E(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){Y(this);for(var e,t=new fe(y(this)),n=Q.length;n--;)t[e=Q[n]]=this[e];return t},toString:function(){Y(this);var e=this.startContainer;if(e===this.endContainer&&o(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new R(this,!0);return k(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){Y(this);var t=e.parentNode,n=s(e);if(!t)throw new a("NOT_FOUND_ERR");var i=this.comparePoint(t,n),r=this.comparePoint(t,n+1);return i<0?r>0?re:ne:r>0?ie:ae},comparePoint:function(e,t){return Y(this),W(e,"HIERARCHY_REQUEST_ERR"),H(e,this.startContainer),c(e,t,this.startContainer,this.startOffset)<0?-1:c(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:q,toHtml:function(){return X(this)},intersectsNode:function(e,t){if(Y(this),m(e)!=m(this.startContainer))return!1;var n=e.parentNode,i=s(e);if(!n)return!0;var r=c(n,i,this.endContainer,this.endOffset),a=c(n,i+1,this.startContainer,this.startOffset);return t?r<=0&&a>=0:r<0&&a>0},isPointInRange:function(e,t){return Y(this),W(e,"HIERARCHY_REQUEST_ERR"),H(e,this.startContainer),c(e,t,this.startContainer,this.startOffset)>=0&&c(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return C(this,e,!1)},intersectsOrTouchesRange:function(e){return C(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=c(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=c(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==c(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==c(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new a("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ae},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,h(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var i=n.pop();return t.setEnd(i,i.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return Y(this),function(e,t,n){var i,r=!(!t||!t.length),a=!!n;r&&(i=new RegExp("^("+t.join("|")+")$"));var s=[];return k(new R(e,!1),function(t){if((!r||i.test(t.nodeType))&&(!a||n(t))){var l=e.startContainer;if(t!=l||!o(l)||e.startOffset!=l.length){var d=e.endContainer;t==d&&o(d)&&0==e.endOffset||s.push(t)}}}),s}(this,e,t)},getDocument:function(){return y(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var i=y(this),r=e.createRange(i);t=t||n.getBody(i),r.selectNodeContents(t);var a=this.intersection(r),o=0,s=0;return a&&(r.setEnd(a.startContainer,a.startOffset),s=(o=r.toString().length)+a.toString().length),{start:o,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var i,r,a,o,s=[t],l=!1,d=!1;!d&&(i=s.pop());)if(3==i.nodeType)r=n+i.length,!l&&e.start>=n&&e.start<=r&&(this.setStart(i,e.start-n),l=!0),l&&e.end>=n&&e.end<=r&&(this.setEnd(i,e.end-n),d=!0),n=r;else for(a=(o=i.childNodes).length;a--;)s.push(o[a])},getName:function(){return"DomRange"},equals:function(e){return fe.rangesEqual(this,e)},isValid:function(){return G(this)},inspect:function(){return A(this)},detach:function(){}}),de(fe,ue),i.extend(fe,{rangeProperties:Q,RangeIterator:R,copyComparisonConstants:se,createPrototypeRange:de,inspect:A,toHtml:X,getRangeDocument:y,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=fe}),w.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,i,r=e.dom,a=e.util,o=r.DomPosition,s=e.DomRange,l=r.getBody,d=r.getContentDocument,c=r.isCharacterDataNode;if(e.features.implementsDomRange&&function(){var i,o,c=s.rangeProperties;function u(e){for(var t,n=c.length;n--;)e[t=c[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,u(this)},s.createPrototypeRange(n,function(e,t,n,i,r){var a=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==i||e.endOffset!=r,s=!e.equals(e.nativeRange);(a||o||s)&&(e.setEnd(i,r),e.setStart(t,n))}),(i=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),u(this)},i.cloneContents=function(){return this.nativeRange.cloneContents()},i.surroundContents=function(e){this.nativeRange.surroundContents(e),u(this)},i.collapse=function(e){this.nativeRange.collapse(e),u(this)},i.cloneRange=function(){return new n(this.nativeRange.cloneRange())},i.refresh=function(){u(this)},i.toString=function(){return this.nativeRange.toString()};var f=document.createTextNode("test");l(document).appendChild(f);var h=document.createRange();h.setStart(f,0),h.setEnd(f,0);try{h.setStart(f,1),i.setStart=function(e,t){this.nativeRange.setStart(e,t),u(this)},i.setEnd=function(e,t){this.nativeRange.setEnd(e,t),u(this)},o=function(e){return function(t){this.nativeRange[e](t),u(this)}}}catch(e){i.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}u(this)},i.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}u(this)},o=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(i){this.nativeRange[t](n),this.nativeRange[e](n)}u(this)}}}i.setStartBefore=o("setStartBefore","setEndBefore"),i.setStartAfter=o("setStartAfter","setEndAfter"),i.setEndBefore=o("setEndBefore","setStartBefore"),i.setEndAfter=o("setEndAfter","setStartAfter"),i.selectNodeContents=function(e){this.setStartAndEnd(e,0,r.getNodeLength(e))},h.selectNodeContents(f),h.setEnd(f,3);var p=document.createRange();p.selectNodeContents(f),p.setEnd(f,4),p.setStart(f,2),-1==h.compareBoundaryPoints(h.START_TO_END,p)&&1==h.compareBoundaryPoints(h.END_TO_START,p)?i.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:i.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var g=m.firstChild,v=l(document);v.appendChild(m),h.setStart(g,1),h.setEnd(g,2),h.deleteContents(),"13"==g.data&&(i.deleteContents=function(){this.nativeRange.deleteContents(),u(this)},i.extractContents=function(){var e=this.nativeRange.extractContents();return u(this),e}),v.removeChild(m),v=null,a.isHostMethod(h,"createContextualFragment")&&(i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(f),i.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=d(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var u=function(e,t,n,i,a){var s=e.duplicate();s.collapse(n);var l=s.parentElement();if(r.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var d=new o(l.parentNode,r.getNodeIndex(l));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=r.getDocument(l).createElement("span");u.parentNode&&r.removeNode(u);for(var f,h,p,m,g,v=n?"StartToStart":"StartToEnd",_=a&&a.containerElement==l?a.nodeIndex:0,y=l.childNodes.length,b=y,w=b;w==y?l.appendChild(u):l.insertBefore(u,l.childNodes[w]),s.moveToElementText(u),0!=(f=s.compareEndPoints(v,e))&&_!=b;){if(-1==f){if(b==_+1)break;_=w}else b=b==_+1?_:w;w=Math.floor((_+b)/2),l.removeChild(u)}if(g=u.nextSibling,-1==f&&g&&c(g)){var E;if(s.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(g.data)){var C=s.duplicate(),k=C.text.replace(/\r\n/g,"\r").length;for(E=C.moveStart("character",k);-1==(f=C.compareEndPoints("StartToEnd",C));)E++,C.moveStart("character",1)}else E=s.text.length;m=new o(g,E)}else h=(i||!n)&&u.previousSibling,m=(p=(i||n)&&u.nextSibling)&&c(p)?new o(p,0):h&&c(h)?new o(h,h.data.length):new o(l,r.getNodeIndex(u));return r.removeNode(u),{boundaryPosition:m,nodeInfo:{nodeIndex:w,containerElement:l}}},f=function(e,t){var n,i,a,o,s=e.offset,d=r.getDocument(e.node),u=l(d).createTextRange(),f=c(e.node);return f?i=(n=e.node).parentNode:(n=s<(o=e.node.childNodes).length?o[s]:null,i=e.node),(a=d.createElement("span")).innerHTML="&#feff;",n?i.insertBefore(a,n):i.appendChild(a),u.moveToElementText(a),u.collapse(!t),i.removeChild(a),f&&u[t?"moveStart":"moveEnd"]("character",s),u};(i=function(e){this.textRange=e,this.refresh()}).prototype=new s(document),i.prototype.refresh=function(){var e,t,n,i,a=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();(n=e.duplicate()).collapse(!1);var a=n.parentElement(),o=i==a?i:r.getCommonAncestor(i,a);return o==t?o:r.getCommonAncestor(t,o)}(this.textRange);0==(i=this.textRange).compareEndPoints("StartToEnd",i)?t=e=u(this.textRange,a,!0,!0).boundaryPosition:(e=(n=u(this.textRange,a,!0,!1)).boundaryPosition,t=u(this.textRange,a,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},i.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(i);var h=function(e){if(e.collapsed)return f(new o(e.startContainer,e.startOffset),!0);var t=f(new o(e.startContainer,e.startOffset),!0),n=f(new o(e.endContainer,e.endOffset),!1),i=l(s.getRangeDocument(e)).createTextRange();return i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i};if(i.rangeToTextRange=h,i.prototype.toTextRange=function(){return h(this)},e.WrappedTextRange=i,!e.features.implementsDomRange||e.config.preferTextRange){var p=Function("return this;")();void 0===p.Range&&(p.Range=i),e.createNativeRange=function(e){return e=d(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=i}}e.createRange=function(n){return n=d(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=d(e,t,"createRangyRange"),new s(e)},a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),w.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){e.config.checkSelectionRanges=!0;var n,i,r=e.dom,a=e.util,o=a.isHostMethod,s=e.DomRange,l=e.WrappedRange,d=e.DOMException,c=r.DomPosition,u=e.features,f=r.getDocument,h=r.getBody,p=s.rangesEqual;function m(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function g(e,n){if(e){if(r.isWindow(e))return e;if(e instanceof W)return e.win;var i=r.getContentDocument(e,t,n);return r.getWindow(i)}return window}function v(e){return g(e,"getDocSelection").document.selection}function _(e){var t=!1;return e.anchorNode&&(t=1==r.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var y=o(window,"getSelection"),b=a.isHostObject(document,"selection");u.implementsWinGetSelection=y,u.implementsDocSelection=b;var w=b&&(!y||e.config.preferTextRange);if(w)n=v,e.isSelectionValid=function(e){var t=g(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||f(n.createRange().parentElement())==t};else{if(!y)return t.fail("Neither document.selection or window.getSelection() detected."),!1;n=function(e){return g(e,"getWinSelection").getSelection()},e.isSelectionValid=function(){return!0}}e.getNativeSelection=n;var E=n();if(!E)return t.fail("Native selection was null (possibly issue 138?)"),!1;var C=e.createNativeRange(document),k=h(document),S=a.areHostProperties(E,["anchorNode","focusNode","anchorOffset","focusOffset"]);u.selectionHasAnchorAndFocus=S;var T=o(E,"extend");u.selectionHasExtend=T;var A="number"==typeof E.rangeCount;u.selectionHasRangeCount=A;var R=!1,x=!0,I=T?function(t,n){var i=s.getRangeDocument(n),r=e.createRange(i);r.collapseToPoint(n.endContainer,n.endOffset),t.addRange(O(r)),t.extend(n.startContainer,n.startOffset)}:null;a.areHostMethods(E,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof E.rangeCount&&u.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,i=n>1,a=[],o=_(t),s=0;s<n;++s)a[s]=t.getRangeAt(s);var l=r.createTestElement(document,"",!1),d=l.appendChild(document.createTextNode("")),c=document.createRange();if(c.setStart(d,1),c.collapse(!0),t.removeAllRanges(),t.addRange(c),x=1==t.rangeCount,t.removeAllRanges(),!i){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)R=!1;else{var f=c.cloneRange();c.setStart(d,0),f.setEnd(d,3),f.setStart(d,2),t.addRange(c),t.addRange(f),R=2==t.rangeCount}}for(r.removeNode(l),t.removeAllRanges(),s=0;s<n;++s)0==s&&o?I?I(t,a[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(a[s])):t.addRange(a[s])}}(),u.selectionSupportsMultipleRanges=R,u.collapsedNonEditableSelectionsSupported=x;var D,N,j=!1;function P(e,t,n){var i=n?"end":"start",r=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function L(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function O(t){var n;return t instanceof s?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof l?n=t.nativeRange:u.implementsDomRange&&t instanceof r.getWindow(t.startContainer).Range&&(n=t),n}function M(e){var n=e.getNodes();if(!function(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!r.isAncestorOf(e[0],e[t]))return!1;return!0}(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function F(e){return!!e&&void 0!==e.text}function B(e,t){var n=new l(t);e._ranges=[n],P(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function H(t){if(t._ranges.length=0,"None"==t.docSelection.type)L(t);else{var n=t.docSelection.createRange();if(F(n))B(t,n);else{t.rangeCount=n.length;for(var i,r=f(n.item(0)),a=0;a<t.rangeCount;++a)(i=e.createRange(r)).selectNode(n.item(a)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,P(t,t._ranges[t.rangeCount-1],!1)}}}function U(e,n){for(var i=e.docSelection.createRange(),r=M(n),a=f(i.item(0)),o=h(a).createControlRange(),s=0,l=i.length;s<l;++s)o.add(i.item(s));try{o.add(r)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),H(e)}function W(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function z(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}k&&o(k,"createControlRange")&&(D=k.createControlRange(),a.areHostProperties(D,["item","add"])&&(j=!0)),u.implementsControlRange=j,i=S?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},o(E,"getRangeAt")?N=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:S&&(N=function(t){var n=f(t.anchorNode),i=e.createRange(n);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),W.prototype=e.selectionPrototype;var G=[];function Y(e,t){for(var n,i,r=G.length;r--;)if(i=(n=G[r]).selection,"deleteAll"==t)z(i);else if(n.win==e)return"delete"==t?(G.splice(r,1),!0):i;return"deleteAll"==t&&(G.length=0),null}var $=function(e){if(e&&e instanceof W)return e.refresh(),e;var t=Y(e=g(e,"getNativeSelection")),i=n(e),r=b?v(e):null;return t?(t.nativeSelection=i,t.docSelection=r,t.refresh()):(t=new W(i,r,e),G.push({win:e,selection:t})),t};e.getSelection=$,a.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var V,q=W.prototype;function K(e,n){for(var i,r=f(n[0].startContainer),a=h(r).createControlRange(),o=0,s=n.length;o<s;++o){i=M(n[o]);try{a.add(i)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),H(e)}if(!w&&S&&a.areHostMethods(E,["removeAllRanges","addRange"])){q.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),L(this)};var X=function(e,t){I(e.nativeSelection,t),e.refresh()};q.addRange=A?function(t,n){if(j&&b&&"Control"==this.docSelection.type)U(this,t);else if(m(n)&&T)X(this,t);else{var r;R?r=this.rangeCount:(this.removeAllRanges(),r=0);var a=O(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==r+1){if(e.config.checkSelectionRanges){var o=N(this.nativeSelection,this.rangeCount-1);o&&!p(o,t)&&(t=new l(o))}this._ranges[this.rangeCount-1]=t,P(this,t,Q(this.nativeSelection)),this.isCollapsed=i(this)}else this.refresh()}}:function(e,t){m(t)&&T?X(this,e):(this.nativeSelection.addRange(O(e)),this.refresh())},q.setRanges=function(e){if(j&&b&&e.length>1)K(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(o(E,"empty")&&o(C,"select")&&j&&w))return t.fail("No means of selecting a Range or TextRange was found"),!1;q.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=f(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=f(t.item(0)))}if(e)h(e).createTextRange().select(),this.docSelection.empty()}}catch(e){}L(this)},q.addRange=function(t){"Control"==this.docSelection.type?U(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,P(this,t,!1))},q.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?K(this,e):t&&this.addRange(e[0])}}if(q.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new d("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},w)V=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=h(t.win.document).createTextRange()).collapse(!0),"Control"==t.docSelection.type?H(t):F(n)?B(t,n):L(t)};else if(o(E,"getRangeAt")&&"number"==typeof E.rangeCount)V=function(t){if(j&&b&&"Control"==t.docSelection.type)H(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));P(t,t._ranges[t.rangeCount-1],Q(t.nativeSelection)),t.isCollapsed=i(t)}else L(t)};else{if(!S||"boolean"!=typeof E.isCollapsed||"boolean"!=typeof C.collapsed||!u.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;V=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=N(n,0),e._ranges=[t],e.rangeCount=1,function(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}(e),e.isCollapsed=i(e)):L(e)}}q.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,i=this.anchorOffset;if(V(this),e){var r=t.length;if(r!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=i)return!0;for(;r--;)if(!p(t[r],this._ranges[r]))return!0;return!1}};var Q,J=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var i=0,r=n.length;i<r;++i)p(t,n[i])||e.addRange(n[i]);e.rangeCount||L(e)};function Z(e,t){if(e.win.document!=f(t))throw new d("WRONG_DOCUMENT_ERR")}function ee(t){return function(n,i){var r;this.rangeCount?(r=this.getRangeAt(0))["set"+(t?"Start":"End")](n,i):(r=e.createRange(this.win.document)).setStartAndEnd(n,i),this.setSingleRange(r,this.isBackward())}}function te(e){var t=[],n=new c(e.anchorNode,e.anchorOffset),i=new c(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,o=e.rangeCount;a<o;++a)t[a]=s.inspect(e.getRangeAt(a));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}q.removeRange=j&&b?function(e){if("Control"==this.docSelection.type){for(var t=this.docSelection.createRange(),n=M(e),i=f(t.item(0)),r=h(i).createControlRange(),a=!1,o=0,s=t.length;o<s;++o)t.item(o)!==n||a?r.add(t.item(o)):a=!0;r.select(),H(this)}else J(this,e)}:function(e){J(this,e)},!w&&S&&u.implementsDomRange?(Q=_,q.isBackward=function(){return Q(this)}):Q=q.isBackward=function(){return!1},q.isBackwards=q.isBackward,q.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},q.collapse=function(t,n){Z(this,t);var i=e.createRange(t);i.collapseToPoint(t,n),this.setSingleRange(i),this.isCollapsed=!0},q.collapseToStart=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},q.collapseToEnd=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},q.selectAllChildren=function(t){Z(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},q.deleteFromDocument=function(){if(j&&b&&"Control"==this.docSelection.type){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),r.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var i=0,a=n.length;i<a;++i)n[i].deleteContents();this.addRange(n[a-1])}}},q.eachRange=function(e,t){for(var n=0,i=this._ranges.length;n<i;++n)if(e(this.getRangeAt(n)))return t},q.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},q.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},q.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(i){n.push(i[e].apply(i,t||[]))}),n},q.setStart=ee(!0),q.setEnd=ee(!1),e.rangePrototype.select=function(e){$(this.getDocument()).setSingleRange(this,e)},q.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},q.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},q.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},q.moveToBookmark=function(t){for(var n,i,r=[],a=0;n=t.rangeBookmarks[a++];)(i=e.createRange(this.win)).moveToBookmark(n),r.push(i);t.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)},q.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},q.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},q.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(s.toHtml(t))}),e.join("")},u.implementsTextRange&&(q.getNativeTextRange=function(){var n;if(n=this.docSelection){var i=n.createRange();if(F(i))return i;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),q.getName=function(){return"WrappedSelection"},q.inspect=function(){return te(this)},q.detach=function(){Y(this.win,"delete"),z(this)},W.detachAll=function(){Y(null,"deleteAll")},W.inspect=te,W.isDirectionBackward=m,e.Selection=W,e.selectionPrototype=q,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return $(e)}),e=null})});var P=!1,L=function(e){P||(P=!0,!w.initialized&&w.config.autoInitialize&&A())};return y&&("complete"==document.readyState?L():(s(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",L,!1),v(window,"load",L))),w})?i.call(t,n,t,e):i)||(e.exports=r)},"5RPx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_created_at=(0,o.format)("ll",1e3*e.created_at),e.is_recipient=void 0!==a.default&&a.default.get("id")===e.recipient_id,e.sender_is_registered=e.sender.is_registered,e};var i,r=n("eF8u"),a=(i=r)&&i.__esModule?i:{default:i},o=n("kVy0")},"5Sqi":function(e,t,n){"use strict";var i,r=n("rXeC"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(".mobius.click").livequery(function(){var e,t,n=(0,a.default)(this),i=n.parent().find("a.load_more"),r=n.parent().find(".loading");function o(){e=n.find("*[data-cursor]:last")}o(),t=e.length,n.mobius({trigger_next:i,prepend_next:!n.data("mobius_append"),url:n.data("mobius_url")||!1,page_param:t?"cursor":"page",extra_params:n.data("mobius_extra_params"),page_by:function(n){return t?(o(),e.data("cursor")):n?n+1:1}}),n.data("mobius"),n.on("mobius:loading_page",function(){r.show(),i.parent().hide()}),n.on("mobius:loaded_page",function(e,t,a){n.parent().find(".count .current").text(n.find("li.item").length),r.hide(),a.data("last_page")?i.parent().hide():i.parent().show()})}),(0,a.default)(".mobius:not(.click)").livequery(function(){var e,t,n,i,r,o=(0,a.default)(this);function s(){i=o.find("*[data-cursor]:last")}o.find(".page").data("last_page")||(s(),r=i.length,e=o.mobius({url:o.data("url"),paused:o.is(".paused"),page_param:r?"cursor":"page",extra_params:o.data("extra_params")||"",page_by:function(e){return r?(s(),i.data("cursor")):e?e+1:1}}).data("mobius"),o.length&&(t=(0,a.default)(".js-mini-footer--sticky"),(0,a.default)(".js-mini-footer__links").mouseenter(function(){t.addClass("is-visible")}),t.mouseleave(function(){t.removeClass("is-visible")}),o.on("mobius:loaded_page",function(i,r,s){s.data("last_page")?(e.pause(),o.siblings(".load_more").hide(),n=t.clone(),t.remove()):(e.play(),o.siblings(".load_more").show(),(0,a.default)("body").append(n))})))})})},"5Sqs":function(e,t,n){n("l/Rs"),n("l/Rs");!function(){"use strict";var e=0,t={};function n(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=n.Adapter.extend({},n.defaults,i),this.element=this.options.element,this.adapter=new n.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=n.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=n.Context.findOrCreateByElement(this.options.context),n.offsetAliases[this.options.offset]&&(this.options.offset=n.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),t[this.key]=this,e+=1}n.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},n.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},n.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete t[this.key]},n.prototype.disable=function(){return this.enabled=!1,this},n.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},n.prototype.next=function(){return this.group.next(this)},n.prototype.previous=function(){return this.group.previous(this)},n.invokeAll=function(e){var n=[];for(var i in t)n.push(t[i]);for(var r=0,a=n.length;r<a;r++)n[r][e]()},n.destroyAll=function(){n.invokeAll("destroy")},n.disableAll=function(){n.invokeAll("disable")},n.enableAll=function(){for(var e in n.Context.refreshAll(),t)t[e].enabled=!0;return this},n.refreshAll=function(){n.Context.refreshAll()},n.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},n.viewportWidth=function(){return document.documentElement.clientWidth},n.adapters=[],n.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},n.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=n}(),function(){"use strict";function e(e){window.setTimeout(e,1e3/60)}var t=0,n={},i=window.Waypoint,r=window.onload;function a(e){this.element=e,this.Adapter=i.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+t,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,n[e.waypointContextKey]=this,t+=1,i.windowContext||(i.windowContext=!0,i.windowContext=new a(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}a.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},a.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;e&&t&&!i&&(this.adapter.off(".waypoints"),delete n[this.key])},a.prototype.createThrottledResizeHandler=function(){var e=this;function t(){e.handleResize(),e.didResize=!1}this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,i.requestAnimationFrame(t))})},a.prototype.createThrottledScrollHandler=function(){var e=this;function t(){e.handleScroll(),e.didScroll=!1}this.adapter.on("scroll.waypoints",function(){e.didScroll&&!i.isTouch||(e.didScroll=!0,i.requestAnimationFrame(t))})},a.prototype.handleResize=function(){i.Context.refreshAll()},a.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in t){var i=t[n],r=i.newScroll>i.oldScroll?i.forward:i.backward;for(var a in this.waypoints[n]){var o=this.waypoints[n][a];if(null!==o.triggerPoint){var s=i.oldScroll<o.triggerPoint,l=i.newScroll>=o.triggerPoint;(s&&l||!s&&!l)&&(o.queueTrigger(r),e[o.group.id]=o.group)}}}for(var d in e)e[d].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},a.prototype.innerHeight=function(){return this.element==this.element.window?i.viewportHeight():this.adapter.innerHeight()},a.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},a.prototype.innerWidth=function(){return this.element==this.element.window?i.viewportWidth():this.adapter.innerWidth()},a.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var n in this.waypoints[t])e.push(this.waypoints[t][n]);for(var i=0,r=e.length;i<r;i++)e[i].destroy()},a.prototype.refresh=function(){var e,t=this.element==this.element.window,n=t?void 0:this.adapter.offset(),r={};for(var a in this.handleScroll(),e={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var o=e[a];for(var s in this.waypoints[a]){var l,d,c,u,f=this.waypoints[a][s],h=f.options.offset,p=f.triggerPoint,m=0,g=null==p;f.element!==f.element.window&&(m=f.adapter.offset()[o.offsetProp]),"function"==typeof h?h=h.apply(f):"string"==typeof h&&(h=parseFloat(h),f.options.offset.indexOf("%")>-1&&(h=Math.ceil(o.contextDimension*h/100))),l=o.contextScroll-o.contextOffset,f.triggerPoint=Math.floor(m+l-h),d=p<o.oldScroll,c=f.triggerPoint>=o.oldScroll,u=!d&&!c,!g&&(d&&c)?(f.queueTrigger(o.backward),r[f.group.id]=f.group):!g&&u?(f.queueTrigger(o.forward),r[f.group.id]=f.group):g&&o.oldScroll>=f.triggerPoint&&(f.queueTrigger(o.forward),r[f.group.id]=f.group)}}return i.requestAnimationFrame(function(){for(var e in r)r[e].flushTriggers()}),this},a.findOrCreateByElement=function(e){return a.findByElement(e)||new a(e)},a.refreshAll=function(){for(var e in n)n[e].refresh()},a.findByElement=function(e){return n[e.waypointContextKey]},window.onload=function(){r&&r(),a.refreshAll()},i.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},i.Context=a}(),function(){"use strict";function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}var n={vertical:{},horizontal:{}},i=window.Waypoint;function r(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}r.prototype.add=function(e){this.waypoints.push(e)},r.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},r.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],r="up"===n||"left"===n;i.sort(r?t:e);for(var a=0,o=i.length;a<o;a+=1){var s=i[a];(s.options.continuous||a===i.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},r.prototype.next=function(t){this.waypoints.sort(e);var n=i.Adapter.inArray(t,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},r.prototype.previous=function(t){this.waypoints.sort(e);var n=i.Adapter.inArray(t,this.waypoints);return n?this.waypoints[n-1]:null},r.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},r.prototype.remove=function(e){var t=i.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},r.prototype.first=function(){return this.waypoints[0]},r.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},r.findOrCreate=function(e){return n[e.axis][e.name]||new r(e)},i.Group=r}(),function(){"use strict";var e=window.jQuery,t=window.Waypoint;function n(t){this.$element=e(t)}e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,t){n.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,e)}}),e.each(["extend","inArray","isEmptyObject"],function(t,i){n[i]=e[i]}),t.adapters.push({name:"jquery",Adapter:n}),t.Adapter=n}(),function(){"use strict";var e=window.Waypoint;function t(t){return function(){var n=[],i=arguments[0];return t.isFunction(arguments[0])&&((i=t.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var r=t.extend({},i,{element:this});"string"==typeof r.context&&(r.context=t(this).closest(r.context)[0]),n.push(new e(r))}),n}}window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()},"5WUY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Main=t.handleIdentityDocumentCreate=t.handleUpdateForeignKeys=t.beginSendingFileUpload=t.handleSendFileUploads=t.handleUpdateFile=t.fileChecks=t.handleFileValidityChecks=t.faceForeignKey=t.BACK=t.FRONT=t.PENDING=t.UNVERIFIED=void 0;var i,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n("GiK3"),s=(i=o)&&i.__esModule?i:{default:i},l=n("ci1u"),d=n("EIRz"),c=n("bfo+"),u=n("tryQ"),f=n("Z5jf"),h=n("DdqZ");var p=t.UNVERIFIED="unverified",m=t.PENDING="pending",g=t.FRONT="front",v=t.BACK="back",_=["image/jpeg","image/png"],y=function(e){return u.Honeybadger.notify("The identity document face, "+e+", was not front or back")},b=t.faceForeignKey=function(e){switch(e){case g:return"foreignKey";case v:return"foreignKeyBack";default:y(e)}},w=(t.handleFileValidityChecks=function(e,t,n){return(0,d.loop)(a({},e,(i={},r=function(e){switch(e){case g:return"validationErrorsFileFront";case v:return"validationErrorsFileBack";default:return y(e)}}(n),o=w(E(t)),r in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o,i)),d.Cmd.action((0,h.updateFile)(t,n)));var i,r,o},function(e){return e.reduce(function(e,t){return t[0]&&e.push(t[1]),e},[])}),E=t.fileChecks=function(e){return[[!_.includes(e.type),(0,f.boundT)("identity_document_verification.Invalid_file_type")],[e.size>=8388608,(0,f.boundT)("identity_document_verification.Invalid_file_size")]]},C=(t.handleUpdateFile=function(e,t,n){switch(n){case g:return e.validationErrorsFileFront.length>0?a({},e,{fileFront:null,foreignKey:""}):a({},e,{fileFront:t,foreignKey:""});case v:return e.validationErrorsFileBack.length>0?a({},e,{fileBack:null,foreignKeyBack:null}):a({},e,{fileBack:t,foreignKeyBack:null});default:return y(n),e}},function(e,t){var n=function(e,t){switch(t){case g:return e.fileFront;case v:return e.fileBack;default:y(t)}}(e,t),i=k(n),r=new FormData;return Object.keys(i).forEach(function(e){r.append(e,i[e])}),r}),k=function(e){return{purpose:"identity_document",file:e}},S=(t.handleSendFileUploads=function(e){return T(e)?Promise.resolve().then(function(){return(0,h.beginIdentityDocumentCreate)()}):null===e.fileBack?Promise.resolve().then(function(){return S(e,g)}).then(function(e){var t=r(e,2),n=t[0],i=t[1];return(0,h.updateForeignKey)(n,i)}).catch(function(e){return(0,h.updateSubmitError)(e)}):Promise.all([S(e,g),S(e,v)]).then(function(e){var t=r(e,2),n=t[0],i=t[1];return(0,h.updateForeignKeys)(n,i)}).catch(function(e){return(0,h.updateSubmitError)(e)})},t.beginSendingFileUpload=function(e,t){if(function(e,t){switch(t){case g:return e.validationErrorsFileFront;case v:return e.validationErrorsFileBack;default:return y(t)}}(e,t)>0)return u.Honeybadger.notify("Did not begin POSTing file because this error was found in the state: "+e),(0,f.boundT)("identity_document_verification.Document_invalid_please_try_again");var n={method:"POST",body:C(e,t),headers:{Authorization:"Bearer "+e.stripePublicKey}};return fetch(e.identityDocUploadUrl,n).then(function(e){return 2==e.status.toString().charAt(0)?e.json():Promise.reject(e)}).then(function(e){return[e.id,t]}).catch(function(e){return u.Honeybadger.notify("Stripe errored with the following status: "+e.status+" "+e.statusText),(0,f.boundT)("identity_document_verification.Something_happened_please_try_again")})}),T=function(e){return null===e.fileBack&&e.foreignKey||e.foreignKey&&e.foreignKeyBack},A=(t.handleUpdateForeignKeys=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=n.reduce(function(e,t){var n=r(t,2),i=n[0],a=n[1];return e[b(a)]=i,e},{});return(0,d.loop)(a({},e,o),d.Cmd.action((0,h.beginIdentityDocumentCreate)()))},t.handleIdentityDocumentCreate=function(e){return(0,c.createIdentityDocument)(e.projectId,e.foreignKey,e.foreignKeyBack).then(function(e){return e.errors?Promise.reject(e):(0,h.mutationSucceeded)()}).catch(function(e){return u.Honeybadger.notify(e.errors),(0,h.updateSubmitError)((0,f.boundT)("identity_document_verification.Something_happened_please_try_again"))})},t.Main=function(e){var t=e.state,n=e.dispatch;return s.default.createElement("div",null,s.default.createElement(B,{state:t,dispatch:n}))},function(e){var t=e.file,n=e.onFileSelect,i=e.id;return t?s.default.createElement("div",{className:"pb2"},s.default.createElement("label",{htmlFor:i,className:"pointer"},s.default.createElement("input",{id:i,className:"hidden",type:"file",onChange:function(e){return e.target.files&&e.target.files.length>0&&n(e.target.files[0])}}),s.default.createElement(l.CircleWrap,{size:2,backgroundColor:"black",borderColor:"blue-600"},s.default.createElement(l.Icon,{name:"check",size:"9",atoms:["relative","fill-white"]})),s.default.createElement("span",{className:"pl1"},t.name))):s.default.createElement("div",{className:"pb2"},s.default.createElement(l.Button,{color:"black",size:"small"},s.default.createElement("label",{htmlFor:i,className:"pointer",style:{width:"auto"}},(0,f.boundT)("identity_document_verification.Choose_file"),s.default.createElement("input",{id:i,className:"hidden",type:"file",onChange:function(e){return e.target.files&&e.target.files.length>0&&n(e.target.files[0])}}))))}),R=function(){return s.default.createElement("div",{className:"cobalt-600 caption-200 medium pb4"},(0,f.boundT)("identity_document_verification.We_could_not_verify"))},x=function(){return s.default.createElement("div",null,s.default.createElement("div",{className:"caption-200 soft-black normal pb4"},(0,f.boundT)("identity_document_verification.To_continue_verifying")),s.default.createElement("div",{className:"pb4"},s.default.createElement("div",{className:"caption-200 soft-black medium pb2"},(0,f.boundT)("identity_document_verification.Accepted_document_types")),s.default.createElement("ul",null,s.default.createElement("li",{className:"caption-200 soft-black normal"},(0,f.boundT)("identity_document_verification.Passport")),s.default.createElement("li",{className:"caption-200 soft-black normal"},(0,f.boundT)("identity_document_verification.Japanese_drivers_license")),s.default.createElement("li",{className:"caption-200 soft-black normal"},(0,f.boundT)("identity_document_verification.Japanese_residence_card")))),s.default.createElement("div",{className:"pb4"},s.default.createElement("div",{className:"caption-200 soft-black medium pb2"},(0,f.boundT)("identity_document_verification.Image_requirements")),s.default.createElement("ul",null,s.default.createElement("li",{className:"caption-200 soft-black normal"},(0,f.boundT)("identity_document_verification.Image_must_be_in_color")),s.default.createElement("li",{className:"caption-200 soft-black normal"},(0,f.boundT)("identity_document_verification.Format_must_be")),s.default.createElement("li",{className:"caption-200 soft-black normal"},(0,f.boundT)("identity_document_verification.8MB_maximum")))))},I=function(){return s.default.createElement("div",null,s.default.createElement("div",{className:"caption-200 soft-black medium pb2"},s.default.createElement(l.Icon,{name:"icon--clock",className:"pr1"}),s.default.createElement("span",{className:"pl1"},(0,f.boundT)("identity_document_verification.Verifying"))),s.default.createElement("div",null,(0,f.boundT)("identity_document_verification.Thank_you_your_identity_is")))},D=function(e){var t=e.state,n=e.dispatch;return s.default.createElement(N,{file:t.fileFront,onFileSelect:function(e){return n((0,h.checkFileValidity)(e,g))},errorsFileFront:t.validationErrorsFileFront})},N=function(e){var t=e.file,n=e.onFileSelect,i=e.errorsFileFront;return s.default.createElement("div",{className:"pb2"},s.default.createElement("div",{className:"caption-200 soft-black medium pb2"},(0,f.boundT)("identity_document_verification.Front_of_document")),s.default.createElement(A,{id:"identity-front",file:t,onFileSelect:n}),i.length>0&&s.default.createElement(L,{errors:i}))},j=function(e){var t=e.state,n=e.dispatch;return s.default.createElement(P,{file:t.fileBack,onFileSelect:function(e){return n((0,h.checkFileValidity)(e,v))},errorsFileBack:t.validationErrorsFileBack})},P=function(e){var t=e.file,n=e.onFileSelect,i=e.errorsFileBack;return s.default.createElement("div",{className:"pb2"},s.default.createElement("div",{className:"caption-200 soft-black medium pb2"},(0,f.boundT)("identity_document_verification.Back_of_document")),s.default.createElement(A,{id:"identity-back",file:t,onFileSelect:n}),i.length>0&&s.default.createElement(L,{errors:i}))},L=function(e){var t=e.errors.map(function(e,t){return s.default.createElement("li",{key:t,className:"caption-200 red-500 normal"},e)});return s.default.createElement("div",{className:"pb2"},s.default.createElement("ul",null,t))},O=function(e){var t=e.onClick,n=e.disabled;return s.default.createElement("div",{className:"flex items-center justify-center"},s.default.createElement(l.Button,{atoms:["bttn-blue","bttn-medium","w100p"],onClick:t,disabled:n},(0,f.boundT)("identity_document_verification.Submit")))},M=function(e){var t=e.state;return s.default.createElement("div",null,t.submitError.length>0&&s.default.createElement("div",{className:"caption-200 red-500 normal pt2"},t.submitError))},F=function(e){var t=e.state;return s.default.createElement("div",null,t.isSubmitting&&s.default.createElement("div",{className:"caption-200 soft-black medium pt2"},s.default.createElement(l.Icon,{name:"icon--circle-loader",size:"medium",atoms:["fill-soft-black"]}),s.default.createElement("span",{className:"pl2"},(0,f.boundT)("identity_document_verification.Processing"))))},B=function(e){var t=e.state,n=e.dispatch,i=null;return t.verificationStatus===p||"failed"===t.verificationStatus?i=s.default.createElement("div",null,"failed"===t.verificationStatus&&s.default.createElement(R,null),s.default.createElement(x,null),s.default.createElement(D,{state:t,dispatch:n}),s.default.createElement(j,{state:t,dispatch:n}),s.default.createElement(O,{onClick:function(){return n((0,h.sendFileUploads)())},disabled:!function(e){return e.fileFront&&0===e.validationErrorsFileFront.length&&0===e.validationErrorsFileBack.length}(t)||t.isSubmitting}),s.default.createElement(M,{state:t}),s.default.createElement(F,{state:t})):t.verificationStatus===m?i=s.default.createElement(I,null):(u.Honeybadger.notify("Verification status not pending, unverified, or failed"),i=s.default.createElement("div",null,(0,f.boundT)("identity_document_verification.Were_looking_into_an_issue"))),s.default.createElement("div",{className:"pt2"},i)}},"5ln5":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("change","body#site_privacy form.select_country",function(){(0,a.default)(this).submit()})})},"5ns8":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("hsYx"),(0,a.default)(function(){["history","banner_canada_projects_animated","banner_canada_hide","banner_iphone_animated","banner_iphone_hide","banner_social_animated","banner_social_hide","banner_stripe_build_transition_hide","banner_verified_identity_hide","banner_yir_animated","ppjun2016","yir_banner_hide","yir_launch_banner","yir_takeover_hide","history_v1","video_mode_projects_seen","video_mode_seen"].forEach(function(e){KSR.store.removeItem(e)}),KSR.store.getItem("dismiss_post_funding_onboarding")&&KSR.store.setItem("dismiss_spotlight_onboarding","true"),KSR.store.removeItem("dismiss_post_funding_onboarding")})},"6CtT":function(e,t,n){"use strict";var i,r=n("shXp"),a=(i=r)&&i.__esModule?i:{default:i};var o=n("l/Rs");n("l/Rs");!function(e){e.fn.serialize_without_blank=function(){var t,n=[];return this.find(":input").each(function(){""!==e.trim(this.value)||this.disabled||(n.push(this),this.disabled=!0)}),t=this.serialize(),a.default.each(n,function(e){e.disabled=!1}),t}}(o)},"6F/s":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("wmCY")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=".NS_backers__info";(0,i.default)(document).on("click",e+" .pledge .reward_details",function(e){e.preventDefault();var t=(0,i.default)(this).closest(".pledge");t.find(".description").toggle(),t.find(".description_short").toggle(),t.trigger("resize")}),(0,i.default)(document).on("click",e+" a.completed_toggle, #backer_report_index #main table tbody tr td.completed a",function(e){var t,n=(0,i.default)(this),r=n.is(".completed");i.default.ajax({url:n.attr("href"),type:"put",dataType:"json",data:{"backer[completed]":!r},success:function(e){n.trigger("backer_completed",[n.data("backer_id"),!r,e.backer_completed_at]),n.toggleClass("completed",!r),e.backer_completed_at&&n.find("span.date").text(e.backer_completed_at)}}),n.closest(".modal_dialog").length?t="backer_modal":n.closest("td.completed").length&&(t="backer_row"),r?(0,a.track)("Rewards Sent Unchecked",{context:t}):(0,a.track)("Rewards Sent Checked",{context:t}),e.preventDefault()}),(0,i.default)(document).on("click",e+" .tab-nav a",function(t){t.preventDefault();var n=(0,i.default)(this).attr("rel"),r=(0,i.default)("."+n);(0,i.default)(e+" .panel").hide(),r.show(),(0,i.default)(".tab-nav li").removeClass("selected"),(0,i.default)(this).closest("li").addClass("selected"),(0,a.track)("Backings Show Toggle Tab",{toggled_to:n})}),(0,i.default)(document).on("ksr_json:complete",e+" .messages_panel",function(){var e=(0,i.default)(this),t=e.find(".message").length+1;e.trigger("message_sent",[e.data("backing-id"),t])}),(0,i.default)(document).on("message_sent",e+" .messages_panel",function(t,n,a){(0,i.default)(this).closest(e).find(".messages_link").html(r.default.t("onloads.views.backers.info.Messages_count",{count:a}))})})},"6JMX":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("LNuh"),(0,a.default)(function(){(0,a.default)(".video_player").livequery(function(){(0,a.default)(this).ksr_video()})})},"6TZa":function(e,t,n){"use strict";var i=n("Tvaj"),r=n("l/Rs");n("l/Rs");!function(e){function t(t){t.each(function(){var t=e(this),n=t.find("option:selected");t.siblings(".js-title, .title").text(n.data("altLabel")||n.text())})}e.fn.ksrSelect=function(){var n=e(this);n.find(".js-ksr-select").livequery(function(){t(e(this).find("select"))}),n.on("focus blur",".js-ksr-select select",function(){e(this).parent().toggleClass("is-focus")}),n.on("change",".js-ksr-select select",function(){t(e(this))}),n.on("keydown",".ksr-icon__arrow-down, .ss-delete, .js-filter-arrow, .js-filter-delete",function(t){var n=e(this),r=t.keyCode;r!==i.ENTER&&r!==i.SPACE||(t.preventDefault(),(n.hasClass("ss-delete")||n.hasClass("js-filter-delete"))&&n.parent().find(".ksr-icon__arrow-down, .js-filter-arrow").focus(),n.click())})},e.fn.ksr_val=function(n){var i=e(this);if(void 0!==n){var r=i.val(n);return t(i),r}return i.val()}}(r)},"6Zhv":function(e,t,n){var i=n("xA5w");e.exports=function(e,t){var n=i(e).getTime(),r=Number(t);return new Date(n+r)}},"6djF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={pageX:function(e){return e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX}};t.default=i},"6fBM":function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i};n("M1ti"),(0,a.default)("body#events_blockparty.not-touchable",function(){skrollr.init()})},"7HQH":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var n=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",i=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(n,function(e){t.API.next()}),t.container.on(i,function(){t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t,n,i){if(!t.allowWrap){var r=t.disabledClass,a=t.API.getComponent("next"),o=t.API.getComponent("prev"),s=t._prevBoundry||0,l=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==l?a.addClass(r).prop("disabled",!0):a.removeClass(r).prop("disabled",!1),t.currSlide===s?o.addClass(r).prop("disabled",!0):o.removeClass(r).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(i)},"7Tqv":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("+bVi"));function o(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,r.default)("body#site_spotlight",function(){a.default["not-touchable"]&&window.setTimeout(function(){skrollr.init({forceHeight:!1})},1e3),(0,i.default)(".js-explore-bar").on("click",function(e){(0,i.default)("html, body").animate({scrollTop:(0,i.default)("#js-spotlight-projects").offset().top},500,"easeOutExpo"),e.preventDefault()})})},"7dY0":function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("c5nH")),a=s(n("8NzR")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("body#pledges_new",function(){(0,o.track)("Viewed Pledge Checkout Page"),(0,i.default)("a.show_all_rewards").click(function(e){(0,i.default)(this).parents(".checkout_rewards").find("li:hidden").show(),(0,i.default)(this).parents(".checkout_rewards").removeClass("clicked_reward"),(0,i.default)(this).parents(".show_all").hide(),e.preventDefault(),(0,i.default)(document).trigger("shifted"),(0,o.track)("Expanded Rewards")}),(0,i.default)(".flash-error").livequery(function(){var e,t=parseInt((0,i.default)(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);e=void 0!==(0,i.default)(".radio:checked").attr("alt")?parseInt((0,i.default)(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null,(0,o.track)("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:(0,i.default)(this).text(),pledge_input_amount:parseInt(t,10)})}),-1!==location.search.indexOf("edit_from_interstitial=shipping")?(0,o.track)("Clicked Edit Shipping",{shipping_enabled:(0,i.default)(".radio:checked").parent().data("shipping_enabled"),project_country:r.default.get("country")}):-1!==location.search.indexOf("edit_from_interstitial=amount")&&(0,o.track)("Clicked Edit Amount",{shipping_enabled:(0,i.default)(".radio:checked").parent().data("shipping_enabled"),project_country:r.default.get("country")})})},"7e+d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trademarkPolicyLink=t.copyrightPolicyLink=t.communityGuidelinesLink=t.prohibitedItemsLink=t.ourRulesLink=void 0;var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i},o=n("Z5jf");t.ourRulesLink=a.default.createElement("a",{target:"blank",href:"/rules"},(0,o.boundT)("project_page.flagging.Our_rules")),t.prohibitedItemsLink=a.default.createElement("a",{target:"blank",href:"/rules/prohibited"},(0,o.boundT)("project_page.flagging.Prohibited_items")),t.communityGuidelinesLink=a.default.createElement("a",{target:"blank",href:"/help/community"},(0,o.boundT)("project_page.flagging.Community_guidelines")),t.copyrightPolicyLink=a.default.createElement("a",{target:"blank",href:"/help/copyright"},(0,o.boundT)("project_page.flagging.Copyright_policy")),t.trademarkPolicyLink=a.default.createElement("a",{target:"blank",href:"/help/trademark"},(0,o.boundT)("project_page.flagging.Trademark_policy"))},"7fY0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioButtonLabel=void 0;var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i};t.RadioButtonLabel=function(e){var t=e.labelHeader,n=e.labelBody;return a.default.createElement("div",null,a.default.createElement("strong",null,t),a.default.createElement("br",null),n)}},"7hji":function(e,t,n){"use strict";var i=l(n("l/Rs")),r=n("4RZc"),a=l(n("8NzR")),o=l(n("wmCY")),s=l(n("1LFw"));function l(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,a.default)("#new-sepa-account",function(e){if(!((0,i.default)("#react-payments-form").length>0)){var t={account_name_presence:o.default.t("sepa.errors.account_name_presence"),account_number_presence:o.default.t("sepa.errors.account_number_presence"),account_number_invalid:o.default.t("sepa.errors.account_number_invalid"),account_terms_accepted:o.default.t("sepa.errors.account_terms"),unknown_error:o.default.t("onloads.views.credit_cards.form.Embarrassing_unknown_error_occurred"),stripe_timeout:o.default.t("onloads.views.credit_cards.form.Embarrassing_processing_your_pledge")},n=e.find("#new_sepa_account_form"),a=n.find(".errored"),l=(0,i.default)("#saving-layer"),d=n.data("public-key"),c=n.find(":input"),u=n.find("input[name=sepa_account_name]"),f=n.find("input[name=sepa_account_number]"),h=n.find("input[name=sepa_accept_terms]"),p=n.find("input[name=reusable]"),m=n.data("checkout-reward-id"),g=n.data("checkout-id"),v=""===n.data("checkout-is-guest"),_=function(e,t){(0,r.track)("Checkout Error",{type:e,context:t,checkout_reward_id:m,checkout_id:g,checkout_is_guest:v})},y=function(e,n){var r=(0,i.default)(n),a=r.data("error");t.hasOwnProperty(a)&&(_(a),r.closest("li").addClass("invalid").find(".js-error-message").removeClass("hide h0").addClass("block mb1").text(t[a]))},b=function(e,t){(0,i.default)(t).data("error",null).closest("li").removeClass("invalid").find(".js-error-message").removeClass("block mb1").addClass("hide h0")};u.validates_presence({error:"account_name_presence"}),f.validates_presence({error:"account_number_presence"}).validates_custom(function(e){return 0===e.indexOf("DE")&&s.default.isValid(e)},{error:"account_number_invalid"}),h.validates_custom(function(){return h.is(":checked")},{error:"account_terms_accepted"}),c.on("paste keyup cut change input click",function(e){setTimeout(function(){(0,i.default)(e.target).validate()},0)}).on("blur",function(e){return(0,i.default)(e.target).each(y)}).on("validate:valid",function(e){return(0,i.default)(e.target).each(b)}).on("validate:invalid",function(e,t){return(0,i.default)(e.target).data("error",t)});var w=(0,i.default)("#js-stripe_form"),E=w.find("input[name=stripe_card_id]"),C=w.find("input[name=payment_type]"),k=w.find("input[name=reusable]");e.on("click",".sepa-terms__toggle",function(e){e.preventDefault(),(0,i.default)(".sepa-terms__mandate").toggleClass("sepa-terms__mandate--expanded")}),n.on("submit",function(e){if(e.preventDefault(),n.validate()){a.hide(),l.show();var t=setTimeout(function(){l.removeClass("spinning").find(".modal_dialog_body").html(o.default.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")),_("stripe_timeout")},3e4);Stripe.setPublishableKey(d),Stripe.source.create({currency:"eur",sepa_debit:{iban:f.val()},owner:{name:u.val()},type:"sepa_debit"},function(e,n){clearTimeout(t),l.hide(),S(n)})}else c.each(y)});var S=function(e){e.error?(a.html(e.error.message),a.show(),_("stripe_token",e.error.message)):(C.val("bank_account"),E.val(e.id),k.val(p.val()),w.submit())};(0,i.default)(document).on("change click","input.account_toggle",function(){(0,i.default)(this).closest(".payment_option").addClass("selected");var e=(0,i.default)("input.card_toggle");e.closest(".payment_option").removeClass("selected"),e.prop("checked",!1),n.slideDown(400,"easeOutQuad"),(0,i.default)("#new_card_form").slideUp(400,"easeOutQuad")}),(0,i.default)(document).on("change click","input.card_toggle",function(){(0,i.default)("input.account_toggle").prop("checked",!1),(0,i.default)("input.account_toggle").closest(".payment_option").removeClass("selected"),n.slideUp(400,"easeOutQuad")})}})},"7zD0":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,i.default)("form.requires-confirmation","submit").livequery(function(e){var t=(0,i.default)(this);(0,i.default)(this).find("input.confirmation").is(":checked")||(setTimeout(function(){t.removeClass("submitting-non-ajax")},100),(0,r.default)({error:a.default.t("onloads.initializers.form_requires_confirmation.Please_accept_the_Rules")}),e.preventDefault())})},"8+5l":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e)||(e.className=e.className+" "+t)};var i,r=n("Hgtn"),a=(i=r)&&i.__esModule?i:{default:i};e.exports=t.default},"84+x":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){var t;function n(t,n){this.$elem=t,this.$form=t.closest("form"),this.options=e.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},n),this.url=this.options.url||this.$form.attr("action"),this.options.file_extension?this.ajax_url=this.ensure_file_extension(this.options.file_extension):this.ajax_url=this.url,this.last_search=!1,this.search_xhr=!1,this.options.client_side_cache?this.cache={}:this.cache=!1,this.active=!0,this._attach()}e.fn.livesearch=function(t){return t=t||{},e(this).each(function(){var i=e(this).data("livesearch");i||(i=new n(e(this),t),e(this).data("livesearch",i))})},e.extend(n.prototype,{_attach:function(){var e=this;this.$elem.attr("autocomplete","off"),this.$elem.on("keypress cut paste input",function(){e.active&&(clearTimeout(t),t=setTimeout(function(){e.search()},e.options.delay))}),this.options.process_data||this.options.serialize.on("change",function(){e.search()}),this.$elem.on("livesearch:suspend",function(){e.active=!1}),this.$elem.on("livesearch:activate",function(){e.active=!0}),this.$elem.on("livesearch:cancel",function(){e.search_xhr&&e.search_xhr.abort(),e.last_search=!1})},ensure_file_extension:function(e){var t=window.location.host.replace(/[^\w\d]/g,function(e){return"\\"+e}),n=new RegExp("((?:"+t+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)");return this.url.replace(n,function(t,n,i,r){return n+"."+e+r})},suspend_while:function(e){this.active=!1,e();var t=this;setTimeout(function(){t.active=!0},100)},search:function(){var t=this,n=this.options.serialize.serialize();this.options.process_data&&"object"==typeof(n=this.options.process_data.apply(this,[n]))&&(n=e.param(n)),n!==this.last_search&&(this.$elem.val().length<this.options.minimum_characters||(this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[n]&&"function"!=typeof this.cache[n]?this.$elem.trigger("livesearch:results",[this.cache[n]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=e.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,data:n,global:!1,success:function(e){null!==e&&(t.$elem.trigger("livesearch:results",[e]),t.$elem.removeClass("searching"),t.cache&&(t.cache[n]=e))},error:function(){t.$elem.trigger("livesearch:ajax_error"),t.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=n))}})}(i)},"86os":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(".NS_pledges__no_ship").livequery(function(){var e=(0,a.default)(this),t=(0,a.default)("form.NS_pledges__form, form.manage_pledge"),n=t.find(".fields_and_submit"),i=t.closest(".modal_dialog"),r=i.data("modal_dialog");e.find("a.override").click(function(e){e.preventDefault(),(0,a.default)(this).trigger("close"),t.data("override",!0),t.removeClass("submitting-non-ajax"),t.find("#backing_location_id").val(null),t.submit()}),e.find("a.btn--green").click(function(t){t.preventDefault(),(0,a.default)(this).trigger("close"),r&&(e.hide(),n.show(),i.find("h1").show())})})})},"89L0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTimer=t.submitRequest=t.handleLoadFailure=t.handleLoadSuccess=t.unboundAsyncReducer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("tryQ"),a=n("EIRz"),o=n("Z6GA"),s=n("Tvr3");t.unboundAsyncReducer=function(e,t,n){return function(i,r){if(r.namespace&&r.namespace!==t)return i;switch(r.type){case"ASYNC_LOAD_INIT":return l(i,{populationQuery:n,queryArgs:r.queryArgs,namespace:r.namespace,startTimer:e.startFetchTimer,onLoadSuccess:e.onLoadSuccess,onLoadFailure:e.onLoadFailure});case"ASYNC_LOAD_SUCCESS":return d(i);case"ASYNC_LOAD_FAIL":return c(i);case"ASYNC_START_TIMER":return h(i,r.namespace,r.queryArgs,e.timerExpired);case"ASYNC_TIMER_EXPIRED":return p(i,e.loadAsync,n,r.queryArgs);default:return i}}};var l=function(e,t){var n=t.populationQuery,r=t.queryArgs,l=t.namespace,d=t.startTimer,c=t.onLoadSuccess,f=t.onLoadFailure;return(0,a.loop)(i({},e,{loadStatus:s.IN_PROGRESS}),a.Cmd.batch([a.Cmd.run(u,{args:[{populationQuery:n,queryArgs:r,onLoadSuccess:c,onLoadFailure:f}],successActionCreator:o.identity,failActionCreator:o.identity}),a.Cmd.action(d(l,r))]))},d=t.handleLoadSuccess=function(e){return i({},e,{loadStatus:s.LOADED})},c=t.handleLoadFailure=function(e){return i({},e,{loadStatus:s.UNLOADED})},u=t.submitRequest=function(e){var t=e.populationQuery,n=e.queryArgs,i=e.onLoadSuccess,a=e.onLoadFailure;return t.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)).then(function(e){return e.errors&&Promise.reject(e.errors),i(e.data)}).catch(function(e){return e.map(function(e){return r.Honeybadger.notify(e)}),a(n)})},f=t.fetchTimer=function(e,t,n,i){return(0,o.wait)(i,function(){return e(t,n)})(t,n)},h=function(e,t,n,i){return(0,a.loop)(e,a.Cmd.run(f,{args:[i,t,n,e.fetchTimeout]}))},p=function(e,t,n,r){var o=e.loadStatus,l=e.currentFetchRetries+1,d=e.maxFetchRetries<l;return o===s.LOADED||d?e:(0,a.loop)(i({},e,{currentFetchRetries:l}),a.Cmd.action(t(n,r)))}},"8ANd":function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".NS_projects__project_share",function(){i.default.getScript("//platform.tumblr.com/v1/share.js")})},"8Ml/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initProjectCardClickedTracking=t.initProjectCardTracking=t.trackProjectCards=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("l/Rs"),o=(i=a)&&i.__esModule?i:{default:i};n("LNuh");var s=n("4RZc"),l=n("Z6GA"),d=n("I2cB");var c=[],u=function(e){(0,s.track)("Viewed Project Card",e.data,{withoutCurrentProject:!0}),e.viewed=!0},f=function(e){var t=(0,o.default)(e.element),n=window.scrollY+window.innerHeight,i=t.offset().top+t.height()/2;return n>i&&i>0&&!e.viewed},h=function(e){return d.maybe.fromNullable(e.dataset).map(function(e){return["section","model_name","raw_score","weighted_score","project_state","project_pid","project_backers_count","project_percent_raised","project_pledged","user_is_backer","user_has_starred"].reduce(function(t,n){return r({},t,(i={},a=n,o=e[n]||"",a in i?Object.defineProperty(i,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[a]=o,i));var i,a,o},{})}).map(function(t){return r({},t,function(e){var t=(0,o.default)(e).parent(),n=(0,o.default)(e).closest(".js-project-group").find(".js-track-project-card"),i=n.first().parent().siblings().length+1;return{position_in_row:t.index()+1,row_total:t.siblings().length+1,row_number:Math.ceil((n.index((0,o.default)(e))+1)/i)}}(e))}).getOrElse({})};t.trackProjectCards=function(){c.filter((0,l.compose)(l.isFalse,(0,l.prop)("viewed"))).filter((0,l.compose)(l.isFalse,(0,l.prop)("hidden"))).filter(f).forEach(u)},t.initProjectCardTracking=function(e){e.forEach(function(e){return(0,o.default)(e).livequery(function(){c=c.concat({data:h(this),hidden:(0,o.default)(this).parent().hasClass("hide"),element:this,viewed:!1})})})},t.initProjectCardClickedTracking=function(e,t,n){var i=r({},h(e),n);(0,o.default)(e).find("a").each(function(e,n){return(0,s.trackLinks)(n,t,i,{withoutCurrentProject:!0})})}},"8NzR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};function o(e,t){(0,a.default)(function(){var n=(0,a.default)(e);n.length&&t(n)})}window.define_namespace=o,t.default=o},"8UPI":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Unavailable=t.SurveyInfo=t.ShippingInfo=t.ShippingAndPayments=t.RewardSummary=t.PledgeWithoutReward=t.Limit=t.ItemList=t.DeliveryInfo=t.ExtraInfo=t.EndTimes=t.DeliveryTime=t.ConversionEstimate=t.ContinueButton=t.CreatorInformation=t.BackerCountAndLimits=t.BackedLabel=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("Z5jf"),l=n("1h7p"),d=n("b04z"),c=n("Puot"),u=n("ci1u"),f=n("uA/L"),h=n("J1uj"),p=n("Z6GA"),m=n("IPoO"),g=n("/Vlt");var v=t.BackedLabel=function(){return o.default.createElement(f.Div,{atoms:["mb3"]},o.default.createElement(f.Span,{type:"caption-100",color:"white",weight:"bold",atoms:["absolute t0 l3 inline-block py1 px2 bg-blue-500"]},(0,s.boundT)("project_page.reward.You_selected")))},_=(t.BackerCountAndLimits=function(e){var t=e.reward,n=!e.unavailable&&t.campaignLive&&t.endsAt,i=t.campaignLive&&t.limitExists;return o.default.createElement(f.Div,{atoms:["mt3"]},n&&o.default.createElement(w,{end:t.endsAt}),n&&i&&" ",i&&o.default.createElement(S,{remaining:t.remainingItems,limit:t.limit}),o.default.createElement(f.Span,{type:"caption-100",color:"dark-grey-500",atoms:["block"]},(0,s.boundT)("project_page.reward.backers_count.other",{formatted_count:t.backersCount})))},t.CreatorInformation=function(e){var t=e.onClick,n=e.surveys;return o.default.createElement("div",null,o.default.createElement(d.Button,{size:"small",color:"blue",atoms:["mt3"],onClick:t},(0,s.boundT)("project_page.reward.Backer_report")),o.default.createElement(R,{surveys:n}))},t.ContinueButton=function(e){var t=e.onClick,n=e.serverErrors,i=void 0===n?[]:n;return o.default.createElement("div",null,!!i.length&&o.default.createElement("ul",{className:"red-500 pt3"},i.map(function(e){return o.default.createElement("li",{key:e.message},e.message)})),o.default.createElement(d.Button,{color:"green",atoms:["mt3 w100p"],onClick:t},(0,s.boundT)("project_page.reward.Continue")))}),y=t.ConversionEstimate=function(e){var t=e.amount,n=e.atoms;return o.default.createElement("div",{className:"basis100p"},o.default.createElement(f.Span,{color:"dark-grey-500",atoms:n},(0,s.boundT)("project_page.reward.Estimated_conversion",{amount:t})))},b=t.DeliveryTime=function(e,t){return o.default.createElement(l.Time,{format:e,date:t})},w=t.EndTimes=function(e){var t=e.end;return o.default.createElement("div",{className:"inline pledge__limit ksr_page_timer","data-end_time":t},o.default.createElement("span",{className:"js-num"}),"",o.default.createElement("span",{className:"js-text"}),"")},E=t.ExtraInfo=function(e){return function(t){var n=t.atoms,i=t.info;return o.default.createElement(f.Div,{atoms:["basis50p"]},o.default.createElement(f.Span,{color:"dark-grey-500",atoms:n},e),o.default.createElement(f.Span,{color:"soft-black",atoms:["lh3"]},i))}},C=t.DeliveryInfo=E((0,s.boundT)("project_page.reward.Estimated_delivery")),k=t.ItemList=function(e){var t=e.atoms,n=e.items;return o.default.createElement("div",null,o.default.createElement(f.Span,{color:"dark-grey-500",atoms:t},(0,s.boundT)("project_page.reward.Includes")),o.default.createElement("ul",{className:"type-14 ml3 soft-black medium mb2 pl2"},n.map(function(e,t){return o.default.createElement("li",{key:t,className:"list-disc"},+e.quantity>1?e.quantity+"x "+e.name:e.name)})))},S=t.Limit=function(e){var t=e.remaining,n=e.limit,i=(0,s.boundT)("project_page.reward.rewardremaining_left_of_rewardlimit",{rewardremaining:t,rewardlimit:n});return o.default.createElement(f.Span,{color:"red-500",type:"caption-100"},i)},T=(t.PledgeWithoutReward=function(e){var t=e.atoms,n=void 0===t?[]:t,i=e.backed,r=e.backingAmount,a=e.continueClick,l=e.currentTotalCost,d=e.errors,c=e.onApplePayClick,u=e.onBlurField,h=e.onPledgeValueChange,y=e.onRewardClick,b=e.onRewardKeyPress,w=e.pledgeData,E=e.selected,C=e.serverErrors,k=(0,p.computedAtoms)(n,"pointer block text-left new-form",!E&&!i&&"border-grey-400",E&&"border-dark-grey-400",i?"mb0 pointer border-blue-500":"mb3"),S=(0,p.partial)(y,{id:m.NO_REWARD,minPledge:w.defaultPledge});return o.default.createElement("div",{role:"button",className:k,tabIndex:"0",onClick:S,onKeyPress:(0,p.partial)(b,{id:m.NO_REWARD,minPledge:w.defaultPledge})},i&&o.default.createElement(v,null),o.default.createElement(f.Heading,{level:2,type:"subhead-300",weight:"normal",color:"soft-black",atoms:["mb3"]},(0,s.boundT)("project_page.reward.Make_a_pledge_without_a_reward")),o.default.createElement(g.TotalCostInput,{value:i?r:null!==l&&E?l:w.defaultPledge.amount,convert:w.convertCurrency,errors:d,onBlurField:u,onClick:S,onSelect:S,onChange:h,minPledge:w.defaultPledge,pledgeData:w,idForKey:m.NO_REWARD,idForField:m.PLEDGE_NO_REWARD}),E&&!w.applePayCapable&&o.default.createElement(_,{onClick:(0,p.partial)(a,m.NO_REWARD),serverErrors:C}),E&&w.applePayCapable&&o.default.createElement(T,{applePayClick:(0,p.partial)(c,m.NO_REWARD),otherPaymentClick:(0,p.partial)(a,m.NO_REWARD),serverErrors:C}))},t.RewardSummary=function(e){var t,n,i=e.reward,r=e.active,a=e.onTruncateClick,l=void 0===a?function(){}:a,d=e.truncateReward,c=void 0===d?function(){}:d,u=e.truncationStatus,h=["block text-uppercase type-10"],g=(0,p.computedAtoms)(h,"track-loose"),v=(0,p.computedAtoms)(h,"ls-5"),_=r&&u==m.CLOSED,w=r&&u==m.EXPANDED,E=_?(0,s.boundT)("project_page.reward.Read_more"):(0,s.boundT)("project_page.reward.Less"),S=(0,p.computedAtoms)("mb4 relative",_&&"h9 clip"),T=_?"-0.1rem":"-2rem";return o.default.createElement("div",null,o.default.createElement(f.Heading,{level:2,type:"subhead-300",weight:"normal",color:"soft-black",atoms:["mb3"]},(t=i.maxPledge,n=i.minPledge.formatted,t?(0,s.boundT)("project_page.reward.Pledge",{amount:n}):(0,s.boundT)("project_page.reward.Pledge_or_more",{amount:n})),i.convertCurrency&&o.default.createElement(y,{amount:i.conversionEstimate,atoms:(0,p.computedAtoms)(g,"pt1")})),i.title&&o.default.createElement(f.Heading,{level:3,type:"body-200",weight:"normal",color:"soft-black",atoms:["mb3"]},i.title),o.default.createElement("div",{ref:c,className:S},(_||w)&&o.default.createElement("button",{type:"button",onClick:l,className:"absolute r0 pl6 pr2 type-14 gradient-transparent-to-white-20p",style:{bottom:T,outline:"none"}},E),i.description&&o.default.createElement(f.Paragraph,{type:"body-100",color:"dark-grey-500",atoms:["lh3 text-prewrap"]},i.description),!!i.items.length&&o.default.createElement(k,{items:i.items,atoms:g})),o.default.createElement(f.Div,{atoms:["flex"]},i.deliveryDate&&o.default.createElement(C,{atoms:v,info:b(i.deliveryDate.format,i.deliveryDate.date)}),i.shippingSummary&&o.default.createElement(A,{atoms:v,info:i.shippingSummary})))},t.ShippingAndPayments=function(e){var t=e.consts,n=e.currentTotalCost,i=e.dispatch,a=e.onApplePayClick,s=e.onBlurField,l=e.onClick,d=e.onPledgeValueChange,c=e.pledgeData,u=e.reward,f=e.selectState,p=e.ShippingCountryDropdown,v=e.validator,y=e.validation,b=v({fields:[m.SHIPPING_LOCATION],state:y});return o.default.createElement("div",{className:"mt6 new-form"},t.DISPLAY_SHIPPING&&o.default.createElement("div",{className:"mb3"},o.default.createElement(p,r({state:f,dispatch:i,hasErrors:b},u.shippingRules)),o.default.createElement(h.InputErrors,{name:m.SHIPPING_LOCATION,id:u.id,errors:b})),o.default.createElement(g.TotalCostInput,{convert:u.convertCurrency,errors:v({fields:[m.PLEDGE_AMOUNT],state:y}),idForField:m.PLEDGE_AMOUNT,idForKey:u.id,label:!0,pledgeData:c,minPledge:u.minPledge,onBlurField:s,onChange:d,value:n}),!c.applePayCapable&&o.default.createElement(_,{onClick:l,serverErrors:y.serverErrors}),c.applePayCapable&&o.default.createElement(T,{applePayClick:a,otherPaymentClick:l,serverErrors:y.serverErrors}))},function(e){var t=e.applePayClick,n=e.otherPaymentClick,i=e.serverErrors;return o.default.createElement(o.default.Fragment,null,!!i.length&&o.default.createElement("ul",{className:"red-500 pt3"},i.map(function(e){return o.default.createElement("li",{key:e.message},e.message)})),o.default.createElement("div",{className:"mt3 pledge__applepay js-applepay"},o.default.createElement("button",{className:"btn btn--applepay btn--block",onClick:t},o.default.createElement("span",{className:"btn-text"})),o.default.createElement("button",{className:"btn block text-center w100p mt2 bold text-14 dark-grey-500 other-payment-button",onClick:n},(0,s.boundT)("project_page.reward_form.Other_payment_options"),o.default.createElement(u.Icon,{name:"icon--arrow-right",size:"12",atoms:["pl2"]}))),o.default.createElement("div",{className:"mt5 text-center"},o.default.createElement(f.Paragraph,{type:"caption-100",color:"dark-grey-400",atoms:["bold","mb0"]},(0,s.boundT)("project_page.reward_form.Kickstarter_is_not_a_store")),o.default.createElement(f.Paragraph,{type:"caption-100",color:"dark-grey-400"},(0,s.boundT)("project_page.reward_form.Its_a_way_to_bring_creative_projects_to_life")),o.default.createElement(c.Link,{href:"http://www.kickstarter.com/trust?ref=project_reward",target:"_blank",atoms:["type-12"]},(0,s.boundT)("project_page.reward_form.Learn_more_about_accountability"))))}),A=t.ShippingInfo=E((0,s.boundT)("project_page.reward.Ships_to")),R=t.SurveyInfo=function(e){var t=e.surveys,n=!!t,i="block text-uppercase type-10 ls-5";return o.default.createElement(f.Div,{atoms:["mt3 pr3"]},!n&&o.default.createElement(f.Span,{atoms:i},(0,s.boundT)("project_page.reward.No_surveys_sent")),n&&t.map(function(e,t){var n=!!e.count;return o.default.createElement(f.Div,{color:"dark-grey-500",type:"body-100",key:t},o.default.createElement(f.Span,{atoms:i},(0,s.boundT)("project_page.reward.Survey_sent")),o.default.createElement(l.Time,{format:e.format,date:e.date}),n&&o.default.createElement(f.Span,null,"  ",(0,s.boundT)("project_page.reward.responses",{responses:e.count})," "))}))};t.Unavailable=function(){return o.default.createElement("div",null,o.default.createElement(f.Span,{type:"caption-100",color:"soft-black",weight:"bold",atoms:["inline-block p2 mt3 bg-grey-400"]},(0,s.boundT)("project_page.reward.Reward_no_longer_available")))}},"8bXp":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("wmCY"));n("hsYx");var a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e,t=(0,i.default)(".NS_layouts__user_dropdown"),n=!1,o=!1;function s(){t.find("#menu-me-backed").length&&t.find(".user-dropdown").addClass("backer"),t.find("#menu-me-created").length&&t.find(".user-dropdown").addClass("creator")}function l(e){var n=t.find("#menu-me-children");KSR.store.setItem("user_dropdown_backer_creator_columns_html",e),n.children(".NS_layouts__user_dropdown_backer_creator_columns").remove(),n.append(e),s()}function d(e){o||(o=i.default.ajax({url:t.data("user_dropdown_backer_creator_columns_path"),type:"get",dataType:"html",data:{i18n:r.default.enabled},beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){l(e),n=!0},complete:function(){e&&e(),o=!1}}))}(e=KSR.store.getItem("user_dropdown_backer_creator_columns_html"))&&(l(e),n=!0),s(),(0,i.default)(".js-user-menu-tab").on("user_dropdown:open",function(){var e=(0,i.default)(this);n?e.addClass("selected"):d(function(){e.addClass("selected")})}),(0,i.default)(".js-user-menu-tab, .js-user-menu-tab > a").one("click",function(){(0,a.track)("Account Menu Dropdown",{new_indicator_visible:(0,i.default)(this).find(".indicator").is(":visible")}),d()}),(0,i.default)(document).on("user_dropdown:refresh_from_remote",function(){d()}),(0,i.default)("body").is(".just_logged_out")&&KSR.store.removeItem("user_dropdown_backer_creator_columns_html")})},"8dPd":function(e,t,n){"use strict";var i=d(n("l/Rs")),r=d(n("8NzR")),a=d(n("L3hI")),o=d(n("wmCY")),s=d(n("UQDk")),l=d(n("MA+5"));function d(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_site__social_tout",function(e){window.api_oauth_token&&(0,i.default)(window).on("scroll",function t(){window.scrollY+1.5*(0,i.default)(window).height()<=e.offset().top||((0,i.default)(window).unbind("scroll",t),i.default.ajax({url:(0,s.default)(e.data("url")),type:"get",success:function(t){var n=t.remotely_followed_count,i=t.remotely_followed.users;n>0&&(e.find(".js-friend-count").html(o.default.t("onloads.views.site.social_tout.Count_of_your_friends_are_on_kickstarter",{count:n,formatted_count:a.default.format_number(n,{precision:0})})),e.find(".js-avatar-pile").html((0,l.default)("activity/card/_backing_avatars",{backers:i})))}}))})})},"8lQX":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.round(e.getTime()/1e3)}},"8nDS":function(e,t,n){var i,r,a,o;o=function(e){return e.createModule("Serializer",["WrappedSelection"],function(e,t){var n=e.util;"undefined"!=typeof encodeURIComponent&&"undefined"!=typeof decodeURIComponent||t.fail("encodeURIComponent and/or decodeURIComponent method is missing");var i=function(){var e=null;return function(t){for(var n=function(e){for(var t,n=[],i=0,r=e.length;i<r;++i)(t=e.charCodeAt(i))<128?n.push(t):t<2048?n.push(t>>6|192,63&t|128):n.push(t>>12|224,t>>6&63|128,63&t|128);return n}(t),i=-1,r=(e||(e=function(){for(var e,t,n=[],i=0;i<256;++i){for(t=i,e=8;e--;)1==(1&t)?t=t>>>1^3988292384:t>>>=1;n[i]=t>>>0}return n}()),e),a=0,o=n.length;a<o;++a)i=i>>>8^r[255&(i^n[a])];return(-1^i)>>>0}}(),r=e.dom;function a(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(e,t){t=t||[];var n=e.nodeType,i=e.childNodes,r=i.length,s=[n,e.nodeName,r].join(":"),l="",d="";switch(n){case 3:l=a(e.nodeValue);break;case 8:l="\x3c!--"+a(e.nodeValue)+"--\x3e";break;default:l="<"+s+">",d="</>"}l&&t.push(l);for(var c=0;c<r;++c)o(i[c],t);return d&&t.push(d),t}function s(e){var t=o(e).join("");return i(t).toString(16)}function l(e,t,n){var i=[],a=e;for(n=n||r.getDocument(e).documentElement;a&&a!=n;)i.push(r.getNodeIndex(a,!0)),a=a.parentNode;return i.join("/")+":"+t}function d(e,n,i){n||(n=(i||document).documentElement);for(var a,o=e.split(":"),s=n,l=o[0]?o[0].split("/"):[],d=l.length;d--;){if(!((a=parseInt(l[d],10))<s.childNodes.length))throw t.createError("deserializePosition() failed: node "+r.inspectNode(s)+" has no child with index "+a+", "+d);s=s.childNodes[a]}return new r.DomPosition(s,parseInt(o[1],10))}function c(n,i,a){if(a=a||e.DomRange.getRangeDocument(n).documentElement,!r.isOrIsAncestorOf(a,n.commonAncestorContainer))throw t.createError("serializeRange(): range "+n.inspect()+" is not wholly contained within specified root node "+r.inspectNode(a));var o=l(n.startContainer,n.startOffset,a)+","+l(n.endContainer,n.endOffset,a);return i||(o+="{"+s(a)+"}"),o}var u=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/;function f(n,i,a){i?a=a||r.getDocument(i):i=(a=a||document).documentElement;var o=u.exec(n),l=o[4];if(l){var c=s(i);if(l!==c)throw t.createError("deserializeRange(): checksums of serialized range root node ("+l+") and target root node ("+c+") do not match")}var f=d(o[1],i,a),h=d(o[2],i,a),p=e.createRange(a);return p.setStartAndEnd(f.node,f.offset,h.node,h.offset),p}function h(e,t,n){t||(t=(n||document).documentElement);var i=u.exec(e)[3];return!i||i===s(t)}function p(t,n,i){for(var r=(t=e.getSelection(t)).getAllRanges(),a=[],o=0,s=r.length;o<s;++o)a[o]=c(r[o],n,i);return a.join("|")}function m(t,n,i){n?i=i||r.getWindow(n):n=(i=i||window).document.documentElement;for(var a=t.split("|"),o=e.getSelection(i),s=[],l=0,d=a.length;l<d;++l)s[l]=f(a[l],n,i.document);return o.setRanges(s),o}var g="rangySerializedSelection";n.extend(e,{serializePosition:l,deserializePosition:d,serializeRange:c,deserializeRange:f,canDeserializeRange:h,serializeSelection:p,deserializeSelection:m,canDeserializeSelection:function(e,t,n){var i;t?i=n?n.document:r.getDocument(t):t=(n=n||window).document.documentElement;for(var a=e.split("|"),o=0,s=a.length;o<s;++o)if(!h(a[o],t,i))return!1;return!0},restoreSelectionFromCookie:function(e){var t=function(e){for(var t,n,i=e.split(/[;,]/),r=0,a=i.length;r<a;++r)if((t=i[r].split("="))[0].replace(/^\s+/,"")==g&&(n=t[1]))return decodeURIComponent(n.replace(/\s+$/,""));return null}((e=e||window).document.cookie);t&&m(t,e.doc)},saveSelectionCookie:function(t,n){t=t||window;var i=(n="object"==typeof n?n:{}).expires?";expires="+n.expires.toUTCString():"",r=n.path?";path="+n.path:"",a=n.domain?";domain="+n.domain:"",o=n.secure?";secure":"",s=p(e.getSelection(t));t.document.cookie=encodeURIComponent(g)+"="+encodeURIComponent(s)+i+r+a+o},getElementChecksum:s,nodeToInfoString:o}),n.crc32=i}),e},r=[n("5Nri")],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a)},"8tKI":function(e,t,n){"use strict";var i=s(n("rXeC")),r=s(n("8NzR")),a=s(n("+bVi")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,r.default)("#faqs_show",function(e){var t=e.find(".sidebar"),n=(0,i.default)(".subcat").find("a"),r=e.find("a.anchor.current").siblings(".subcat-list"),s=e.find(".js-category"),l=!1;function d(e){n.removeClass("current"),r.find('a[data-name-short="'+e+'"]').addClass("current")}t.sticky_bar({parent:t.closest(".main")}),n.on("click",function(){var e=(0,i.default)(this).data("name-short");l=!0,d(e),i.default.scrollTo("#"+e,800,{onAfter:function(){l=!1}})}),s.add(n).on("click",function(){var e=(0,i.default)(this).data("name-full");(0,o.track)("Viewed "+e)}),t.find("a.anchor.current").siblings(".subcat-list").find("li:first-child a").addClass("current"),(0,i.default)(".list-faqs > li").waypoint(function(){l||d(this.element.id)}),a.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},"8uP6":function(e,t,n){"use strict";var i=n("4RZc"),r=c(n("GiK3")),a=c(n("rNU7")),o=c(n("shXp")),s=c(n("8NzR")),l=n("Z6GA"),d=n("PMix");function c(e){return e&&e.__esModule?e:{default:e}}(0,s.default)("#NS_discover__landing",function(e){var t=e.data("category"),n=e.find(".js-load-more"),s=function(e){var t=(0,d.RebrandToggleCard)(),n=document.createElement("div");return n.setAttribute("data-project",JSON.stringify(e)),n.className="js-react-async-proj-card col-full col-sm-12-24 col-lg-8-24",n.id=e.slug+"-"+(0,l.uuidNoDashes)(),n.innerHTML=a.default.renderToStaticMarkup(r.default.createElement(t,{state:{}})),n};n.loadMore({default_page:0,perPage:12,responseToHTML:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return n.className="grid-row flex flex-wrap",e.projects.map(s).forEach(function(e){return t.appendChild(e)}),n.appendChild(t),n}}),n.on("mobius:loading_page",function(){(0,i.track)("Discover Category See More Clicked",o.default.extend((0,i.namespaceKeys)("discover_category",t),{discover_module_type:n.data("type")}))})})},"91We":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(t,n,i){var r;t.API.getComponent("pager").each(function(){var a=e(this);if(n.pagerTemplate){var o=t.API.tmpl(n.pagerTemplate,n,t,i[0]);r=e(o).appendTo(a)}else r=a.children().eq(t.slideCount-1);r.on(t.pagerEvent,function(e){e.preventDefault(),t.API.page(a,e.currentTarget)})})}function n(e,t){var n=this.opts();if(!n.busy||n.manualTrump){var i=e.children().index(t),r=n.currSlide<i;n.currSlide!=i&&(n.nextSlide=i,n.API.prepareTx(!0,r),n.API.trigger("cycle-pager-activated",[n,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,n,i){i.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,i,r){t.pager&&(t.API.buildPagerLink(t,i,r),t.API.page=n)}),e(document).on("cycle-slide-removed",function(t,n,i,r){n.pager&&n.API.getComponent("pager").each(function(){var t=e(this);e(t.children()[i]).remove()})}),e(document).on("cycle-update-view",function(t,n,i){n.pager&&n.API.getComponent("pager").each(function(){e(this).children().removeClass(n.pagerActiveClass).eq(n.currSlide).addClass(n.pagerActiveClass)})}),e(document).on("cycle-destroyed",function(e,t){var n=t.API.getComponent("pager");n&&(n.children().off(t.pagerEvent),t.pagerTemplate&&n.empty())})}(i)},"92m3":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),function(){function e(e){e.data("is-blocking")?(e.text(a.default.t("onloads.views.user_blocks.block_button.Blocked")),e.removeClass("btn btn--text grey-dark btn--small"),e.addClass("btn btn--gray")):(e.text(a.default.t("onloads.views.user_blocks.block_button.Block")),e.removeClass("btn btn--gray"),e.addClass("btn grey-dark btn--small")),e.removeClass("hidden")}(0,i.default)(".js-block-user").livequery(function(){var t=(0,i.default)(this);t.on("click",function(n){var a=t.data("is-blocking")?t.data("unblock-path"):t.data("block-path");t.prop("disabled",!0),i.default.ajax({url:a,dataType:"json",method:"post"}).success(function(n){200===n.status?function(t){!0===t.data("is-blocking")?(t.data("is-blocking",!1),e(t),t.trigger("ksr:unblock_user")):(t.data("is-blocking",!0),e(t),t.trigger("ksr:block_user"))}(t):(0,r.default)({error:n.message})}).complete(function(){t.prop("disabled",!1)}),n.preventDefault()}),t.on("mouseenter focus",function(){!function(e){e.data("is-blocking")&&(e.data("previous-html",e.html()),e.html(a.default.t("onloads.views.user_blocks.block_button.Unblock")))}(t)}),t.on("mouseleave blur",function(){!function(e){var t=e.data("previous-html");e.data("is-blocking")&&t&&e.html(t)}(t)}),t.on("ksr:unblock_user",function(){t.addClass("hidden")}),e(t)})}()},"98MR":function(e,t,n){"use strict";var i,r=n("L3hI"),a=(i=r)&&i.__esModule?i:{default:i};var o=n("l/Rs");n("l/Rs");!function(e){function t(t,n){var i;for(this.$elem=t,this.val=0,this.options=e.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},n),this.val=this.$elem.attr("rel"),this.keyframes=this.options.keyframes,this.framesets=this.options.framesets,this.framesets||this.init_framesets(),i=0;i<this.options.max_digits;i+=1)this.init_digit(i);this.write(this.val,!0)}e.fn.ticker=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("ticker");i||(i=new t(e(this),n),e(this).data("ticker",i))})},e.extend(t.prototype,{read:function(){return this.val},write:function(t,n){this.val=String(t||""),this.$elem.attr("rel",this.val);var i,r,o,s,l,d,c,u,f=(this.options.format_numbers?a.default.format_number(this.val,{precision:0}):this.val).split(""),h=this.$elem.find(".ticker_digit");for(u=0;u<f.length-h.length;u+=1)this.init_digit(u+h.length);for(h=this.$elem.find(".ticker_digit"),u=0;u<h.length;u+=1){if(r=(i=e(h[u])).html(),o=f[u]?String(f[u]):"",s=e.inArray(o,this.keyframes),l=this.framesets[s][0],d=e.inArray(i.html(),this.keyframes),c=[],i.html(o).data("tween_id",i.data("tween_id")+1),!o||o===r||n)c=c.concat(l);else for(;d!==s;)c=c.concat(this.framesets[d]),d=(d+=1)>=this.keyframes.length?1:d;this.tween(i.data("tween_id"),i,c)}},init_framesets:function(){var e,t;for(this.framesets=[],e=0;e<this.keyframes.length;e+=1)for(this.framesets.push([]),t=0;t<this.options.frame_count;t+=1)this.framesets[e].push(e*this.options.frame_count*this.options.frame_step+t*this.options.frame_step)},init_digit:function(t){var n=e(this.$elem.find(".ticker_digit").get(t));n.length||(n=e('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem)),n.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(e){e.remove(),this.pad_digits()},tween:function(e,t,n){if(n.length){if(t.data("tween_id")!==e)return!1;var i=this;setTimeout(function(){var r=n.shift();t.css({"background-position":"0px "+-1*r+"px"}),i.tween(e,t,n)},this.options.frame_duration)}}})}(o)},"9DJv":function(e,t,n){"use strict";var i,r=d(n("l/Rs")),a=d(n("shXp")),o=n("4RZc"),s=d(n("hBlz")),l=d(n("DkOX"));function d(e){return e&&e.__esModule?e:{default:e}}n("sWK4"),n("jAPW"),n("LNuh"),n("452R"),n("v6Dq"),n("mjY1"),i=History.isTraditionalAnchor,"undefined"!=typeof History&&(History.isTraditionalAnchor=function(e){return 0===e.indexOf("remote_modal_dialog")||i.apply(this,arguments)}),(0,r.default)(function(){(0,r.default)(".modal_dialog").livequery(function(){var e=(0,r.default)(this),t=e.attr("id");(0,r.default)(document).on("click",".link_to_"+t,function(t){e.modal_dialog({event:t}),t.preventDefault()}),e.closest(".pop_modal_on_load").length&&e.modal_dialog()}),(0,r.default)(document).on("click",".remote_modal_dialog",function(e){if(e.preventDefault(),!(0,r.default)(this).is(".disabled")){var t=r.default.open_remote_modal_dialog((0,s.default)((0,r.default)(this).attr("href")).suffix("js").toString(),{title:a.default.escape((0,r.default)(this).attr("data-modal-title")),id:(0,r.default)(this).attr("data-modal-id"),event:e,do_not_cache:!!(0,r.default)(this).attr("data-do_not_cache"),class_name:(0,r.default)(this).attr("data-modal-class"),theme:(0,r.default)(this).attr("data-modal-theme"),ignore_parent:!!(0,r.default)(this).attr("data-ignore_parent"),remote_modal_dialog_contents_loaded:function(e){var t=e.find(".move_to_head");t.length&&((0,r.default)("head").append(t.children()),t.remove())},dataType:"html"});t&&((0,r.default)(this).data("modal_dialog",t),t.$elem.on("modal_dialog:remote_dialog_loaded",function(){try{"undefined"!=typeof FB&&FB.XFBML&&FB.XFBML.parse()}catch(e){}}))}}).each(function(){var e=(0,r.default)(this);e.is(".pop_modal_on_load")&&e.click()}),(0,r.default)(document).on("click",".modal_dialog_close",function(e){e.preventDefault(),(0,r.default)(this).trigger("close.modal_dialog")}),(0,r.default)(document).on("closed.modal_dialog",function(e){(0,r.default)(e.target).find(".video-player").trigger("ksr_video:pause")}),(0,r.default)(document).on("click",".modal_dialog .pagination a",function(e){var t=(0,r.default)(this).closest(".modal_dialog_body"),n=(0,r.default)(this);t.height(t.height()),e.preventDefault(),r.default.ajax({url:n.attr("href"),type:"get",dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t.html(e),r.default.scrollTo(t),t.css("height","auto")}})});var e,t=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/.exec(window.location.hash),n=/^#remote_modal_dialog:(.*)$/.exec(window.location.hash);t&&(e=t[1],(0,r.default)("#"+e).modal_dialog(),window.location.replace("#")),n&&((0,r.default)(".remote_modal_dialog").each(function(){(0,l.default)(decodeURIComponent(n[1]),decodeURIComponent((0,r.default)(this).attr("href")))&&(0,r.default)(this).click()}),window.location.replace("#")),(0,r.default)(".generate_modal_dialog").livequery(function(){var e=(0,r.default)(this),t=a.default.pick(e.data(),"id");r.default.create_modal_dialog(e.data("title"),e.data("content"),t)}),(0,r.default)(document).on("modal_dialog:opened",function(e,t){var n;n={modal_class:t.options.class_name,modal_title:t.options.title,modal_id:t.options.id,modal_event_class:!!t.options.event&&t.options.event.target.classList[0]},(0,o.track)("Modal Dialog View",n)})})},"9VV1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i},o=n("Tvaj");n("s94J");var s,l=(0,a.default)("#growl_section");function d(){l.fadeOut("fast"),s&&s.length&&s.focus()}l.on("click",function(e){var t;(0,a.default)(e.target).is((0,a.default)(this))&&((t=(0,a.default)(this)).fadeOut("fast"),t.removeClass("sticky"),t.find("div.jGrowl-notification:parent").each(function(){(0,a.default)(this).data("jGrowl")&&((0,a.default)(this).data("jGrowl").sticky=!1)}))}),(0,a.default)(document).on("keydown",function(e){e.which===o.ESC&&l.is(":visible")&&d()});var c=function(e,t){a.default.each(e,function(e,n){void 0===t&&(t={}),"error"===e&&(t.sticky=!0,l.addClass("sticky")),l.jGrowl(n,a.default.extend(t,{theme:e,closeTemplate:'<button class="jGrowl-close-x" aria-label="close notification"><span class="ksr-icon__close" aria-hidden="true"></span></button>',beforeOpen:function(){l.fadeIn("fast"),s=(0,a.default)(":focus"),l.find(".jGrowl-notification").attr("tabindex",-1).focus()},close:function(){d()}}))})};window.growl=c,t.default=c},"9vef":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncDropdown=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("HeCS"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("E/SE")),d=n("dY/E"),c=n("89L0");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.createAsyncDropdown=function(e){return function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t+"_asyncSelect",a=(0,s.namespaceSelect)(t),f=a.Component,h=a.reducer,p=(0,d.namespaceActions)(t)(l);return{Component:function(e){var t=e.state,n=e.dispatch,i=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["state","dispatch"]);return o.default.createElement(f,r({state:t,dispatch:n,size:"x-small"},i))},reducers:(n={},u(n,t+"-select",h(i)),u(n,t+"-async",(0,c.unboundAsyncReducer)(p,t,e)),n),actions:p,namespace:t}}}},"9x+j":function(e,t,n){"use strict";var i=c(n("l/Rs")),r=n("ZG75"),a=c(n("9VV1")),o=c(n("wmCY")),s=n("4RZc"),l=c(n("hBlz"));n("LNuh");var d=c(n("c5nH"));function c(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".js-could-have-comments").length&&(0,i.default)(".load_new_comments").livequery(function(){var e,t,n,c,u=(0,i.default)(".load_new_comments");function f(e){void 0===e&&(e={}),(e.comments_count||d.default.get("comments_count"))-(e.comments_loaded||d.default.get("comments_loaded"))>0?u.show():u.hide()}function h(e,t){var n,r=(0,i.default)(this),s=new l.default(this.href).removeQuery("cursor").addQuery({cursor:e});"asc"===t&&s.addQuery({direction:t}),n=s.toString(),i.default.ajax({url:n,beforeSend:function(){r.addClass("loading")},complete:function(){r.removeClass("loading")},success:function(e){var n="asc"===t?"prepend":"append";"asc"===t&&d.default.set("comments_loaded",e.comments_count),d.default.set("comments_count",e.comments_count),(0,i.default)("ol.list-comments ol.comments:first")[n](e.comments)},error:function(){(0,a.default)({error:o.default.t("onloads.views.comments.list.Sorry_we_couldnt_load_comments_just_now")})}})}u.length&&(e=u.find("a"),t=(0,i.default)(".Project"+d.default.get("id")+'[itemprop="Project[comments_count]"]'),n=(n=i.default.trim(t.text())).replace(/\D/g,""),d.default.set("comments_count",parseInt(n,10)),(0,i.default)(".latest_comment").livequery(function(){c||(c=!0,d.default.on_change("comments_count",f),d.default.on_change("comments_loaded",f)),d.default.set("comments_loaded",d.default.get("comments_count")),f()}),(0,i.default)(".earliest_comment").livequery(function(){(0,i.default)("a.older_comments").hide()}),(0,i.default)(".comment").livequery(function(){var e,t={};(0,i.default)(this).find('[itemprop="Comment[created_at]"]').each(function(n,r){var a,o=(0,i.default)(r);if(o.attr("itemprop")&&(a=o.attr("itemprop").match(/Comment\[(\w+)\]/))){var s=o.data("value");t[a[1]]=s.match(/^"/)?JSON.parse(s):s,e||(e=o.attr("class").match(/Comment(\d+)/)[1])}}),(r.Comment.find(e)||new r.Comment({id:e})).set(t)}),e.click(function(e){if(!(0,i.default)(this).hasClass(".loading")){e.preventDefault();var t=(0,i.default)(".comments li:first");(0,s.track)("Project Comment Load New"),d.default.get("comments_count")-d.default.get("comments_loaded")>50?window.location.href=window.location.href:h.call(this,t.attr("id").match(/\d+/)[0],"asc")}}),(0,i.default)(document).on("click",".older_comments",function(e){e.preventDefault();var t=(0,i.default)(".comments li:last");!(0,i.default)(this).hasClass(".loading")&&t.length&&((0,s.track)("Project Comment Load Older"),h.call(this,t.attr("id").match(/\d+/)[0],"desc"))}),(0,i.default)(".comment-moderation, .backer_info","ol.list-comments").livequery(function(){(0,i.default)(this).removeClass("hidden")}),(0,i.default)(document).on("submit","ol.list-comments form.delete_comment",function(e){e.preventDefault();var t=(0,i.default)(this),n=t.closest(".comment");i.default.ajax({url:t.attr("action"),dataType:"json",type:"delete",success:function(){n.hide(),(0,i.default)("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)-1}),(0,i.default)(".NS_comments__comment").length||(0,i.default)(".project_preview_comments").removeClass("has_comments")}})}))})},"9z0e":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(".NS-users-_urls_fields").livequery(function(){var e=(0,a.default)(this),t=(0,a.default)("div.new.template",e);t.on("click","a.add",function(n){n.preventDefault();var i=t.find("input.text"),r=t.clone_form_template(),o=r.find("input.keep_box");""!==i.val()?(r.addClass("field-selected"),r.find("a.add").remove(),r.find("span.value").text(i.val()),i.trigger("dirty"),o.val(0).prop("checked",!0),i.val(""),(0,a.default)("div.urls",e).append(r),r.trigger("shifted")):r.remove()}),e.on("click",".url .remove a",function(e){e.preventDefault();var t=(0,a.default)(this),n=t.closest("div.url");t.siblings(".checkbox").prop("checked",!1),n.trigger("dirty"),n.trigger("shifted"),n.hide()}),t.find("input.text").on("keypress",function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),t.find("a.add").click())})})})},"A/M2":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,r=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(r&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(i)},A4of:function(e,t,n){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},A5ag:function(e,t,n){"use strict";n("wGdM");var i=u(n("8NzR")),r=u(n("l/Rs")),a=u(n("shXp")),o=u(n("+bVi")),s=u(n("YC2V")),l=u(n("c5nH")),d=n("Tvaj"),c=n("yloT");function u(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".pledges__checkout_rewards",function(e){var t=e.find(".js-reward-available"),n=t.length,i=0,u=!1,f=!o.default["not-mobile"],h=f?20:100,p=new Array(n);function m(e){if(i=0,!e.state.is_selected){u&&y(!1);var t=g(),n=0;t.length>0&&t[0].index<e.index&&(n=t[0].el.$rw.height()-t[0].closed_height);var a=e.el.$rw.offset().top-n-h;(0,r.default)(document).scrollTo(a,100),_(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),function(e){var t=e.get_shipping_rule(s.default.get("location_id"));t=t.length?t[0]:null,s.default.set({reward:e.reward_data,shipping_rule:t})}(e)}}function g(){return a.default.filter(p,function(e){return!0===e.state.is_selected})}function v(){(0,r.default)(".submitting-non-ajax").removeClass("submitting-non-ajax"),(0,r.default)(".js-desc-toggle").addClass("hide")}function _(){var e=g();if(e.length){var t=e[0];t.toggle_pledge_form(),t.reset_pledge_form(),t.state.is_truncated&&t.toggle_description_truncation(),t.hide_truncation_link()}}function y(e){(0,r.default)(p).each(function(t,n){if(n.el.$radio.prop("checked"))return n.el.$rw.click(),v(),e&&s.default.set({reward:this.reward_data}),void(u=!1)})}p=t.map(function(e,t){var n=(0,r.default)(t),i=n.data("reward")||l.default.get("rewards")[0],a=i.id===s.default.get("reward").id,o=a?s.default.get("net_amount"):null;i.closed_height=n.height(),i.index=n.index();var d=new window.RewardController(n,i);return(d.shipping_enabled||a)&&d.update_pledge_total({amount:o}),d}).get(),t.on("change","radio",function(){(0,r.default)(this).click()}),t.on("keydown",function(e){if(e.keyCode===d.ESC){var t=(0,r.default)(e.delegateTarget);t.data("reward").state.is_selected&&(_(),t.find('input[type="radio"]').focus())}}),t.on("keydown",'input[type="radio"]',function(e){e.keyCode===d.ENTER&&(e.preventDefault(),(0,r.default)(this).click())}),t.on("click",function(e){m((0,r.default)(e.currentTarget).data("reward"))}),t.on("keyup",'input[name="backing[amount]"]',function(){!function(e){s.default.set({amount:e})}((0,c.stringToMoney)((0,r.default)(this).val()))}),t.on("click",".js-desc-toggle",function(e){e.preventDefault(),(0,r.default)(e.delegateTarget).data("reward").toggle_description_truncation()}),t.on("submit","form",function(e){var t=(0,r.default)(e.delegateTarget).data("reward"),n=t.validate();if(t.state.submit_halted=!n,t.state.submit_halted&&v(),n){var a=t.get_current_pledge_amount();s.default.set("amount",a),u=!0,i=0}return n}),t.on("blur input",'input[name="backing[amount]"]',function(e){var t=(0,r.default)(e.delegateTarget).data("reward"),n=t.get_current_pledge_amount();t.validate(),s.default.set("amount",n)}),t.on("change blur",'select[name="backing[location_id]"]',function(e){var t=(0,r.default)(this),n=(0,r.default)(e.delegateTarget).data("reward"),i=parseInt(t.val(),10),a=n.get_shipping_rule(i);isNaN(i)||s.default.set("location_id",i),s.default.set("shipping_rule",a[0]),n.shipping_enabled&&n.update_pledge_total(),n.validate()}),(0,r.default)(document).on("click",function(){3===(i+=1)&&(_(),i=0)}),(0,r.default)("#confirm-adjust-pledge").on("click",function(){i=0}),void 0!==s.default&&s.default.on_change("shipping_rule",function(){var e=s.default.get("shipping_rule"),t=e?parseFloat(e.cost):0;s.default.set("shipping_amount",t)}),y(!0),(0,r.default)(window).on("pageshow",function(e){f&&e.originalEvent.persisted&&v()})})},ABD9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projectFlaggingInit=void 0;var i=f(n("GiK3")),r=f(n("O27J")),a=n("EIRz"),o=n("LbfT"),s=n("HeCS"),l=n("3zBZ"),d=n("JIXV"),c=n("xgez"),u=n("0GqO");function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,s.namespaceSelect)("FlaggingDropdown"),p=h.Component,m=(0,h.reducer)("Flagging Dropdown"),g=(0,a.combineReducers)({container:l.reducer,radioButtons:c.radioGroupReducer,dropdown:m,form:d.flaggingFormReducer}),v=(0,o.createEnhancedStore)(g,{container:l.initialState,radioButtons:c.initialRadioGroupState,dropdown:(0,s.initialState)()}),_=function(){var e=document.getElementById("react-flag-project"),t=v.getState(),n=v.dispatch;e&&r.default.render(i.default.createElement(u.ProjectFlagging,{state:t,dispatch:n,DropdownComponent:p}),e)};(t.projectFlaggingInit=function(){_(),v.subscribe(_)})()},APD3:function(e,t,n){"use strict";var i=/([A-Z])/g;e.exports=function(e){return e.replace(i,"-$1").toLowerCase()}},ATbN:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("4C6Z"),(0,a.default)("input.js-assets-uploader").client_side_asset_uploader(),function e(){var t,n,i=(0,a.default)("#curated_pages_show .published .add_photo_button, .header .image.value:visible");i.length&&(t=(0,a.default)("#curated_pages_show .header .image.value"),n=t.find(".progress"),(0,a.default)(".curated_page_photo").fileupload({dataType:"text",dropZone:i,url:(0,a.default)(".curated_page_photo").attr("url"),type:"POST",formData:function(){return{authenticity_token:(0,a.default)('meta[name="csrf-token"]').attr("content")}},send:function(){t.show(),n.show(),t.find("img").hide(),n.removeClass("finished"),i.is(".add_photo_button")&&(i.css("visibility","hidden"),i.closest(".header").removeClass("without_photo").addClass("with_photo"))},done:function(r,a){n.hide(),t.find("img").attr("src",a.result),t.find("img").show(),t.closest(".header").removeClass("without_photo").addClass("with_photo"),n.find(".percentage").text("0%"),i.is(".add_photo_button")&&(i.remove(),e())},progress:function(e,t){var i=Math.round(t.loaded/t.total*100);n.find(".bar").css("width",i+"%"),n.find(".percentage").text(i+"%"),100===i&&(n.addClass("finished"),n.find(".percentage").text(""))},fail:function(){n.hide(),t.find("img").show(),i.is(".add_photo_button")&&(t.hide(),i.css("visibility","visible"),i.closest(".header").removeClass("with_photo").addClass("without_photo"))}}))}()},AXgT:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=n("4RZc"),o=n("16WZ");function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_projects__creator_nav",function(){var e=(0,i.default)("body");function t(){(0,i.default)("#creator_nav .js-livestream-link").length&&(0,a.track)("Showed Creator Nav Livestream Link")}(0,i.default)(".js-expand-creator-nav").on("click",function(n){e.hasClass("creator_nav_visible")?(e.removeClass("creator_nav_visible"),(0,a.track)("Creator Nav Toggle",{toggled_to:"hidden"})):(e.addClass("creator_nav_visible"),(0,a.track)("Creator Nav Toggle",{toggled_to:"visible"}),t()),(0,o.rebindScroll)(),n.preventDefault()}),e.hasClass("creator_nav_visible")&&t(),(0,a.trackLinks)("#creator_nav a.track","Creator Nav Link Click")})},Ak0P:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i},o=n("UVf0");t.default=function(e){var t=e.enter,n=void 0===t?"fade-in":t,i=e.leave,r=void 0===i?"fade-out":i,s=e.appear,l=e.duration,d=void 0===l?300:l,c=e.durationLeave,u=e.durationAppear,f=e.component,h=void 0===f?"div":f,p=e.children;return a.default.createElement(o.CSSTransitionGroup,{component:h,transitionName:{enter:"animation-"+d,enterActive:"animation-"+n,leave:"animation-"+(c||d),leaveActive:"animation-"+r,appear:"animation-"+(u||d),appearActive:"animation-"+(s||n)},transitionEnterTimeout:d,transitionLeaveTimeout:c||d,transitionAppearTimeout:u||d,transitionAppear:!!s},p)}},AwtR:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("hBlz"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_site__founding_story",function(e){var t=(0,i.default)(".js-expand-inline__container"),n=(0,i.default)(".js-expand-inline__button"),r=(0,a.default)();function o(a,o){n.closest(t).toggleClass("expand-inline__container--show"),(0,i.default)(".js-read-hide").toggle(),o||("the-full-story"===r.fragment()?(history.replaceState({},document.title,r.fragment("").toString()),i.default.scrollTo(e)):history.replaceState({},document.title,r.fragment("the-full-story").toString()))}n.click(o),"the-full-story"===r.fragment()&&(o(0,!0),i.default.scrollTo(e))})},Ayny:function(e,t,n){"use strict";var i=r(n("wmCY"));function r(e){return e&&e.__esModule?e:{default:e}}r(n("obSy")).default.STRINGS.en={Strong:i.default.t("onloads.initializers.editor.lang.Strong"),Emphasis:i.default.t("onloads.initializers.editor.lang.Emphasis"),Superscript:i.default.t("onloads.initializers.editor.lang.Superscript"),Subscript:i.default.t("onloads.initializers.editor.lang.Subscript"),Ordered_List:i.default.t("onloads.initializers.editor.lang.Ordered_List"),Unordered_List:i.default.t("onloads.initializers.editor.lang.Unordered_List"),Indent:i.default.t("onloads.initializers.editor.lang.Indent"),Outdent:i.default.t("onloads.initializers.editor.lang.Outdent"),Undo:i.default.t("onloads.initializers.editor.lang.Undo"),Redo:i.default.t("onloads.initializers.editor.lang.Redo"),Link:i.default.t("onloads.initializers.editor.lang.Link"),Unlink:i.default.t("onloads.initializers.editor.lang.Unlink"),Image:i.default.t("onloads.initializers.editor.lang.Image"),Table:i.default.t("onloads.initializers.editor.lang.Table"),HTML:i.default.t("onloads.initializers.editor.lang.HTML"),Paragraph:i.default.t("onloads.initializers.editor.lang.Paragraph"),Heading_1:i.default.t("onloads.initializers.editor.lang.Heading_1"),Heading_2:i.default.t("onloads.initializers.editor.lang.Heading_2"),Heading_3:i.default.t("onloads.initializers.editor.lang.Heading_3"),Heading_4:i.default.t("onloads.initializers.editor.lang.Heading_4"),Heading_5:i.default.t("onloads.initializers.editor.lang.Heading_5"),Heading_6:i.default.t("onloads.initializers.editor.lang.Heading_6"),Header:i.default.t("onloads.initializers.editor.lang.Header"),Preformatted:i.default.t("onloads.initializers.editor.lang.Preformatted"),Blockquote:i.default.t("onloads.initializers.editor.lang.Blockquote"),Table_Header:i.default.t("onloads.initializers.editor.lang.Table_Header"),URL:i.default.t("onloads.initializers.editor.lang.URL"),Title:i.default.t("onloads.initializers.editor.lang.Title"),Relationship:i.default.t("onloads.initializers.editor.lang.Relationship"),Alternative_Text:i.default.t("onloads.initializers.editor.lang.Alternative_Text"),Caption:i.default.t("onloads.initializers.editor.lang.Caption"),Summary:i.default.t("onloads.initializers.editor.lang.Summary"),Number_Of_Rows:i.default.t("onloads.initializers.editor.lang.Number_Of_Rows"),Number_Of_Cols:i.default.t("onloads.initializers.editor.lang.Number_Of_Cols"),Submit:i.default.t("onloads.initializers.editor.lang.Submit"),Insert:i.default.t("onloads.initializers.editor.lang.Insert"),Cancel:i.default.t("onloads.initializers.editor.lang.Cancel"),Choose:i.default.t("onloads.initializers.editor.lang.Choose"),Preview:i.default.t("onloads.initializers.editor.lang.Preview"),Paste_From_Word:i.default.t("onloads.initializers.editor.lang.Paste_From_Word"),Tools:i.default.t("onloads.initializers.editor.lang.Tools"),Containers:i.default.t("onloads.initializers.editor.lang.Containers"),Classes:i.default.t("onloads.initializers.editor.lang.Classes"),Status:i.default.t("onloads.initializers.editor.lang.Status"),Source_Code:i.default.t("onloads.initializers.editor.lang.Source_Code"),Project:i.default.t("onloads.initializers.editor.lang.Project"),Reward:i.default.t("onloads.initializers.editor.lang.Reward"),Code:i.default.t("onloads.initializers.editor.lang.Code"),ReadMore:i.default.t("onloads.initializers.editor.lang.ReadMore"),Asset_Photo:i.default.t("onloads.initializers.editor.lang.Asset_Photo"),Asset_Video:i.default.t("onloads.initializers.editor.lang.Asset_Video"),Asset_Audio:i.default.t("onloads.initializers.editor.lang.Asset_Audio")}},"B+tq":function(e,t,n){"use strict";var i,r=n("rXeC"),a=(i=r)&&i.__esModule?i:{default:i};n("LNuh"),(0,a.default)(function(){function e(e){(0,a.default)(e).ksr_video()}a.default.videos_changed=function(){(0,a.default)(".video-player:visible").each(function(){e(this)})},(0,a.default)(document).on("ksr_video:pause_all_videos",function(){(0,a.default)(".video-player").trigger("ksr_video:pause")}),(0,a.default)(".video-player:visible").livequery(function(){e(this)})})},B7AS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n("Tvr3");t.initialState={loadStatus:i.UNLOADED,currentFetchRetries:0,maxFetchRetries:3,fetchTimeout:1e3}},BHlF:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_discover__hero",function(e){var t=e.data("category"),n=e.find(".js-interactive-title"),r=e.find(".js-interactive-title-group"),o=e.find(".js-interactive-title-content-fade"),s=(0,i.default)("#NS__discover_advanced_sentence");function l(){i.default.each(n,function(){var e=(0,i.default)(this);e.height(e.find("a").outerHeight(!0))}),i.default.each(r,function(){var e=(0,i.default)(this);e.find("a.current").closest(".js-category").addClass("has-children-is-current"),e.closest(n).width(e.find("a.current .js-name-prop").outerWidth()),e.css({marginTop:-e.find("a.current").position().top,opacity:1})})}n.length&&(window.setTimeout(function(){l(),e.find(".js-discover-hero-subtitle").show()},300),n.find("a").on("click",function(e){var t=(0,i.default)(this);if(t.parents(".js-react-overlay-enabled").length>0)return e.preventDefault(),void(0,i.default)("#js-overlay-explore-button")[0].click();(0,i.default)(".interactive-title-group-visible").length||(t.closest(n).find(".js-interactive-title-content-fade").fadeIn(300),s.removeClass("clip"),e.preventDefault()),n.not(t.closest(n)).addClass("other-interactive-title-group-visible"),t.closest(n).addClass("interactive-title-group-visible"),t.closest(n).addClass("z-discover-overlay-3 "),(0,a.track)("Discover Switch Modal",{modal_type:t.closest(n).data("modal_type")})}),(0,i.default)(document).on("keyup",function(e){27===e.keyCode&&(0,i.default)(".interactive-title-group-visible").length&&o.click()}),o.on("click",function(e){var t=(0,i.default)(this),r=t.closest(n);n.not(r).removeClass("other-interactive-title-group-visible"),r.removeClass("interactive-title-group-visible"),r.removeClass("z-discover-overlay-3 "),t.fadeOut(200),s.addClass("clip"),(0,a.track)("Discover Switch Modal Close"),e.preventDefault()}),(0,i.default)(document).resize(function(){l()})),e.find("a.subcategory").on("click",function(t){var n=(0,i.default)(this),r=n.data();n.hasClass("current")?(n.removeClass("current"),(0,i.default)(document).trigger("discovery:hero:unselect_subcategory",r),(0,a.track)("Discover Subcategory Deselected",(0,a.namespaceKeys)("discover_category",r)),(0,i.default)(document).trigger("discovery:sentence:update_params",{category_id:r.parent_id||r.id})):(n.siblings().removeClass("current"),n.addClass("current"),(0,i.default)(document).trigger("discovery:hero:select_subcategory",r),(0,i.default)(document).trigger("discovery:sentence:update_params",{category_id:r.id}),(0,a.track)("Discover Subcategory Selected",(0,a.namespaceKeys)("discover_category",r))),(0,i.default)(document).scrollTop()<e.offset().top&&i.default.scrollTo(e.offset().top,300,"easeOutExpo"),t.preventDefault()}),(0,i.default)(".js-refine-and-sort").on("click",function(){t&&(0,a.track)("Discover Refine Search Clicked",(0,a.namespaceKeys)("discover_category",t))})})},"BL+a":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("LNuh"),(0,a.default)(function(){(0,a.default)(".overlabels .field label.overlabel").livequery(function(){var e=(0,a.default)(this),t=e.siblings("input:not([type=hidden]), textarea, .wym_box");t.length||(t=e.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea")),t.length?(e.addClass("overlabel-apply"),t.val()&&e.hide(),t.focus(function(){(0,a.default)(this).val()&&e.hide(),e.addClass("field_focused")}).blur(function(){(0,a.default)(this).val()||e.show(),e.removeClass("field_focused")}).on("keydown input change paste cut",function(){var t=(0,a.default)(this);setTimeout(function(){t.val()?e.hide():e.show()},1)}),e.click(function(){t.attr("disabled")||t.focus()})):e.hide()})})},BMV8:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=s(n("UQDk")),o=s(n("MA+5"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".js-project-cards-module",function(e){var t=e.data("url"),n=e.data("ref");t&&e.find(".js-slider").each(function(){var r=(0,i.default)(this);r.show(),i.default.ajax({url:(0,a.default)(t),type:"get",success:function(t){var a=r.find(".js-project-list");r.find(".js-slider").removeClass("loading"),t.projects.length?i.default.each(t.projects,function(){a.append(function(e){return n&&(e.ref=n,e.urls.web.project+="?ref="+n),e.baseball_card_size="tall-big",(0,i.default)('<div class="project col col-4 mobile-scroll-row-item">'+(0,o.default)("projects/_baseball_card_tall",e,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</div>")}(this))}):e.hide()},error:function(){e.hide()}})})})},BPub:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}n("hsYx"),(0,r.default)(".NS_projects__spotlight_onboarding",function(e){KSR.store.isSupported()&&(KSR.store.getItem("dismiss_spotlight_onboarding")||(e.removeClass("dismissed"),(0,i.default)("html,body").css("overflow","hidden"),(0,a.track)("Spotlight Onboarding Show")),e.find(".js-close").on("click",function(t){e.addClass("dismissed"),(0,i.default)("html,body").css("overflow","auto"),KSR.store.setItem("dismiss_spotlight_onboarding",!0),(0,a.track)("Spotlight Onboarding Hide"),t.preventDefault()}))})},BQ76:function(e,t,n){"use strict";var i,r=n("wmCY"),a=(i=r)&&i.__esModule?i:{default:i};n("sWK4");var o=n("l/Rs");n("l/Rs");!function(e){e.fn.confirm_submit=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.on("submit.confirm_submit",function(i){i.preventDefault();var r='<div class="modal_delete_confirmation"><p class="copy">'+(t.copy||a.default.t("library.confirm_submit.Really_buddy"))+'</p><div class="buttons"><a href="#" class="yes btn btn--green">'+(t.yes_copy||a.default.t("library.confirm_submit.Yes"))+'</a><a href="#" class="no btn btn--gray">'+(t.no_copy||a.default.t("library.confirm_submit.No_Thanks"))+"</a></div></div>",o=e.create_modal_dialog(t.title||"Are you sure?",r);n.removeClass("submitting-non-ajax"),o.find("a.yes").on("click",function(e){e.preventDefault(),n.off("submit.confirm_submit"),t.on_confirm_submit&&t.on_confirm_submit(),n[0].submit()}),o.find("a.no").on("click",function(t){t.preventDefault(),e(this).trigger("close")}),o.data("modal_dialog").open()})})}}(o)},BafW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(n("shXp")),r=n("ZG75"),a=d(n("L3hI")),o=d(n("wmCY")),s=n("Odm1"),l=d(n("eF8u"));function d(e){return e&&e.__esModule?e:{default:e}}var c=r.ApplicationModel.extend();c.set_computed_value("post_likes",function(){return this.likes_count<=0?"":o.default.t("library.models.app.likes_count",{count:this.likes_count,formatted_count:a.default.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","has_liked"]}),c.set_computed_value("post_likes_namepile",function(){var e,t;if(this.likes_count<=0)return"";if(e=[],e=i.default.map(this.likers,function(e){return'<a href="'+e.urls.web.user+'" title="'+i.default.escape(e.name)+'">'+i.default.escape(e.name)+"</a>"}),this.has_liked){if(1===this.likes_count)return o.default.t("library.models.app.You_like_this_update");void 0===l.default?e.unshift(o.default.t("library.models.app.You")):e.unshift('<a href="'+l.default.data.urls.web.user+'" title="'+o.default.t("library.models.app.You")+'">'+o.default.t("library.models.app.You")+"</a>")}return(t=parseInt(this.likes_count,10)-e.length)>0&&(this.urls&&this.urls.web&&this.urls.web.likes?e.push('<a href="'+this.urls.web.likes+'" title="'+o.default.t("library.models.app.see_names")+'" id="full_namepile">'+o.default.t("library.models.app.other_people_count",{count:t,formatted_count:a.default.format_number(t,{precision:0})})+"</a>"):e.push(o.default.t("library.models.app.other_people_count",{count:t,formatted_count:a.default.format_number(t,{precision:0})}))),o.default.t("library.models.app.names_count_like_this_update",{names:a.default.to_sentence(e),count:this.likes_count,formatted_count:a.default.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","likers","has_liked"]}),c.on_initialize(function(){"function"==typeof s.update_record&&this.on_change(function(){(0,s.update_record)("Post",this.get())})}),t.default=c},Bj1T:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#survey_responses_confirm_address",function(e){var t=(0,i.default)("input.radio#suggested_address");e.length&&(e.on("change",".address_col input.radio",function(){var e=(0,i.default)(this);(0,i.default)(this).closest(".addresses").find(".address_col").each(function(){var e=(0,i.default)(this);e.find("input.radio").is(":checked")?e.find("input[type=hidden]").attr("disabled",!1):e.find("input[type=hidden]").attr("disabled",!0)}),"entered_address"===e.attr("id")?(0,a.track)("Address Entered Selected"):"suggested_address"===e.attr("id")&&(0,a.track)("Suggested Address Selected")}),t&&t.click(),(0,i.default)(".addresses.no_suggestion").length?(0,a.track)("Confirm your Address Page"):(0,a.track)("Select an Address Page"))})},Bm04:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n("5WUY");t.initialState=function(e){var t=e.projectId,n=void 0===t?"":t,r=e.verificationStatus,a=void 0===r?i.UNVERIFIED:r,o=e.stripePublicKey,s=void 0===o?"":o,l=e.identityDocUploadUrl,d=void 0===l?"":l,c=e.fileFront,u=void 0===c?null:c,f=e.fileBack,h=void 0===f?null:f,p=e.validationErrorsFileFront,m=void 0===p?[]:p,g=e.validationErrorsFileBack,v=void 0===g?[]:g,_=e.submitError,y=void 0===_?"":_,b=e.isSubmitting,w=void 0!==b&&b,E=e.foreignKey,C=void 0===E?"":E,k=e.foreignKeyBack;return{projectId:n,verificationStatus:a,stripePublicKey:s,identityDocUploadUrl:d,fileFront:u,fileBack:h,validationErrorsFileFront:m,validationErrorsFileBack:v,submitError:y,isSubmitting:w,foreignKey:C,foreignKeyBack:void 0===k?null:k}}},C75a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateField=t.isEIN=t.isZipcode=t.isSSNLast4=t.isPresent=t.isNumeric=t.isEmail=t.hasLength=t.handleTouchAllFields=t.handleTouchField=t.allFieldsTouched=t.hasError=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("+4Bd"),o=n("p5aI"),s=n("EIRz");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.hasError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{touched:{},errors:{}},t=arguments[1];return e.touched[t]&&!!e.errors[t]};var c=t.allFieldsTouched=function(e){return r.apply(void 0,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.map(function(e){return d({},e,!0)}))))},u=(t.handleTouchField=function(e,t,n,i){var o=(0,a.getErrors)(n),l=void 0;return l=i?function(t){return t.forEach(function(t){return i(e,t)})}:function(e){return e},(0,s.loop)(r({},e,{touched:r({},e.touched,d({},t,!0)),errors:o}),o[t]?s.Cmd.run(l,{args:[o[t]]}):s.Cmd.none)},t.handleTouchAllFields=function(e,t,n){var i=(0,a.getErrors)(t);return(0,s.loop)(r({},e,{touched:r({},c(e.fields)),errors:i}),n?s.Cmd.run(n,{args:[e,i]}):s.Cmd.none)},t.hasLength=function(e,t){return e.length===t}),f=(t.isEmail=function(e){return e&&e.match(/^.+@.+\..{2,}$/)},t.isNumeric=function(e){return!isNaN(e)}),h=(t.isPresent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return null!=e&&e.trim().length>0},t.isSSNLast4=function(e){return!!e&&f(e)&&u(e,4)},t.isZipcode=function(e){return!!e&&f(e)&&u(e,5)},t.isEIN=function(e){return!!e&&/^(\d[1-9]|[1-9]\d)\-\d{7}$/.test(e)},t.validateField=function(e,t,n){return n()?(0,o.Success)():(0,o.Failure)(new h(d({},e,new p([t]))))},function(){function e(t){l(this,e),this.errors=t}return i(e,[{key:"concat",value:function(t){var n=this,i=Object.keys(this.errors).concat(Object.keys(t.errors));return new e(i.filter(function(e,t){return t===i.indexOf(e)}).reduce(function(e,i){var a=n.errors[i],o=t.errors[i],s=a&&o?a.concat(o):a||o;return r({},e,d({},i,s))},{}))}}]),e}()),p=function(){function e(t){l(this,e),this.value=t}return i(e,[{key:"concat",value:function(t){return new e(this.value||t.value)}}]),e}()},C8f7:function(e,t,n){var i=n("l/Rs"),r=n("l/Rs");WYMeditor.WymClassOpera=function(e){this._wym=e,this._class="class",this._newLine="\r\n"},WYMeditor.WymClassOpera.prototype.initIframe=function(e){this._iframe=e,this._doc=e.contentWindow.document,this._doc.title=this._wym._index,i("html",this._doc).attr("dir",this._options.direction),this._doc.body.contentEditable="true",this._html(this._wym._options.html),i.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),i(this._doc).bind("keydown",this.keydown),i(this._doc).bind("keyup",this.keyup),i.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen(),i(wym._element).trigger(WYMeditor.EVENTS.postIframeInitialization,this._wym)},WYMeditor.WymClassOpera.prototype._exec=function(e,t){t?this._doc.execCommand(e,!1,t):this._doc.execCommand(e)},WYMeditor.WymClassOpera.prototype.selected=function(){var e=this._iframe.contentWindow.getSelection().focusNode;return e?"#text"===e.nodeName?e.parentNode:e:null},WYMeditor.WymClassOpera.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title],n=t._iframe.contentWindow.getSelection().getRangeAt(0).startContainer;i(n).parentsOrSelf(WYMeditor.MAIN_CONTAINERS.join(","))[0]||i(n).parentsOrSelf("li")||keyCanCreateBlockElement(e.which)||t._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)},WYMeditor.WymClassOpera.prototype.keyup=function(e){var t=WYMeditor.INSTANCES[this.title];t._selected_image=null,r(t._element).trigger(WYMeditor.EVENTS.documentHTMLUpdated,[t,r(t._doc.body).html()])}},CCL3:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e,t){var n,i,r=0,a=/^ui-id-\d+$/;function o(t,n){var i,r,a,o=t.nodeName.toLowerCase();return"area"===o?(r=(i=t.parentNode).name,!(!t.href||!r||"map"!==i.nodeName.toLowerCase())&&(!!(a=e("img[usemap=#"+r+"]")[0])&&s(a))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:(n=e.fn.focus,function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):n.apply(this,arguments)}),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,r=e(this[0]);r.length&&r[0]!==document;){if(("absolute"===(n=r.css("position"))||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return o(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),i=isNaN(n);return(i||n>=0)&&o(t,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){var i="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function o(t,n,r,a){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,o(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,o(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(i=e.fn.removeData,function(t){return arguments.length?i.call(this,e.camelCase(t)):i.call(this)})),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,a=e.ui[t].prototype;for(r in i)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i,r=n&&"left"===n?"scrollLeft":"scrollTop";return t[r]>0||(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(i)},CV0w:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n("GiK3")),r=n("ci1u"),a=n("Z5jf"),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.friends;return i.default.createElement("div",{className:"mr1 flex items-center"},t.map(function(e){return i.default.createElement(r.Avatar,{key:e.imageUrl,size:4,atoms:["mr1"],imageUrl:e.imageUrl})}))};t.default=function(e){var t=e.friends;if(!t.nodes.length)return null;var n=t.nodes,r=n.slice(0,2),s=r.map(function(e){return""+escape(e.name.split(" ")[0])});if(s.length<n.length){var d=n.length-s.length,c=(0,a.boundT)("project_page.social_facepile.amount_more",{count:d});s.push(""+c)}var u=(0,a.boundT)("project_page.social_facepile.friends_are_backers",{friends:o.default.to_sentence(s),count:s.length});return i.default.createElement("div",{className:"mt2 flex items-center"},i.default.createElement(l,{friends:r}),i.default.createElement("div",{className:"type-13",dangerouslySetInnerHTML:{__html:unescape(u)}}))}},CcZ3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.is_creator=e.project.creator.id===o.default.get("id"),e.project.is_live="live"===e.project.state,e.backing&&(e.backing.reward.formatted_estimated_delivery_on=s.maybe.fromNullable(e.backing.reward.estimated_delivery_on).map(function(e){return(0,a.format)("ll",(0,d.toUTC)(1e3*e))}).getOrElse(null),e.backing.is_creator=e.is_creator,e.backing.formatted_amount=r.default.money(e.backing.amount,{currency:e.backing.project.currency,precision:0})),e.messages=i.default.map(e.messages,function(t){return t.sender=i.default.findWhere(e.participants,{id:t.sender_id}),(0,l.default)(t)}),e};var i=c(n("shXp")),r=c(n("L3hI")),a=n("kVy0"),o=c(n("eF8u")),s=n("I2cB"),l=c(n("5RPx")),d=n("HZrJ");function c(e){return e&&e.__esModule?e:{default:e}}},Ciuv:function(e,t,n){"use strict";n("I1z3"),n("rXeC"),n("yloT"),n("TGXB"),n("d/4O"),n("Cw4A"),n("fpIj"),n("Vy0d"),n("1sZt"),n("xgGG"),n("1Vzf"),n("KMRV"),n("92m3"),n("17bY"),n("WREU"),n("d3qi"),n("5ns8"),n("NtaJ"),n("ZG+P"),n("7zD0"),n("KI0s"),n("dRgk"),n("B+tq"),n("HQO0"),n("arWD"),n("X1nT"),n("1gbM"),n("5Sqi"),n("9DJv"),n("BL+a"),n("9kaj"),n("+/oj"),n("MGa0"),n("KfH0"),n("eFoH"),n("thyB"),n("2fYv"),n("MPGJ"),n("Vmib"),n("WfYy"),n("sxpx"),n("PzQG"),n("ug+k"),n("8ANd"),n("ienZ"),n("dgQY"),n("Ht4c"),n("wtjs"),n("LDW/"),n("I7l9"),n("NgMk"),n("qQYM"),n("01q7"),n("3tbO"),n("DFf4"),n("uQxE"),n("6F/s"),n("rmI3"),n("uWqJ"),n("Tct/"),n("cBsc"),n("hU5k"),n("SSTo"),n("/b7f"),n("+4yP"),n("9x+j"),n("sYfk"),n("xZTV"),n("ubEc"),n("HHA5"),n("bAet"),n("Wip1"),n("cWTi"),n("F6BI"),n("3w6W"),n("4D4H"),n("BHlF"),n("8uP6"),n("pxxf"),n("MX6m"),n("bRUp"),n("+YRa"),n("1w/n"),n("EIpC"),n("8tKI"),n("Ej2h"),n("whut"),n("if/t"),n("UhhV"),n("gHGJ"),n("/fAy"),n("V8lC"),n("cDEd"),n("Vo5L"),n("pqDf"),n("w02R"),n("NUlJ"),n("FQDm"),n("JCYY"),n("LXqv"),n("ymRo"),n("3txR"),n("ZDod"),n("ofuh"),n("8bXp"),n("6JMX"),n("Rx85"),n("nHv6"),n("a1l5"),n("sWQm"),n("Z36P"),n("gmJr"),n("zOWE"),n("txGb"),n("Mscd"),n("slH/"),n("FRT5"),n("of/u"),n("A5ag"),n("86os"),n("Q4dB"),n("wbn/"),n("7dY0"),n("aHws"),n("nEat"),n("PGqv"),n("141G"),n("jD6c"),n("mYWD"),n("lk0j"),n("vWMs"),n("QEM/"),n("iis7"),n("AXgT"),n("cLqc"),n("Gx1m"),n("JXF+"),n("YmKE"),n("zn/B"),n("mCzb"),n("BPub"),n("Nkse"),n("ucfE"),n("tI6b"),n("YOqD"),n("IuCL"),n("wun9"),n("EUhg"),n("kwpy"),n("IyjT"),n("Fvwm"),n("2/5V"),n("Sm8F"),n("Nkoz"),n("mxM5"),n("AwtR"),n("W/DP"),n("ElDd"),n("BMV8"),n("Nhg7"),n("8dPd"),n("YBJb"),n("Yxm8"),n("q1R/"),n("/qyH"),n("5ln5"),n("7Tqv"),n("kO76"),n("p5+3"),n("/RUt"),n("TJ96"),n("kqul"),n("Bj1T"),n("oo6k"),n("q1oh"),n("zZ2s"),n("Dnan"),n("nV3+"),n("HIA1"),n("Ggln"),n("DVtu"),n("sSrd"),n("joJ6"),n("9z0e"),n("Ye5x"),n("DoON"),n("gwva"),n("4Apx"),n("olXR"),n("nzM3"),n("rbUO"),n("Jd3c"),n("IYZS"),n("6fBM"),n("5ErT"),n("uxlr"),n("1C6n")},CkfE:function(e,t,n){var i,r=n("l/Rs");n("l/Rs");WYMeditor.WymClassExplorer=function(e){this._wym=e,this._class="className"},WYMeditor.WymClassExplorer.prototype.initIframe=function(e){var t,n=this;this._iframe=e,this._doc=e.contentWindow.document,this._doc.title=this._wym._index,r("html",this._doc).attr("dir",this._options.direction),r(this._doc.body).html(this._wym._options.html),this._doc.body.onfocus=function(){n._doc.body.contentEditable="true",n._doc=e.contentWindow.document},this._doc.onbeforedeactivate=function(){n.saveCaret()},r(this._doc).bind("keyup",n.keyup),(t=parseInt(r.browser.version,10))>=8&&t<9&&r(this._doc).bind("keydown",function(){n.fixBluescreenOfDeath()}),this._doc.onkeyup=function(){n.saveCaret()},this._doc.onclick=function(){n.saveCaret()},r.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),r.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen(),r(n._element).trigger(WYMeditor.EVENTS.postIframeInitialization,this._wym);try{this._doc=e.contentWindow.document}catch(e){}},i=WYMeditor.editor.prototype.initSkin,WYMeditor.WymClassExplorer.prototype.initSkin=function(){r(this._box).find(this._options.containerSelector).attr("unselectable","on"),i.call(this)},WYMeditor.WymClassExplorer.prototype._exec=function(e,t){t?this._doc.execCommand(e,!1,t):this._doc.execCommand(e)},WYMeditor.WymClassExplorer.prototype.selected=function(){var e=this._iframe.contentWindow.document.caretPos;if(e&&e.parentElement)return e.parentElement()},WYMeditor.WymClassExplorer.prototype.saveCaret=function(){this._doc.caretPos=this._doc.selection.createRange()},WYMeditor.WymClassExplorer.prototype.saveCaret=function(){this._doc.caretPos=this._doc.selection.createRange()},WYMeditor.WymClassExplorer.prototype.insert=function(e){var t=this._doc.selection.createRange();if(r(t.parentElement()).parents().is(this._options.iframeBodySelector))try{t.pasteHTML(e)}catch(e){}else this.paste(e)},WYMeditor.WymClassExplorer.prototype.wrap=function(e,t){var n=this._doc.selection.createRange();if(r(n.parentElement()).parents().is(this._options.iframeBodySelector))try{n.pasteHTML(e+n.text+t)}catch(e){}},WYMeditor.WymClassExplorer.prototype.wrapWithContainer=function(e,t){var n,i,a,o=this._wym;n=r(e).wrap("<"+t+" />"),i=rangy.getIframeSelection(o._iframe),(a=rangy.createRange(o._doc)).selectNodeContents(n[0]),a.collapse(),i.setSingleRange(a)},WYMeditor.WymClassExplorer.prototype.unwrap=function(){var e,t=this._doc.selection.createRange();if(r(t.parentElement()).parents().is(this._options.iframeBodySelector))try{e=t.text,this._exec("Cut"),t.pasteHTML(e)}catch(e){}},WYMeditor.WymClassExplorer.prototype.keyup=function(e){var t,n,i,a,o,s,l=WYMeditor.INSTANCES[this.title],d=!1;i=l.documentStructureManager.structureRules.notValidRootContainers,n=l.documentStructureManager.structureRules.defaultRootContainer,this._selectedImage=null,l.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY.CTRL||e.which===WYMeditor.KEY.COMMAND||e.metaKey||e.ctrlKey||(t=l.selected(),s=l.selection().focusNode,t&&t.tagName&&(a=t.tagName.toLowerCase()),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),l.isForbiddenMainContainer(a)&&(a=o,d=!0),a===WYMeditor.BODY&&"#text"===s.nodeName&&(d&&(s=s.parentNode),l.wrapWithContainer(s,n),l.fixBodyHtml())),e.keyCode!==WYMeditor.KEY.UP&&e.keyCode!==WYMeditor.KEY.DOWN&&e.keyCode!==WYMeditor.KEY.BACKSPACE&&e.keyCode!==WYMeditor.KEY.ENTER||r.inArray(a,i)>-1&&o===WYMeditor.BODY&&(l.switchTo(t,n),l.fixBodyHtml()),r(l._element).trigger(WYMeditor.EVENTS.documentHTMLUpdated,[l,r(l._doc.body).html()])},WYMeditor.WymClassExplorer.prototype.setFocusToNode=function(e,t){var n=this._doc.selection.createRange();t=!!t,n.moveToElementText(e),n.collapse(t),n.select(),e.focus()},WYMeditor.WymClassExplorer.prototype.paste=function(e){var t,n,i,a,o=this.selected(),s="";if(o&&o.tagName.toLowerCase()!==WYMeditor.BODY)n=(t=r(o).append(e))[t.length-1];else{for(i=0,a=(t=e.split(new RegExp(this._newLine+"{2,}","g"))).length;i<a;i++)s+="<p>"+t[i].split(this._newLine).join("<br />")+"</p>";n=(t=r(s,this._doc).appendTo(this._doc.body))[t.length-1]}r("body > br",this._doc).remove(),this.setFocusToNode(n)}},CuRd:function(e,t,n){"use strict";n("UBnO");n("l/Rs");var i=n("l/Rs");i.fn.client_side_asset_uploader=function(){var e=i(this),t=["data-asset-attachable-type","data-asset-method"].map(function(t){return"["+t+'="'+e.attr(t)+'"]'}).join("");e.adhoc_fileuploader({url:e.data("url"),paramsUrl:e.data("params-url"),done:function(e,n){var r=n.files[0],a={file:r,s3_key:n.formData.filter(function(e){return"key"===e.name})[0].value,data_file_name:r.name,data_file_size:r.size,data_content_type:r.type,signed_preview_url:"umm"};i(".js-assets-list"+t).trigger("assets_list:item_added",a)}})}},Cw4A:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)(function(){(0,a.default)(document).on("click","ul.faqs_alt li .question",function(e){(0,a.default)(this).parent("li").toggleClass("expanded"),(0,o.track)("FAQ Toggle",{question:(0,a.default)(this).text().trim()}),e.preventDefault()})})},DFf4:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=s(n("wmCY")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#backer_report_index",function(e){var t=".NS-backer_report_export";function n(e,n){n.closest(t).addClass("generating"),i.default.pollster(e,function(e){return e.email_url&&(0,i.default)(t+" a.email_me").attr("href",e.email_url).show(),e.uploaded||"completed"===e.state?((0,i.default)(t+" .progress .bar").width("100%"),(0,i.default)(t+" .success a.download").attr("href",e.download_url),(0,i.default)(t).removeClass("generating").addClass("success"),!0):(void 0!==e.percent&&(0,i.default)(t+" .progress .bar").width(e.percent+"%"),!1)},{delay:500,continue_on_error:!0})}e.on("submit",t+" form",function(e){var t=(0,i.default)(this),r=t.find(".report_type select").val(),a=t.find(".select.report_type").data("all_reports_url"),s=t.find(".report_format select").val();e.preventDefault(),r&&("all"===r?((0,o.track)("Backer Report Export",{export_type:"all"}),i.default.ajax({type:"post",url:a,data:{report_format:s},dataType:"json",success:function(e){n(e.poll_url,t)}})):((0,o.track)("Backer Report Export",{export_type:"tier"}),i.default.ajax({type:"get",url:r,data:{new:"true",report_format:s},dataType:"json",success:function(e){n(e.poll_url,t)}})))}),e.on("click",t+" a.email_me",function(e){e.preventDefault();var n=(0,i.default)(this);i.default.ajax({url:n.attr("href"),type:"post",dataType:"json",success:function(e){e&&200!==e.status?this.error():(0,i.default)(t+" .email_me_container").empty().html(a.default.t("onloads.views.backer_report.export.Well_send_you_an_email_when_this_report_is_ready"))},error:function(){(0,i.default)(t+" .email_me_container").empty().html(a.default.t("onloads.views.backer_report.export.There_was_an_error_requesting_the_email"))}})}),e.on("click",t+" a.reset",function(e){(0,o.track)("Backer Report Another Export"),(0,i.default)(t).removeClass("generating").removeClass("success"),(0,i.default)(t+" .email_me_container").empty().html(a.default.t("onloads.views.backer_report.export.Email_me_when_ready")),(0,i.default)(t+" .bar").css("width","0%"),e.preventDefault()}),e.on("click",t+" .js-export-warning--continue",function(e){e.preventDefault();var n=(0,i.default)(this).closest(t),r=n.find(".js-export-warning"),a=n.find(".js-export-form");r.hide(),a.show()})})},DVtu:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)(function(){function e(){var e=(0,a.default)('div[id="forgot-password"]');e.removeClass("current"),e.siblings("#login, #verify").addClass("current"),(0,a.default)(".modal_dialog #facebook, .modal_dialog #verify").show()}function t(t){var n=(0,a.default)(t).closest(".current");n.is("#verify")||n.removeClass("current"),(0,a.default)("#login-signup #forgot-password").addClass("current"),(0,a.default)(".modal_dialog #facebook, .modal_dialog #verify").hide(),(0,a.default)(document).one("closed.modal_dialog",e)}(0,o.trackLinks)(".js-switch-to-signup","Login to Signup Switch"),(0,a.default)(document).on("click","#retry-forgot-password",function(e){var n=this.href,i=(0,a.default)('div[id="forgot-password"]');t(this),a.default.ajax({url:n,dataType:"html",success:function(e){(i=(0,a.default)(e).replaceAll(i)).addClass("current")}}),e.preventDefault()}),(0,a.default)(document).on("click","#login-signup a.link_to_forgot-password-dialog",function(e){e.preventDefault(),t(this),(0,a.default)(document).on("jGrowl.close_200","form#reset",function(){(0,a.default)(".modal_dialog").trigger("close.modal_dialog")})}),(0,a.default)(document).on("form-submit-notify","#forgot-password #reset",e);var n=(0,a.default)("#user_sessions_new, #users_new");n.length&&((0,a.default)(".current",n).find("input:visible:first").focus(),(0,a.default)("#user_weekly_newsletter").change(function(){(0,a.default)(this).is(":checked")?(0,o.track)("Checked Newsletter"):(0,o.track)("Unchecked Newsletter")}),(0,a.default)(".fieldset-errors").livequery(function(){if(""!==a.default.trim((0,a.default)(".fieldset-errors").text())){var e=(0,a.default)(".fieldset-errors h2").text(),t=(0,a.default)(".fieldset-errors li").text();(0,o.track)("Errored User Signup",{error_type:e,error_text:t})}}),(0,a.default)("input",n).focus(function(){(0,a.default)("#login, #signup").removeClass("current"),(0,a.default)(this).closest("#login, #signup").addClass("current")}))})},DXZ8:function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");!function(e){var t={};e.publish=function(){var n=Array.prototype.slice.call(arguments),i=n.shift();t[i]&&e.each(t[i],function(){this.apply(e,n)})},e.subscribe=function(e,n){return t[e]||(t[e]=[]),t[e].push(n),[e,n]},e.unsubscribe=function(){var n=arguments[0];t[n]&&e.each(t[n],function(e){this===arguments[1]&&t[n].splice(e,1)})}}(i)},DdqZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.updateSubmitError=t.mutationSucceeded=t.beginIdentityDocumentCreate=t.updateForeignKeys=t.updateForeignKey=t.sendFileUploads=t.updateFile=t.checkFileValidity=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("Z6GA"),a=n("EIRz"),o=n("5WUY");t.checkFileValidity=function(e,t){return{type:"ID_DOC_CHECK_FILE_VALIDITY",file:e,face:t}},t.updateFile=function(e,t){return{type:"ID_DOC_UPDATE_FILE",file:e,face:t}},t.sendFileUploads=function(){return{type:"ID_DOC_SEND_FILE_UPLOADS"}},t.updateForeignKey=function(e,t){return{type:"ID_DOC_UPDATE_FOREIGN_KEY",responseId:e,face:t}},t.updateForeignKeys=function(e,t){return{type:"ID_DOC_UPDATE_FOREIGN_KEYS",responseIdFaceArrayA:e,responseIdFaceArrayB:t}};var s=t.beginIdentityDocumentCreate=function(){return{type:"ID_DOC_BEGIN_IDENTITY_DOCUMENT_CREATE"}};t.mutationSucceeded=function(){return{type:"ID_DOC_MUTATION_SUCCEEDED"}},t.updateSubmitError=function(e){return{type:"ID_DOC_UPDATE_SUBMIT_ERROR",message:e}},t.reducer=function(e,t){switch(t.type){case"ID_DOC_CHECK_FILE_VALIDITY":return(0,o.handleFileValidityChecks)(e,t.file,t.face);case"ID_DOC_UPDATE_FILE":return(0,o.handleUpdateFile)(e,t.file,t.face);case"ID_DOC_SEND_FILE_UPLOADS":return(0,a.loop)(i({},e,{isSubmitting:!0,submitError:""}),a.Cmd.run(o.handleSendFileUploads,{args:[e],successActionCreator:r.identity,failActionCreator:r.identity}));case"ID_DOC_UPDATE_FOREIGN_KEY":return(0,a.loop)(i({},e,(n={},l=(0,o.faceForeignKey)(t.face),d=t.responseId,l in n?Object.defineProperty(n,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):n[l]=d,n)),a.Cmd.action(s()));case"ID_DOC_UPDATE_FOREIGN_KEYS":return(0,o.handleUpdateForeignKeys)(e,t.responseIdFaceArrayA,t.responseIdFaceArrayB);case"ID_DOC_BEGIN_IDENTITY_DOCUMENT_CREATE":return(0,a.loop)(e,a.Cmd.run(o.handleIdentityDocumentCreate,{args:[e],successActionCreator:r.identity,failActionCreator:r.identity}));case"ID_DOC_MUTATION_SUCCEEDED":return i({},e,{verificationStatus:o.PENDING,isSubmitting:!1});case"ID_DOC_UPDATE_SUBMIT_ERROR":return i({},e,{submitError:t.message,isSubmitting:!1});default:return e}var n,l,d}},DkOX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=(0,a.default)(e).absoluteTo(window.location),r=(0,a.default)(t).absoluteTo(window.location);(n=n||{}).ignore_query&&(i.search({}),r.search({}));n.ignore_hash&&(i.hash(""),r.hash(""));return i.equals(r)};var i,r=n("hBlz"),a=(i=r)&&i.__esModule?i:{default:i}},Dnan:function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("8NzR")),a=l(n("wmCY")),o=n("Tvaj"),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#surveys_form",function(e){var t=(0,i.default)("#preview",e),n=(0,i.default)("form#survey_form",e),r=(0,i.default)("ul.questions",e),l=(0,i.default)("#saving-layer",e),d={other:a.default.t("onloads.views.surveys.form.Text_question"),choices:a.default.t("onloads.views.surveys.form.Multiple_choice_question"),checkboxes:a.default.t("onloads.views.surveys.form.Multiple_choice_question")};function c(){var e=n.find("input.keep_box:checked").closest(".js-fieldset:not(.template)");t.empty(),e.each(function(){t.append((0,i.default)(this).find("div.preview").children().clone())})}function u(e){var t=(0,i.default)(e),n=t.val(),r=t.closest(".js-fieldset"),o=r.find(".preview");if(t.is("#survey_intro"))o.find(".survey_intro").text(n);else if(t.is(".question_choice")){!function(e,t,n){e.find(".js-choice-group").each(function(){(0,i.default)(this).find('.js-choice:not(".js-no-response") label').eq(t).text(n||a.default.t("onloads.views.surveys.form.Choice_number",{number:t+1}))})}(o,t.closest("li.field").index(),n)}else!function(e,t){var n=Object.keys(d).find(function(t){return e.parent().hasClass(t)});e.find("li .js-prompt-label").text(t||d[n])}(o,n);v(r),c()}function f(e){e.confirm_submit({copy:a.default.t("onloads.views.surveys.form.You_can_only_send_a_survey_once_per_reward_tier_so_make_sure"),title:a.default.t("onloads.views.surveys.form.Please_confirm"),yes_copy:a.default.t("onloads.views.surveys.form.Send_survey_now"),no_copy:a.default.t("onloads.views.surveys.form.Edit_survey"),on_confirm_submit:function(){e.find("#sending").val("1")}})}function h(){r.find(".question:not(.template)").each(function(e){(0,i.default)(this).find(".position").val(e+1)}),c()}function p(){var e=n.find('.js-add-question[data-template="address"]');r.find(".question.address").is(":visible")?e.addClass("hidden"):e.removeClass("hidden")}function m(e){return e.find('.js-optional input[type="checkbox"]').prop("checked")}function g(e,t){var n=e.find(".preview"),i=e.find(".field.js-optional-choice"),r=n.find(".js-choice.js-no-response");"hide"==t&&(r.addClass("hide"),i.addClass("hide")),"show"==t&&(r.removeClass("hide"),i.removeClass("hide"))}function v(e){var t=e.find(".preview").find(".js-optional-label");m(e)?("choices"==function(e){return e.find('input[type="hidden"].js-template').val()}(e)&&g(e,"show"),t.removeClass("hide")):(g(e,"hide"),t.addClass("hide"))}var _={containment:"document",tolerance:"pointer",items:".question.draggable",stop:h};r.sortable(_),e.on("click",".address.question .keep_box.checkbox",function(){(0,i.default)(this).is(":checked")?(0,i.default)(".editability",e).show():(0,i.default)(".editability",e).hide()}),(0,i.default)(".leftcol .textarea:visible, .leftcol .text:visible",e).each(function(){u(this)}),e.on("keyup cut paste",".leftcol .text, .leftcol .textarea",function(){u(this)}),e.on("click",".js-add-question",function(e){e.preventDefault();var t=(0,i.default)("ul.questions"),n=(0,i.default)(this).data("template"),r=t.children(".template."+n).clone_form_template();v(r),r.css("display","block"),t.append(r),p(),h(),(0,i.default)(this).parent(".js-options").toggleClass("hide"),r.find("input.checkbox.keep_box").prop("checked",!0),r.find("input.checkbox.editable_ends_at").prop("disabled",!1),c()}),e.on("click",".js-add-question-choice",function(e){e.preventDefault();var t=(0,i.default)(this).closest("li.question"),n=t.find("ol.choice_fields"),r=n.find('li:not(".js-optional-choice")').last(),o=r.clone().insertAfter(r),s=o.find("input.question_choice"),l=t.find(".preview"),d=n.find('li:not(".js-optional-choice")').length,u=a.default.t("onloads.views.surveys.form.Choice_number",{number:d});s.prop({placeholder:u,"aria-label":u}),o.find(".js-delete-choice").show().andSelf().find("input").val("").focus(),l.find(".js-choice-group").each(function(){var e=(0,i.default)(this).find('.js-choice:not(".js-no-response")').last();e.clone().insertAfter(e).val("").find("label").text(o.find("label").text()).andSelf().find("input").val("")}),c()}),e.on("click",".js-delete-question",function(e){e.preventDefault();var t=(0,i.default)(this).closest(".question"),n=t.find(".keep_box.checkbox");n.is(":checked")?n.prop("checked",!1):n.prop("checked",!0),t.hide(),t.find("input.checkbox.editable_ends_at").prop("disabled",!0),p(),h()}),e.on("click",".js-delete-choice",function(e){e.preventDefault();var t=(0,i.default)(this).closest("li.field"),n=t.closest("li.question").find(".preview"),r=t.parent().children();n.find(".js-choice-group").each(function(){(0,i.default)(this).find(".js-choice").eq(t.index()).remove()}),t.remove(),r.filter(":visible").each(function(e){(0,i.default)(this).prop({placeholder:a.default.t("onloads.views.surveys.form.Choice_number",{number:e+1}),"aria-label":a.default.t("onloads.views.surveys.form.Choice_number",{number:e+1})})}),c()}),e.on("click",".js-multiple-responses",function(){var e=(0,i.default)(this).closest("li.question"),t=e.find('input[type="hidden"].js-template'),n=(0,i.default)(this).prop("checked")?"checkboxes":"choices";t.val(n),function(e,t){var n=e.find(".preview"),i=n.find('.js-choice-group[data-template="choices"]'),r=n.find('.js-choice-group[data-template="checkboxes"]'),a=n.find(".js-helper-text");"checkboxes"==t&&(i.addClass("hide"),g(e,"hide"),r.removeClass("hide"),a.removeClass("hide")),"choices"==t&&(m(e)&&g(e,"show"),i.removeClass("hide"),r.addClass("hide"),a.addClass("hide"))}(e,n),c()}),e.on("click",'.js-optional input[type="checkbox"]',function(){v((0,i.default)(this).closest("li.question")),c()}),e.on("click","#survey_save",function(a){a.preventDefault(),(0,s.track)("Survey Save"),l.show(),i.default.ajax({url:n.attr("action"),type:n.find('[name="_method"]').val(),data:n.serialize(),complete:function(){l.hide(),c()},success:function(a){var o=(0,i.default)(a.data);(0,i.default)(".modal_dialog").remove(),(0,i.default)("#main_content").replaceWith(o),t=(0,i.default)("#preview",e),n=(0,i.default)("form#survey_form",e),r=(0,i.default)("ul.questions",e),l=(0,i.default)("#saving-layer"),f(n),r.sortable(_)},error:function(){window.location.reload(!0)}})}),e.on("keydown","form#survey_form",function(t){if(t.keyCode===o.ENTER&&!(0,i.default)(t.target).is("textarea"))return t.preventDefault(),(0,i.default)("#survey_save",e).trigger("click"),!1}),f(n)})},DoON:function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i};n("l8Wg"),(0,a.default)("body#users_edit_profile",function(e){e.find("input.file").ksr_uploader()})},"E/SE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loadAsync=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:"ASYNC_LOAD_INIT",queryArgs:t}},t.startFetchTimer=function(e){return{type:"ASYNC_START_TIMER",queryArgs:e}},t.timerExpired=function(e){return{type:"ASYNC_TIMER_EXPIRED",queryArgs:e}},t.onLoadSuccess=function(e){return{type:"ASYNC_LOAD_SUCCESS",data:e}},t.onLoadFailure=function(e){return{type:"ASYNC_LOAD_FAIL",queryArgs:e}},t.noopAction=function(){return{type:"NOOP"}}},E5Nj:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("shXp")),a=o(n("MA+5"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,i.default)(function(){(0,i.default)(".render_mustache").livequery(function(){var e=(0,i.default)(this),t=r.default.extend(e.data("data"),e.data("extend")),n=e.data("partials")?e.data("partials").split(","):void 0,o=e.data("template");e.append((0,a.default)(o,t,n))})})},E7OR:function(e,t,n){"use strict";var i=l(n("shXp")),r=l(n("I1z3")),a=n("Tvaj"),o=l(n("wmCY")),s=l(n("YT+p"));function l(e){return e&&e.__esModule?e:{default:e}}n("xkBF"),n("SzcX"),n("hsYx"),n("0qc1"),n("lX5T");var d=n("l/Rs");n("l/Rs");!function(e){function t(t){this.$c=e(t),this.video_data=this.$c.data("video")||{},this.autostarting=!1;var n=this.$c.find("video");n.get(0)&&n.get(0).canPlayType&&(n.get(0).canPlayType("video/mp4")||n.hasClass("has_hls"))&&(this.$video=n,this.video=n.get(0),r.default.chrome&&this.$video.attr("controls","controls").removeAttr("controls")),this.initialize(),(window.location.search.match("play="+(this.$c.attr("id")||this.video_data.id))||this.$c.hasClass("autoplay"))&&(this.autostarting=!0,this.play()),this.$c.hasClass("muted")&&this.mute(),this.add_size_class(),this.bind_events()}e.fn.ksr_video=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("ksr_video",n))})},e.extend(t.prototype,{overlay:function(){var t=this;this.$c.children(":not(video)").hide(),this.$overlay=e('<div class="overlay"><span class="button-playvideo"></span></div>'),this.$overlay.on("click",function(e){t.initialize_flash(),t.$overlay.remove(),e.preventDefault()}),this.$c.append(this.$overlay)},bind_events:function(){var e=this;this.$c.on("ksr_video:play",function(){e.play()}),this.$c.on("ksr_video:pause",function(){e.pause()}),this.$c.on("ksr_video:mute",function(){e.mute()}),this.$c.on("ksr_video:unmute",function(){e.unmute()}),this.$c.on("ksr_video:destroy",function(){e.destroy()}),this.$c.on("ksr_video:seek",function(t,n,i){e.seek(n,i)})},add_size_class:function(){this.$c.removeClass("small medium large"),this.$c.width()>600?this.$c.addClass("large"):this.$c.width()>400?this.$c.addClass("large"):this.$c.addClass("small")},bind_video_element:function(){var e=this,t=this.$video,n=!0;this.$video.on("loadedmetadata",function(){e.$c.trigger("ksr_video:loaded")}),t.bind("ended",function(){e.$c.trigger("ksr_video:ended")}),t.on("play",function(){e.$c.trigger("ksr_video:playing",[n]),e.$c.addClass("has_played"),e.autostarting?e.autostarting=!1:e.focus_playpause_button(),n=!1}),t.on("pause",function(){e.$c.trigger("ksr_video:paused"),e.focus_playpause_button()}),t.on("progress",function(){var t,n,r,a=e.video.buffered,o=[];if(a.length)for(t=0;t<a.length;t+=1)o.push(a.end(t));r=(n=i.default.max(o))/e.video.duration*100,e.$c.trigger("ksr_video:buffer_change",[n,r])}),t.on("timeupdate",function(){e.$c.trigger("ksr_video:time_update",[e.video.currentTime])})},bind_controls:function(){var t=this,n=this.$c.find(".player_controls"),r=n.find(".progress_container .progress_bg"),s=r.find(".buffer"),l=r.find(".progress"),d=r.find(".progress_handle"),c=n.find(".volume_container .progress_bg"),u=c.find(".progress"),f=c.find(".progress_handle"),h=n.find(".current_time"),p=n.find(".volume"),m=n.find(".playpause"),g=n.find(".video_track_list"),v=n.find(".js-caption-dropdown"),_={x:0,y:0},y=!1;function b(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t+":"+(n<10?"0":"")+n}function w(){n.is(":hover")?k():(n.removeClass("visible"),n.trigger("ksr_video:controls_hidden"))}function E(){n.addClass("visible"),n.trigger("ksr_video:controls_shown")}function C(){clearTimeout(y)}function k(){C(),y=setTimeout(w,2e3)}function S(){var e=t.video.duration;e&&(t.$c.find(".total_time").text(b(e)).attr("datetime","PT"+Math.floor(e)+"S"),d.attr("aria-valuenow",t.video.currentTime).attr("aria-valuemin","0").attr("aria-valuemax",e))}function T(e){return e.which===a.LEFT?-1:e.which===a.RIGHT?1:null}function A(e,n){var i=n.delta,r=n.direction,a=n.max,o=t.video[e];r&&(o=function(e,t,n){return Math.min(n,Math.max(t,e))}(o+i*r,0,a),t.video[e]=o,E(),k())}function R(){var e=t.video.volume;KSR.store.setItem("ksr_video_volume",e),t.video.muted?(e=0,p.addClass("muted").attr("aria-label",o.default.t("library.ksr_video.Unmute"))):p.removeClass("muted").attr("aria-label",o.default.t("library.ksr_video.Mute"));var n=100*e+"%";u.width(n),f.css("left",n),f.attr("aria-valuenow",e)}this.$c.on("mousemove touchstart touchmove",function(e){var n={x:e.pageX,y:e.pageY};t.playing()&&("touchstart"===e.type||Math.abs(n.x-_.x)+Math.abs(n.y-_.y)>20)&&(E(),k(),_=n)}),S(),this.$video.on("click",function(){t.playpause()}),this.$c.find(".play_button_big, img.poster").on("click",function(e){t.play(),e.preventDefault()}),this.$c.on("focus click",":tabbable",function(){t.playing()&&(E(),k())}),this.$c.on("keydown",'[role="button"]',function(t){t.which!==a.ENTER&&t.which!==a.SPACE||(e(this).click(),t.preventDefault())}),this.$c.on("keydown",'.progress_container [role="slider"]',function(e){A("currentTime",{delta:.05*t.video.duration,direction:T(e),max:t.video.duration})}),this.$c.on("keydown",'.volume_container [role="slider"]',function(e){A("volume",{delta:.05,direction:T(e),max:1})}),this.$c.on("ksr_video:loaded",function(){S(),f.attr("aria-valuemin","0").attr("aria-valuemax","1"),R()}),this.$video.on("volumechange",function(){R()}).on("play",function(){m.removeClass("play").addClass("pause").attr("aria-label",o.default.t("library.ksr_video.Pause")),k()}).on("pause",function(){m.removeClass("pause").addClass("play").attr("aria-label",o.default.t("library.ksr_video.Play")),E(),C()}),m.on("click",function(e){t.playpause(),e.preventDefault()}),n.on("mouseenter focus",".video_dropdown",function(t){var i=e(t.currentTarget);i.addClass("open"),n.on("mouseleave.leave_dropdown blur.leave_dropdown",".video_dropdown",function(){i.removeClass("open"),n.off(".leave_dropdown")})});var x=function(e){i.default.each(e.textTracks,function(t,n){t.language===e.language?(t.mode="showing",e.hls&&(e.hls.subtitleTrack=n)):t.mode="hidden"})};function I(i){var r=v.find(".js-track"),a=i?r.filter('[data-language="'+i+'"]'):e();0===a.length&&(a=r.filter(".js-captions-off"),i=void 0),r.removeClass("selected"),a.addClass("selected"),a.is(".js-captions-off")?n.find(".ksr-icon__closed-caption").removeClass("is-on"):n.find(".ksr-icon__closed-caption").addClass("is-on"),t.$c.data("language",i),x({hls:t.hls,language:i,textTracks:t.video.textTracks})}g.on("click","li",function(){var n=e(this).data("language");v.removeClass("open"),n?KSR.store.setItem("last_track_language",n):KSR.store.removeItem("last_track_language"),I(n),t.$c.trigger("ksr_video:change_track",n)}),t.video.textTracks&&0!==t.video.textTracks.length?I(KSR.store.getItem("last_track_language")):this.$c.find(".js-remove-unless-text-tracks").remove();var D=null;function N(){t.$c.trigger("ksr_video:volume_adjusted")}e(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&D&&t.$c.css("height",D)}),n.find(".fullscreen").on("click",function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled){var n=t.$c.get(0);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(D=t.$c.css("height"),t.$c.css("height","auto"),n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen())}else t.$c.toggleClass("fullscreen");e.preventDefault()}),r.draggable_bar(function(e){var n=t.video.duration*e;t.video.currentTime=n}),c.draggable_bar(function(e){t.video.muted&&t.unmute(),t.video.volume=e}),c.find(".progress_bar_bg").on("mouseup",N),u.on("mouseup",N),f.on("mouseup",N),e("body").is(".touchable")?u.hide():p.on("click",function(){t.mute_toggle()}),this.$c.on("ksr_video:buffer_change",function(e,t,n){s.width(n+"%")}),this.$c.on("ksr_video:time_update",function(e,n){var i=n/t.video.duration*100;l.width(i+"%"),d.css("left",i+"%"),h.text(b(n)).attr("datetime","PT"+Math.floor(n)+"S"),d.attr("aria-valuenow",n)})},play:function(){this.video?(this.$video.show(),this.hls&&this.hls.startLoad(),this.video.play()):this.jwplayer&&this.jwplayer.play()},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer&&this.jwplayer.pause())},playpause:function(){return this.playing()?this.pause():this.play(),this.playing()},focus_playpause_button:function(){var t=this.$c.find(".playpause"),n=e(window),i=t[0].getBoundingClientRect();i.top>=0&&i.left>=0&&i.bottom<=n.height()&&i.right<=n.width()&&t.focus()},seek:function(e,t){var n=this;if(void 0===t&&(t=!1),this.video){if(this.video.readyState<1)return this.video.load(),void this.$c.one("ksr_video:loaded",function(){n.seek(e,t)});this.video.currentTime=e,t?this.pause():this.play()}else this.jwplayer&&(this.jwplayer.seek(e),this.jwplayer.pause(t))},mute_toggle:function(){return this.video&&(this.video.muted?this.unmute():this.mute()),this.video.muted},mute:function(){this.$c.trigger("ksr_video:muted"),this.jwplayer?this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.$c.trigger("ksr_video:unmuted"),this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty(),this.$c.removeData("ksr_video")},current_position:function(){return this.video?this.video.currentTime:this.jwplayer?this.jwplayer.getPosition():void 0},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){return this.video?!this.video.paused:this.jwplayer?"playing"===this.jwplayer.getState().toLowerCase():void 0},initialize_flash:function(){var e="v"+parseInt(1e8*Math.random(),10),t=this.$c.data("external_flashvars")||{},n=this;this.$c.append('<div id="'+e+'"></div>'),"undefined"!=typeof swfobject&&swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",e,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",i.default.extend(t,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video-url")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+e,class:"ksr_player",name:"ksr_player_"+e},function(e){var t=!0;window.player_reference=e.ref,e.success?(n.$c.find("video").remove(),n.jwplayer=jwplayer(e.ref),n.jwplayer.onReady(function(){n.$c.trigger("ksr_video:loaded")}),n.jwplayer.onPlay(function(){n.$c.trigger("ksr_video:playing",[t]),t=!1}),n.jwplayer.onPause(function(){n.$c.trigger("ksr_video:paused")}),n.jwplayer.onComplete(function(){n.$c.trigger("ksr_video:ended")}),n.jwplayer.onBufferChange(function(e){var t=e.duration*(e.bufferPercent/100);isNaN(t)||n.$c.trigger("ksr_video:buffer_change",[t,e.bufferPercent])})):(n.$video=n.$c.find("video"),n.video=n.$video.get(0),n.$overlay.remove(),n.$c.children().show(),n.$c.find(".play_button_big").removeAttr("style"),n.video&&(n.initialize(),n.play()))})},initialize_hls:function(){this.hls=new s.default({autoStartLoad:this.$video.hasClass("preload")}),this.hls.loadSource(this.$video.find('source[type="application/x-mpegURL"]').attr("src")),this.hls.attachMedia(this.video);var e=this;this.hls.on(s.default.Events.MANIFEST_PARSED,function(){e.$c.trigger("ksr_video:loaded")})},initialize:function(){this.video?(this.$video.hasClass("has_hls")&&s.default.isSupported()&&this.initialize_hls(),this.bind_controls(),this.bind_video_element(),KSR.store.getItem("ksr_video_volume")&&(this.video.volume=KSR.store.getItem("ksr_video_volume")),this.$video.css({height:"100%"}).removeAttr("style")):this.overlay()}})}(d)},EIpC:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body.email_previews",function(e){e.find("#index").on("change",function(){this.submit()}),e.find("#show").on("submit",function(t){t.preventDefault(),e.find("#email_preview").attr("src",(0,i.default)(t.target).attr("action")+"?"+(0,i.default)(t.target).serialize())})})},EUhg:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){var e=(0,a.default)("#projects_rules"),t=(0,a.default)("#project-edit-nav",e),n=(0,a.default)("#continue input[type=checkbox]",e),i=(0,a.default)("#continue input[type=submit]",e);e.length&&((0,a.default)(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),t.find("#steps-nav .first a").addClass("selected"),t.find("a").click(function(e){e.preventDefault()}),n.on("change",function(){(0,a.default)(this).is(":checked")?(0,a.default)(this).siblings("label").addClass("selected").removeClass("unselected"):(0,a.default)(this).siblings("label").addClass("unselected").removeClass("selected"),0===n.not(":checked").length?i.removeClass("disabled"):i.addClass("disabled")}),i.on("click",function(){return 0===n.not(":checked").length?((0,a.default)("#saving-layer").show(),!0):("undefined"!=typeof ga&&ga("send","event","Our Rules","Disabled Continue Click",""),!1)}))})},EZtX:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,n,i,r){"caption"===n.captionModule&&e.each(["caption","overlay"],function(){var e=i[this+"Template"],t=n.API.getComponent(this);t.length&&e?(t.html(n.API.tmpl(e,i,n,r)),t.show()):t.hide()})}),e(document).on("cycle-destroyed",function(t,n){e.each(["caption","overlay"],function(){var e=n[this+"Template"];n[this]&&e&&n.API.getComponent("caption").empty()})})}(i)},Eaq5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){return e.show_more_backings=e.total>e.backings.length,e.count=e.total,e.backings=e.backings.map(function(e){return(0,o.default)(i({},e.get()))}),e};var r,a=n("WoYN"),o=(r=a)&&r.__esModule?r:{default:r}},Ej2h:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".NS-features__toggle",function(e){e.find(".js-featured-toggle").on("click",function(e){e.preventDefault();var t=(0,i.default)(this),n=t.closest(".NS-features__toggle"),r=t.closest(".featured, .unfeatured");i.default.ajax({type:r.data("method"),url:r.data("url"),data:r.find(":input").serialize(),dataType:"json",success:function(e){n.toggleClass("featured",e.featured),e.remove_featurings_path&&n.find(".featured").data("url",e.remove_featurings_path)},error:function(){growl({error:"Unable to complete your request"})}})})})},ElDd:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("I1z3"));function a(e){return e&&e.__esModule?e:{default:e}}(0,a(n("8NzR")).default)(".NS_site__homepage_staff_picks",function(){var e=(0,i.default)(".js-projects-slider"),t=(0,i.default)(".js-category-nav");function n(n,r){e.scrollTo(n,r,{axis:"y"}),e.find(".video-player").trigger("ksr_video:pause"),(0,i.default)("body").is(".touchable")&&(e.find(".project-video").hide(),n.find(".project-video").show()),t.find(".nav li").removeClass("selected").eq(n.index()).addClass("selected"),e.find(".project").removeClass("selected").eq(n.index()).addClass("selected")}t.find(".nav li a.link").click(function(t){var a,o;a="Category select",o=(0,i.default)(this).text(),"undefined"!=typeof ga&&ga("send","event","Homepage Events",a,o),r.default.msie&&r.default.version<8||(n(e.find(".project").eq((0,i.default)(this).parent().index()),350),t.preventDefault())}),r.default.msie&&r.default.version<8||(e.find(".project").show(),n(e.find(".project.potd"),0)),(0,i.default)(".project-image .video-player").click(function(){(0,i.default)(this).parent().siblings(".project-badge").fadeOut("slow")}),(0,i.default)(document).on("resize",function(){r.default.msie&&r.default.version<8||n(e.find(".selected").eq((0,i.default)(this).parent().index()),350)})})},Et0E:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("9VV1")),a=o(n("DkOX"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(document).on("click",".js-facebook-login, a.facebook-link",function(e){var t=(0,i.default)(this);e.preventDefault(),"undefined"!==window.FB?FB.login(function(e){e.authResponse&&i.default.post(t.attr("href"),{fbsr:e.authResponse.signedRequest}).done(function(e){e.data&&(0,a.default)(e.data,window.location.href)?window.location.reload(!0):e.data?window.location=e.data:e.flash&&(i.default.isArray(e.flash)&&i.default.isArray(e.flash[0])?(0,r.default)(i.default.map(e.flash,function(e){return e[e.length-1]})):e.flash&&(0,r.default)(e.flash))})},{scope:"email,user_friends,public_profile"}):(0,r.default)({error:"Sorry, we weren't able to connect to Facebook"})})},F6BI:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR"));n("h1HY"),n("oTWu");var a=n("8Ml/"),o=s(n("shXp"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body.discover",function(e){var t;(0,a.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=o.default.debounce(a.trackProjectCards,150);var n=(0,i.default)(".mobius",e);n.length&&((t=(0,i.default)("#sidebar",e)).sticky_bar({parent:t.closest("#content")}),(0,i.default)("div.load_more",e).show(),(0,i.default)("div.pagination",e).hide(),n.persistent_paging())})},"FD+P":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){var t="-1";e.fn.clone_form_template=function(n,i){return n||(n={}),e(this).map(function(){return function(n,i,r){var a=(new Date).getTime();return n.find("label,input,textarea,select").each(function(n,o){!function(n,i,r,a){var o=r.pattern||t,s=new RegExp("_"+o+"_"),l=new RegExp("\\["+o+"\\]");n.attr("id")&&n.attr("id",n.attr("id").replace(s,"_"+i+"_")),n.attr("for")&&n.attr("for",n.attr("for").replace(s,"_"+i+"_")),n.attr("name")&&(r.copy_values&&n.val(e('[name="'+n.attr("name")+'"]').val()),n.attr("name",n.attr("name").replace(l,"["+i+"]"))),"function"==typeof a&&a.apply(n,n)}(e(o),a,i,r)}),n.removeClass("template").show()}(e(this).clone(),n,i)[0]})}}(i)},FJRQ:function(e,t,n){n("l/Rs"),n("l/Rs");(function(){var e,t,n,i,r,a,o,s,l,d,c,u,f,h,p,m,g,v,_,y,b,w,E,C,k=[].slice,S=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};(e=window.jQuery||window.Zepto||window.$).payment={},e.payment.fn={},e.fn.payment=function(){var t,n;return n=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],e.payment.fn[n].apply(this,t)},r=/(\d{1,4})/g,e.payment.cards=i=[{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:r,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:r,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:r,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:r,length:[16],cvcLength:[3],luhn:!0}],t=function(e){var t,n,r,a,o,s,l;for(e=(e+"").replace(/\D/g,""),r=0,o=i.length;r<o;r++)for(a=0,s=(l=(t=i[r]).patterns).length;a<s;a++)if(n=l[a]+"",e.substr(0,n.length)===n)return t},n=function(e){var t,n,r;for(n=0,r=i.length;n<r;n++)if((t=i[n]).type===e)return t},f=function(e){var t,n,i,r,a,o;for(i=!0,r=0,a=0,o=(n=(e+"").split("").reverse()).length;a<o;a++)t=n[a],t=parseInt(t,10),(i=!i)&&(t*=2),t>9&&(t-=9),r+=t;return r%10==0},u=function(e){var t;return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},E=function(e,t){var n,i,r,a,o;try{i=t.prop("selectionStart")}catch(e){e,i=null}if(a=t.val(),t.val(e),null!==i&&t.is(":focus"))return i===a.length&&(i=e.length),a!==e&&(o=a.slice(i-1,+i+1||9e9),n=e.slice(i-1,+i+1||9e9),r=e[i],/\d/.test(r)&&o===r+" "&&n===" "+r&&(i+=1)),t.prop("selectionStart",i),t.prop("selectionEnd",i)},v=function(e){var t,n,i,r,a,o;for(null==e&&(e=""),"","0123456789",r="",a=0,o=(t=e.split("")).length;a<o;a++)n=t[a],(i="".indexOf(n))>-1&&(n="0123456789"[i]),r+=n;return r},g=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=(e=v(e)).replace(/\D/g,""),E(e,n)})},p=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatCardNumber(t),E(t,n)})},s=function(n){var i,r,a,o,s,l,d;if(a=String.fromCharCode(n.which),/^\d+$/.test(a)&&(i=e(n.currentTarget),d=i.val(),r=t(d+a),o=(d.replace(/\D/g,"")+a).length,l=16,r&&(l=r.length[r.length.length-1]),!(o>=l||null!=i.prop("selectionStart")&&i.prop("selectionStart")!==d.length)))return(s=r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(d)?(n.preventDefault(),setTimeout(function(){return i.val(d+" "+a)})):s.test(d+a)?(n.preventDefault(),setTimeout(function(){return i.val(d+a+" ")})):void 0},a=function(t){var n,i;if(n=e(t.currentTarget),i=n.val(),8===t.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===i.length))return/\d\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s$/,""))})):/\s\d?$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d$/,""))})):void 0},m=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatExpiry(t),E(t,n)})},l=function(t){var n,i,r;if(i=String.fromCharCode(t.which),/^\d+$/.test(i))return n=e(t.currentTarget),r=n.val()+i,/^\d$/.test(r)&&"0"!==r&&"1"!==r?(t.preventDefault(),setTimeout(function(){return n.val("0"+r+" / ")})):/^\d\d$/.test(r)?(t.preventDefault(),setTimeout(function(){var e,t;return e=parseInt(r[0],10),(t=parseInt(r[1],10))>2&&0!==e?n.val("0"+e+" / "+t):n.val(r+" / ")})):void 0},d=function(t){var n,i,r;if(i=String.fromCharCode(t.which),/^\d+$/.test(i))return r=(n=e(t.currentTarget)).val(),/^\d\d$/.test(r)?n.val(r+" / "):void 0},c=function(t){var n,i,r;if("/"===(r=String.fromCharCode(t.which))||" "===r)return i=(n=e(t.currentTarget)).val(),/^\d$/.test(i)&&"0"!==i?n.val("0"+i+" / "):void 0},o=function(t){var n,i;if(n=e(t.currentTarget),i=n.val(),8===t.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===i.length))return/\d\s\/\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s\/\s$/,""))})):void 0},h=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=(e=v(e)).replace(/\D/g,"").slice(0,4),E(e,n)})},w=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},y=function(n){var i,r,a,o;if(i=e(n.currentTarget),a=String.fromCharCode(n.which),/^\d+$/.test(a)&&!u(i))return o=(i.val()+a).replace(/\D/g,""),(r=t(o))?o.length<=r.length[r.length.length-1]:o.length<=16},b=function(t){var n,i;if(n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!u(n))return!((n.val()+i).replace(/\D/g,"").length>6)&&void 0},_=function(t){var n,i;if(n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!u(n))return(n.val()+i).length<=4},C=function(t){var n,r,a,o,s;if(s=(n=e(t.currentTarget)).val(),o=e.payment.cardType(s)||"unknown",!n.hasClass(o))return r=function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)a=i[e],n.push(a.type);return n}(),n.removeClass("unknown"),n.removeClass(r.join(" ")),n.addClass(o),n.toggleClass("identified","unknown"!==o),n.trigger("payment.cardType",o)},e.payment.fn.formatCardCVC=function(){return this.on("keypress",w),this.on("keypress",_),this.on("paste",h),this.on("change",h),this.on("input",h),this},e.payment.fn.formatCardExpiry=function(){return this.on("keypress",w),this.on("keypress",b),this.on("keypress",l),this.on("keypress",c),this.on("keypress",d),this.on("keydown",o),this.on("change",m),this.on("input",m),this},e.payment.fn.formatCardNumber=function(){return this.on("keypress",w),this.on("keypress",y),this.on("keypress",s),this.on("keydown",a),this.on("keyup",C),this.on("paste",p),this.on("change",p),this.on("input",p),this.on("input",C),this},e.payment.fn.restrictNumeric=function(){return this.on("keypress",w),this.on("paste",g),this.on("change",g),this.on("input",g),this},e.payment.fn.cardExpiryVal=function(){return e.payment.cardExpiryVal(e(this).val())},e.payment.cardExpiryVal=function(e){var t,n,i;return t=(i=e.split(/[\s\/]+/,2))[0],2===(null!=(n=i[1])?n.length:void 0)&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().slice(0,2)+n),{month:t=parseInt(t,10),year:n=parseInt(n,10)}},e.payment.validateCardNumber=function(e){var n,i;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(n=t(e))&&(i=e.length,S.call(n.length,i)>=0&&(!1===n.luhn||f(e))))},e.payment.validateCardExpiry=function(t,n){var i,r,a;return"object"==typeof t&&"month"in t&&(t=(a=t).month,n=a.year),!(!t||!n)&&(t=e.trim(t),n=e.trim(n),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(n)&&(1<=t&&t<=12&&(2===n.length&&(n=n<70?"20"+n:"19"+n),4===n.length&&(r=new Date(n,t),i=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>i)))))},e.payment.validateCardCVC=function(t,i){var r,a;return t=e.trim(t),!!/^\d+$/.test(t)&&(null!=(r=n(i))?(a=t.length,S.call(r.cvcLength,a)>=0):t.length>=3&&t.length<=4)},e.payment.cardType=function(e){var n;return e&&(null!=(n=t(e))?n.type:void 0)||null},e.payment.formatCardNumber=function(n){var i,r,a,o;return n=n.replace(/\D/g,""),(i=t(n))?(a=i.length[i.length.length-1],n=n.slice(0,a),i.format.global?null!=(o=n.match(i.format))?o.join(" "):void 0:null!=(r=i.format.exec(n))?(r.shift(),(r=e.grep(r,function(e){return e})).join(" ")):void 0):n},e.payment.formatExpiry=function(e){var t,n,i,r;return(n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(t=n[1]||"",i=n[2]||"",(r=n[3]||"").length>0?i=" / ":" /"===i?(t=t.substring(0,1),i=""):2===t.length||i.length>0?i=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,i=" / "),t+i+r):""}}).call(this)},FPSz:function(e,t,n){"use strict";n("thKT");var i=o(n("I1z3")),r=o(n("wmCY")),a=n("TBVi");function o(e){return e&&e.__esModule?e:{default:e}}n("l/Rs");!function(e){function t(t,n){this.$div=t,this.options=e.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:[r.default.t("library.calendar_date_picker.January"),r.default.t("library.calendar_date_picker.February"),r.default.t("library.calendar_date_picker.March"),r.default.t("library.calendar_date_picker.April"),r.default.t("library.calendar_date_picker.May"),r.default.t("library.calendar_date_picker.June"),r.default.t("library.calendar_date_picker.July"),r.default.t("library.calendar_date_picker.August"),r.default.t("library.calendar_date_picker.September"),r.default.t("library.calendar_date_picker.October"),r.default.t("library.calendar_date_picker.November"),r.default.t("library.calendar_date_picker.December")],day_of_week_texts:[r.default.t("library.calendar_date_picker.Sunday_short"),r.default.t("library.calendar_date_picker.Monday_short"),r.default.t("library.calendar_date_picker.Tuesday_short"),r.default.t("library.calendar_date_picker.Wednesday_short"),r.default.t("library.calendar_date_picker.Thursday_short"),r.default.t("library.calendar_date_picker.Friday_short"),r.default.t("library.calendar_date_picker.Saturday_short")]},n),this._extract_options(),this._attach(),this._redraw()}var n;function o(e){return n?n.firstChild.nodeValue=e:(n=document.createElement("div")).appendChild(document.createTextNode(e)),n.innerHTML}e.fn.calendar_date_picker=function(n){return this.each(function(){var i=new t(e(this),n);e(this).data("calendar_date_picker",i)})},e.extend(t.prototype,{_copy_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_copy_date_with_time:function(e,t){if(!e)return e;var n=this._copy_date(e),i=(t||"").split(":");return n.setHours(+i[0]||0),n.setMinutes(+i[1]||0),n},_copy_time:function(e){if(!e)return null;var t=""+e.getHours();1===t.length&&(t="0"+t);var n=""+e.getMinutes();return 1===n.length&&(n="0"+n),t+":"+n},_copy_month:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},_next_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)},_previous_month:function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)},_next_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,e.getHours(),e.getMinutes())},_previous_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,e.getHours(),e.getMinutes())},_same_year:function(e,t){return e.getFullYear()===t.getFullYear()},_same_month:function(e,t){return this._same_year(e,t)&&e.getMonth()===t.getMonth()},_last_date_of_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){return this.selected_date&&this._same_month(this.selected_date,this.focus_date)?this.selected_date.getDate():void 0},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date),this.options.selected_date&&(this.selected_date=this._copy_date(this.options.selected_date)),this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date),this.time=!!this._does_datetime()&&this._copy_time(this.options.selected_date||this.options.today_date||new Date)},_refresh_calendar_table_classes:function(e){var t=this._selected_date_date_in_focus_month(),n=e.children("tbody"),i=n.find("a.selected");i.removeClass("selected"),i.parent().removeClass("selected");var r=n.find("a:eq("+(t-1)+")");r.addClass("selected"),r.parent().addClass("selected")},_attach:function(){var e=this;this.$div.bind("calendar_date_picker:select_date",function(t,n){e.select_date(n)})},_bind_dom_table_events:function(){var t=this,n=this.$div.children().children("table"),r=n.children(":eq(0)").children().children(),a=r.children("a.previous_month");a.text(this.options.previous_month_text),a.click(function(e){e.preventDefault(),t._on_previous_month_clicked()});var o=r.children("a.next_month");o.text(this.options.next_month_text),o.click(function(e){e.preventDefault(),t._on_next_month_clicked()}),r.children(".month, .year").on("click",function(){t.focus_date=new Date,t._refresh_calendar()}),n.children("tbody").click(function(n){var r;r=i.default.msie?n.srcElement:n.target;var a=e(r);if(a[0]&&"A"===a[0].nodeName){n.preventDefault();var o=t._copy_date_with_time(t.focus_date,t.time);o.setDate(+a.text());var s=t._copy_date_with_time(t.selected_date,t.time);t.options.allow_deselect&&s&&o-s==0?t.select_date(void 0):t.select_date(o)}})},_bind_dom_time_events:function(){if(this._does_datetime()){var e=this,t=this.$div.children().children("div.time").find("input");t.time_field(this.options.time),t.trigger("time_field:set_time",this.time),t.bind("time_field:time_changed",function(t,n){e.selected_date||(e.selected_date=new Date);var i=e._copy_date_with_time(e.selected_date,n);e.select_date(i)})}},_does_datetime:function(){return void 0!==this.options.time_text},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date),this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=this._next_month(this.focus_date),this._refresh_calendar()},_redraw:function(){this.$div.empty(),this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>"),this._bind_dom_table_events(),this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html()),this._bind_dom_table_events()},select_date:function(e,t){var n=e?this._copy_date(e):void 0,i=t||(e?this._copy_time(e):void 0);(this.selected_date?this.selected_date.valueOf():void 0)===(n?n.valueOf():void 0)&&i===this.time||(this.selected_date=n,this._does_datetime()&&(this.time=i,i&&this.$div.find("input").trigger("time_field:set_time",i)),this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]),this.focus_date=this._copy_month(this.selected_date||this.today_date),this._refresh_calendar(),this._refresh_calendar_table_classes(this.$div.find("table")))},_table_html:function(){return"<table>"+this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month ss-icon ss-navigateleft grey-dark" href="#"></a><a class="next_month ss-icon ss-navigateright grey-dark" href="#"></a><span class="month">'+o(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var e=this._copy_month(this.focus_date).getDay(),t=1,n=this._last_date_of_month(this.focus_date).getDate(),i=this._selected_date_date_in_focus_month(),r=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),a=[];for(a.push(this._date_tds(e,i,r,t,n)),t=8-e;t<=n;t+=7)a.push(this._date_tds(0,i,r,t,n));return"<tbody><tr>"+a.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(e,t,n,i,r){for(var a=[],o=0;o<e;o+=1)a.push("<td></td>");for(var s=i;a.length<7&&s<=r;s+=1){var l,d=[];s===t&&d.push("selected"),s===n&&d.push("today");var c="<td"+(l=d.length?' class="'+d.join(" ")+'"':"")+'><a href="#"'+l+">"+s+"</a></td>";a.push(c)}for(var u=r+1;u<i+7;u+=1)a.push("<td></td>");return a.join("")},_days_of_week_ths:function(){return e.map(this.options.day_of_week_texts,o)},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+o(this.options.time_text)+'<input type="text" /></label>'+o((0,a.zoneAbbr)(new Date))+"</div>":""}})}(n("l/Rs"))},FQDm:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("9DJv"),(0,a.default)(function(){(0,a.default)(document).on("click","#account-setup-panel a.document-form-link",function(e){a.default.open_remote_modal_dialog((0,a.default)(this).attr("href"),{id:"jumio-modal",class_name:"identity-document",do_not_cache:!0,prevent_close:!0}),e.preventDefault()})})},FRT5:function(e,t,n){"use strict";var i=l(n("shXp")),r=l(n("l/Rs")),a=l(n("wmCY")),o=n("Tvaj"),s=l(n("9VV1"));function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=".NS-phone_numbers__edit";function t(){(0,r.default)(e+" .verification_error").html("").addClass("hide"),(0,r.default)(".field_with_errors").children().unwrap()}function n(){var t=(0,r.default)(".js-country");t.closest(e).find("#phone_number").attr("placeholder",function(){var e=a.default.countries[t.val().toLowerCase()];return e&&e.phone_example?"Ex: "+e.phone_example:""})}function l(n){var a=(0,r.default)(n.target).closest(e),o=a.find("#phone_number"),s=a.find("input.radio[name=verify]:checked").val(),l=a.find(".js-country").val();if("sms"!==s&&"call"!==s)return!1;r.default.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:s,number:o.val(),country:l},success:function(e){t(),i.default.isUndefined(e.error)?(a.find(".token").val(""),a.find(".highlight strong").html(e.number+".").end().find(".phone_section, .options_section").addClass("hide").end().find(".code_section").removeClass("hide").trigger("shifted").find(".js-sms_show, .js-call_show").addClass("hide").filter(".js-"+s+"_show").removeClass("hide").end().end().end()):(o.wrap('<div class="field_with_errors" />').focus(),a.find(".phone_section .verification_error").html(e.error).removeClass("hide").trigger("shifted"))},beforeSend:function(){a.addClass("loading").trigger("shifted")},complete:function(){a.removeClass("loading").trigger("shifted")}}),n.preventDefault()}function d(n){if("keypress"!==n.type||n.which===o.ENTER){var a=(0,r.default)(this).closest(e),l=a.find("#token"),d=a.find(".js-country").val();r.default.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{token:l.val(),country:d},success:function(e){if(t(),i.default.isUndefined(e.error)){if(!i.default.isUndefined(e.html)){var n=(0,r.default)(e.html),o=a.closest(".NS-phone_numbers__verify"),d=a.closest(".NS-two_factor_authentication_show").find(".js-change_number");o.length?(o.replaceWith(n),n.trigger("phone_number:added")):d.length?(window.location.reload(!0),(0,s.default)({success:"Your two factor authentication phone fallback number has changed"})):a.trigger("phone_number:added")}}else l.wrap('<div class="field_with_errors" />').focus(),a.find(".code_section .verification_error").html(e.error).removeClass("hide").trigger("shifted")},beforeSend:function(){a.addClass("loading")},complete:function(){a.removeClass("loading")}}),n.preventDefault()}}(0,r.default)(document).on("click",e+" #resend_token",function(){(0,r.default)(this).closest(e).find(".code_section").addClass("hide").end().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")}),(0,r.default)(document).on("change",e+" .js-country",n),(0,r.default)(e).livequery(n),(0,r.default)(document).on("click","#send_verification",l),(0,r.default)(document).on("keypress",e+" #phone_number",function(e){e.which===o.ENTER&&l(e)}),(0,r.default)(document).on("click",e+" #verify_code",d),(0,r.default)(document).on("keypress",e+" #token",d),(0,r.default)(document).on("click",e+" #change_number",function(t){var n=(0,r.default)(this);r.default.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(t){i.default.isUndefined(t.html)||n.closest(e).replaceWith(t.html)}}),t.preventDefault()})})},FbaH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n("GiK3")),r=u(n("L3hI")),a=n("kVy0"),o=n("ci1u"),s=n("Z6GA"),l=n("ZYc1"),d=n("Z5jf"),c=u(n("CV0w"));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){var t=e.horizontal,n=e.isProjectWeLove,r=e.isProjectOfTheDay,a=e.projectImage,l=e.projectUrl;return i.default.createElement("div",{className:(0,s.computedAtoms)("relative","self-start",t&&"w50p-sm")},i.default.createElement("a",{href:l,className:"block img-placeholder w100p",key:"project-link"},i.default.createElement("div",{className:"img-placeholder bg-grey-400 absolute t0 w100p"}),a&&i.default.createElement("img",{className:(t?"mb2 mb0-sm":"border-grey-400 border-bottom")+" w100p absolute t0",alt:(0,d.boundT)("project_card.Project_image"),src:a}),r&&i.default.createElement("div",{className:"bg-ksr-green-700 px2 py1 absolute t0 l5 white type-14 medium"},i.default.createElement(o.Icon,{name:"kickstarter",size:"small",atoms:["fill-white mr2"]}),(0,d.boundT)("project_card.Project_of_the_day"))),!t&&n&&i.default.createElement("a",{href:"/discover/recommended?ref=pwl_badge",key:"pwl-badge",className:"type-12 black hover-black bg-white hover-border-soft-black transition-all inline-block ml3 absolute px2 py2_3 b-2 border border-grey-500 shadow-hover"},(0,d.boundT)("project_card.Project_we_love")))},h=function(e){var t=e.creator,n=e.horizontal,r=e.name,a=e.profile,o=e.projectUrl,c=e.refTag,u=e.projectState,f=n?"px4-sm":(0,s.computedAtoms)(["h20 pt4 px3 mb1_6"]);if(!t)return i.default.createElement("div",{className:f});var h=c&&t?(0,s.url)(t.url,{ref:c},null,{noBaseEncode:!0}):t.url;return i.default.createElement("div",{className:f},i.default.createElement("div",{className:"type-18 clamp-5 navy-500 mb3"},i.default.createElement("a",{href:o,className:"soft-black hover-text-underline"},a.name||r||o)," "),u!==l.PROJECT_STATES.successful&&i.default.createElement("div",{className:"type-13 flex"},i.default.createElement(d.BoundTranslate,{atoms:["inline-block"],i18nKey:"project_card.by_creator",i18nTag:"div",by:i.default.createElement("span",{className:"soft-black"},(0,d.boundT)("project_card.by")),creatorName:i.default.createElement("a",{href:h,className:"soft-black hover-text-underline medium"},t.name)})))},p=function(e){var t=e.refTag,n=e.category,a=e.horizontal,o=e.jsEndDate,l=e.percentFunded,c=e.pledged,u=r.default.percent(l,{precision:0,delimiter:(0,d.boundT)("number.currency.format.delimiter")}),f={width:Math.min(100,l)+"%"},h=c.currency,p=t&&n?(0,s.url)(n.url,{ref:t},null,{noBaseEncode:!0}):n.url;return i.default.createElement("div",{className:(0,s.computedAtoms)("pb3","pt3","px3-sm",!a&&"px4")},i.default.createElement("div",{className:"h20-sm pt1_6"},i.default.createElement("div",{className:"bg-grey-400 mb3 w100p"},i.default.createElement("div",{className:"bg-ksr-green-700 h1_2",style:f})),i.default.createElement("div",{className:"ksr-green-700 medium"},i.default.createElement("div",{className:"type-13 mr2"},i.default.createElement("span",null,r.default.money(c.amount,{precision:0,currency:h})),i.default.createElement("span",{className:"ml1 normal"},(0,d.boundT)("project_card.pledged"))),i.default.createElement("div",{className:"type-13 mr2 dark-grey-500 medium"},i.default.createElement("span",null,u),i.default.createElement("span",{className:"ml1 normal"},(0,d.boundT)("project_card.funded"))),i.default.createElement("div",{className:"type-13 ksr_page_timer mr2 dark-grey-500 medium","data-end_time":o},i.default.createElement("span",{className:"js-num"},"..."),i.default.createElement("span",{className:"js-text ml1"},"days to go")),i.default.createElement("div",{className:(0,s.computedAtoms)("type-12","mb2","mt3","medium",a&&"hide")},i.default.createElement("a",{className:"dark-grey-500 hover-soft-black text-underline",href:p},n.name)))))},m=function(e){var t=e.formattedEndDate,n=e.horizontal,r=e.projectState,a=r===l.PROJECT_STATES.canceled?(0,d.boundT)("project_card.Funding_canceled"):(0,d.boundT)("project_card.Funding_unsuccessful"),o=r===l.PROJECT_STATES.canceled?(0,d.boundT)("project_card.Project_canceled_on",{endDate:t}):(0,d.boundT)("project_card.Project_ended_on",{endDate:t});return i.default.createElement("div",{className:(0,s.computedAtoms)("pb5-md","pb4","px5-md","px4","mt3",!n&&"border-top border-grey-400")},i.default.createElement("div",{className:"h14 "+(n?"border-top border-grey-400 pt2":"pt3")},i.default.createElement("div",{className:"dark-grey-400"},i.default.createElement("div",{className:"inline-block mt2_3"},i.default.createElement("div",{className:"medium dark-grey-500 mt2"},a),o))))},g=function(e){var t=e.backers,n=e.creator,a=e.horizontal,s=r.default.format_number(t.totalCount,{precision:0});return i.default.createElement("div",{className:"pb5-md pb4 px5-md px4 mt3 "+(!a&&"border-top border-grey-400")},i.default.createElement("div",{className:"h14 "+(a?"border-top border-grey-400 pt2":"pt3")},i.default.createElement("div",{className:"type-13 flex"},i.default.createElement("div",{className:"mt4 flex"},i.default.createElement("a",{href:n.url},i.default.createElement(o.Avatar,{size:4,atoms:["mr2"],alt:n.name,imageUrl:n.imageUrl})),i.default.createElement("div",{className:"inline-block mt2_3 type-13"},i.default.createElement(d.BoundTranslate,{atoms:["soft-black text-ellipsis"],i18nKey:"project_card.by_creator_and_backers",i18nTag:"div",by:i.default.createElement("span",{className:"soft-black"},(0,d.boundT)("project_card.by")),creatorName:i.default.createElement("span",{className:"bold"},n.name),backersCount:s}))))))};t.default=function(e){var t=e.children,n=e.horizontal,r=void 0!==n&&n,o=e.refTag,d=e.term,u=e.state,v=e.trackClicks,_=u.backers,y=u.canceledAt,b=u.category,w=u.creator,E=u.deadlineAt,C=u.friends,k=u.imageUrl,S=u.isProjectOfTheDay,T=u.isProjectWeLove,A=u.modelName,R=u.name,x=u.percentFunded,I=void 0===x?0:x,D=u.pledged,N=u.pid,j=u.profile,P=u.rawScore,L=u.state,O=u.url,M=u.isBacked,F=u.isWatched,B=u.weightedScore,H=L===l.PROJECT_STATES.canceled?y:E,U=H&&1e3*H,W=U&&(0,a.format)("LL",U),z=null;(o||d)&&(z={},o&&(z.ref=o),d&&(z.term=d));var G=O&&(z?(0,s.url)(O,z):O),Y=j&&j.imageUrl||k;return i.default.createElement("div",{className:"js-track-project-card","data-project_pid":N||"","data-section":o,"data-weighted_score":B||"","data-raw_score":P||"","data-model_name":A||"","data-project_state":L?L.toLowerCase():"","data-project_backers_count":_?_.totalCount:"","data-project_percent_raised":I||"","data-project_pledged":D?D.amount:"","data-user_is_backer":M||"","data-user_has_starred":F||"",ref:function(e){return e&&v&&v(e)}},i.default.createElement("div",{className:"mb5"},i.default.createElement("div",{className:"bg-white black relative "+(r?"flex-sm":"border-grey-500 border")},t,i.default.createElement(f,{horizontal:r,isProjectWeLove:T,isProjectOfTheDay:S,projectImage:Y,projectUrl:G}),i.default.createElement("div",{className:(0,s.computedAtoms)(r&&"w50p-sm")},i.default.createElement(h,{creator:w,horizontal:r,name:R,profile:j,projectUrl:G,refTag:o,projectState:L}),!w&&i.default.createElement("div",{className:"pb5-md pb4 pt3 px5-sm px4"},i.default.createElement("div",{className:"h20-sm pt1_6"})),w&&function(){switch(L){case l.PROJECT_STATES.successful:return i.default.createElement(g,{backers:_,creator:w,horizontal:r});case l.PROJECT_STATES.canceled:case l.PROJECT_STATES.failed:return i.default.createElement(m,{formattedEndDate:W,horizontal:r,projectState:L});default:return i.default.createElement(p,{category:b,refTag:o,backers:_,horizontal:r,jsEndDate:U,percentFunded:I,pledged:D})}}())),!r&&C&&i.default.createElement(c.default,{friends:C})))}},Fe8w:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i},o=n("ci1u"),s=n("Z5jf"),l=n("2OQB"),d=n("Z6GA");t.default=function(e){var t=e.project,n=e.dispatch,i=e.atoms,r=void 0===i?[]:i,c=e.size,u=void 0===c?6:c,f=e.watchedColor,h=void 0===f?"red-400":f,p=e.unwatchedColor,m=void 0===p?"white":p,g=e.watchedColorBackground,v=void 0===g?"white":g,_=e.unwatchedColorBackground,y=void 0===_?"soft-black_50":_,b=e.hoverColor,w=e.iconSize,E=void 0===w?"medium":w,C=e.shadow,k=void 0===C||C,S=t.isWatched,T=S?(0,s.boundT)("project_card.Saved"):(0,s.boundT)("project_card.Remind_me"),A=d.computedAtoms.apply(void 0,["pill",S?"bg-"+v:"bg-"+y,"h"+u,"w"+u,"ksr-tooltip-no-focus","text-nowrap","flex","p0","keyboard-focusable-transparent","z1","no-outline",k&&"shadow-avatar"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)));return a.default.createElement("div",null,a.default.createElement("button",{onClick:function(e){return e.preventDefault(),n((0,l.clickedWatching)(t))},className:A,"data-tooltip":T},a.default.createElement(o.Icon,{name:S?"icon--heart":"icon--heart-outline",label:T,size:E,atoms:[(0,d.computedAtoms)("m-auto",b&&!S&&"hover-fill-"+b,S?"fill-"+h:"fill-"+m)]})))}},FlGX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAndParseRewardData=t.generateRewardsList=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("I2cB"),a=n("jRaX"),o=n("YzsH"),s=n("/Vlt"),l=t.generateRewardsList=function(e,t,n){if(!Array.isArray(n))return{rewardsList:{},rewardsListOrder:[]};return{rewardsList:n.reduce(function(n,r){return n[r.id]=i({},e,r,{shippingRules:t}),n},{}),rewardsListOrder:n.sort(function(e,t){return+e.minPledge.amount-t.minPledge.amount}).map(function(e){return e.id})}};t.loadAndParseRewardData=function(e){var t,n=JSON.parse(e.availableRewards),d=JSON.parse(e.unavailableRewards),c=JSON.parse(e.backedReward),u=JSON.parse(e.pledgeData),f=(0,s.generateSelects)(n),h=f.shippingReducers,p=f.shippingDropdowns,m=f.shippingStates,g=l(o.baseRewardState,o.baseSelectParams,n),v=g.rewardsList,_=g.rewardsListOrder,y=l(o.baseRewardState,o.baseSelectParams,d),b=y.rewardsList,w=y.rewardsListOrder;return{hydratedState:{reward:i({},o.initialState,{backedReward:c,rewardsList:v,rewardsListOrder:_,unavailableRewardsList:b,unavailableRewardsListOrder:w,currentUser:window.current_checkout?{location:r.maybe.fromNullable(window.current_checkout.data.location_id).getOrElse(null),authToken:(0,a.csrfToken)(document)}:null,projectName:window.current_project?r.maybe.fromNullable(window.current_project.data.name).getOrElse(null):null,projectId:(t=document.getElementById("watch-project-modal"),r.maybe.fromNullable(t).chain(function(e){return JSON.parse(e.dataset.watch_project)}).project_id),pledgeData:u,selectedReward:i({},o.initialState.selectedReward,{projectMin:u.defaultPledge.min})}),shippingSelects:m},shippingReducers:h,shippingDropdowns:p}}},Fvwm:function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)(".projects_livestreams",function(){(0,o.trackLinks)(".js-create-livestream","Clicked Create Livestream")})},GCDY:function(e,t,n){"use strict";var i,r=n("shXp"),a=(i=r)&&i.__esModule?i:{default:i};var o=n("l/Rs");n("l/Rs");!function(e){e.fn.whenNear=function(t,n){var i=e(window),r=t||0,o=this;function s(){var t=a.default.filter(o,function(t){var n=e(t);if(!n.is(":hidden")){var a=i.scrollTop(),o=a+i.height(),s=n.offset().top;return s+n.height()>=a-r&&s<=o+r}});o=o.not(t),a.default.each(t,n)}return i.on("scroll.whenNear resize.whenNear",a.default.throttle(s,25)),s(),this}}(o)},GI7G:function(e,t,n){var i=n("xA5w"),r=n("orNa"),a=n("NKE6");e.exports=function(e,t){var n=i(e),o=i(t),s=a(n,o),l=Math.abs(r(n,o));return n.setMonth(n.getMonth()-s*l),s*(l-(a(n,o)===-s))}},GMuJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={type:"visa",patterns:["4","450823","450875","450878"],lengths:[13,16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-visa.png"},r={type:"mastercard",patterns:["51","52","53","54","55","22","23","24","25","26","27"],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-mastercard.png"},a={type:"amex",patterns:["34","37"],lengths:[15],cvcLengths:[3,4],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-amex.png"},o={type:"discover",patterns:["60","64","65","622"],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-discover.png"},s={type:"jcb",patterns:["35"],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-jcb.png"},l={type:null,patterns:["0","1","2","3","4","5","6","7","8","9",""],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:""},d=[i,r,a,o,s,l];t.VISA=i,t.MASTERCARD=r,t.AMEX=a,t.DISCOVER=o,t.JCB=s,t.DEFAULT=l,t.cards=d},Ggln:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("9VV1"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=".NS-two_factor_authentication_show";(0,i.default)(document).on("click",e+" .js-manage_phone_fallback",function(){(0,i.default)(this).closest(e).find(".js-tfa_manage").addClass("hide"),(0,i.default)(e).find(".js-edit_phone").removeClass("hide"),(0,i.default)(".NS-phone_numbers__edit").is(":visible")&&((0,i.default)(e).find(".intro").hide(),(0,i.default)(e).find(".disable").removeClass("hide"),(0,i.default)(e).find(".edit-back-button").html("Nevermind"),(0,i.default)(e).on("click",".edit-back-button",function(){window.location.reload(!0)}))}),(0,i.default)(document).on("phone_number:added",e,function(){var t=(0,i.default)(this).closest(e).find(".js-manage_phone_fallback").data("url");t&&i.default.ajax({url:t,type:"POST",dataType:"json",success:function(e){e.success?((0,r.default)({success:e.success}),window.location.reload(!0,800)):(0,r.default)({error:e.error})}})})})},Gks7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyFetchFailure=t.currentProjectSlug=t.currentProjectEncodedPath=t.showPostFundingOption=t.FETCH_FAIL_MESSAGE=void 0;var i=n("tryQ"),r=t.FETCH_FAIL_MESSAGE="Fetch for project flagging (aka project reporting) status failed.";t.showPostFundingOption=function(e,t){return"SUCCESSFUL"===t&&e},t.currentProjectEncodedPath=function(){var e=document.createElement("a");return e.href=window.current_project.data.urls.web.project,encodeURIComponent(e.pathname)},t.currentProjectSlug=function(){return window.current_project.data.slug},t.notifyFetchFailure=function(){i.Honeybadger.notify(r)}},GvBW:function(e,t,n){"use strict";var i=function(){};e.exports=i},Gx1m:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("p44K"),n("9DJv"),(0,r.default)(".NS_projects__greenlit",function(e){var t=(0,i.default)("#review_modal");e.find(".js-continue-to-launch").click(function(e){e.preventDefault(),(0,i.default)("#content-wrap").find("#finished").hide(),(0,i.default)(this).trigger("project_edit:toggle_tab",["launch"])}),e.find(".button_preview").click(function(e){e.preventDefault(),(0,i.default)(this).trigger("project_edit:toggle_tab",["preview"])}),e.find(".button_review").click(function(e){var n,i,r,a;e.preventDefault(),i=(n=t).attr("class"),r=n.attr("id"),a=n.data("title"),n.modal_dialog({class_name:i,id:r,title:a})}),(0,i.default)(".NS_projects__greenlit_modal").on("submit","form",function(e){var t=(0,i.default)(this);if(e.preventDefault(),!t.validate())return!1;i.default.ajax({type:"PUT",url:(0,i.default)("#project-edit-nav .finished").data("submit_for_review_url"),data:t.serialize(),success:function(){t.trigger("close"),(0,i.default)("#saving-layer").show(),window.location.reload(!0)}})})})},HHA5:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("submit",".NS_creator_backing_notes__form",function(){var e=(0,a.default)(this);"undefined"!=typeof ga&&ga("send","event","Backing Notes","Save",(0,a.default)("body").attr("id")),e.trigger("creator_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})},HHS1:function(e,t,n){"use strict";var i=n("BEQ0"),r=n("GiK3"),a=n("e6+Q"),o=n("TJez"),s=n("mL1Z"),l=n("Jl+d");function d(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}var c={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0};function u(e,t){return(e&t)===t}var f={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=f,n=e.Properties||{},i=e.DOMAttributeNamespaces||{},r=e.DOMAttributeNames||{};for(var a in e=e.DOMMutationMethods||{},n){h.hasOwnProperty(a)&&d("48",a);var o=a.toLowerCase(),s=n[a];1>=(o={attributeName:o,attributeNamespace:null,propertyName:a,mutationMethod:null,mustUseProperty:u(s,t.MUST_USE_PROPERTY),hasBooleanValue:u(s,t.HAS_BOOLEAN_VALUE),hasNumericValue:u(s,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:u(s,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:u(s,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:u(s,t.HAS_STRING_BOOLEAN_VALUE)}).hasBooleanValue+o.hasNumericValue+o.hasOverloadedBooleanValue||d("50",a),r.hasOwnProperty(a)&&(o.attributeName=r[a]),i.hasOwnProperty(a)&&(o.attributeNamespace=i[a]),e.hasOwnProperty(a)&&(o.mutationMethod=e[a]),h[a]=o}}},h={};function p(e){return h.hasOwnProperty(e)?h[e]:null}function m(e){if(c.hasOwnProperty(e))return!0;var t=p(e);return t?t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:"data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e}var g=f,v=g.MUST_USE_PROPERTY,_=g.HAS_BOOLEAN_VALUE,y=g.HAS_NUMERIC_VALUE,b=g.HAS_POSITIVE_NUMERIC_VALUE,w=g.HAS_OVERLOADED_BOOLEAN_VALUE,E=g.HAS_STRING_BOOLEAN_VALUE,C={Properties:{allowFullScreen:_,async:_,autoFocus:_,autoPlay:_,capture:w,checked:v|_,cols:b,contentEditable:E,controls:_,default:_,defer:_,disabled:_,download:w,draggable:E,formNoValidate:_,hidden:_,loop:_,multiple:v|_,muted:v|_,noValidate:_,open:_,playsInline:_,readOnly:_,required:_,reversed:_,rows:b,rowSpan:y,scoped:_,seamless:_,selected:v|_,size:b,start:y,span:b,spellCheck:E,style:0,tabIndex:0,itemScope:_,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:E},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},k=g.HAS_STRING_BOOLEAN_VALUE,S="http://www.w3.org/1999/xlink",T="http://www.w3.org/XML/1998/namespace",A={Properties:{autoReverse:k,externalResourcesRequired:k,preserveAlpha:k},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:S,xlinkArcrole:S,xlinkHref:S,xlinkRole:S,xlinkShow:S,xlinkTitle:S,xlinkType:S,xmlBase:T,xmlLang:T,xmlSpace:T}},R=/[\-\:]([a-z])/g;function x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(R,x);A.Properties[t]=0,A.DOMAttributeNames[t]=e}),g.injectDOMPropertyConfig(C),g.injectDOMPropertyConfig(A);var I="function"==typeof Symbol&&Symbol.for?Symbol.for("react.fragment"):60107,D=/["'&<>]/;function N(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=D.exec(e);if(t){var n,i="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(i+=e.substring(r,n)),r=n+1,i+=t}e=r!==n?i+e.substring(r,n):i}return e}var j=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},L={};function O(e){return!!L.hasOwnProperty(e)||!P.hasOwnProperty(e)&&(j.test(e)?L[e]=!0:(P[e]=!0,!1))}function M(e,t){var n=p(e);if(n){if(null==t||n.hasBooleanValue&&!t||n.hasNumericValue&&isNaN(t)||n.hasPositiveNumericValue&&1>t||n.hasOverloadedBooleanValue&&!1===t)return"";var i=n.attributeName;if(n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t)return i+'=""';if("boolean"!=typeof t||m(e))return i+'="'+N(t)+'"'}else if(function(e,t){if(c.hasOwnProperty(e)||2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return m(e);case"undefined":case"number":case"string":case"object":return!0;default:return!1}}(e,t))return null==t?"":e+'="'+N(t)+'"';return null}var F={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function B(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var H={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},U=i({menuitem:!0},H),W={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z=["Webkit","ms","Moz","O"];Object.keys(W).forEach(function(e){z.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),W[t]=W[e]})});var G=r.Children.toArray,Y=a.thatReturns(""),$={listing:!0,pre:!0,textarea:!0};function V(e){return"string"==typeof e?e:"function"==typeof e?e.displayName||e.name:null}var q=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,K={},X=l(function(e){return s(e)});function Q(e,t){if(e=e.contextTypes){var n,i={};for(n in e)i[n]=t[n];t=i}else t=o;return t}var J={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Z(e,t){void 0===e&&d("152",V(t)||"Component")}var ee=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");r.isValidElement(t)?t.type!==I?t=[t]:(t=t.props.children,t=r.isValidElement(t)?[t]:G(t)):t=G(t),this.stack=[{domNamespace:F.html,children:t,childIndex:0,context:o,footer:""}],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n}return e.prototype.read=function(e){if(this.exhausted)return null;for(var t="";t.length<e;){if(0===this.stack.length){this.exhausted=!0;break}var n=this.stack[this.stack.length-1];if(n.childIndex>=n.children.length){var i=n.footer;t+=i,""!==i&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===n.tag&&(this.currentSelectValue=null)}else i=n.children[n.childIndex++],t+=this.render(i,n.context,n.domNamespace)}return t},e.prototype.render=function(e,t,n){return"string"==typeof e||"number"==typeof e?""===(n=""+e)?"":this.makeStaticMarkup?N(n):this.previousWasTextNode?"\x3c!-- --\x3e"+N(n):(this.previousWasTextNode=!0,N(n)):(t=function(e,t){for(;r.isValidElement(e);){var n=e,a=n.type;if("function"!=typeof a)break;e=Q(a,t);var o=[],s=!1,l={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===o)return null},enqueueReplaceState:function(e,t){s=!0,o=[t]},enqueueSetState:function(e,t){if(null===o)return null;o.push(t)}};if(a.prototype&&a.prototype.isReactComponent)var c=new a(n.props,e,l);else if(null==(c=a(n.props,e,l))||null==c.render){Z(e=c,a);continue}if(c.props=n.props,c.context=e,c.updater=l,void 0===(l=c.state)&&(c.state=l=null),c.componentWillMount)if(c.componentWillMount(),o.length){l=o;var u=s;if(o=null,s=!1,u&&1===l.length)c.state=l[0];else{var f=u?l[0]:c.state,h=!0;for(u=u?1:0;u<l.length;u++){var p=l[u];(p="function"==typeof p?p.call(c,f,n.props,e):p)&&(h?(h=!1,f=i({},f,p)):i(f,p))}c.state=f}}else o=null;if(Z(e=c.render(),a),"function"==typeof c.getChildContext&&"object"==typeof(n=a.childContextTypes)){var m=c.getChildContext();for(var g in m)g in n||d("108",V(a)||"Unknown",g)}m&&(t=i({},t,m))}return{child:e,context:t}}(e,t),e=t.child,t=t.context,null===e||!1===e?"":r.isValidElement(e)?e.type===I?(e=G(e.props.children),this.stack.push({domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""):this.renderDOM(e,t,n):(e=G(e),this.stack.push({domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""))},e.prototype.renderDOM=function(e,t,n){var a=e.type.toLowerCase();n===F.html&&B(a),K.hasOwnProperty(a)||(q.test(a)||d("65",a),K[a]=!0);var o=e.props;if("input"===a)o=i({type:void 0},o,{defaultChecked:void 0,defaultValue:void 0,value:null!=o.value?o.value:o.defaultValue,checked:null!=o.checked?o.checked:o.defaultChecked});else if("textarea"===a){var s=o.value;if(null==s){s=o.defaultValue;var l=o.children;null!=l&&(null!=s&&d("92"),Array.isArray(l)&&(1>=l.length||d("93"),l=l[0]),s=""+l),null==s&&(s="")}o=i({},o,{value:void 0,children:""+s})}else if("select"===a)this.currentSelectValue=null!=o.value?o.value:o.defaultValue,o=i({},o,{value:void 0});else if("option"===a){l=this.currentSelectValue;var c=function(e){var t="";return r.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(o.children);if(null!=l){var u=null!=o.value?o.value+"":c;if(s=!1,Array.isArray(l)){for(var f=0;f<l.length;f++)if(""+l[f]===u){s=!0;break}}else s=""+l===u;o=i({selected:void 0,children:void 0},o,{selected:s,children:c})}}for(_ in(s=o)&&(U[a]&&(null!=s.children||null!=s.dangerouslySetInnerHTML)&&d("137",a,Y()),null!=s.dangerouslySetInnerHTML&&(null!=s.children&&d("60"),"object"==typeof s.dangerouslySetInnerHTML&&"__html"in s.dangerouslySetInnerHTML||d("61")),null!=s.style&&"object"!=typeof s.style&&d("62",Y())),s=o,l=this.makeStaticMarkup,c=1===this.stack.length,u="<"+e.type,s)if(s.hasOwnProperty(_)){var h=s[_];if(null!=h){if("style"===_){f=void 0;var p="",m="";for(f in h)if(h.hasOwnProperty(f)){var g=0===f.indexOf("--"),v=h[f];null!=v&&(p+=m+X(f)+":",m=f,p+=g=null==v||"boolean"==typeof v||""===v?"":g||"number"!=typeof v||0===v||W.hasOwnProperty(m)&&W[m]?(""+v).trim():v+"px",m=";")}h=p||null}f=null;e:if(g=a,v=s,-1===g.indexOf("-"))g="string"==typeof v.is;else switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":g=!1;break e;default:g=!0}g?J.hasOwnProperty(_)||(f=O(f=_)&&null!=h?f+'="'+N(h)+'"':""):f=M(_,h),f&&(u+=" "+f)}}l||c&&(u+=' data-reactroot=""');var _=u;s="",H.hasOwnProperty(a)?_+="/>":(_+=">",s="</"+e.type+">");e:{if(null!=(l=o.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=o.children)||"number"==typeof l){l=N(l);break e}l=null}return null!=l?(o=[],$[a]&&"\n"===l.charAt(0)&&(_+="\n"),_+=l):o=G(o.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?B(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,tag:a,children:o,childIndex:0,context:t,footer:s}),this.previousWasTextNode=!1,_},e}(),te={renderToString:function(e){return new ee(e,!1).read(1/0)},renderToStaticMarkup:function(e){return new ee(e,!0).read(1/0)},renderToNodeStream:function(){d("207")},renderToStaticNodeStream:function(){d("208")},version:"16.2.0"},ne=Object.freeze({default:te}),ie=ne&&te||ne;e.exports=ie.default?ie.default:ie},HIA1:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("9VV1"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=".NS-two_factor_authentication_new";function t(){(0,i.default)(".NS-phone_numbers__edit").is(":visible")?(0,i.default)(e).find(".js-back:not(.edit-back-button)").hide():(0,i.default)(e).find(".js-back").show()}(0,i.default)(document).on("click",e+" .js-confirmation .js-next",function(t){(0,i.default)(e+" .js-confirmation").addClass("hide"),(0,i.default)(e+" .js-setup").removeClass("hide").trigger("resize"),(0,i.default)(e+" .js-devices").removeClass("hide"),t.preventDefault()}),(0,i.default)(document).on("click",e+" .js-devices .js-back",function(n){var r=(0,i.default)(this).closest(e);r.find(".js-devices").addClass("hide"),r.find(".js-confirmation").removeClass("hide"),r.find(".js-setup").removeClass("hide").trigger("resize"),t(),n.preventDefault()}),(0,i.default)(document).on("phone_number:added",e,function(e){(0,i.default)(e.target).closest("form").submit()}),(0,i.default)(document).on("click",e+" a.js-enable_edit_phone",function(n){var r=(0,i.default)(this).closest(e);r.find(".js-edit_phone").removeClass("hide"),r.find(".js-previous_phone").addClass("hide"),r.find(".js-submit").addClass("hide"),r.trigger("resize"),t(),n.preventDefault()}),(0,i.default)(document).on("submit",e+" form.js-method",function(t){var n=(0,i.default)(this),a=n.closest(e);i.default.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),dataType:"json",success:function(e){e.success?"phone"===e.otp_delivery_method?(a.find(".js-devices").addClass("hide"),a.find(".js-qr_code").removeClass("hide"),a.find(".edit-back-button").addClass("hide")):window.location.reload(!0):(0,r.default)(e)}}),t.preventDefault()})})},HQO0:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("hsYx"),n("LNuh"),(0,r.default)(".js-launch-banner",function(e){e.each(function(){var e=(0,i.default)(this),t=e.data("id"),n=e.data("one_time");function r(){KSR.store.setItem(t,!0)}KSR.store.getItem(t)||(e.on("click",".js-close",function(t){r(),e.addClass("banner-hidden"),t.preventDefault()}),n&&r(),e.removeClass("banner-hidden"))})})},HSFe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},HW66:function(e,t,n){"use strict";n("l/Rs");var i=n("l/Rs");i.fn.composed=function(e,t){var n=i(this);return void 0===n.data("topics")&&n.data("topics",{}),(n.data("topics")[e]||[]).reduce(function(e,t){return t.call(i,e)},t)},i.fn.composable=function(e,t){var n=i(this);return void 0===n.data("topics")&&n.data("topics",{}),n.data("topics")[e]||(n.data("topics")[e]=[]),n.data("topics")[e].push(t),[e,t]}},HZrJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toUTC=function(e){return new Date(e).toISOString().replace("Z","")}},HeCS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomSelect=t.UnboundSelect=t.initialState=t.namespaceSelect=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("Z6GA"),l=n("Tvaj"),d=n("ci1u"),c=n("uA/L"),u=n("Z5jf"),f=n("X2U3"),h=n("dY/E"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("3e15")),m=n("KVBm");var g=function(){},v=(t.namespaceSelect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.uuidNoDashes)(),t=(0,h.namespaceActions)(e)(p);return{namespace:e,actions:t,reducer:(0,m.unboundReducer)(e,t),Component:_(t)}},t.initialState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectedIndex,n=void 0===t?null:t,i=e.isOpen,r=void 0!==i&&i,a=e.isKeySelectionEngaged;return{isOpen:r,isKeySelectionEngaged:void 0!==a&&a,currentIndex:n,highlightedIndex:n}},{"x-small":{heightSize:"h5",typeSize:"body-100",yPaddingClass:"py1",xPaddingClass:"px2 px3-sm",labelClasses:{atoms:["pb1","atomic-text-label"]}},small:{heightSize:"h7",typeSize:"body-100",yPaddingClass:"py1",xPaddingClass:"px2 px3-sm",labelClasses:{atoms:["mb2"],size:"body-100",weight:"medium",color:"soft-black"}},medium:{heightSize:"h9",typeSize:"subhead-300",yPaddingClass:"py2",xPaddingClass:"px3",labelClasses:{atoms:["mb2"],size:"body-100",weight:"medium",color:"soft-black"}}}),_=function(e){return function(t){var n=t.state,i=t.dispatch,r=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["state","dispatch"]);return o.default.createElement(y,{state:n,onOptionSelect:function(t,n,r,a){a.stopPropagation(),i(e.changeSelectedIndex(t,r)),i(e.selectedValueUpdated(n))},onOptionHover:function(t){i(e.changeHighlightedIndex(t))},onBlur:function(t){setTimeout(function(t,n,i){n.contains(i.activeElement)||t(e.onBlur())}.bind(null,i,t.currentTarget,document),0)},onDropdownContainerClick:function(t){t.stopPropagation(),i(e.toggleSelect())},onKeyDown:function(t,n,r){var a=r.which,o=[l.ENTER,l.SPACE,l.ESC,l.DOWN,l.UP].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l.LETTERS));(a===l.TAB&&t||o.includes(a))&&(r.preventDefault(),i(e.onKeyDown(a,n)))},onListScroll:function(){i(e.onListScroll())},hasErrors:r.hasErrors,options:r.options,titleString:r.titleString,placeholder:r.placeholder,size:r.size,toLabel:r.toLabel,toValue:r.toValue,theme:r.theme,atoms:r.atoms})}};t.UnboundSelect=_;var y=t.CustomSelect=function(e){var t=e.state,n=e.onOptionSelect,i=e.onOptionHover,r=e.onBlur,a=e.onDropdownContainerClick,l=e.onKeyDown,d=e.onListScroll,u=e.hasErrors,h=void 0!==u&&u,p=e.options,m=void 0===p?[]:p,g=e.titleString,_=void 0===g?"":g,y=e.placeholder,E=void 0===y?"":y,C=e.theme,k=void 0===C?f.defaultTheme:C,S=e.toLabel,T=void 0===S?(0,s.prop)("label"):S,A=e.toValue,R=void 0===A?(0,s.prop)("value"):A,x=e.size,I=void 0===x?"medium":x,D=e.atoms,N=void 0===D?[]:D,j=t.isOpen,P=t.currentIndex,L=v[I],O=L.heightSize,M=L.labelClasses,F=L.typeSize,B=L.yPaddingClass,H=L.xPaddingClass,U=(0,s.computedAtoms)("absolute","w100p","border","p1","bg-white","mt1","mb10","rounded","z-dropdown-3","scroll-y","max-h25",F,N,"border-"+k["primary-light"],!j&&"visually-hide"),W=null!==P?m[P]:null;return o.default.createElement("div",{className:"soft-black"},_&&o.default.createElement(c.Label,{type:M.size,weight:M.weight,color:M.color,atoms:M.atoms,"aria-hidden":"true"},_),o.default.createElement("div",{role:"listbox","aria-labelledby":"custom-select-heading-label",onBlur:r,onKeyDown:(0,s.partial)(l,j,m),className:"relative w100p pointer input-keyboard-focusable-"+k["primary-light"]},o.default.createElement(b,{onDropdownContainerClick:a,label:W?T(W):E,color:W?"soft-black":"dark-grey-500",hasErrors:h,heightSize:O,typeSize:F,yPaddingClass:B,xPaddingClasses:H,theme:k}),o.default.createElement("ul",{onScroll:d,className:U,role:"presentation"},w({state:t,options:m,isOpen:j,onOptionSelect:n,onOptionHover:i,toValue:R,toLabel:T,theme:k,typeSize:F,yPaddingClass:B}))))},b=function(e){var t=e.color,n=e.hasErrors,i=e.heightSize,r=e.label,a=e.onDropdownContainerClick,l=e.theme,f=e.typeSize,h=e.yPaddingClass,p=e.xPaddingClasses,m=(0,s.computedAtoms)(["border",n?"border-red-400":"border-grey-500","hover-border-"+l["primary-light"],"transition-all","rounded",h,p,"bg-white flex","items-center",i,"input-keyboard-focusable-"+l["primary-light"]]);return o.default.createElement("div",{className:m,onClick:a,"aria-hidden":"true","aria-label":(0,u.boundT)("components.custom_select.select_an_option"),tabIndex:"0"},o.default.createElement(c.Span,{id:"custom-select-heading-label",type:f,atoms:["grow-1","text-truncate","pr1","book",t]},r),o.default.createElement(d.Icon,{name:"delta-down",size:"small",atoms:["flex-noshrink"]}))},w=function(e){var t=e.state,n=e.options,i=e.onOptionSelect,a=e.onOptionHover,l=e.toValue,d=e.toLabel,c=e.theme,u=e.typeSize,f=e.yPaddingClass,h=e.isOpen;return n.map(function(e,n){var p=t.currentIndex===n,m=t.highlightedIndex===n;return o.default.createElement(E,r({onOptionSelect:(0,s.partial)(i,n,e,l(e)),onOptionHover:(0,s.partial)(a,n),isKeySelectionEngaged:t.isKeySelectionEngaged,key:n},{option:e,isCurrent:p,isHighlighted:m,isOpen:h,toLabel:d,theme:c,typeSize:u,yPaddingClass:f}))})},E=function(e){var t=e.option,n=e.onOptionSelect,i=e.onOptionHover,r=e.isKeySelectionEngaged,a=e.isCurrent,l=e.isHighlighted,u=e.isOpen,f=e.toLabel,h=e.theme,p=e.typeSize,m=e.yPaddingClass,v=(0,s.computedAtoms)(["px2 flex items-center transition-all lh3 soft-black"],l?["bg-grey-400"]:[],m);return o.default.createElement("li",{role:"option",tabIndex:u?"0":"-1","aria-selected":a,onClick:n,onMouseEnter:i,className:v,onKeyDown:g,onFocus:g,ref:function(e){e&&e.parentElement&&l&&r&&(e.parentElement.scrollTop=e.offsetTop+e.offsetHeight-e.parentElement.offsetHeight)}},o.default.createElement(c.Span,{id:"custom-select-heading-label",type:p,atoms:["mr2"]},f(t)),a&&o.default.createElement("span",{className:"circle flex-noshrink h3 w3 bg-"+h["primary-accent"]+" inline-flex justify-center items-center"},o.default.createElement(d.Icon,{name:"check",size:"9",atoms:["relative","fill-white"]})))}},Hgtn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")},e.exports=t.default},HlA3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnboundFieldErrorsList=void 0;var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i};t.UnboundFieldErrorsList=function(e){return function(t){var n=t.state,i=t.forField,r=t.className,o=void 0===r?"red-500 error-messages":r,s=("string"==typeof i?[i]:i).filter(function(e){return!(!n.touched[e]||!n.errors[e])}).map(function(e){return n.errors[e]}).reduce(function(e,t){return e.concat(t)},[]);if(0===s.length)return null;return a.default.createElement("ul",{className:o},s.map(function(t){return a.default.createElement("li",{key:t},e[n=t]||n);var n}))}}},Ht4c:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("p44K"),n("LNuh"),(0,r.default)(".NS_accounts__edit",function(e){var t="#project_account_form";function n(){return(0,i.default)(t+" :input:not(.optional)").validates_presence(),(0,i.default)(t+" #account_street_address_postal_code").validates_postal_code(),1===(0,i.default)(t+' input[name="account[type]"][value="business"]:checked').length&&((0,i.default)(t+" input.required_business").validates_presence(),(0,i.default)(t+' input[name="account[business_id]"]').validates_business_id()),(0,i.default)(t).validate()}(0,i.default)(document).on("phone_number:added",function(){0===(0,i.default)(".needs_verification:visible").length&&e.closest(".collapsed").removeClass("collapsed")}),(0,i.default)(".NS_accounts__edit").livequery(function(){var e=(0,i.default)(this);e.on("input",".errored",function(){n()&&(0,i.default)(".js-account-form-submit").prop("disabled",!1)}),e.on("submit",t,function(t){var r=(0,i.default)(this),a=(0,i.default)("#account_errors"),o=(0,i.default)('<div class="spinner" />').spin("ksr","#fff");t.preventDefault(),n()&&(r.after(o),i.default.ajax({type:r.attr("method"),url:r.attr("action"),dataType:"json",data:r.serialize(),success:function(t){a.addClass("hide").removeClass("flash-error"),e.closest("#account-setup-panel").html(t.data),(0,i.default)(window).trigger("project_edit:check_all_panels_for_completion"),t.should_reload&&location.reload()},error:function(e){void 0!==e.responseJSON.error&&(a.removeClass("hide").addClass("flash-error"),a.find("ul").html("<li>"+e.responseJSON.error+"</li>"),void 0!==e.responseJSON.state_reason&&a.find("ul").html("<li>"+e.responseJSON.state_reason+"</li>"),i.default.scrollTo(a))},beforeSend:function(){(0,i.default)(".js-account-form-submit").prop("disabled",!0),e.addClass("loading")},complete:function(){(0,i.default)(".js-account-form-submit").prop("disabled",!1),e.removeClass("loading"),o.remove()}}))}),e.on("change",'input[name="account[type]"]',function(){var t=e.find("#business_id_section");(0,i.default)("#account_type_business").is(":checked")?t.show():(t.hide(),t.find(":input").each(function(){(0,i.default)(this).data("validations",[])}))})})})},I1z3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r={};(i=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent)).browser&&(r[i.browser]=!0,r.version=i.version),r.chrome?r.webkit=!0:r.webkit&&(r.safari=!0),t.default=r},I6Sp:function(e,t,n){var i=n("l/Rs");n("l/Rs");WYMeditor.WymClassMozilla=function(e){this._wym=e,this._class="class"},WYMeditor.WymClassMozilla.CELL_PLACEHOLDER='<br _moz_dirty="" />',WYMeditor.WymClassMozilla.NEEDS_CELL_FIX=1===parseInt(i.browser.version,10)&&i.browser.version>="1.9.1"&&i.browser.version<"2.0",WYMeditor.WymClassMozilla.prototype.initIframe=function(e){var t=this;this._iframe=e,this._doc=e.contentDocument,this._doc.title=this._wym._index,i("html",this._doc).attr("dir",this._options.direction),this._html(this._wym._options.html),this.enableDesignMode(),i.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),i(this._doc).bind("keydown",this.keydown),i(this._doc).bind("keyup",this.keyup),i(this._doc).bind("click",this.click),i(this._doc).bind("focus",function(){t.enableDesignMode.call(t)}),i.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen(),i(t._element).trigger(WYMeditor.EVENTS.postIframeInitialization,this._wym)},WYMeditor.WymClassMozilla.prototype._html=function(e){if("string"!=typeof e)return i(this._doc.body).html();try{this._doc.designMode="off"}catch(e){}return e=(e=(e=(e=e.replace(/<em(\b[^>]*)>/gi,"<i$1>")).replace(/<\/em>/gi,"</i>")).replace(/<strong(\b[^>]*)>/gi,"<b$1>")).replace(/<\/strong>/gi,"</b>"),i(this._doc.body).html(e),this._wym.fixBodyHtml(),this.enableDesignMode(),!1},WYMeditor.WymClassMozilla.prototype._exec=function(e,t){if(!this.selected())return!1;t?this._doc.execCommand(e,"",t):this._doc.execCommand(e,"",null);var n=this.selected();return n&&n.tagName.toLowerCase()===WYMeditor.BODY&&(this._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P),this.fixBodyHtml()),!0};i([]);WYMeditor.WymClassMozilla.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title],n=i(t.selection().focusNode).closest("p");if(n.length&&n,e.ctrlKey){if(66===e.which)return t._exec(WYMeditor.BOLD),!1;if(73===e.which)return t._exec(WYMeditor.ITALIC),!1}return!0},WYMeditor.WymClassMozilla.prototype.keyup=function(e){var t,n,r,a,o,s=WYMeditor.INSTANCES[this.title];r=s.documentStructureManager.structureRules.notValidRootContainers,n=s.documentStructureManager.structureRules.defaultRootContainer,s._selectedImage=null,t=null,s.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY.CTRL||e.which===WYMeditor.KEY.COMMAND||e.metaKey||e.ctrlKey||(a=(t=s.selected())?t.tagName.toLowerCase():"body",t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),s.isForbiddenMainContainer(a)&&(a=o),(a===WYMeditor.BODY||i.inArray(a,r)>-1&&o===WYMeditor.BODY)&&(s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml())),s.keyCanCreateBlockElement(e.which)&&(a=(t=s.selected()).tagName.toLowerCase(),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),i.inArray(a,r)>-1&&o===WYMeditor.BODY&&s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml()),i(s._element).trigger(WYMeditor.EVENTS.documentHTMLUpdated,[s,i(s._doc.body).html()])},WYMeditor.WymClassMozilla.prototype.click=function(){var e=WYMeditor.INSTANCES[this.title],t=e.selected();!0===WYMeditor.WymClassMozilla.NEEDS_CELL_FIX&&t&&t.tagName.toLowerCase()===WYMeditor.TR&&i(WYMeditor.TD,e._doc.body).append(WYMeditor.WymClassMozilla.CELL_PLACEHOLDER),t&&t.tagName.toLowerCase()===WYMeditor.BODY&&!0===e._iframe.contentWindow.getSelection().isCollapsed&&e._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)},WYMeditor.WymClassMozilla.prototype.enableDesignMode=function(){this._doc.body.contentEditable="true",this._doc.execCommand("styleWithCSS","",!1),this._doc.execCommand("enableObjectResizing",!1,!1)},WYMeditor.WymClassMozilla.prototype.afterInsertTable=function(e){!0===WYMeditor.WymClassMozilla.NEEDS_CELL_FIX&&i(e).find("td").each(function(e,t){i(t).append(WYMeditor.WymClassMozilla.CELL_PLACEHOLDER)})}},I7l9:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("shXp")),a=s(n("L3hI")),o=s(n("MA+5"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e={};(0,i.default)(".NS-activity-card-_backing").livequery(function(){var t=(0,i.default)(this),n=t.data("project_id"),s=t.data("user"),l=e[n]||[],d=[s];r.default.each(l,function(e){e.$div.hide(),d.push(e.user)}),d.length>1&&(t.find(".js-backers").html(a.default.to_sentence(r.default.map(d,function(e){return'<a href="'+e.urls.web.user+'" class="link-green-dark bold">'+e.name+"</a>"}))),t.find(".js-avatar").replaceWith((0,o.default)("activity/card/_backing_avatars",{backers:r.default.sample(d,3)}))),l.push({$div:t,user:s}),e[n]=l})})},IAwM:function(e,t,n){"use strict";(function(e){n("hsYx");var t=_(n("rXeC")),i=_(n("shXp")),r=_(n("wmCY")),a=n("4RZc"),o=_(n("hBlz")),s=_(n("9VV1"));n("l8Wg"),n("lX5T");var l=_(n("c5nH")),d=_(n("eF8u")),c=_(n("GiK3")),u=_(n("O27J")),f=n("LbfT"),h=n("5WUY"),p=n("Bm04"),m=n("DdqZ"),g=n("I2cB"),v=n("0Z67");function _(e){return e&&e.__esModule?e:{default:e}}(0,t.default)(function(){var n=(0,t.default)("#projects_edit"),_=0,y=(0,t.default)("#project-edit-nav"),b=(0,t.default)(".NS_projects__edit_nav"),w=(0,t.default)(".NS_projects__greenlit"),E=y.find(".finished"),C=n.find("#main").find(".window"),k=(0,t.default)("ol.form-panels li.panel:first"),S=window.location.hash;if(n.length){var T,A,R=document.getElementById("react_jp_identity_document_verification"),x=g.maybe.fromNullable(R).chain(function(e){return(0,v.maybeTry)(function(){return t.default.parseJSON(e.dataset.identity_verification)})}).getOrElse(null);if(x){var I=(0,p.initialState)({projectId:x.project_id,verificationStatus:x.verification_status,stripePublicKey:window.STRIPE_PUBLISHABLE_KEY,identityDocUploadUrl:window.IDENTITY_DOC_UPLOAD_URL}),D=(0,f.createEnhancedStore)(m.reducer,I),N=function(e){u.default.render(c.default.createElement(h.Main,{state:D.getState(),dispatch:D.dispatch}),e)};(0,t.default)("#react_jp_identity_document_verification").livequery(function(){var e=this;N(this),D.subscribe(function(){return N(e)})})}if((0,t.default)(window).on("project_edit:check_all_panels_for_completion",j),(0,t.default)(window).on("message",function(e){try{if(JSON.parse(e.originalEvent.data).close_jumio_modal){var n=(0,t.default)("#jumio-modal");n.trigger("allow_close.modal_dialog"),n.trigger("close.modal_dialog")}}catch(e){}}),C.serialScroll({items:"li.panel",lazy:!1,lock:!1,cycle:!1,duration:300}),C.on("shifted",function(){k.trigger("resize")}),(0,t.default)(document).on("project_edit:toggle_tab",function(e,n){"launch"===n?($("launch"),G("launch").then(function(){(0,a.track)("Project Edit Change Panel",{context:"launch",selected_panel:"Launch"})})):"preview"===n&&(0,t.default)("."+n+" .tab").click()}),b.find("a").click(function(e){e.preventDefault();var n=(0,t.default)(this);if(k.find("textarea.intermediate_editor, textarea.editor").each(function(){var e=t.default.wymeditors(n.data("wym_index"));e&&(0,t.default)("object",e._doc).show()}),(0,t.default)(document).trigger("ksr_video:pause_all_videos"),"#preview"===n.data("for")){var i=(0,t.default)(".content-toggle > #preview");i.is(":visible")?(i.stop().fadeOut(),z()):($("preview"),G("preview").then(function(){(0,a.track)("Project Edit Preview")}))}else if(n.is(".view_project"))U().then(function(){window.location.href=n.attr("href")});else if(n.is(".project_complete"))U().then(X);else if(n.is(".project_build"))b.removeClass("on_continue_nav"),z();else if(n.is("#exit-editor"))U().then(function(){return window.location=n.attr("href")});else if(!n.is(".disabled")){$("forms"),W(n.parent("li").index());var r=t.default.trim(n.text());(0,a.track)("Project Edit Change Panel",{context:r,selected_panel:r})}}),(0,t.default)(document).on("click","#rewards-panel .add-another",function(e){e.preventDefault(),(0,a.track)("Project Edit Add Reward Click")}),(0,t.default)(document).on("click","#rewards-panel .js-clone_reward",function(e){e.preventDefault(),(0,a.track)("Project Edit Copy Reward Click")}),e.fx.off=!0,S?("#project-preview"!==S&&"#preview"!==S||G("preview"),y.find('a[href="'+S+'"]').click()):(0,t.default)("body").is(".rejected, .appealed, .pending")?y.find('a[href="#submission"]').click():y.find('a[href="#the-basics"]').click(),e.fx.off=!1,(0,t.default)("#logo a, a.exit-link, a.rules, a.prototypes_warning").on("click",function(e){if(!e.metaKey&&!e.ctrlKey){e.preventDefault();var n=(0,t.default)(this);U().then(function(){window.location.href=n.attr("href")})}}),(0,t.default)(window).on("beforeunload",function(){if(H())return r.default.t("onloads.views.projects.edit.You_have_unsaved_changes")}),(0,t.default)(document).on("submit","#launch_confirmation > form",function(e){(0,t.default)(this).find("input.confirmation").is(":checked")||((0,t.default)(this).removeClass("submitting-non-ajax"),(0,s.default)({error:r.default.t("onloads.views.projects.edit.Please_accept_Our_Rules")}),e.preventDefault())}),(0,t.default)(document).on("change","#launch_confirmation input.confirmation",function(){var e=(0,t.default)("#launch_confirmation");(0,t.default)(this).is(":checked")?e.find("input[type=submit]").removeClass("disabled"):e.find("input[type=submit]").addClass("disabled")}),j(),P()&&W((0,t.default)(".flash-error:first").closest(".panel").index()),function(){var e={};function i(e){var t=e.clone();return t.find(".location-search .field-selected").remove(),t}n.find("form").each(function(){var n=(0,t.default)(this);e[n.closest(".panel").data("panel_id")]=i(n)}),t.default.fn.restore_form=function(){var n,r=(0,t.default)(this),a=r.closest(".panel").data("panel_id"),o=e[a];(n=r.find(".js-asset-upload:first")).find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel"),(n=n.clone()).find("object").remove(),o.find(".js-asset-upload:first").replaceWith(n),r.find("input.photo, input.video, input.avatar, textarea.editor").trigger("destroy"),r.replaceWith(o),"undefined"!=typeof FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(o[0])},_),o.trigger("form_restored"),e[a]=i(o),j(),P()},t.default.fn.update_form_cache=function(){var n=(0,t.default)(this),r=n.closest(".panel").data("panel_id");e[r]=i(n)}}(),(0,t.default)(window).on("project_edit:update_preview",Q),(0,t.default)(window).on("wymeditor:video_encoded",Q),(0,t.default)(".edit_project input.photo, .edit_project input.video, .edit_project input.avatar").livequery(function(){var e="image",n=(0,t.default)(this),i=n.parent().parent(),r=function(){},a={};n.is(".video")&&(e="video",r=function(){Q()}),t.default.extend(a,{type:e,after_encode:r}),n.ksr_uploader(a),n.on("file_added",function(){i.closest(".grey-field").removeClass("error"),"video"===e&&i.addClass("encoding"),i.find("input.photo, input.video, input.avatar").trigger("resize"),Q(),j()})}),(0,t.default)(document).on("click","body#projects_edit .js-asset-upload a.remove",function(e){e.preventDefault();var n=(0,t.default)(this).attr("href"),i=(0,t.default)(this).closest(".js-asset-upload");t.default.ajax({url:n,type:"delete",success:function(){i.removeClass("has_file"),i.find("input.photo, input.video, input.avatar").trigger("ksr_uploader:remove"),i.find("input.photo, input.video, input.avatar").trigger("resize"),Q()},error:function(){(0,s.default)({error:r.default.t("onloads.views.projects.edit.Could_not_delete_this_file")})}})}),(0,t.default)(document).on("click","body#projects_edit .js-asset-upload a.retry_upload",function(e){e.preventDefault();var n=(0,t.default)(this).closest(".js-asset-upload");n.removeClass("has_file encoding"),n.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel").trigger("resize")}),n.on("submit","form.edit_project",function(e){e.preventDefault()}),T=n.find(".tools"),A=T.find(".form-navigator"),(0,t.default)(document).on("change keyup cut paste input dirty wym-documentHTMLUpdated","form.edit_project",i.default.debounce(function(e){var n=(0,t.default)(e.target),r=n.closest("form");i.default.each(WYMeditor.INSTANCES,function(e){e.update()}),r.serialize()===r.data("original_values")||n.is(".do_not_dirty")&&"dirty"!==e.type||(A.hide(),(0,t.default)(".tools").addClass("visible"))},100)),T.on("click",".form-tools .save a",function(e){e.preventDefault(),(0,t.default)(this).closest("li.save").is(".disabled")||J(k.find("form")).then(function(){(0,a.track)("Project Edit Save",{context:"toolbar"})})}),T.on("click",".form-tools .cancel a",function(e){e.preventDefault(),Z(k.find("form")).then(function(){(0,a.track)("Project Edit Discard Changes",{context:"toolbar"})})}),function(){var e=n.find("#sidebar"),r={project_name:".project-card .project-title > a",project_blurb:".project-card .project-blurb"};function a(n){t.default.each(r,function(t){n.attr("id")===t&&e.find(String(this)).text(n.val())})}(0,t.default)(window).on("form_restored",function(n){var i=(0,t.default)(n.target),r=i.find(".field.location-search input.text").val();i.closest("#the-basics-panel").length&&(i.find(":input").each(function(){a((0,t.default)(this))}),e.find("ul.project-meta > li > a > span.location-name").text(r))}),(0,t.default)(document).on("keyup input cut paste change","#the-basics-panel form :input",i.default.debounce(function(e){a((0,t.default)(e.target))},100)),(0,t.default)("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:select",function(t,n){e.find("ul.project-meta > li > a > span.location-name").text(n)}),(0,t.default)("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:unselect",function(){e.find("ul.project-meta > li > a > span.location-name").text("")}),(0,t.default)(document).on("file_added","#the-basics-panel form .project-image",function(t,n){e.find(".project-thumbnail img").attr("src",n.image_src)})}(),(0,t.default)(document).on("click",".panel label.primary.help",function(){var e=(0,t.default)(this).closest(".grey-field").find(".field-help-2");e.is(":visible")?e.slideUp(300,"easeOutQuad",function(){(0,t.default)(this).trigger("shifted")}):e.slideDown(300,"easeOutQuad",function(){(0,t.default)(this).trigger("shifted")})}),(0,t.default)(document).on("click","body#projects_edit #preview a#enable_sharing",function(e){var n=(0,t.default)(this);e.preventDefault(),(0,a.track)("Project Edit Preview Link Toggle",{toggled_to:"enabled"}),ee(n)}),(0,t.default)(document).on("click","body#projects_edit #preview a#disable_sharing",function(e){var n=(0,t.default)(this);e.preventDefault(),(0,a.track)("Project Edit Preview Link Toggle",{toggled_to:"disabled"}),ee(n)}),(0,t.default)(document).on("click","body#projects_edit #preview #sharing_enabled .url",function(e){this.focus(),this.select(),e.preventDefault(),(0,a.track)("Project Edit Preview Link Select")}),(0,t.default)(document).on("click","body#projects_edit .description .wym_tools li a",function(){(0,a.track)("Editor Tool Click",{tool_clicked:(0,t.default)(this).attr("title"),context:"project_edit_description"})}),(0,t.default)(document).on("click","#projects_edit .js-open-project-showcase",function(){(0,a.track)("Opened Prototype Gallery Editor")}),KSR.store.isSupported())(0,t.default)(".banner").each(function(){var e=(0,t.default)(this).data("banner-name"),n=(0,t.default)(".banner_"+e),i="banner_"+e+"_hide";KSR.store.getItem(i)||n.removeClass("hidden"),n.find(".dismiss").click(function(t){t.preventDefault(),KSR.store.setItem(i,!0),n.fadeOut(function(){n.addClass("hidden")}),(0,a.track)("Project Edit Banner Dismiss",{banner_name:e})})});(0,t.default)("li.panel").on("project_build:refresh",function(){var e=(0,t.default)(this),n=e.data("refresh_url");t.default.ajax({type:"get",url:n,dataType:"html",success:function(t){e.html(t)},beforeSend:function(){e.addClass("loading")},complete:function(){e.removeClass("loading")}})}),(0,t.default)("#loading").hide(),(0,t.default)(document).on("click",".link_to_js-prohibited_projects_dialog",function(e){e.preventDefault(),(0,a.track)("Viewed Prohibited Rewards List",{context:"Project Reward Edit"})}),(0,t.default)(document).on("click",".link_to_js-school-video-dialog",function(e){e.preventDefault(),(0,a.track)("Viewed How To Make An Awesome Video",{context:"Project Story Edit"})})}function j(){var e=!0;(0,t.default)("#steps-nav a").each(function(){var n=(0,t.default)(this);!function(e){var n=e.find(":input.required"),i=!0,r=!1;return!(!(0,t.default)("body").is(".rejected, .appealed")||e.children().length)||(n.each(function(){(0,t.default)(this).val()||(i=!1)}),e.find(".js-asset-upload.required:not(.has_file)").length&&(i=!1),e.is("#the-basics-panel")&&((r=(0,t.default)(".js-campaign-goal").val())&&r.match(/[1-9]/)||(i=!1)),e.is("#rewards-panel")&&(e.find(".reward .summary").length||(i=!1)),e.is("#account-setup-panel")&&(i=0===e.find(".needs_verification").length),i)}((0,t.default)(n.attr("href")+"-panel"))?(n.removeClass("completed"),e=!1):n.addClass("completed").removeClass("errored")}),e?(y.find(".submit a").addClass("enabled"),w.length&&E.find("a").removeClass("bg-white border hover-bg-grey-light").addClass("bg-green white")):(y.find(".submit a").removeClass("enabled"),E.data("submitted")||E.find("a").removeClass("bg-green white").addClass("bg-white border hover-bg-grey-light"))}function P(){var e=(0,t.default)("#forms .flash-error");return(0,t.default)("#steps-nav a").removeClass("errored"),!!e.length&&(e.find("li").each(function(){(0,a.track)("Project Edit Error",{error_message:(0,t.default)(this).text()})}),e.closest("li.panel").each(function(){var e=(0,t.default)(this).data("panel_id");(0,t.default)('#steps-nav a[href="#'+e+'"]').addClass("errored")}),!0)}function L(){return k.find("input.photo, input.video, input.avatar")}function O(){return i.default.any(L(),function(e){return(0,t.default)(e).data("uploading")})?new Promise(function(e,n){var i=(0,t.default)("#confirm-abandon-upload");i.modal_dialog();var r=function(){i.off("click",".save a"),i.off("click",".cancel a"),i.trigger("close")};i.on("click",".save a",function(e){e.preventDefault(),r(),n()}),i.on("click",".cancel a",function(t){t.preventDefault(),r(),e(),L().trigger("ksr_file_upload:cancel"),(0,a.track)("Project Edit Cancel Upload")})}):Promise.resolve()}function M(e){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.replace(e)}function F(){b.addClass("on_continue_nav")}function B(){(0,t.default)(".tools").removeClass("visible")}function H(){return(0,t.default)(".tools").hasClass("visible")}function U(){return H()?new Promise(function(e){O().then(function(){var n=(0,t.default)("#confirm-abandon");n.modal_dialog();var i=function(){n.off("click",".save a"),n.off("click",".cancel a"),n.trigger("close")};n.on("click",".save a",function(t){t.preventDefault(),i(),J(k.find("form")).then(function(){(0,a.track)("Project Edit Save",{context:"modal"})}).then(e)}),n.on("click",".cancel a",function(t){t.preventDefault(),i(),Z(k.find("form")).then(function(){(0,a.track)("Project Edit Discard Changes",{context:"modal"})}).then(e)})})}):Promise.resolve()}function W(e){var i=n.find("#steps-nav > li:eq("+e+") > a"),r=(0,t.default)("#running-board > .help-panels");if(!i.is(".disabled, .selected"))return U().then(function(){var a=(0,t.default)("ol.form-panels li.panel:eq("+e+")");k.off("resize"),a.trigger("resize"),(0,t.default)(window).scrollTop()>75&&(0,t.default)(window).scrollTop(60),C.trigger("goto",[e]),Y(i),r.height(r.height()),r.children(".panel").hide(),(0,t.default)("#"+a.data("panel_id")+"-help").fadeIn(),r.css("height","auto"),(0,t.default)("#sidebar > .sidebar-help-panels > .panel").hide(),(0,t.default)("#"+a.data("panel_id")+"-sidebar-help").fadeIn(),n.find(".tools").show(),M("#"+a.data("panel_id")),k=a,(0,t.default)("body").removeClass("confirm_preview")})}function z(){var e=y.find("a.selected_last"),n=(0,t.default)("#steps-nav li:has(a.selected_last)").index();0===e.length&&(e=(0,t.default)("#steps-nav li a").first(),n=0),$("forms"),n>=0?W(n):y.find("a.selected_last").click()}function G(e){var i=(0,t.default)(".content-toggle > #"+e);return U().then(function(){var r=(0,t.default)("."+e+" .tab");"launch"===e&&F(),i.stop().fadeIn(),n.find(".tools").hide(),(0,t.default)(window).scrollTop()>75&&(0,t.default)(window).scrollTop(60),k.find("textarea.intermediate_editor, textarea.editor").each(function(){var e=t.default.wymeditors((0,t.default)(this).data("wym_index"));e&&(0,t.default)("object",e._doc).hide()}),Y(r)})}function Y(e){var t=y.find(".selected");t.removeClass("selected"),b.find("a").removeClass("selected_last"),t.is(".tab")||t.addClass("selected_last"),e.addClass("selected")}function $(e){var n=(0,t.default)("#content-wrap");n.find(".content.tabbed").fadeOut(),"finished"===e?(n.find("#forms").hide(),n.find("#finished").show()):"forms"===e&&(n.find("#finished").hide(),n.find("#forms").show())}function V(e){t.default.each(e,function(e,n){if(n){var i=(0,t.default)("#"+e.replace(/_/g,"-")),r=(0,t.default)(n);i.find("input.photo, input.video, input.avatar, textarea.intermediate_editor").trigger("destroy"),i.find("object").each(function(){swfobject.removeSWF(this.id)}),i.data("original_values",r.serialize()),i.html(r),i.find("form").update_form_cache(),"undefined"!=typeof FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(i[0])},_)}}),P()&&W((0,t.default)(".flash-error:first").closest(".panel").index())}function q(){var e=(0,t.default)(".NS_projects__edit_submission").find(".project_message_thread").data("read-messages-path"),n=E.data("greenlit");w.length?"auto_approved"===n?(F(),w.addClass("ready_to_go"),(0,a.track)("Project Edit Change Panel",{context:"submit_or_launch",selected_panel:"submit_or_launch"})):"review_required"===n||null===n?(w.hide(),location.reload(),(0,a.track)("Project Edit Change Panel",{context:"submit",selected_panel:"submit"})):"auto_rejected"===n&&(w.hide(),location.reload()):((0,a.track)("Project Edit Change Panel",{context:"status",selected_panel:"status"}),y.find("a").removeClass("selected").removeClass("selected_last"),y.find(".project_complete").addClass("selected"),e&&t.default.ajax({type:"put",url:e})),(0,t.default)("#saving-layer").hide(),$("finished")}function K(){var e=E.data("poll_url"),n=(0,t.default)("#progress_modal .progress_bar_progress"),r=new Date;return void 0!==E.data("greenlit")?Promise.resolve():new Promise(function(o){t.default.pollster(e,function(e){var t=(new Date-r)/1e3,s=t/40*100;return n.width(s+"%"),t>=40?((0,a.track)("Project Edit Greenlit Timeout"),o(),!0):!i.default.isNull(e.greenlit)&&((0,a.track)("Completed Project Edit Greenlit"),E.data("greenlit",e.greenlit),o(),!0)},{delay:500})})}function X(){var e=(0,t.default)("#progress_modal"),n=function(){e.hide()};M("#submission"),e.show(),function(){if(E.data("submitted"))return Promise.resolve();return new Promise(function(e,n){var i=E.find("form").attr("action");t.default.ajax({type:"PUT",url:i,dataType:"json",contentType:"application/json",success:function(t){t.ok?(E.data("submit_for_review_url",t.submit_for_review_url).data("poll_url",t.poll_url).data("submitted","true"),e()):(V(t.panels),n())}})})}().then(K).then(q).then(n,n)}function Q(){var e=y.find(".preview a").attr("href");e&&t.default.ajax({type:"get",url:e,dataType:"json",success:function(e){n.find("#preview .project-content").html(e.content),n.find("#preview #project-header").html(e.running_board),n.find("#project-card-preview").html(e.card)}})}function J(e){var c=n.find(".tools .save"),u=n.find(".tools li.cancel"),f=(0,t.default)("#saving-layer");return e.find(".editor.assets_processing").length?Promise.reject():O().then(function(){return new Promise(function(h,p){t.default.publish("project_build_submit_preprocessors"),c.addClass("disabled").find("a").text(r.default.t("onloads.views.projects.edit.Saving")),u.addClass("disabled"),f.show(),t.default.ajax({type:e.attr("method"),url:e.attr("action"),dataType:"json",data:t.default.param(e.composed("project_build_data",e.serializeArray())),global:!1,success:function(e){if(!i.default.has(e,"panels"))return(0,s.default)({error:r.default.t("onloads.views.projects.edit.Could_not_save")}),void p();if(V(e.panels),e.errored)p();else{if(void 0!==d.default&&d.default.set("name",(0,t.default)("#project_creator_name").val()),B(),n.find("#preview .project-content").html(e.content),e.launch&&(0,t.default)("#launch").html(e.launch),n.find("#preview #project-header").html(e.running_board),n.find("#project-card-preview").html(e.card),e.category){var c=parseInt(n.find("#forms").attr("data-category_id"),10),u=e.category.id;c!==u&&(0,a.track)("Project Edit Change Category",{category_before:c,category_after:u}),n.find("#forms").attr("data-category_id",e.category.id),n.find("#category_name_rules").text(e.category.name)}else n.find("#forms").attr("data-category_id","");h(),function(){return KSR.store.isSupported()?(n=(e=t.default.parseJSON(KSR.store.getItem("project_edit_display_rules")||"{}"))[l.default.get("id")],i.default.isUndefined(n)||!0===n?new Promise(function(n){(r=t.default.open_remote_modal_dialog((0,o.default)((0,t.default)("a.rules").data("interrupt")).addQuery("collapsed",!0).suffix("js").toString(),{dataType:"html",class_name:"rules"}))&&r.$elem.on("closed.modal_dialog",function(){n()}),e[l.default.get("id")]=!1,KSR.store.setItem("project_edit_display_rules",JSON.stringify(e))}):Promise.resolve()):Promise.resolve();var e,n,r}().then(function(){f.hide()}),j()}},error:function(){e.trigger("ajax_error"),(0,s.default)({error:r.default.t("onloads.views.projects.edit.Could_not_save")}),p()},complete:function(t){c.removeClass("disabled").find("a").text("Save"),u.removeClass("disabled"),f.hide(),e.trigger("ajax_complete",[t])}})})})}function Z(e){return O().then(function(){e.restore_form(),B()})}function ee(e){if(!e.is(".disabled")){var n=e.text();e.addClass("disabled"),t.default.ajax({url:e.attr("href"),type:"put",dataType:"json",success:function(n){n.share_token?(e.closest("#share_preview_container").removeClass("no_token").addClass("has_token"),(0,t.default)("#sharing_enabled input.url").val(n.url),(0,t.default)(".project_preview_comments").addClass("has_token")):(e.closest("#share_preview_container").removeClass("has_token").addClass("no_token"),(0,t.default)(".project_preview_comments").removeClass("has_token"),(0,t.default)(".NS_comments__comment").length||(0,t.default)(".project_preview_comments").removeClass("has_comments"))},complete:function(){e.removeClass("disabled"),e.text(n)}})}}})}).call(t,n("l/Rs"))},IPoO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CLOSED="CLOSED",t.EXPANDED="EXPANDED",t.AVAILABLE="available",t.BACKED_LIVE="backed_live",t.BACKED_SUCCESSFUL="backed_successful",t.PLEDGE_AMOUNT="pledgeAmount",t.PLEDGE_NO_REWARD="pledgeWithNoReward",t.SHIPPING_LOCATION="shippingLocation",t.NO_REWARD="no reward"},IYZS:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body.events",function(){(0,i.default)(".js-scroll_to").on("click",function(e){e.preventDefault(),i.default.scrollTo((0,i.default)(this).attr("href"),1e3)})})},IhN0:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e,t){function n(e,t,n){return e>t&&e<t+n}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return i=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(i=e(t.target)),!!i&&(!(this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,i){var r,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,a,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=(i=this.items[n]).item[0],(a=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,d=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||i+d>s&&i+d<l,f="y"===this.options.axis||t+c>a&&t+c<o,h=u&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:a<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&i,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!r&&(this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&i||"left"===a&&!i:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,a,o=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(i=(r=e(l[n])).length-1;i>=0;i--)(a=e.data(r[i],this.widgetFullName))&&a!==this&&!a.options.disabled&&s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,a,o,s,l,d,c=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(i=(r=e(f[n])).length-1;i>=0;i--)(a=e.data(r[i],this.widgetFullName))&&a!==this&&!a.options.disabled&&(u.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(n=u.length-1;n>=0;n--)for(o=u[n][1],i=0,d=(s=u[n][0]).length;i<d;i++)(l=e(s[i])).data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,i,r,a;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(i=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),a=r.offset(),i.left=a.left,i.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)a=this.containers[n].element.offset(),this.containers[n].containerCache.left=a.left,this.containers[n].containerCache.top=a.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){n&&!i.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var r,a,o,s,l,d,c,u,f,h,p=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(p&&e.contains(this.containers[r].element[0],p.element[0]))continue;p=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,s=null,l=(h=p.floating||i(this.currentItem))?"left":"top",d=h?"width":"height",c=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(h&&!n(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height)||(u=this.items[a].item.offset()[l],f=!1,Math.abs(u-c)>Math.abs(u+this.items[a][d]-c)&&(f=!0,u+=this.items[a][d]),Math.abs(u-c)<o&&(o=Math.abs(u-c),s=this.items[a],this.direction=f?"up":"down")));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,a=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0],a=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(i)},IjdK:function(e,t,n){"use strict";var i=c(n("rXeC")),r=c(n("8NzR")),a=n("kVy0"),o=c(n("wmCY")),s=n("4RZc"),l=n("TBVi");n("U7ZL");var d=c(n("c5nH"));function c(e){return e&&e.__esModule?e:{default:e}}n("FD+P"),(0,r.default)(".NS-projects__edit_rewards",function(){var e=/(?:(%)|\b(raffle|raffled|raffling|coupon|coupons|discount|discounts|discounted|reduced|percent|investor|investors|investment|invested|investments|investing|stake|stakes|sweepstake|sweepstakes|financial|equity|lottery|lotteries|gift certificate|gift card|wine|beer|alcohol|champagne|cocktail|contest|chance|charity|enter|prize|win|drinks|shot|booze|bubbly|pint|price|stock|percentage|knife|axe|knives|blade|charity|prototype|lifetime|life|forever|vacation|holiday|pipe|vaporizer|vape|gun|worth)\b)/i;function t(t){var n=t.siblings(".warning"),i=e.exec(t.val());i?(n.html(o.default.t("onloads.views.projects.edit_rewards.Reward_warning_Please_make_sure_you_are_not_offering",{word:i[0]})),n.slideDown(),n.trigger("shifted")):(n.slideUp(),n.trigger("shifted"))}function n(e){e.find(".js-rest_of_world .js-cost_label").each(function(){var t=(0,i.default)(this),n=!e.find("li.shipping-rule:not(.js-rest_of_world)").filter(function(e,t){return"none"!==(0,i.default)(t).css("display")}).length,r=t.data(n?"alt":"base");r&&t.text(r)})}function r(e){e.find("input.keep_box:checked").each(function(){var t=(0,i.default)(this).closest("li.shipping-rule").find(".js-location_id_input, .js-location_id_select").val();t&&e.find('select.js-location_id_select > option[value="'+t+'"]:not(:selected)').prop("disabled",!0)}),(0,i.default)(e.data("uneditable_shipping_location_ids")).each(function(t,n){e.find('select.js-location_id_select > option[value="'+n+'"]:not(:selected)').prop("disabled",!0);var i=e.find('input.js-location_id_input[value="'+n+'"]').closest("li.shipping-rule");i.find("input.js-cost_input").prop("disabled",!0),i.find(".keep-or-delete").hide()}),n(e)}function c(){(0,i.default)("ol.rewards > li:visible").each(function(e,t){(0,i.default)(t).find("span.reward_num").html(e+1)})}function u(e){var t=e.closest(".js-reward-fields").find(".js-reward-items-controller");return t.length&&t.data("controller")}function f(e){return!!e.find(".js-items-list-item").length||(e.find(".js-new-item-link").click(),!1)}function h(e){var t=(0,i.default)(this).closest(".js-backer-rewards-item").data("backerRewardsItem");t.quantity+e<1||(t.quantity+=e,u((0,i.default)(this)).list.change())}(0,i.default)(".add-reward-action-toggle").click(function(){(0,i.default)(".action-wrap").toggle()}),(0,i.default)(".fields.rewards textarea").each(function(){t((0,i.default)(this))}),(0,i.default)(document).on("keyup paste cut",".fields.rewards textarea",function(){t((0,i.default)(this))}),(0,i.default)("li.reward .summary").livequery(function(){var e=(0,i.default)(this);e.closest(".reward").data("cloned")||e.show().siblings(".backer_rewards_fields").hide()}),(0,i.default)(document).on("click",".js-enable-limit-checkbox",function(e){(0,i.default)(e.target).siblings(".js-limit-options:first").toggleClass("hidden")}),(0,i.default)(document).on("click",".js-backer-limit-checkbox",function(e){(0,i.default)(e.target).siblings(".js-backer-limit-text-field").toggleClass("hidden")}),(0,i.default)(document).on("click",".js-duration-limit-checkbox",function(e){(0,i.default)(e.target).siblings(".js-duration-calendars").toggleClass("hidden")}),(0,i.default)(document).on("click","li.reward .summary .edit",function(e){e.preventDefault(),(0,i.default)(this).parents(".summary").hide().siblings(".fields").show().trigger("shifted").find("input:first").focus(),(0,s.track)("Reward Edit")}),(0,i.default)(document).on("nested_attributes_list:added","li.reward",function(){(0,i.default)(this).trigger("shifted").trigger("dirty")}),(0,i.default)(document).on("nested_attributes_list:removed","li.reward",function(){(0,i.default)(this).trigger("shifted").trigger("dirty")}),(0,i.default)(document).on("change","li.reward .js-shipping_preference_select",function(){var e=(0,i.default)(this).val(),t=(0,i.default)(this).closest(".shipping").find("ul.shipping-rules"),n=t.find("li.shipping-rule:not(.template)"),a=n.filter(".js-rest_of_world");switch(e){case"restricted":t.show(),n.show().find(".keep_box").prop("checked",!0),a.hide().find(".keep_box").prop("checked",!1);break;case"unrestricted":t.show(),n.show().find(".keep_box").prop("checked",!0);break;default:t.hide(),n.find(".keep_box").prop("checked",!1)}r(t)}),(0,i.default)(document).on("change","li.shipping-rule > select.js-location_id_select",function(){var e=(0,i.default)(this),t=(0,i.default)(this).closest("li.shipping-rule").find("label.js-cost_label");e.hide(),t.text(e.find("option:selected").text()).show(),r(e.closest("ul.shipping-rules"))}),(0,i.default)(document).on("nested_attributes_list:added","li.shipping-rule",function(){r((0,i.default)(this).closest("ul.shipping-rules"))}),(0,i.default)(document).on("nested_attributes_list:removed","li.shipping-rule",function(){var e=(0,i.default)(this).find(".js-location_id_input, .js-location_id_select").val(),t=(0,i.default)(this).hasClass("js-persisted");e&&(0,i.default)(this).closest("ul.shipping-rules").find('option[value="'+e+'"]').prop("disabled",!1),t||(0,i.default)(this).remove()}),(0,i.default)(document).on("nested_attributes_list:removed","ul",function(){n((0,i.default)(this))}),(0,i.default)("ol.rewards").livequery(function(){c(),(0,i.default)("ol.rewards > li.reward:visible").each(function(){r((0,i.default)(this).find("ul.shipping-rules"))})}),(0,i.default)(document).on("nested_attributes_list:added nested_attributes_list:removed","li.reward",c),(0,i.default)(".keep-or-delete").livequery(function(){var e=(0,i.default)(this).closest("li"),t=(0,i.default)(this).find("a"),n=(0,i.default)(this).find(".checkbox").hide();t.attr("disabled")||t.show(),t.on("click",function(i){t.attr("disabled")||(n.prop("checked",!1),e.hide(),e.trigger("nested_attributes_list:removed")),i.preventDefault()})}),(0,i.default)("a.add-another").livequery(function(){var e=(0,i.default)(this),t=e.data("context")?e.closest(e.data("context")):(0,i.default)(document),n=t.find(e.attr("rel")).hide();e.attr("disabled")||e.show(),e.on("click",function(i){if(!e.attr("disabled")){var r=n.clone_form_template();r.find(".keep_box").val(0).prop("checked",!0),n.trigger("form_fields_cloned",r),e.attr("data-target-selector")?t.find(e.attr("data-target-selector")).append(r):n.before(r),r.trigger("nested_attributes_list:added")}i.preventDefault()})}),(0,i.default)(document).on("form_fields_cloned",".js-reward-fields",function(e,t){if(this===e.target){var n=(0,i.default)(e.target),r=(0,i.default)(t),a="items__add-items-"+(new Date).getTime();r.find("a.js-reward-popover-target").attr("id",a),r.find(".ksr-popover").attr("data-target-id","#"+a).data("target-id","#"+a);var o=r.find(".js-items");o.length&&(o.data("backer_rewards_items",u(n).cloneSelected()),o.data("reward_id",null))}}),(0,i.default)("li.js-reward-fields").livequery(function(){var e=(0,i.default)(this),t=e.find(".js-items").data();if(t){var n=e.find(".js-reward-items-list"),r=e.find(".js-static-items-list"),a=e.find(".js-items-list"),o={backerRewardsItems:t.backer_rewards_items,rewardId:t.reward_id,formPrefix:function(e){var t=e.find("input[data-canonical-attribute]"),n=new RegExp("(.+\\[-?\\d+\\])\\["+t.data("canonicalAttribute")+"\\]$");return t.attr("name").match(n)[1]}(e)},s=new window.ItemListController(n,r,a,o);e.find(".js-reward-items-controller").data("controller",s)}}),(0,i.default)(document).on("click",".js-add-item-link",function(e){e.preventDefault();var t=(0,i.default)(this);u(t).add(t.data("itemId"))}),i.default.subscribe("project_build_submit_preprocessors",function(){(0,i.default)(".js-limit").each(function(){var e=!(0,i.default)(".js-enable-limit-checkbox",this).prop("checked"),t=!(0,i.default)(".js-backer-limit-checkbox",this).prop("checked"),n=!(0,i.default)(".js-duration-limit-checkbox",this).prop("checked");(e||t)&&(0,i.default)(".js-backer-limit-text-field",this).val(""),(e||n)&&(0,i.default)(".js-duration-calendars input",this).val("")})}),(0,i.default)(document).on("click",".js-items .js-reward-popover-target",function(){(0,s.track)("Items Form Add Item Click",{reward_id:(0,i.default)(this).closest(".js-items").data("reward_id")})}),(0,i.default)(document).on("submit",".js-item-form",function(e){e.preventDefault();var t=(0,i.default)(this);t.find(".submit").addClass("btn--disabled").prop("disabled","disabled");var n=i.default.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),dataType:"json"});n.success(function(e){d.default.set("items",e.items,{overwrite:!0});var n=t.closest(".modal_dialog").data("modal_dialog"),r=(0,i.default)(n.options.event.target);r.is(".js-new-item-link")&&u(r).add(e.item.id),n.close()}),n.error(function(e){e.responseJSON&&t.find(".js-errors").html(e.responseJSON.join("<br/>"))}),n.complete(function(){t.find(".submit").removeClass("btn--disabled").prop("disabled",!1)})}),(0,i.default)(document).on("ajax:success",".js-item-delete",function(e,t){var n=d.default.get("items").filter(function(e){return e.id!==t.item.id});d.default.set("items",n,{overwrite:!0}),(0,i.default)(".modal_dialog:visible").each(function(e,t){(0,i.default)(t).data("modal_dialog").close()})}),(0,i.default)(document).on("click",".js-new-item-link",function(){(0,s.track)("Items Form New Item Click",{reward_id:(0,i.default)(this).closest(".js-items").data("reward_id")})}),(0,i.default)(".js-items .ksr-popover").livequery(function(){(0,i.default)(this).data("ksr_popover_override",f)}),(0,i.default)(document).on("sortupdate",".js-items__sortable-list",function(){var e=u((0,i.default)(this)),t=(0,i.default)(this).find("[data-item-id]").map(function(){var t=(0,i.default)(this).data("itemId");return e.list.get("backerRewardsItems").filter(function(e){return e.item_id===t})[0]}).get();e.list.set("backerRewardsItems",t,{silent:!0,overwrite:!0}),(0,i.default)(this).trigger("dirty")}),(0,i.default)(document).on("click","a.js-increment-quantity",function(e){e.preventDefault(),h.bind(this)(1)}),(0,i.default)(document).on("click","a.js-decrement-quantity",function(e){e.preventDefault(),h.bind(this)(-1)}),(0,i.default)(document).on("modal_dialog:remote_dialog_loaded",".modal_dialog",function(){var e=(0,i.default)(this).find("input.js-item-name");e.focus().val(e.val())}),(0,i.default)(".NS-projects__edit_rewards").livequery(function(){(0,i.default)(".js-ends-at-input, .js-starts-at-input").each(function(e,t){var n=(0,i.default)(t),r=n.siblings(".js-hidden-calendar-input:first").val();r&&n.val((0,a.format)("l LT",r))}),(0,i.default)(".js-local-tz-field").text((0,l.zoneAbbr)(new Date))})})},IuCL:function(e,t,n){"use strict";var i=s(n("rXeC")),r=s(n("8NzR")),a=n("4RZc"),o=n("dvbw");function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("#projects_learn",function(){var e=0,t=!1,n=function(e){return function(n){n.preventDefault(),(0,i.default)(n.target).closest(".categories").find(".js-category-link").removeClass("selected"),(0,i.default)(n.target).addClass("selected");var r=(0,i.default)(n.target).data("name"),s=(0,i.default)(e).find('[data-name="'+r+'"]');(0,i.default)(e).find(".category").removeClass("block"),s.addClass("block");var l=(0,i.default)(e).find("video").get(0);l&&l.pause(),e.includes("desktop")&&(0,o.coreScroller)({to:(0,i.default)(".js-desktop-categories").offset().top,duration:500}),t&&(0,a.track)("Learn More Project Category Select",{category_name:(0,i.default)(n.target).text()}),t=!0}};(0,i.default)(".js-mobile-categories .js-category-link").on("click",n(".js-mobile-interstitials")),(0,i.default)(".js-desktop-categories .js-category-link").on("click",n(".js-desktop-interstitials")),(0,i.default)(".js-mobile-categories li:first .js-category-link").get(0).click(),(0,i.default)(".js-desktop-interstitials").find(".close").on("click",function(e){(0,i.default)(".js-desktop-categories").find(".js-category-link").removeClass("selected"),(0,i.default)(".js-desktop-interstitials").find(".category").removeClass("block"),e.preventDefault()}),(0,i.default)(".js-tools .right_side").on("cycle-after",function(t,n,r,o){var s,l,d=(0,i.default)(o);e>0&&(0,a.track)("Learn More Project Tool Select",{slide_description:d.attr("data-slide-description")}),e+=1,s=d,(l=(0,i.default)(".js-tools").find("video").get(0))&&l.pause(),s.find("video").length&&s.find("video")[0].play()}),(0,i.default)(".js-quotes").find(".mirror").each(function(){(0,i.default)(this).html((0,i.default)(this).closest(".quote-box").find(".relative").html())}),(0,i.default)(".js-quotes").waypoint(function(){return(0,i.default)(".js-quotes").addClass("loaded")},{offset:150}),(0,i.default)(".js-ctas .js-play-button").on("click",function(e){e.preventDefault(),(0,i.default)(this).closest("section").addClass("video-expanded"),(0,i.default)(this).closest("section").find(".video-player").trigger("ksr_video:play")}),(0,i.default)(".js-ctas .close").on("click",function(e){e.preventDefault(),(0,i.default)(this).closest("section").removeClass("video-expanded"),(0,i.default)(this).closest("section").find(".video-player").trigger("ksr_video:pause")})})},IyjT:function(e,t,n){"use strict";var i=s(n("wmCY")),r=s(n("8NzR")),a=s(n("L3hI")),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_campaigns__stats",function(e){o.default.listen("backers_count",function(t){var n=t.backers_count;e.find(".js-backers_count").text(a.default.format_number(n,{precision:0})),e.find(".js-backers_word").text(1===parseInt(n)?i.default.t("project_stats.backer"):i.default.t("project_stats.backers"))}),o.default.listen("pledged",function(t){e.find(".js-pledged").text(a.default.shorter_money(t.pledged,{currency:o.default.get("currency"),usd_type:o.default.get("usd_type")}))}),o.default.listen("usd_pledged",function(t){e.find(".js-usd_pledged").text(a.default.shorter_money(t.usd_pledged,{currency:"USD",usd_type:o.default.get("usd_type")}))}),o.default.listen("converted_pledged_amount",function(t){e.find(".js-convert_pledged").text(a.default.shorter_money(t.converted_pledged_amount,{currency:o.default.get("current_currency"),usd_type:o.default.get("usd_type")}))})})},J1uj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioIndicator=t.RadioGroup=t.BaseRadioButton=t.BaseCheckbox=t.addInnerIcon=t.InputIcon=t.addErrors=t.InputErrors=t.addInlineLabel=t.addInnerLabel=t.addTooltip=t.addHeaderLabelIcon=t.addHeaderLabel=t.InputLabel=t.addFooter=t.addSibling=t.addHeader=t.RadioInputField=t.NumberInputField=t.PasswordInputField=t.EmailInputField=t.TextInputField=t.InputField=t.RadioInput=t.CheckboxInput=t.NumberInput=t.PasswordInput=t.EmailInput=t.TextInput=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("Z6GA"),l=n("ci1u"),d=n("uA/L"),c=n("X2U3"),u=n("xgez");function f(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var h=function(e){return function(t){var n=t.atoms,i=void 0===n?[]:n,r=t.autoFocus,a=t.checked,l=t.disabled,d=void 0!==l&&l,c=t.errors,u=void 0===c?[]:c,f=t.id,h=t.name,p=t.onBlur,m=t.onChange,g=t.onClick,v=t.onFocus,_=t.onKeyDown,y=t.onKeyUp,b=t.onKeyPress,w=t.onSelect,E=t.placeholder,C=t.required,k=void 0!==C&&C,S=t.style,T=t.value,A=u&&u.length>0,R=(0,s.computedAtoms)("atomic-text-input",A&&"atomic-form-v1-error",i);return o.default.createElement("input",{"aria-invalid":A,"aria-required":k,"aria-describedby":f+"-error",autoFocus:r,checked:a,className:R,disabled:d,id:f,name:h,onBlur:p,onChange:m,onClick:g,onFocus:v,onKeyDown:_,onKeyUp:y,onKeyPress:b,onSelect:w,placeholder:E,style:S,type:e,value:T})}},p=t.TextInput=h("text"),m=t.EmailInput=h("email"),g=t.PasswordInput=h("password"),v=t.NumberInput=h("number"),_=t.CheckboxInput=h("checkbox"),y=t.RadioInput=h("radio"),b=function(e){return function(t){var n=t.wrapperAtoms,i=void 0===n?[]:n,a=t.wrapperStyle,s=t.footer,l=t.header,d=t.inputAtoms,c=void 0===d?[]:d,u=t.siblings,h=f(t,["wrapperAtoms","wrapperStyle","footer","header","inputAtoms","siblings"]),p=function(e){return e&&e.find(Boolean)};return o.default.createElement("div",{style:a,className:["relative"].concat(i).join(" ")},p(l)&&o.default.createElement("div",{className:"relative flex items-center mb1"},l),o.default.createElement("div",{className:"relative"},o.default.createElement(e,r({atoms:c},h)),p(u)&&[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(u))),p(s)&&o.default.createElement("div",{className:"relative flex items-center flex-wrap"},s))}};t.InputField=b;t.TextInputField=b(p),t.EmailInputField=b(m),t.PasswordInputField=b(g),t.NumberInputField=b(v),t.RadioInputField=b(y);var w=function(e){return function(t){return function(n){var i=n.header,a=void 0===i?[]:i,s=f(n,["header"]);return o.default.createElement(t,r({},s,{header:a.concat(e(s))}))}}};t.addHeader=w;var E=function(e){return function(t){return function(n){var i=n.siblings,a=void 0===i?[]:i,s=f(n,["siblings"]);return o.default.createElement(t,r({},s,{siblings:a.concat(e(s))}))}}};t.addSibling=E;var C=function(e){return function(t){return function(n){var i=n.footer,a=void 0===i?[]:i,s=f(n,["footer"]);return o.default.createElement(t,r({},s,{footer:a.concat(e(s))}))}}};t.addFooter=C;var k=t.InputLabel=function(e){var t=e.label,n=e.id,i=e.errors,r=e.atoms,a=(0,s.computedAtoms)("atomic-text-label",i&&i.length>0&&"atomic-text-label--errored",r);return o.default.createElement("label",{htmlFor:n,className:a},t)},S=(t.addHeaderLabel=w(function(e){var t=e.errors,n=void 0===t?[]:t,i=e.headerLabel,r=e.headerLabelAtoms,a=void 0===r?[]:r,s=e.id;return o.default.createElement(k,{atoms:a,errors:n,id:s,key:"key-"+s,label:i})}),t.addHeaderLabelIcon=w(function(e){var t=e.headerLabelIcon,n=e.headerLabelIconSize,i=void 0===n?"12":n,r=e.headerLabelIconColor,a=e.headerLabelIconAtoms,d=void 0===a?["ml1","inline-block"]:a,c=(0,s.computedAtoms)(d,"fill-"+r);return o.default.createElement(l.Icon,{name:t,size:i,atoms:c,key:"key-"+t})}),t.addTooltip=w(function(e){var t=e.tooltipText,n=e.tooltipIcon,i=e.tooltipIconSize,r=void 0===i?"12":i,a=e.tooltipIconColor,d=e.tooltipIconAtoms,c=void 0===d?["ml1","inline-block"]:d,u=(0,s.computedAtoms)(c,"fill-"+a);return o.default.createElement("a",{className:"ksr-tooltip ksr-tooltip--large lh0","data-tooltip":t},o.default.createElement(l.Icon,{name:n,size:r,atoms:u}))}),t.addInnerLabel=E(function(e){var t=e.id,n=e.innerLabel,i=e.innerLabelAtoms,r=void 0===i?[]:i;return o.default.createElement(k,{label:n,id:t,atoms:r.concat(["atomic-text-label-fixed","l0"]),key:"key-"+t})}),t.addInlineLabel=E(function(e){var t=e.id,n=e.inlineLabel,i=e.inlineLabelAtoms,r=void 0===i?[]:i;return o.default.createElement(k,{label:n,id:t,atoms:r.concat(["atomic-text-label-fixed"]),key:"key-"+t})}),t.InputErrors=function(e){var t=e.errors,n=e.name,i=e.id;return t&&0!==t.length?o.default.createElement("ul",{className:"red-500 mt1"},t.map(function(e,t){return o.default.createElement("li",{key:n+"-error-"+t,id:i+"-error"},e)})):null}),T=(t.addErrors=C(function(e){var t=e.errors,n=e.name,i=e.id;return o.default.createElement(S,{errors:t,name:n,id:i,key:"key-"+n+"-"+t})}),t.InputIcon=function(e){var t=e.icon,n=e.size,i=e.atoms,r=void 0===i?[]:i,a=e.color;return o.default.createElement("div",{className:(0,s.computedAtoms)(r)},o.default.createElement(l.Icon,{name:t,size:n,atoms:["fill-"+a]}))});t.addInnerIcon=E(function(e){var t=e.innerIcon,n=e.innerIconSize,i=void 0===n?"12":n,r=e.innerIconColor,a=void 0===r?"dark-grey-400":r;return o.default.createElement(T,{key:"key-"+t,icon:t,size:i,color:a,atoms:["h100p","flex","items-center","justify-center","absolute","t0","r2"]})});t.BaseCheckbox=function(e){var t=e.id,n=e.label,i=e.large,a=void 0!==i&&i,d=e.atoms,c=void 0===d?[]:d,u=e.tag,h=void 0===u?"div":u,p=f(e,["id","label","large","atoms","tag"]);if(!n)throw new Error("A label is required");var m=!0===a?"12":"9",g=(0,s.computedAtoms)("form-checkbox",!0===a?"form-checkbox--large":"form-checkbox--small",c),v=h;return o.default.createElement(v,{className:g},o.default.createElement(_,r({id:t},p)),o.default.createElement("label",{className:"input-label pointer",htmlFor:t},o.default.createElement("span",{className:"input-state-indicator"},o.default.createElement(l.Icon,{name:"check",size:m,atoms:["fill-white"]})),o.default.createElement("span",{className:"input-label__text"},n)))};var A=t.BaseRadioButton=function(e){var t=e.id,n=e.name,i=e.option,r=e.isSelected,a=e.onChange,l=e.onKeyDown,u=e.theme,f=void 0===u?c.defaultTheme:u,h=i.expandedComponent,p=i.label,m=i.value,g=i.subheader;return o.default.createElement("div",{className:(0,s.computedAtoms)("border-grey-400 transition-300 border mb1 rounded",!r&&"hover-border-dark-grey-500"),"aria-checked":r,tabIndex:r?"0":"-1",role:"radio",onKeyDown:l},o.default.createElement("label",{htmlFor:t,className:"flex p3 pointer"},o.default.createElement("div",null,o.default.createElement("input",{type:"radio",name:n,id:t,value:m,className:"super-hide",onChange:a,checked:r}),o.default.createElement("div",{className:"mt1_2"},o.default.createElement(R,{isSelected:r,theme:f}))),o.default.createElement("div",{className:"grow-1"},o.default.createElement(d.Span,{type:"body-100",color:"soft-black",atoms:["block"],weight:"regular"},p),g&&o.default.createElement(d.Span,{type:"caption-200",color:"dark-grey-500",weight:"regular"},g))),r&&h&&o.default.createElement("div",{className:"border-grey-400 border-top p3"},h))},R=(t.RadioGroup=function(e){var t=e.id,n=e.radioGroupOptions,i=e.state,r=e.dispatch,a=e.onChangeAction,s=void 0===a?u.radioGroupOptionSelected:a,l=e.theme,d=void 0===l?c.defaultTheme:l,f=e.RadioButton,h=void 0===f?A:f,p=e.customEventListeners,m=n&&n.length-1,g=n.map(function(e,n){var a=i.selectedOptionIndex===n,l=t+"-radio-option-"+n;return o.default.createElement(h,{isSelected:a,customEventListeners:p,onChange:function(){return r(s(e,n))},onKeyDown:function(e){if(e.target===e.currentTarget&&(0,u.radioGroupWillHandleKey)(e.keyCode))return e.preventDefault(),r((0,u.radioGroupKeydown)(e.keyCode,e.target,n,m))},dispatch:r,option:e,key:l,id:l,name:t,theme:d})});return o.default.createElement("div",{id:t,role:"radiogroup"},g)},t.RadioIndicator=function(e){var t=e.theme,n=void 0===t?c.defaultTheme:t,i=e.isSelected,r=["block","circle","h3","mr1","mr3-md","w3",i?"bg-"+n["primary-light"]:"bg-white"].join(" "),a=["inset 0 1px 3px rgba(0, 0, 0, 0.2)","inset 0 0 0 1px rgba(0, 0, 0, 0.2)"].join(", ");return o.default.createElement("div",{className:r,style:{boxShadow:a}},i&&o.default.createElement("div",{className:"bg-white h1 w1 circle inline-block m1"}))})},JCYY:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){var e=(0,a.default)("#projects_edit");e.length&&(e.on("click",".jumio-modal-close",function(e){e.preventDefault(),(0,a.default)(this).trigger("allow_close.modal_dialog"),(0,a.default)(this).trigger("close.modal_dialog")}),(0,a.default)(document).on("before_close.modal_dialog",".modal_dialog.identity-document",function(){(0,a.default)("#account-setup-panel").trigger("project_build:refresh")}))})},JIXV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flaggingFormReducer=t.FLAGGING_FAILED=t.FLAGGING_CREATED=t.FLAGGING_SUBMITTED=t.FLAGGING_UNSUBMITTED=t.updateDetailsAction=t.createFlaggingFailAction=t.createFlaggingSuccessAction=t.submitFlaggingAction=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("n+Gj"),a=n("EIRz"),o=(t.submitFlaggingAction=function(e,t){return{type:"SUBMIT_FLAGGING",kind:e,details:t}},t.createFlaggingSuccessAction=function(e){return{type:"FLAGGING_CREATED",response:e}}),s=t.createFlaggingFailAction=function(e){return{type:"FLAGGING_FAILED",error:e}},l=(t.updateDetailsAction=function(e){return{type:"FLAGGING_DETAILS_UPDATED",value:e.target.value}},t.FLAGGING_UNSUBMITTED="flagging unsubmitted"),d=t.FLAGGING_SUBMITTED="flagging submitted",c=t.FLAGGING_CREATED="flagging created",u=t.FLAGGING_FAILED="flagging failed",f={flaggingFormStatus:l};t.flaggingFormReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case"SUBMIT_FLAGGING":return(0,a.loop)(i({},e,{flaggingFormStatus:d}),a.Cmd.run(r.submitFlaggingMutation,{successActionCreator:o,failActionCreator:s,args:[t.details,t.kind]}));case"FLAGGING_CREATED":return t.response.errors?i({},e,{flaggingFormStatus:u}):null!==t.response.data.createFlagging.flagging.kind?i({},e,{flaggingFormStatus:c}):i({},e,{flaggingFormStatus:u});case"FLAGGING_FAILED":return i({},e,{flaggingFormStatus:u});case"FLAGGING_DETAILS_UPDATED":return i({},e,{details:t.value});default:return e}}},"JXF+":function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".NS_projects__project_nav .js-load-project-help_wanted",function(){(0,i.default)(document).on("click",".js-btn",function(){var e=(0,i.default)(this).closest(".js-skill");e.find(".js-skill-textarea").toggle(),e.find(".js-btn").toggle()})})},Jd3c:function(e,t,n){"use strict";n("WKaU"),n("mnU0"),n("pJzG"),n("7hji"),n("dKWP")},"Jl+d":function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},Jvcu:function(e,t,n){var i=n("xA5w");e.exports=function(e,t){var n=i(e),r=Number(t);return n.setDate(n.getDate()+r),n}},KI0s:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("click",".ksr-dropdown",function(){var e=(0,a.default)(this);e.toggleClass("open"),setTimeout(function(){(0,a.default)(window).on("click",function(t){(0,a.default)(t.target).closest(e).length||e.removeClass("open")})},0)})})},KMRV:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){"autofocus"in document.createElement("input")||(0,a.default)(".js-auto_focus").first().focus()})},KVBm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackSelectedItem=t.trackCloseSelect=t.trackOpenSelect=t.handleBlur=t.unboundReducer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("EIRz"),a=n("Z6GA"),o=n("4RZc"),s=n("1Tla"),l=(t.unboundReducer=function(e,t){return function(n){return function(a,o){if(o.namespace&&o.namespace!==e)return a;switch(o.type){case"TOGGLE_SELECT":var f=a.isOpen?c:d;return(0,r.loop)(i({},a,{isOpen:!a.isOpen,highlightedIndex:a.currentIndex}),r.Cmd.run(f,{args:[n]}));case"CLOSE_SELECT":return(0,r.loop)(i({},a,{isOpen:!1,isKeySelectionEngaged:!1}),r.Cmd.run(c,{args:[n]}));case"ON_BLUR":return(0,r.loop)(i({},a,{isKeySelectionEngaged:!1}),r.Cmd.run(l,{successActionCreator:t.closeSelect}));case"CHANGE_SELECTED_INDEX":var h=(0,s.checkForNewSelection)(a,o.newSelectedIndex),p=h.currentIndex!==a.currentIndex?r.Cmd.run(u,{args:[n,o.trackingId]}):r.Cmd.none;return(0,r.loop)(h,p);case"ON_KEYDOWN":return(0,s.handleKeyDown)(a,o.keyCode,o.options);case"ON_LIST_SCROLL":return i({},a,{isKeySelectionEngaged:!1});case"CHANGE_HIGHLIGHTED_INDEX":return i({},a,{highlightedIndex:o.newHighlightedIndex});case"NOOP":default:return a}}}},t.handleBlur=(0,a.wait)(0,function(){return Promise.resolve()})),d=t.trackOpenSelect=function(e){(0,o.track)("Opened Select",{context:e})},c=t.trackCloseSelect=function(e){(0,o.track)("Closed Select",{context:e})},u=t.trackSelectedItem=function(e,t){(0,o.track)("Selected Item",{context:e,id:t})}},KfH0:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(document).on("click",".js-removeable .js-remove",function(){var e=(0,a.default)(this);return!(e.data("confirm")&&!confirm(e.data("confirm")))&&(a.default.post(e.attr("href"),{_method:"delete"},function(){e.parents(".js-removeable").fadeOut(400,function(){(0,a.default)(this).remove()})}),!1)})},"LDW/":function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body#accounts_edit",function(){var e=(0,i.default)("#edit-account-form");(0,i.default)(".js-stripe_form").on("submit",function(t){t.preventDefault();var n=(0,i.default)(t.target),r={};n.find("input[type=submit]").attr("disabled","disabled"),n.find(".js-stripe_input").each(function(){var e=(0,i.default)(this);r[e.data("stripe")]=e.val()}),i.default.ajaxSetup({headers:{Authorization:"Bearer "+n.data("stripe-public-key")}}),i.default.post("https://api.stripe.com/v1/tokens",{pii:r}).done(function(t){e.find("#account_personal_id_token").val(t.id),e.submit()}).fail(function(e){n.find("input[type=submit]").attr("disabled",null),n.find(".errored").text(e.responseJSON.error.message).removeClass("hide")})})})},LOOJ:function(e,t,n){"use strict";var i,r=n("shXp"),a=(i=r)&&i.__esModule?i:{default:i};n("l/Rs");var o=n("l/Rs");o.fn.option_values=function(e){var t=o(this).first().find("option").map(function(t,n){var i=n.value;return!("function"==typeof e&&!e(i))&&i});return(0,a.default)(t).without(!1)},o.fn.select_machine=function(e,t){var n={default_control:function(e){e.hide()}};return o(this).each(function(){!function(e,t,n){var i=o(e),r=a.default.map(a.default.keys(t),function(e){return"#"+e}).join(", ");i.delegate(r,"change",function(){o(this).trigger("state_change")}),i.delegate(r,"state_change",function(){var e=o(this),i=e.val();a.default.each(t[e[0].id],function(e,t){var r,s=o("#"+t),l=s.add(s.prev("label")),d=s.val(),c=a.default.result(e,i);void 0===s.data("options")&&s.data("options",s.find("option")),a.default.isRegExp(c)&&(c=s.option_values(function(e){return e.match(c)})),a.default.isArray(c)&&(c=a.default.map(c,function(e){return'[value="'+e+'"]'}).join(", ")),c?(r=o(s.data("options")),a.default.isString(c)&&(r=r.filter(c)),n.include_blank&&(r=o("<option>").add(r)),s.html(r),l.show(),s.val()!==d&&s.trigger("change")):(n.default_control(l),s.trigger("change"))})})}(this,e,o.extend(n,t))}),this}},LXqv:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body.identity_documents",function(){(0,i.default)(document).on("click","#identity_documents_thanks a.jumio-modal-close-from-iframe",function(e){e.preventDefault(),window.top.postMessage(JSON.stringify({close_jumio_modal:!0}),"*")})})},M1ti:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t,n){"use strict";var i,r,a=e.skrollr={get:function(){return $},init:function(e){return $||new L(e)},VERSION:"0.6.21"},o=Object.prototype.hasOwnProperty,s=e.Math,l=e.getComputedStyle,d="touchstart",c="touchmove",u="touchcancel",f="touchend",h="skrollr",p="no-"+h,m=h+"-desktop",g=h+"-mobile",v=.004,_=200,y=/^(?:input|textarea|button|select)$/i,b=/^\s+|\s+$/g,w=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,E=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,C=/^([a-z\-]+)\[(\w+)\]$/,k=/-([a-z])/g,S=function(e,t){return t.toUpperCase()},T=/[\-+]?[\d]*\.?[\d]+/g,A=/\{\?\}/g,R=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,x=/[a-z\-]+-gradient/g,I="",D="",N=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(l){var t=l(r,null);for(var n in t)if(I=n.match(e)||+n==n&&t[n].match(e))break;I?"-"===(I=I[0]).slice(0,1)?(D=I,I={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[I]):D="-"+I.toLowerCase()+"-":I=D=""}},j=function(){var t=e.requestAnimationFrame||e[I.toLowerCase()+"RequestAnimationFrame"],n=ve();return!Re&&t||(t=function(t){var i=ve()-n,r=s.max(0,1e3/60-i);return e.setTimeout(function(){n=ve(),t()},r)}),t},P={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-s.cos(e*s.PI)/2+.5},sqrt:function(e){return s.sqrt(e)},outCubic:function(e){return s.pow(e-1,3)+1},bounce:function(e){var t;if(e<=.5083)t=3;else if(e<=.8489)t=9;else if(e<=.96208)t=27;else{if(!(e<=.99981))return 1;t=91}return 1-s.abs(3*s.cos(e*t*1.028)/t)}};function L(n){if(i=t.documentElement,r=t.body,N(),$=this,Q=(n=n||{}).constants||{},n.easing)for(var a in n.easing)P[a]=n.easing[a];re=n.edgeStrategy||"set",K={beforerender:n.beforerender,render:n.render},(X=!1!==n.forceHeight)&&(be=n.scale||1),J=n.mobileDeceleration||v,ee=!1!==n.smoothScrolling,te=n.smoothScrollingDuration||_,ne={targetTop:$.getScrollTop()},(Re=(n.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})())?((q=t.getElementById("skrollr-body"))&&Y(),O(),pe(i,[h,g],[p])):pe(i,[h,m],[p]),$.refresh(),se(e,"resize orientationchange",function(){var e=i.clientWidth,t=i.clientHeight;t===Se&&e===ke||(Se=t,ke=e,Te=!0)});var o=j();return function e(){M(),oe=o(e)}(),$}L.prototype.refresh=function(e){var n,i,r=!1;for(void 0===e?(r=!0,V=[],Ae=0,e=t.getElementsByTagName("*")):e=[].concat(e),n=0,i=e.length;n<i;n++){var a=e[n],o=a,s=[],l=ee,d=re;if(a.attributes){for(var c,u,f,h=0,p=a.attributes.length;h<p;h++){var m=a.attributes[h];if("data-anchor-target"!==m.name)if("data-smooth-scrolling"!==m.name)if("data-edge-strategy"!==m.name){var g=m.name.match(w);if(null!==g){var v={props:m.value,element:a};s.push(v);var _=g[1];_&&(v.constant=_.substr(1));var y=g[2];/p$/.test(y)?(v.isPercentage=!0,v.offset=(0|y.slice(0,-1))/100):v.offset=0|y;var b=g[3],E=g[4]||b;b&&"start"!==b&&"end"!==b?(v.mode="relative",v.anchors=[b,E]):(v.mode="absolute","end"===b?v.isEnd=!0:v.isPercentage||(v.offset=v.offset*be))}}else d=m.value;else l="off"!==m.value;else if(null===(o=t.querySelector(m.value)))throw'Unable to find anchor target "'+m.value+'"'}if(s.length)!r&&"___skrollable_id"in a?(f=a.___skrollable_id,c=V[f].styleAttr,u=V[f].classAttr):(f=a.___skrollable_id=Ae++,c=a.style.cssText,u=he(a)),V[f]={element:a,styleAttr:c,classAttr:u,anchorTarget:o,keyFrames:s,smoothScrolling:l,edgeStrategy:d},pe(a,["skrollable"],[])}}for(ce(),n=0,i=e.length;n<i;n++){var C=V[e[n].___skrollable_id];void 0!==C&&(F(C),H(C))}return $},L.prototype.relativeToAbsolute=function(e,t,n){var r=i.clientHeight,a=e.getBoundingClientRect(),o=a.top,s=a.bottom-a.top;return"bottom"===t?o-=r:"center"===t&&(o-=r/2),"bottom"===n?o+=s:"center"===n&&(o+=s/2),(o+=$.getScrollTop())+.5|0},L.prototype.animateTo=function(e,t){t=t||{};var n=ve(),i=$.getScrollTop();return(Z={startTop:i,topDiff:e-i,targetTop:e,duration:t.duration||1e3,startTime:n,endTime:n+(t.duration||1e3),easing:P[t.easing||"linear"],done:t.done}).topDiff||(Z.done&&Z.done.call($,!1),Z=void 0),$},L.prototype.stopAnimateTo=function(){Z&&Z.done&&Z.done.call($,!0),Z=void 0},L.prototype.isAnimatingTo=function(){return!!Z},L.prototype.setScrollTop=function(t,n){return ie=!0===n,Re?xe=s.min(s.max(t,0),ye):e.scrollTo(0,t),$},L.prototype.getScrollTop=function(){return Re?xe:e.pageYOffset||i.scrollTop||r.scrollTop||0},L.prototype.getMaxScrollTop=function(){return ye},L.prototype.on=function(e,t){return K[e]=t,$},L.prototype.off=function(e){return delete K[e],$},L.prototype.destroy=function(){(function(){var t=e.cancelAnimationFrame||e[I.toLowerCase()+"CancelAnimationFrame"];return!Re&&t||(t=function(t){return e.clearTimeout(t)}),t})()(oe),de(),pe(i,[p],[h,m,g]);for(var t=0,n=V.length;t<n;t++)G(V[t].element);i.style.overflow=r.style.overflow="auto",i.style.height=r.style.height="auto",q&&a.setStyle(q,"transform","none"),$=void 0,q=void 0,K=void 0,X=void 0,ye=0,be=1,Q=void 0,J=void 0,we="down",Ee=-1,ke=0,Se=0,Te=!1,Z=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,Ae=0,re=void 0,Re=!1,xe=0,ae=void 0};var O=function(){var n,a,o,l,h,p,m,g,v,_,b;se(i,[d,c,u,f].join(" "),function(e){var i=e.changedTouches[0];for(l=e.target;3===l.nodeType;)l=l.parentNode;switch(h=i.clientY,p=i.clientX,v=e.timeStamp,y.test(l.tagName)||e.preventDefault(),e.type){case d:n&&n.blur(),$.stopAnimateTo(),n=l,a=m=h,o=p,v;break;case c:y.test(l.tagName)&&t.activeElement!==l&&e.preventDefault(),g=h-m,b=v-_,$.setScrollTop(xe-g,!0),m=h,_=v;break;default:case u:case f:var r=a-h,w=o-p;if(w*w+r*r<49){if(!y.test(n.tagName)){n.focus();var E=t.createEvent("MouseEvents");E.initMouseEvent("click",!0,!0,e.view,1,i.screenX,i.screenY,i.clientX,i.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n.dispatchEvent(E)}return}n=void 0;var C=g/b;C=s.max(s.min(C,3),-3);var k=s.abs(C/J),S=C*k+.5*J*k*k,T=$.getScrollTop()-S,A=0;T>ye?(A=(ye-T)/S,T=ye):T<0&&(A=-T/S,T=0),k*=1-A,$.animateTo(T+.5|0,{easing:"outCubic",duration:k})}}),e.scrollTo(0,0),i.style.overflow=r.style.overflow="hidden"},M=function(){Te&&(Te=!1,ce());var e,t,n=$.getScrollTop(),i=ve();if(Z)i>=Z.endTime?(n=Z.targetTop,e=Z.done,Z=void 0):(t=Z.easing((i-Z.startTime)/Z.duration),n=Z.startTop+t*Z.topDiff|0),$.setScrollTop(n,!0);else if(!ie){ne.targetTop-n&&(ne={startTop:Ee,topDiff:n-Ee,targetTop:n,startTime:Ce,endTime:Ce+te}),i<=ne.endTime&&(t=P.sqrt((i-ne.startTime)/te),n=ne.startTop+t*ne.topDiff|0)}if(Re&&q&&a.setStyle(q,"transform","translate(0, "+-xe+"px) "+ae),ie||Ee!==n){ie=!1;var r={curTop:n,lastTop:Ee,maxTop:ye,direction:we=n>Ee?"down":n<Ee?"up":we};!1!==(K.beforerender&&K.beforerender.call($,r))&&(!function(e,t){for(var n=0,i=V.length;n<i;n++){var r,s,l=V[n],d=l.element,c=l.smoothScrolling?e:t,u=l.keyFrames,f=c<u[0].frame,h=c>u[u.length-1].frame,p=u[f?0:u.length-1];if(f||h){if(f&&-1===l.edge||h&&1===l.edge)continue;switch(pe(d,[f?"skrollable-before":"skrollable-after"],["skrollable-before","skrollable-between","skrollable-after"]),l.edge=f?-1:1,l.edgeStrategy){case"reset":G(d);continue;case"ease":c=p.frame;break;default:case"set":var m=p.props;for(r in m)o.call(m,r)&&(s=z(m[r].value),a.setStyle(d,r,s));continue}}else 0!==l.edge&&(pe(d,["skrollable","skrollable-between"],["skrollable-before","skrollable-after"]),l.edge=0);for(var g=0,v=u.length-1;g<v;g++)if(c>=u[g].frame&&c<=u[g+1].frame){var _=u[g],y=u[g+1];for(r in _.props)if(o.call(_.props,r)){var b=(c-_.frame)/(y.frame-_.frame);b=_.props[r].easing(b),s=W(_.props[r].value,y.props[r].value,b),s=z(s),a.setStyle(d,r,s)}break}}}(n,$.getScrollTop()),Ee=n,K.render&&K.render.call($,r)),e&&e.call($,!1)}Ce=i},F=function(e){for(var t=0,n=e.keyFrames.length;t<n;t++){for(var i,r,a,o,s=e.keyFrames[t],l={};null!==(o=E.exec(s.props));)a=o[1],r=o[2],null!==(i=a.match(C))?(a=i[1],i=i[2]):i="linear",r=r.indexOf("!")?B(r):[r.slice(1)],l[a]={value:r,easing:P[i]};s.props=l}},B=function(e){var t=[];return R.lastIndex=0,e=e.replace(R,function(e){return e.replace(T,function(e){return e/255*100+"%"})}),D&&(x.lastIndex=0,e=e.replace(x,function(e){return D+e})),e=e.replace(T,function(e){return t.push(+e),"{?}"}),t.unshift(e),t},H=function(e){var t,n,i={};for(t=0,n=e.keyFrames.length;t<n;t++)U(e.keyFrames[t],i);for(i={},t=e.keyFrames.length-1;t>=0;t--)U(e.keyFrames[t],i)},U=function(e,t){var n;for(n in t)o.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},W=function(e,t,n){var i,r=e.length;if(r!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var a=[e[0]];for(i=1;i<r;i++)a[i]=e[i]+(t[i]-e[i])*n;return a},z=function(e){var t=1;return A.lastIndex=0,e[0].replace(A,function(){return e[t++]})},G=function(e,t){for(var n,i,r=0,a=(e=[].concat(e)).length;r<a;r++)i=e[r],(n=V[i.___skrollable_id])&&(t?(i.style.cssText=n.dirtyStyleAttr,pe(i,n.dirtyClassAttr)):(n.dirtyStyleAttr=i.style.cssText,n.dirtyClassAttr=he(i),i.style.cssText=n.styleAttr,pe(i,n.classAttr)))},Y=function(){ae="translateZ(0)",a.setStyle(q,"transform",ae);var e=l(q),t=e.getPropertyValue("transform"),n=e.getPropertyValue(D+"transform");t&&"none"!==t||n&&"none"!==n||(ae="")};a.setStyle=function(e,t,n){var i=e.style;if("zIndex"===(t=t.replace(k,S).replace("-","")))isNaN(n)?i[t]=n:i[t]=""+(0|n);else if("float"===t)i.styleFloat=i.cssFloat=n;else try{I&&(i[I+t.slice(0,1).toUpperCase()+t.slice(1)]=n),i[t]=n}catch(e){}};var $,V,q,K,X,Q,J,Z,ee,te,ne,ie,re,ae,oe,se=a.addEvent=function(t,n,i){for(var r,a=function(t){return(t=t||e.event).target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),i.call(this,t)},o=0,s=(n=n.split(" ")).length;o<s;o++)r=n[o],t.addEventListener?t.addEventListener(r,i,!1):t.attachEvent("on"+r,a),Ie.push({element:t,name:r,listener:i})},le=a.removeEvent=function(e,t,n){for(var i=0,r=(t=t.split(" ")).length;i<r;i++)e.removeEventListener?e.removeEventListener(t[i],n,!1):e.detachEvent("on"+t[i],n)},de=function(){for(var e,t=0,n=Ie.length;t<n;t++)e=Ie[t],le(e.element,e.name,e.listener);Ie=[]},ce=function(){var e=$.getScrollTop();ye=0,X&&!Re&&(r.style.height="auto"),function(){var e,t,n,r,a,o,l,d,c,u,f,h=i.clientHeight,p=ue();for(d=0,c=V.length;d<c;d++)for(t=(e=V[d]).element,n=e.anchorTarget,a=0,o=(r=e.keyFrames).length;a<o;a++)u=(l=r[a]).offset,f=p[l.constant]||0,l.frame=u,l.isPercentage&&(u*=h,l.frame=u),"relative"===l.mode&&(G(t),l.frame=$.relativeToAbsolute(n,l.anchors[0],l.anchors[1])-u,G(t,!0)),l.frame+=f,X&&!l.isEnd&&l.frame>ye&&(ye=l.frame);for(ye=s.max(ye,fe()),d=0,c=V.length;d<c;d++){for(a=0,o=(r=(e=V[d]).keyFrames).length;a<o;a++)f=p[(l=r[a]).constant]||0,l.isEnd&&(l.frame=ye-l.offset+f);e.keyFrames.sort(_e)}}(),X&&!Re&&(r.style.height=ye+i.clientHeight+"px"),Re?$.setScrollTop(s.min($.getScrollTop(),ye)):$.setScrollTop(e,!0),ie=!0},ue=function(){var e,t,n=i.clientHeight,r={};for(e in Q)"function"==typeof(t=Q[e])?t=t.call($):/p$/.test(t)&&(t=t.slice(0,-1)/100*n),r[e]=t;return r},fe=function(){var e=q&&q.offsetHeight||0;return s.max(e,r.scrollHeight,r.offsetHeight,i.scrollHeight,i.offsetHeight,i.clientHeight)-i.clientHeight},he=function(t){var n="className";return e.SVGElement&&t instanceof e.SVGElement&&(t=t[n],n="baseVal"),t[n]},pe=function(t,n,i){var r="className";if(e.SVGElement&&t instanceof e.SVGElement&&(t=t[r],r="baseVal"),void 0!==i){for(var a=t[r],o=0,s=i.length;o<s;o++)a=ge(a).replace(ge(i[o])," ");a=me(a);for(var l=0,d=n.length;l<d;l++)-1===ge(a).indexOf(ge(n[l]))&&(a+=" "+n[l]);t[r]=me(a)}else t[r]=n},me=function(e){return e.replace(b,"")},ge=function(e){return" "+e+" "},ve=Date.now||function(){return+new Date},_e=function(e,t){return e.frame-t.frame},ye=0,be=1,we="down",Ee=-1,Ce=ve(),ke=0,Se=0,Te=!1,Ae=0,Re=!1,xe=0,Ie=[]}(window,document)},M99n:function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");i.support.transitionEvent=function(){return void 0!==window.TransitionEvent}},"MA+5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n("l/Rs")),r=l(n("shXp")),a=l(n("wmCY")),o=l(n("1i/z")),s=l(n("pD7l"));function l(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=(0,i.default)("#template-"+e.replace(/\//g,"_"));if(!t.length)throw"Could not find template: "+e;return i.default.trim(t.html())}function c(){return function(e,t){return t(a.default.t(e,this))}}function u(e,t,n){var a=s.default[e]||function(e){return e},l=d(e),u=function(e){var t={};if(r.default.isString(e)&&(e=[e]),r.default.isArray(e))return r.default.each(e,function(e){t[e]=d(e)}),t}(n);return o.default.render(l,i.default.extend({t:c},a(t)),u)}t.default=u,window.render=u},MGa0:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");n("LNuh"),(0,a.default)(function(){(0,a.default)(".js-score-tracking a","click").livequery(function(e){var t=(0,a.default)(this),n=t.data("score"),i=t.data("version"),r=t.data("pid"),s=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target;i&&(s||e.preventDefault(),(0,o.track)("Rec BBall Card Score click",{"rec-score":n,"rec-version":i,pid:r}),s||setTimeout(function(){window.location=t.attr("href")},50))})})},MPGJ:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("Tqsz"),n("LNuh"),(0,a.default)(".sound_player:visible").livequery(function(){(0,a.default)(this).sound_player()})},MX6m:function(e,t,n){"use strict";var i=u(n("l/Rs")),r=u(n("shXp")),a=u(n("8NzR")),o=u(n("wmCY")),s=n("Tvaj"),l=u(n("MA+5")),d=n("4RZc"),c=u(n("hBlz"));function u(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#NS__discover_advanced_sentence",function(e){var t,n,a,u,f,h,p,m,g,v,_,y,b,w,E,C,k,S,T,A,R=e.hasClass("refresh_enabled");function x(e,t){return t=t||{},R?(0,i.default)('<span class="'+r.default.compact(r.default.flatten(["display-none inline-block-sm mr2",t.classes])).join(" ")+'">'+e+"</span>"):(0,i.default)('<span class="'+r.default.compact(r.default.flatten(["text",t.classes])).join(" ")+'">'+e+"</span>")}function I(e,t){return R?(0,i.default)('<span class="block inline-block-sm"></span>').append(e).append(t):(0,i.default)('<span class="inline-block mobile-block"></span>').append(e).append(t)}function D(e){var n=(0,i.default)("<div></div>"),s=[],l=[];(e=e||N()).state=e.state||"all",e.term=i.default.trim(e.term||""),n.append(x(o.default.t("onloads.views.discover.sentence.Show_me"))),"all"===e.state&&0===e.term.length?(n.append(u),n.append(x(o.default.t("onloads.views.discover.sentence.projects"),{classes:["fr-hide","es-hide"]})),u.find("option:first").data("alt-label",o.default.t("onloads.views.discover.sentence.all"))):("all"!==e.state&&n.append(_),e.term.length>0&&n.append(a),n.append(x(o.default.t("onloads.views.discover.sentence.projects_in"),{classes:["fr-hide","es-hide"]})),n.append(u),u.find("option:first").data("alt-label",o.default.t("onloads.views.discover.sentence.All_Categories"))),e.category_id&&parseInt(e.category_id,10)>0?(u.hasClass("js-filter")||u.addClass("selected"),u.find("select").ksr_val(e.category_id),R&&(u.find(".js-filter-arrow").addClass("display-none").removeClass("inline-block"),u.find(".js-filter-delete").removeClass("display-none").addClass("inline-block"))):(u.hasClass("js-filter")||u.removeClass("selected"),u.find("select").ksr_val(""),R&&(u.find(".js-filter-arrow").removeClass("display-none").addClass("inline-block"),u.find(".js-filter-delete").addClass("display-none").removeClass("inline-block"))),_.find("select").ksr_val(e.state),a.find("input").val(e.term),a.find(".term").text(e.term),e.woe_id&&parseInt(e.woe_id,10)>0?(E.hasClass("js-filter")||E.addClass("selected"),E.find("select").ksr_val(e.woe_id),R&&(E.find(".js-filter-arrow").addClass("display-none").removeClass("inline-block"),E.find(".js-filter-delete").removeClass("display-none").addClass("inline-block")),n.append(I(x(o.default.t("onloads.views.discover.sentence.from"),{classes:["fr-hide","es-hide"]}),E))):(E.hasClass("js-filter")||E.removeClass("selected"),E.find("select").ksr_val("0"),R&&(E.find(".js-filter-arrow").removeClass("display-none").addClass("inline-block"),E.find(".js-filter-delete").addClass("display-none").removeClass("inline-block")),n.append(I(x(o.default.t("onloads.views.discover.sentence.on"),{classes:["fr-hide","es-hide"]}),E))),e.tag_id>0&&(v.find("select").ksr_val(e.tag_id),n.append(I(x(o.default.t("onloads.views.discover.sentence.tagged_with"),{classes:["fr-hide","es-hide"]}),v))),e.recommended&&s.push(f),e.staff_picks&&s.push(h),e.social?s.push(g):g.find("select").ksr_val("1"),e.starred?s.push(p):p.find("select").ksr_val("1"),e.backed?s.push(m):m.find("select").ksr_val("1"),(s=r.default.compact(s)).length>0&&(s[0]===m||s[0]===p?n.append(x(o.default.t("onloads.views.discover.sentence.that"),{classes:["fr-hide","es-hide"]})):n.append(x(o.default.t("onloads.views.discover.sentence.that_are"),{classes:["fr-hide","es-hide"]})),n.append(s)),r.default.isUndefined(e.pledged)||r.default.isNull(e.pledged)||""===e.pledged||(b.find("select").ksr_val(e.pledged),l.push(b)),r.default.isUndefined(e.goal)||r.default.isNull(e.goal)||""===e.goal||(y.find("select").ksr_val(e.goal),l.push(y)),r.default.isUndefined(e.raised)||r.default.isNull(e.raised)||""===e.raised||(w.find("select").ksr_val(e.raised),l.push(w)),l.length>0&&n.append(I(x(o.default.t("onloads.views.discover.sentence.with"),{classes:["fr-hide","es-hide"]}),l)),C.find("select").ksr_val(e.sort),n.append(I(x(o.default.t("onloads.views.discover.sentence.sorted_by")),C)),t.children().detach(),t.empty(),t.html(n)}function N(){var e=(0,c.default)("?"+t.serialize()).query(!0);return e.category_id=e.category_id&&parseInt(e.category_id,10),e.tag_id=e.tag_id&&parseInt(e.tag_id,10),e.woe_id=e.woe_id&&parseInt(e.woe_id,10),e}function j(e){var t={discover_interaction_param:e.param,discover_interaction_action:e.action,discover_interaction_value:e.value};r.default.extend(t,(0,d.namespaceKeys)("discover",N())),(0,d.track)("Discover Sentence Parameter Interaction",t)}function P(){e.css({height:T.outerHeight()}),setTimeout(function(){e.addClass("transition-all-bezier"),S.removeClass("hide"),e.css({height:n.outerHeight()}),A.css({marginTop:-T.outerHeight()})},1),setTimeout(function(){A.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),S.aria_set_visible(),A.aria_set_hidden()},1e3)}R?(t=e.find("form"),n=e.find(".js-sentence"),a=e.find(".js-filter.js-filter-search"),u=e.find(".js-filter.js-filter-category"),f=e.find(".js-filter.js-filter-recommended"),h=e.find(".js-filter.js-filter-staff_picks"),p=e.find(".js-filter.js-filter-starred"),m=e.find(".js-filter.js-filter-backed"),g=e.find(".js-filter.js-filter-social"),v=e.find(".js-filter.js-filter-tag"),_=e.find(".js-filter.js-filter-state"),y=e.find(".js-filter.js-filter-goal"),b=e.find(".js-filter.js-filter-pledged"),w=e.find(".js-filter.js-filter-raised"),E=e.find(".js-filter.js-filter-location"),C=e.find(".js-filter.js-filter-sorts"),k=e.find(".js-close"),S=(0,i.default)(".js-sentence-container"),T=(0,i.default)(".js-category-hero"),A=(0,i.default)(".NS_discover__hero")):(t=e.find("form"),n=e.find(".js-sentence"),a=e.find(".filter.search"),u=e.find(".filter.category"),f=e.find(".filter.recommended"),h=e.find(".filter.staff_picks"),p=e.find(".filter.starred"),m=e.find(".filter.backed"),g=e.find(".filter.social"),v=e.find(".filter.tag"),_=e.find(".filter.state"),y=e.find(".filter.goal"),b=e.find(".filter.pledged"),w=e.find(".filter.raised"),E=e.find(".filter.location"),C=e.find(".filter.sorts"),k=e.find(".js-close"),S=(0,i.default)(".js-sentence-container"),T=(0,i.default)(".js-category-hero"),A=(0,i.default)(".NS_discover__hero")),(0,i.default)(document).on("discovery:filters:term_changed",function(e,n){i.default.trim(n.term).length&&a.closest(t).length?a.find("input").val(n.term).siblings(".term").text(n.term):D(r.default.extend(N(),{term:n.term}))}),(0,i.default)(document).on("discovery:categories:changed",function(e,t){u.find("select").ksr_val(t.id||0),D(),(0,i.default)(document).trigger("discovery:sentence:changed",N()),j({param:"category_id",action:"change"})}),(0,i.default)(document).on("discovery:locations:changed",function(e,t){E.find("select").ksr_val(t.id||0),D(),(0,i.default)(document).trigger("discovery:sentence:changed",N()),j({param:"woe_id",action:"change"})}),(0,i.default)(document).on("discovery:sorts:changed",function(e,t){C.find("select").ksr_val(t),D(),(0,i.default)(document).trigger("discovery:sentence:changed",N()),j({param:"sort",action:"change"})}),(0,i.default)(document).on("discovery:locations:updated",function(e,t){E.find("select").children().remove(),E.find("select").append((0,l.default)("discover/_location_options",t)),E.find("select").ksr_val(t.id)}),(0,i.default)(document).on("discovery:filters:changed",function(e,t){D(r.default.extend(N(),t)),(0,i.default)(document).trigger("discovery:sentence:changed",N()),j({param:"term",action:"change"})}),e.find("#filters").on("click",function(e){(0,d.track)("Discovery Add Filter Pressed"),e.preventDefault()}),e.on("change","select",function(){var e=(0,i.default)(this);D(),(0,i.default)(document).trigger("discovery:sentence:changed",N()),j({param:e.attr("name"),action:"change",value:e.val()})}),R?e.on("click",".js-filter-delete",function(e){var t=(0,i.default)(this);t.closest(".js-filter").detach(),D(),(0,i.default)(document).trigger("discovery:sentence:changed",N()),j({param:t.siblings("input,select").attr("name"),action:"remove"}),e.preventDefault()}):e.on("click",".filter .ss-delete",function(e){var t=(0,i.default)(this);t.closest(".filter").detach(),D(),(0,i.default)(document).trigger("discovery:sentence:changed",N()),j({param:t.siblings("input,select").attr("name"),action:"remove"}),e.preventDefault()}),e.on("keypress cut paste input blur",".search span[contenteditable], .js-filter-search span[contenteditable]",function(e){var t=(0,i.default)(this),n=t.siblings("input"),r=i.default.trim(t.text()||"");"blur"===e.type||"focusout"===e.type?(D(),j({param:n.attr("name"),value:n.val(),action:"change"})):"keypress"!==e.type||e.keyCode!==s.ENTER&&e.keyCode!==s.TAB?(n.val(r),(0,i.default)(document).trigger("discovery:sentence:term_changed",N())):(t.blur(),e.preventDefault())}),e.find(".term").on("focus",function(){R?a.removeClass("shadow-2 border-transparent").addClass("border-dark-grey-500"):a.addClass("focused")}).on("blur",function(){R?a.addClass("shadow-2 border-transparent").removeClass("border-dark-grey-500"):a.removeClass("focused")}),(0,i.default)(document).on("discovery:sentence:changed",function(){S.is(":visible")&&k.hide()}),(0,i.default)(document).on("discovery:sentence:load_sample",function(e,t){D(t),(0,i.default)(document).trigger("discovery:sentence:changed",N())}),(0,i.default)(document).on("discovery:sentence:update_params",function(e,t){var n=r.default.extend(N(),t);D(n),(0,i.default)(document).trigger("discovery:sentence:changed",n)}),(0,i.default)(document).on("discovery:sentence:show_sentence",function(){P(),k.hide()}),D(),A.length&&(e.find(".js-sentence-edit").on("click",function(e){P(),e.preventDefault()}),k.on("click",function(t){e.css({height:n.outerHeight()}),setTimeout(function(){A.removeClass("hide"),e.addClass("transition-all-bezier"),e.css({height:T.outerHeight()}),A.css({marginTop:0})},1),setTimeout(function(){S.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),S.aria_set_hidden(),A.aria_set_visible()},1e3),(0,d.track)("Discover Sentence Close Clicked"),t.preventDefault()}))})},MfwZ:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(n){var i,r,a,o=e.makeArray(arguments);return"number"==e.type(n)?this.cycle("goto",n):"string"==e.type(n)?this.each(function(){var s;if(i=n,void 0!==(a=e(this).data("cycle.opts")))return i="goto"==i?"jump":i,r=a.API[i],e.isFunction(r)?((s=e.makeArray(o)).shift(),r.apply(a.API,s)):void t.log("unknown command: ",i);t.log('slideshow must be initialized before sending commands; "'+i+'" ignored')}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;!1===e.allowWrap&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;!1===e.allowWrap&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),n=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),n(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){e(this).removeData(),n(this,"parsedAttrs",!1)})},jump:function(e){var t,n=this.opts();if(!n.busy||n.manualTrump){var i=parseInt(e,10);isNaN(i)||i<0||i>=n.slides.length?n.API.log("goto: invalid slide index: "+i):i!=n.currSlide?(n.nextSlide=i,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",i," (zero-index)"),t=n.currSlide<n.nextSlide,n.API.prepareTx(!0,t)):n.API.log("goto: skipping, already on slide",i)}},stop:function(){var t=this.opts(),n=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(!0!==t.pauseOnHover&&(n=e(t.pauseOnHover)),n.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var n,i,r=this.opts(),a=[],o=1,s=0;s<r.slides.length;s++)n=r.slides[s],s==t?i=n:(a.push(n),e(n).data("cycle.opts").slideNum=o,o++);i&&(r.slides=e(a),r.slideCount--,e(i).remove(),t==r.currSlide?r.API.advanceSlide(1):t<r.currSlide?r.currSlide--:r.currSlide++,r.API.trigger("cycle-slide-removed",[r,t,i]).log("cycle-slide-removed"),r.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var n=e(this),i=n.data("cycle-cmd"),r=n.data("cycle-context")||".cycle-slideshow";e(r).cycle(i,n.data("cycle-arg"))})}(i)},Mscd:function(e,t,n){"use strict";var i=a(n("8NzR")),r=a(n("l/Rs"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#newsletters_index",function(e){e.find("li.newsletter-item").on("mouseenter",function(){(0,r.default)(this).data("animating",!0),function e(t){var n=t.data("frame")||0,i=t.data("timeout");t.data("animating")&&(t.find("img").hide(),t.find("img").eq(n).show(),t.data("frame",n<2?n+1:0),i&&clearTimeout(i),i=setTimeout(function(){e(t)},200),t.data("timeout",i))}((0,r.default)(this))}).on("mouseleave",function(){(0,r.default)(this).data("animating",!1)})})},"Mu/c":function(e,t,n){"use strict";var i,r=n("rXeC"),a=(i=r)&&i.__esModule?i:{default:i};n("obSy"),(0,a.default)(".editor").livequery("wym-postIframeInitialization",function(){var e=a.default.wymeditors((0,a.default)(this).data("wym_index"));(0,a.default)(e._doc.body).videoTracksEditor()})},"N/lE":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("TGXB")),a=o(n("hBlz"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,i.default)(function(){(0,i.default)(document).ajaxSend(function(e,t,n){var r,o;"GET"!==n.type&&(r=n.url,""===(o=new a.default(r).domain())||o===new a.default(window.location.href).domain())&&t.setRequestHeader("X-CSRF-Token",(0,i.default)('meta[name="csrf-token"]').attr("content"))}),(0,i.default)("form[data-ksrjson]").livequery(function(){var e=(0,i.default)([]);(0,i.default)(this).attr("data-target")?e=(0,i.default)((0,i.default)(this).attr("data-target")):(0,i.default)(this).closest(".ajax-container").length?e=(0,i.default)(this).closest(".ajax-container"):(0,i.default)(this).closest(".modal_dialog").length>0&&(e=(0,i.default)(this)),e.length>0&&r.default.enable_form((0,i.default)(this),e)}),(0,i.default)(document).on("click","a[data-ksrjson]",function(e){var t=(0,i.default)(this),n=(0,i.default)(t.attr("data-target"));return e.preventDefault(),0===n.length&&(n=t.closest(".ajax-container")),0===n.length||r.default.get(t.attr("href"),t.attr("data-ksrmethod"),n,this)})})},NBJa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Failure=t.Success=t.Validation=t.validateField=t.validate=t.unboundValidator=t.UnboundFieldErrorsList=t.isValid=t.isPresent=t.isEmail=t.hasError=t.handleTouchAllFields=t.handleTouchField=t.getErrors=void 0;var i=n("HlA3"),r=n("p5aI"),a=n("C75a"),o=n("+4Bd");t.getErrors=o.getErrors,t.handleTouchField=a.handleTouchField,t.handleTouchAllFields=a.handleTouchAllFields,t.hasError=a.hasError,t.isEmail=a.isEmail,t.isPresent=a.isPresent,t.isValid=o.isValid,t.UnboundFieldErrorsList=i.UnboundFieldErrorsList,t.unboundValidator=o.unboundValidator,t.validate=o.validate,t.validateField=a.validateField,t.Validation=r.Validation,t.Success=r.Success,t.Failure=r.Failure},NKE6:function(e,t,n){var i=n("xA5w");e.exports=function(e,t){var n=i(e).getTime(),r=i(t).getTime();return n<r?-1:n>r?1:0}},NSOL:function(e,t,n){var i=n("6Zhv"),r=6e4;e.exports=function(e,t){var n=Number(t);return i(e,n*r)}},NUlJ:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,i.default)(function(){function e(){(0,i.default)("#account-setup-panel").trigger("project_build:refresh")}(0,i.default)("#account-setup-panel .identity-verification .identity-documents-pending").livequery(function(){i.default.pollster((0,i.default)(this).attr("data-url"),function(t){var n=t.documents[t.documents.length-1];switch(n.state){case"pending":return!1;case"successful":switch(n.identity_state){case"passed":return(0,r.default)({success:a.default.t("onloads.views.identity_documents.processing_state.Your_identity_documents_have_been_approved")}),e(),!0;case"failed":return(0,r.default)({error:a.default.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0;default:return!1}case"failed":return(0,r.default)({error:a.default.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}})})})},NgMk:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#activity_index",function(e){var t=[];(0,i.default)(".dashboard_activities .activity",e).livequery(function(){var e,n,r;e=(0,i.default)(this),n=e.find(".timeline_header:first"),r=n.data("time_bucket"),-1===t.indexOf(r)&&(t.push(r),n.find(".timeline_header_name:first").css({display:"block"}))}),(0,i.default)(document).on("click",".NS_post_likes__button form .js-like",function(){(0,a.track)("Activity Like")})})},Nhg7:function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("shXp")),a=l(n("L3hI")),o=l(n("wmCY")),s=l(n("MA+5"));function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_site__simple_ticket_form").length&&(0,i.default)(document).on("click",".js-new-zendesk-ticket input:submit",function(e){e.preventDefault();var t=(0,i.default)(this),n=t.closest("form"),l=n.parent();n.is(".submitting")||(n.addClass("submitting"),t.data("original_text",t.val()),t.val(o.default.t("onloads.views.site.simple_ticket_form.Submitting")),i.default.ajax({type:"POST",data:n.serialize(),url:n.attr("action"),beforeSend:function(){l.find(".success, .error").remove()},complete:function(){n.removeClass("submitting"),t.val(t.data("original_text"))},success:function(){l.html('<h5 class="green">'+o.default.t("onloads.views.site.simple_ticket_form.Thanks_for_the_message_A_member")+"</h5>")},error:function(e){var t=JSON.parse(e.responseText);t=r.default.map(t,function(e,t){var n={base:"",requester:"email",subject:"question",description:"details"}[t]||t;return r.default.map(e,function(e){return r.default.compact([a.default.capitalize(n),e]).join(" ")})}),t=r.default.compact(t),t=r.default.flatten(t),l.prepend((0,s.default)("funnels/_ticket_error",{errors:t}))}}))})},Nkoz:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=(0,i.default)("#saving-layer");(0,i.default)("body").append(e),(0,i.default)(document).on("submit","body.refund_checkouts_new_card #credit_card_form form",function(){e.show(),setTimeout(function(){e.find(".modal_dialog_body").html(r.default.t("onloads.views.refund_checkouts.new_card.Well_this_is_embarrassing_Processing_your_pledge")),e.removeClass("spinning")},12e4)})})},Nkse:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".js-project-description-content, #description",function(e){e.find(".js-open-supporting-material-modal").on("click",function(t){(0,a.track)("Viewed Prototype Gallery Tooltip"),e.find(".supporting-material-modal").fadeIn(200),(0,i.default)("body,html").addClass("supporting-material-modal-open"),t.preventDefault()}),e.find(".js-close-supporting-material-modal").on("click",function(e){(0,i.default)(this).closest(".supporting-material-modal").fadeOut(200),(0,i.default)("body,html").removeClass("supporting-material-modal-open"),e.preventDefault()})})},NtaJ:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("LNuh"),(0,a.default)("form:not([data-ksrjson])","submit").livequery(function(e){var t=(0,a.default)(this);t.is(".submitting-non-ajax")?e.preventDefault():t.attr("target")||((0,a.default)(window).on("unload",function(){t.removeClass("submitting-non-ajax")}),t.addClass("submitting-non-ajax"))})},"O2m/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchProjectFlagging=void 0;var i=n("Z6GA");t.fetchProjectFlagging=function(e){return(0,i.fetchGraph)("\n  query($projectSlug: String!) {\n    project(slug: $projectSlug) {\n      backing {\n        id\n      }\n      flagging {\n        kind\n      }\n      state\n    }\n  }\n",{projectSlug:e})}},OH6m:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}var i=0;function r(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}r.prototype={show:function(){var r,a;if(n(this.$element[0])&&(r=this.$element,(!("object"==typeof HTMLElement?r instanceof HTMLElement:r&&"object"==typeof r&&1===r.nodeType&&"string"==typeof r.nodeName)||this.$element.is(":visible"))&&this.enabled&&(a=this.getTitle()))){var o=this.tip();o.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](a),o[0].className="tipsy"+this.options.theme,this.options.className&&o.addClass(t(this.options.className,this.$element[0])),o.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=e.extend({},this.$element.offset());s=this.$element.parents("svg").size()>0?e.extend(s,this.$element[0].getBBox()):e.extend(s,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});var l,d=o[0].offsetWidth,c=o[0].offsetHeight,u=t(this.options.gravity,this.$element[0]);switch(u.charAt(0)){case"n":l={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-d/2};break;case"s":l={top:s.top-c-this.options.offset,left:s.left+s.width/2-d/2};break;case"e":l={top:s.top+s.height/2-c/2,left:s.left-d-this.options.offset};break;case"w":l={top:s.top+s.height/2-c/2,left:s.left+s.width+this.options.offset}}if(2==u.length&&("w"==u.charAt(1)?l.left=s.left+s.width/2-15:l.left=s.left+s.width/2-d+15),o.css(l).addClass("tipsy-"+u+this.options.theme),o.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+u.charAt(0)+this.options.theme,this.options.fade?(this.options.shadow&&e(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),o.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})):o.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var f="tipsyuid"+i++;o.attr("id",f),this.$element.attr("aria-describedby",f)}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),(e=(""+e).replace(/(^\s*|\s*$)/,""))||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){if(e.fn.tipsy.enable(),!0===t)return this.data("tipsy");if("string"==typeof t){var i=this.data("tipsy");return i&&i[t](),this}function a(n){var i=e.data(n,"tipsy");return i||(i=new r(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",i)),i}function o(){if(!0===e.fn.tipsy.enabled){var i=a(this);i.hoverState="in",0===t.delayIn?i.show():(i.fixTitle(),setTimeout(function(){"in"==i.hoverState&&n(i.$element)&&i.show()},t.delayIn))}}function s(){var e=a(this);e.hoverState="out",0===t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState&&e.$element&&e.$element.is(":visible")||e.hide()},t.delayOut)}if((t=e.extend({},e.fn.tipsy.defaults,t)).theme=t.theme&&""!==t.theme?"-"+t.theme:"",t.live||this.each(function(){a(this)}),"manual"!=t.trigger){var l="hover"==t.trigger?"mouseenter mouseover touchstart":"focus",d="hover"==t.trigger?"mouseleave mouseout touchmove touchleave":"blur";if(t.live&&!0!==t.live)e(this).on(l,t.live,o),e(this).on(d,t.live,s);else{if(t.live&&!e.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";var c=t.live?"live":"bind";this[c](l,o)[c](d,s)}}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",theme:""},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&n(t)||e(this).remove()})},e.fn.tipsy.enable=function(){e.fn.tipsy.enabled=!0},e.fn.tipsy.disable=function(){e.fn.tipsy.enabled=!1},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoNWNE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"ne":"nw"},e.fn.tipsy.autoSWSE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"se":"sw"},e.fn.tipsy.autoBounds=function(t,n,i){return function(){var r={ns:i[0],ew:i.length>1&&i[1]},a=e(document).scrollTop()+t,o=e(document).scrollLeft()+n,s=e(this);return s.offset().top<a&&(r.ns="n"),s.offset().left<o&&(r.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<n&&(r.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(r.ns="s"),r.ns+(r.ew?r.ew:"")}}}(i)},OXrv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCheckout=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("Z6GA");t.createCheckout=function(e){return(0,r.fetchGraph)("\n  mutation ($projectId: ID!, $amount: String!, $locationId: ID, $rewardId: ID) {\n    createCheckout(input: {\n        projectId: $projectId,\n        amount: $amount,\n        locationId: $locationId,\n        rewardId: $rewardId}) {\n          checkout {\n            id\n          }\n    }\n  }\n",i({},e))}},PGqv:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=n("4RZc");function a(e){return e&&e.__esModule?e:{default:e}}(0,a(n("8NzR")).default)("body#posts_edit",function(e){var t;(0,i.default)(document).on("click",".wym_tools li a",function(){(0,r.track)("Editor Tool Click",{tool_clicked:(0,i.default)(this).attr("title"),context:"post_edit_body"})}),e.find(".notification_toggle a").on("click",function(){e.find(".radio_message").removeClass("visible"),e.find("."+(0,i.default)(this).attr("data-backers")+"_message").addClass("visible")}),e.find(".ksr_toggle a.all_backers").on("click",function(){(t=e.find(".select_backers_message input:checkbox:not(:checked)")).prop("checked",!0),(0,r.track)("Update Notifications Toggle",{toggled_to:"all_backers"})}),e.find(".ksr_toggle a.select_backers").on("click",function(){t&&t.prop("checked",!1),(0,r.track)("Update Notifications Toggle",{toggled_to:"select_tiers"})}),e.find(".ksr_toggle a.public").on("click",function(){e.find("#post_public").val("1"),(0,r.track)("Update Visibility Toggle",{toggled_to:"anyone"})}),e.find(".ksr_toggle a.private").on("click",function(){e.find("#post_public").val("0"),(0,r.track)("Update Visibility Toggle",{toggled_to:"backers_only"})}),e.find(".email_notifications input.checkbox").on("change",function(){(0,r.track)("Update Tier Notification Change",{toggled_to:(0,i.default)(this).is(":checked")?"checked":"unchecked",selected_reward_id:(0,i.default)(this).data("reward-id"),selected_reward_minimum:(0,i.default)(this).data("reward-minimum")})})})},PMix:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RebrandToggleCard=t.validateResponseStatus=t.makeFetchRequest=t.maybeProjectData=t.normalizeData=void 0;var i,r=n("Z6GA"),a=n("I2cB"),o=n("FbaH"),s=(i=o)&&i.__esModule?i:{default:i};var l=t.normalizeData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.profile;return{backers:{totalCount:e.backers_count},canceledAt:e.state_changed_at,category:{name:e.category&&e.category.name,url:e.category&&e.category.urls.web.discover},creator:{imageUrl:e.creator.avatar.thumb,name:e.creator.name,url:e.creator.urls.web.user},deadlineAt:e.deadline,description:e.blurb,friends:{nodes:c(e)},id:(0,r.encodeId)("Project",e.id),imageUrl:t?e.photo.full:e.photo.ed,isBacked:e.is_backing,isLaunched:"live"===e.state,isProjectWeLove:e.staff_pick,isProjectOfTheDay:e.potd,isWatchable:e.is_starrable,isWatched:e.is_starred,name:e.name,percentFunded:e.percent_funded||(e.goal?e.pledged/e.goal*100:0),pid:e.id,pledged:{amount:e.pledged,currency:e.currency},profile:{description:n.blurb,imageUrl:n.feature_image_attributes.image_urls.baseball_card,name:n.name},slug:e.slug,state:e.state.toUpperCase(),url:e.urls.web.project,weightedScore:e.recommendations_score,rawScore:e.recommendations_raw_score,modelName:e.recommendations_model_name}},d=(t.maybeProjectData=function(e){return a.maybe.fromNullable(e).chain(function(e){return(0,r.maybeTry)(function(){return JSON.parse(e)})}).map(l).getOrElse({})},t.makeFetchRequest=function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(d).then(function(e){return e.json()})},t.validateResponseStatus=function(e){return 200===e.status?Promise.resolve(e):Promise.reject(e)}),c=function(e){return e.friends?e.friends.map(function(e){return{name:e.name,imageUrl:e.avatar.thumb}}):[]};t.RebrandToggleCard=function(){return s.default}},PP63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thanksPageRecs=void 0;var i=l(n("GiK3")),r=l(n("O27J")),a=n("d4Y8"),o=n("uAjV"),s=n("Z6GA");function l(e){return e&&e.__esModule?e:{default:e}}var d="\n  query ($projectId: String!, $imageWidth: Int!) {\n    projects(\n      recommended: true,\n      backed: false,\n      created: false,\n      collaborated: false,\n      state: LIVE,\n      similarTo: $projectId,\n      first: 6\n    ) {\n      nodes {\n        ...projectCardFragment\n      }\n    }\n  }\n  "+o.projectCardFragment+"\n";t.thanksPageRecs=function(){var e=document.getElementById("js-recommended-projects");e&&(0,s.fetchGraph)(d,{imageWidth:400,projectId:e.dataset.similar_to}).then(function(t){if(t.data){var n=t.data.projects.nodes;n.length&&r.default.render(i.default.createElement(a.ProjectCardContainer,{refTag:"thanks",projects:n}),e)}})}},PzQG:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("rI7t"),(0,a.default)(document).ready(function(){(0,a.default)(".sortable_table").tablesorter({textExtraction:function(e){var t;return void 0!==(t=(0,a.default)(e).closest("td").data("table-value"))?t:e.innerHTML.replace(/[,?!\s,%$]/g,"")}})})},Q4dB:function(e,t,n){"use strict";var i=d(n("l/Rs")),r=d(n("YC2V")),a=d(n("c5nH")),o=d(n("8NzR")),s=d(n("L3hI")),l=d(n("wmCY"));function d(e){return e&&e.__esModule?e:{default:e}}(0,o.default)(".NS_pledges__shipping_select",function(){var e,t=(0,i.default)();function n(){var t,n=(0,i.default)(this),r=n.val(),o=e[r];return o?(t=parseFloat(o.cost),n.text(t>0?l.default.t("onloads.views.pledges.checkout_shipping.location_name_and_shipping_amount",{name:n.data("name"),amount:s.default.money(t,{precision:0,currency:a.default.get("currency")})}):n.data(name))):n.remove(),n}(0,i.default)(document).on("render_shipping_select",function(a,o){!function(a,o){e={},t.length||(t=a.clone());var s=t.clone();(0,i.default)(o.shipping_rules).each(function(t,n){e[n.location_id]=n}),s.find('option:not([value=""])').each(n),a.html(s.html()),a.val(r.default.get("location_id")),a.val(a.val()).trigger("change")}(o.select,o.reward)})})},"QEM/":function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=s(n("9VV1")),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS-projects__admin_keyboard_control",function(e){(0,i.default)(document).on("keydown",function(t){if(t.ctrlKey){var n=e.find("#project_moderated_state"),r=e.find("form"),s="";switch(t.which){case 65:if("submitted"===o.default.get("state"))return;s="acceptable";break;case 84:s="tolerated";break;default:return}n.val(s),i.default.ajax({url:r.attr("action"),type:r.attr("method"),dataType:"json",data:r.serialize(),success:function(){(0,a.default)({info:s})}}),(0,i.default)("#admin-nav-wrap span.moderation_status").text(s.substring(0,3))}})})},Qijp:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_pretty_input_dropdown=function(t){return t=t||{},e(this).each(function(){var n,i=e(this),r=i.find("input[type=text]"),a=i.find(".ss-delete"),o=r.siblings(".ss-search");function s(){this.value?a.show():a.hide()}function l(){r.val(""),r.trigger("livesearch:cancel").trigger("livesearch:close_results")}r.livesearch_input_dropdown(e.extend(t,{update_input:!1})),n=r.data("livesearch.input_dropdown"),s.call(r[0]),r.on("keypress cut paste input livesearch:close_results blur",s),r.on("livesearch:searching",function(){o.removeClass("ss-search").addClass("icon-loading-small")}),r.on("livesearch:results livesearch:ajax_error",function(){o.removeClass("icon-loading-small").addClass("ss-search")}),r.on("livesearch:results",function(){if(!t.input_can_submit_on_enter){var e=r.siblings(".results");n.select(e.find("li:first"))}}),a.on("click",function(){r.focus(),l()}),r.on("livesearch:close_results",function(){r.siblings(".results").slideUp(function(){e(window).resize(),e(this).trigger("sticky_bar:fix_to_bottom")})}),r.on("blur",function(){r.val().length<3&&l()})})}}(i)},QqbN:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=u(n("l/Rs")),a=u(n("shXp")),o=u(n("/V0p")),s=u(n("hwML"));n("wgDV");var l,d,c=u(n("eF8u"));function u(e){return e&&e.__esModule?e:{default:e}}function f(){return a.default.map(navigator.mimeTypes,function(e){return[e.type,e.description].join("|")})}function h(e){return(new o.default.SHA256).hex(e)}l=a.default.memoize(function(){var e,t,n,r,o,s,l,d,c,u,p=(e=["AdobeReader","Flash","Quicktime","RealPlayer","Shockwave","Silverlight","VLC","WindowsMediaPlayer"],a.default.chain(e).zip(a.default.map(e,function(e){try{return window.PluginDetect.getVersion(e)}catch(e){return e.description}})).filter(a.default.last).value()),m=a.default.map(navigator.plugins,function(e){return[e.name,e.description,e.filename,e.length].join("|")}),g=f(),v=(t=navigator.getGamepads?navigator.getGamepads():[],a.default.chain(t).filter(a.default.identity).map(function(e){return[e.index,e.id].join("|")}).value()),_=function(){var e=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],t=["monospace","sans-serif","serif"],n=function(e){var t=document.createElement("span");t.style.fontFamily=e,t.style.fontSize="72px";var n=document.createTextNode("mmmmmmmmmmlli");return t.appendChild(n),t},i=a.default.map(t,n),r=a.default.map(e,function(e){return a.default.map(t,function(t){return n(e+","+t)})}),o=document.createElement("div");o.style.position="absolute",o.style.visibility="hidden",a.default.forEach(a.default.flatten(r).concat(i),function(e){o.appendChild(e)});var s=document.getElementsByTagName("body")[0];s.appendChild(o);var l=function(e){var t=e.offsetHeight;return[e.offsetWidth,t]},d=a.default.map(i,l),c=a.default.map(r,function(e){return a.default.map(e,l)});return s.removeChild(o),a.default.filter(e,function(e,n){var i,r,a;for(a=0;a<t.length;a+=1)if(i=c[n][a],r=d[a],i[0]!==r[0]||i[1]!==r[1])return!0;return!1})}(),y={pdc:p.length,pds:p.toString(),npc:m.length,nps:m.toString(),mtc:g.length,mts:g.toString(),fnc:_.length,fns:_.toString(),gpc:v.length,gps:v.toString(),tzo:(s=new Date,l=s.getTimezoneOffset(),s.setDate(1),s.setMonth(1),r=s.getTimezoneOffset(),s.setMonth(6),(o=r-s.getTimezoneOffset())?l+"DST"+o:l.toString()),uas:navigator.userAgent,lan:[navigator.language,navigator.userLanguage,navigator.systemLanguage,navigator.languages].join("|"),cpu:[navigator.platform,navigator.hardwareConcurrency].join("|"),mpi:Math.PI.toString()};return u=[screen.height===screen.availHeight,screen.height===window.innerHeight,0===f().length,0===(new Date).getTimezoneOffset()],a.default.filter(u,a.default.identity).length/u.length<.75&&(n=function(){var e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){var t=e.getContext("2d"),n="a1b2,#3<!xy> 456.Z";return t.textBaseline="top",t.font='14px "Arial"',t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}}(),y.cnv=[n.substr(0,32),n.length,h(n)].join("|"),y.res=(d=[screen.availWidth,screen.availHeight],"object"===(void 0===(c=screen.orientation||screen.mozOrientation||screen.msOrientation)?"undefined":i(c))&&(c=c.type),c?c.match("portrait")&&d.reverse():d.sort().reverse(),d.push(screen.colorDepth),d.join("x"))),y}),d=a.default.memoize(function(){var e=l();return h(a.default.chain(["pds","nps","mts","fns","gps","tzo","uas","lan","cpu","cnv","mpi","res"]).map(function(t){return e[t]}).map(function(e){return void 0===e?"":e}).map(function(e){return e.toString()}).value().join("\n"))});window.log_device=function(){var e=function(){var e,t,n;if(window.koala_device_endpoint){try{t=d()}catch(e){t=null}e={partition_key:(0,s.default)(),device_id2:t,visitor_id:(0,s.default)(),ip_address:window.current_ip,user_uid:(n=c.default,void 0===n||null===n||""===n||"object"!==(void 0===n?"undefined":i(n))?null:"function"==typeof n.get?n.get("id")||null:n.id&&n.id||null)},window.enabled_features&&window.enabled_features.device_components&&(e.components=l()),r.default.ajax({type:"POST",url:window.koala_device_endpoint,data:JSON.stringify(e),contentType:"text/plain; charset=UTF-8"})}};a.default.defer(function(){e()})}},QzNM:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};r(n("GiK3"));var i=r(n("KSGD"));function r(e){return e&&e.__esModule?e:{default:e}}t.nameShape=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,leave:i.default.string,active:i.default.string}),i.default.shape({enter:i.default.string,enterActive:i.default.string,leave:i.default.string,leaveActive:i.default.string,appear:i.default.string,appearActive:i.default.string})])},R4hA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},RIos:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e,t){function n(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,i,r,a=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;n<t.length;n++)i=e.trim(t[n]),(r=e("<div class='ui-resizable-handle "+("ui-resizable-"+i)+"'></div>")).css({zIndex:o.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var n,i,r,a;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),a=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,a),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){o.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var i,r,a,o=this.options,s=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),i=n(this.helper.css("left")),r=n(this.helper.css("top")),o.containment&&(i+=e(o.containment).scrollLeft()||0,r+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i=this.helper,r={},a=this.originalMousePosition,o=this.axis,s=this.position.top,l=this.position.left,d=this.size.width,c=this.size.height,u=t.pageX-a.left||0,f=t.pageY-a.top||0,h=this._change[o];return!!h&&(n=h.apply(this,[t,u,f]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==d&&(r.width=this.size.width+"px"),this.size.height!==c&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,r,a,o,s,l,d=this.options;return this._helper&&(r=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&e.ui.hasScroll(n[0],"left")?0:this.sizeDiff.height,a=i?0:this.sizeDiff.width,o={width:this.helper.width()-a,height:this.helper.height()-r},s=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,d.animate||this.element.css(e.extend(o,{top:l,left:s})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!d.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,r,a,o,s=this.options;o={minWidth:i(s.minWidth)?s.minWidth:0,maxWidth:i(s.maxWidth)?s.maxWidth:1/0,minHeight:i(s.minHeight)?s.minHeight:0,maxHeight:i(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,s=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&c&&(e.left=l-t.minWidth),r&&c&&(e.left=l-t.maxWidth),s&&u&&(e.top=d-t.minHeight),a&&u&&(e.top=d-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,i,r,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(i[t],10)||0);r.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),o=a&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-o},d=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,r,a,o,s,l,d=e(this).data("ui-resizable"),c=d.options,u=d.element,f=c.containment,h=f instanceof e?f.get(0):/parent/.test(f)?u.parent().get(0):f;h&&(d.containerElement=e(h),/document/.test(f)||f===document?(d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){i[e]=n(t.css("padding"+r))}),d.containerOffset=t.offset(),d.containerPosition=t.position(),d.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},r=d.containerOffset,a=d.containerSize.height,o=d.containerSize.width,s=e.ui.hasScroll(h,"left")?h.scrollWidth:o,l=e.ui.hasScroll(h)?h.scrollHeight:a,d.parentData={element:h,left:r.left,top:r.top,width:s,height:l}))},resize:function(t){var n,i,r,a,o=e(this).data("ui-resizable"),s=o.options,l=o.containerOffset,d=o.position,c=o._aspectRatio||t.shiftKey,u={top:0,left:0},f=o.containerElement;f[0]!==document&&/static/.test(f.css("position"))&&(u=l),d.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=s.helper?l.left:0),d.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper,o.offset.left-u.left+o.sizeDiff.width)),i=Math.abs((o._helper?o.offset.top-u.top:o.offset.top-l.top)+o.sizeDiff.height),r=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),r&&a&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,c&&(o.size.height=o.size.width/o.aspectRatio)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.containerOffset,r=t.containerPosition,a=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,d=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(a.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:d}),t._helper&&!n.animate&&/static/.test(a.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:d})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?n(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],n(t.alsoResize)):e.each(t.alsoResize,function(e){n(e)})},resize:function(t,n){var i=e(this).data("ui-resizable"),r=i.options,a=i.originalSize,o=i.originalPosition,s={height:i.size.height-a.height||0,width:i.size.width-a.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0},l=function(t,i){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),a={},o=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(r[t]||0)+(s[t]||0);n&&n>=0&&(a[t]=n||null)}),t.css(a)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size,r=t.originalSize,a=t.originalPosition,o=t.axis,s="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=s[0]||1,d=s[1]||1,c=Math.round((i.width-r.width)/l)*l,u=Math.round((i.height-r.height)/d)*d,f=r.width+c,h=r.height+u,p=n.maxWidth&&n.maxWidth<f,m=n.maxHeight&&n.maxHeight<h,g=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=s,g&&(f+=l),v&&(h+=d),p&&(f-=l),m&&(h-=d),/^(se|s|e)$/.test(o)?(t.size.width=f,t.size.height=h):/^(ne)$/.test(o)?(t.size.width=f,t.size.height=h,t.position.top=a.top-u):/^(sw)$/.test(o)?(t.size.width=f,t.size.height=h,t.position.left=a.left-c):(t.size.width=f,t.size.height=h,t.position.top=a.top-u,t.position.left=a.left-c)}})}(i)},RORv:function(e,t,n){"use strict";var i,r=n("wmCY"),a=(i=r)&&i.__esModule?i:{default:i};var o=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.xhr=!1,this.paused=n.paused||!1,this.options=e.extend({threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:e(window),default_page:1,page_by:function(e){return void 0!==e?e+1:this.default_page},page_param:"page",url:!1},n),this.current_page=this.options.page_by(),this.bind_events()}e.fn.mobius=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("mobius");i||(i=new t(e(this),n),e(this).data("mobius",i))})},e.extend(t.prototype,{bind_events:function(){var t=this;"string"==typeof this.options.trigger_next?(this.options.$context.on(this.options.trigger_next,function(){t.check_for_more()}),t.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(n){n.preventDefault(),e(this).addClass("loading_next"),t.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(e,t){this.options.extra_params[e]=t},set_extra_params:function(e){this.options.extra_params=e},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){this.paused||this.options.$context.scrollTop()+this.options.$context.height()-this.$elem.offset().top>this.$elem.get(0).scrollHeight-this.options.threshold&&this.load_next()},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(t,n,i){var r=parseInt(t,10),o=this;isNaN(r)||(n&&n.length||(n=!1),this.xhr||(this.$elem.trigger("mobius:loading_page"),this.xhr=e.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(r),success:function(t){if(o.xhr=!1,"html"===o.options.dataType){var s=e("<div>"+t+"</div>").find(".mobius").children();if(!s.length)return void o.$elem.trigger("mobius:error",[a.default.t("library.mobius.No_mobius_found_in_page",{page:r})]);n?n.after(s):o.options.prepend_next?o.$elem.prepend(s):o.$elem.append(s),o.options.trigger_next.jquery&&o.options.trigger_next.removeClass("loading_next"),o.$elem.trigger("mobius:loaded_page",[r,s])}else o.$elem.trigger("mobius:loaded_page",[r,t]);!i&&n||(o.current_page=r)},error:function(){o.xhr=!1}})))},build_paged_url:function(t){var n=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),i=void 0===this.options.extra_params?"":"string"==typeof this.options.extra_params?this.options.extra_params:e.param(this.options.extra_params),r=/(.*)#$/;r.test(n)&&(n=r.exec(n)[1]),i&&(i="&"+i),this.options.url&&(n=this.options.url);var a=-1!==n.indexOf("?")?"&":"?";return n.toString()+a+this.options.page_param+"="+t+i}})}(o)},RZwK:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i},o=n("vgZZ");(0,a.default)(function(){(0,a.default)(document).on("mouseover","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").show()}),(0,a.default)(document).on("mouseout","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").hide()}),(0,a.default)(document).on("click",".hit-list li",function(){var e=(0,a.default)(this).find("a.target");e.length&&(window.location=e.attr("href"))}),(0,a.default)(document).on("click",".js-feature-clear-all",function(){JSON.parse(this.dataset.cookies).forEach(o.destroy_cookie),window.location.reload()}),(0,a.default)(document).on("click",".js-feature-clear",function(){(0,o.destroy_cookie)(this.dataset.cookie),window.location.reload()}),(0,a.default)(document).on("click",".js-feature-toggle",function(){var e=new Date;e.setHours(e.getHours()+1),(0,o.write_cookie)(this.dataset.cookie,this.dataset.enabled,e),window.location.reload()})})},RuYt:function(e,t,n){n("l/Rs"),n("l/Rs");WYMeditor.XmlHelper=function(){return this._entitiesDiv=document.createElement("div"),this},WYMeditor.XmlHelper.prototype.tag=function(e,t,n){return t=t||!1,n=n||!1,"<"+e+(t?this.tagOptions(t):"")+(n?">":" />")},WYMeditor.XmlHelper.prototype.contentTag=function(e,t,n){return"<"+e+((n=n||!1)?this.tagOptions(n):"")+">"+t+"</"+e+">"},WYMeditor.XmlHelper.prototype.cdataSection=function(e){return"<![CDATA["+e+"]]>"},WYMeditor.XmlHelper.prototype.escapeOnce=function(e){return this._fixDoubleEscape(this.escapeEntities(e))},WYMeditor.XmlHelper.prototype._fixDoubleEscape=function(e){return e.replace(/&amp;([a-z]+|(#\d+));/gi,"&$1;")},WYMeditor.XmlHelper.prototype.tagOptions=function(e){for(var t in this._formated_options="",e){var n=e[t];"function"!=typeof n&&n.length>0&&(parseInt(t,10)==t&&"object"==typeof n&&(t=n.shift(),n=n.pop()),""!==t&&""!==n&&(this._formated_options+=" "+t+'="'+this.escapeOnce(n)+'"'))}return this._formated_options},WYMeditor.XmlHelper.prototype.escapeEntities=function(e,t){this._entitiesDiv.innerHTML=e,this._entitiesDiv.textContent=e;var n=this._entitiesDiv.innerHTML;return void 0===t&&(!1!==t&&(n=n.replace('"',"&quot;")),!0===t&&(n=n.replace('"',"&#039;"))),n},WYMeditor.XmlHelper.prototype.parseAttributes=function(e){var t=[],n=e.split(/((=\s*")(")("))|((=\s*\')(\')(\'))|((=\s*[^>\s]*))/g);if(n.toString()!=e)for(var i in n){var r=n[i];if("function"!=typeof r&&0!==r.length){var a=new RegExp("(\\w+)\\s*"+r),o=e.match(a);if(o){var s=r.replace(/^[\s=]+/,""),l=s.charAt(0);""!==(l='"'==l?'"':"'"==l?"'":"")&&(s='"'==l?s.replace(/^"|"+$/g,""):s.replace(/^'|'+$/g,"")),e=e.replace(o[0],""),t.push([o[1],s])}}}return t}},Rx85:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("shXp")),a=s(n("9VV1")),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}n("w6g1"),function(){function e(e,t){var n=e.add(t);n.siblings().removeClass("current_tab"),n.addClass("current_tab"),(0,i.default)(document).trigger("tab")}(0,i.default)("body.admin").delegate(".tab","click",function(){var t,n=(0,i.default)(this),r=n.attr("class").match(/tab_\d+/),a=n.find("a");r&&(t=(0,i.default)("."+r[0].replace(/tab/,"pane"))),r&&t.length&&(a.length&&""===i.default.trim(t.html())?(n.addClass("submitting"),t.html((0,i.default)('<div class="spinner" />').spin("ksr","#000")),i.default.ajax({url:a.attr("href")+".js",type:"GET",complete:function(i){n.removeClass("submitting"),t.html(i.responseText),e(n,t)}})):e(n,t),history.pushState(null,null,a.attr("href")))}),(0,i.default)("body.admin").delegate(".tab_label a","click",function(e){e.preventDefault()}),(0,i.default)("body.admin").delegate(".expand, .collapse","click",function(e){e.preventDefault(),(0,i.default)(this).add((0,i.default)(this).siblings(".expand, .collapse, .expandable")).toggle()});function t(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"ed":e+"ed"})}r.default.each(["user","project","task","backing"],function(e){(0,i.default)(document).on("click",".js-"+e+"_notes_hider, .js-"+e+"_notes_shower",function(){(0,i.default)(".js-"+e+"_note").toggle(),(0,i.default)(".js-"+e+"_notes_shower").toggle(),(0,i.default)(".js-"+e+"_notes_hider").toggle()})}),(0,i.default)(".js-admin_notes_expand").one("click",function(e){var t=(0,i.default)(this);e.preventDefault(),i.default.ajax({url:t.prop("href"),type:"GET",dataType:"html",success:function(e){t.closest(".js-notes").find(".expandable.ajax-container").html(e)}})}),(0,i.default)("body.admin").delegate(".batch_action .select_all","click",function(e){e.preventDefault();var t=(0,i.default)(this),n=t.closest(".batch_action").parent().find("input.checkbox:not([disabled])");n.length?"Select all"===t.text()?(n.prop("checked",!0),t.text("Deselect all")):(n.prop("checked",!1),t.text("Select all")):(0,a.default)({error:"Nothing to select."})}),(0,i.default)("body.admin").delegate(".batch_action input.submit","click",function(e){e.preventDefault();var n=(0,i.default)(this),r=n.closest("form"),s=n.closest(".batch_action"),l=s.parent(),d=l.find("input.checkbox:checked"),c=d.map(function(e,t){return function(e){if("string"!=typeof e)return"";var t=e.match(/\d+/);return t?t[0]:null}(t.id)}).get(),u=n.attr("name"),f=r.attr("action"),h=s.data("type"),p=s.data("terse_type"),m=h.replace(/s$/,""),g={},v=l.find(".batch_"+u+"_info").data("confirm_url");if(l.find("input.checkbox:not(checked)").each(function(){(0,i.default)(this).parent().removeClass("highlight")}),d.length){var _=[];d.each(function(){var e;(0,i.default)(this).hasClass("string"!=typeof(e=u)?"":e.replace(/.$/,function(e){return"e"===e?"able":e+"able"}))?(0,i.default)(this).parent().removeClass("highlight"):(_.push((0,i.default)(this)),(0,i.default)(this).parent().addClass("highlight"))}),_.length?(0,a.default)({error:"You selected "+_.length+" "+o.default.pluralize(p,_.length)+" that cannot be "+t(u)+". Please unselect those and try again."}):(g[h]=c,i.default.ajax({url:v,data:g,type:"get"}).done(function(e){i.default.modal_confirm(function(){i.default.ajax({type:"PUT",url:f,data:g,success:function(){d.each(function(){var e=(0,i.default)(this);e.attr({checked:!1,disabled:!0}),e.closest("."+m).addClass(t(u)).find(".status").html(t(u))}),(0,a.default)({success:"Selected "+p+" were "+t(u)})},error:function(){(0,a.default)({error:"There was a problem "+u+"ing one or more of those "+p+". Please refresh the page and try again."})}})},{title:"Batch "+u,message:e,confirm_text:o.default.capitalize(u)+" "+c.length+" "+o.default.pluralize(p,c.length),cancel_text:"cancel"===u?"never mind":"cancel"})}))}else(0,a.default)({error:"No "+p+" selected to "+u+"."})}),(0,i.default)(document).on("submit",".zendesk_ticket form",function(e){var t=(0,i.default)(this);t.find(".submit").hide(),t.find(".loading").show(),e.preventDefault(),i.default.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),dataType:"JSON",success:function(e){var n="https://kickstarter.zendesk.com/tickets/"+e.id,r=(0,i.default)("<a/>");r.attr("href",n),r.text(n),r.addClass("associated_zendesk_ticket right"),t.closest(".modal_dialog").trigger("close"),(0,a.default)({success:"Ticket sent successfully!"}),(0,i.default)("#send_to_zendesk").append(r)},complete:function(){t.find(".submit").show(),t.find(".loading").hide()}})})}()},S9Yq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var i,r=n("cFFW");var a="transform",o=void 0,s=void 0,l=void 0,d=void 0,c=void 0,u=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0;if(((i=r)&&i.__esModule?i:{default:i}).default){var v=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),i=void 0,r=void 0,a="",o=0;o<n.length;o++){var s=n[o];if(s+"TransitionProperty"in e){a="-"+s.toLowerCase(),i=t[s]("TransitionEnd"),r=t[s]("AnimationEnd");break}}!i&&"transitionProperty"in e&&(i="transitionend");!r&&"animationName"in e&&(r="animationend");return e=null,{animationEnd:r,transitionEnd:i,prefix:a}}();o=v.prefix,t.transitionEnd=s=v.transitionEnd,t.animationEnd=l=v.animationEnd,t.transform=a=o+"-"+a,t.transitionProperty=d=o+"-transition-property",t.transitionDuration=c=o+"-transition-duration",t.transitionDelay=f=o+"-transition-delay",t.transitionTiming=u=o+"-transition-timing-function",t.animationName=h=o+"-animation-name",t.animationDuration=p=o+"-animation-duration",t.animationTiming=m=o+"-animation-delay",t.animationDelay=g=o+"-animation-timing-function"}t.transform=a,t.transitionProperty=d,t.transitionTiming=u,t.transitionDelay=f,t.transitionDuration=c,t.transitionEnd=s,t.animationName=h,t.animationDuration=p,t.animationTiming=m,t.animationDelay=g,t.animationEnd=l,t.default={transform:a,end:s,property:d,timing:u,delay:f,duration:c}},SMwB:function(e,t,n){"use strict";var i=o(n("rXeC")),r=o(n("I1z3")),a=o(n("obSy"));function o(e){return e&&e.__esModule?e:{default:e}}n("5Nri"),n("nEyA"),n("VUCL"),n("8nDS"),(0,i.default)(".editor").livequery("wym-postIframeInitialization",function(){var e=i.default.wymeditors((0,i.default)(this).data("wym_index")),t=(0,i.default)(e._doc.body),n=!1,a=(0,i.default)([]);function o(){a.remove(),n&&(rangy.restoreSelection(n),rangy.removeMarkers(n),n=!1)}function s(e){return!!(("Mac"===(t=!1,-1!==navigator.appVersion.indexOf("Win")&&(t="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(t="Mac"),-1!==navigator.appVersion.indexOf("X11")&&(t="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(t="Linux"),t)?e.metaKey:e.ctrlKey)&&86===e.keyCode||e.shiftKey&&45===e.keyCode);var t}function l(t){var n=t.originalEvent||t;if(n.clipboardData&&n.clipboardData.getData)return t.preventDefault(),o(),n.clipboardData.getData("text/plain");setTimeout(function(){if(a.length){var t=a.val();e.paste(t),o()}},5)}t.on("keydown",function(o){var l,d;r.default.webkit||r.default.msie||r.default.mozilla&&r.default.version>=22||s(o)&&(l=e._iframe,d=l.contentDocument&&l.contentDocument.defaultView?l.contentDocument.defaultView:l.contentWindow,n=rangy.saveSelection(d),a=(0,i.default)('<textarea class="wym_paste"></textarea>',e._doc),t.append(a),a.css({position:"absolute",top:-10,width:1,height:1,overflow:"hidden"}),a.focus())}),t.on("paste",function(t){var n=l(t);n&&e.paste(n)})}),a.default.editor.prototype.paste=function(e){var t,n,r,o="";if((t=e.split(new RegExp(a.default.NEWLINE+"{2,}","g"))).length>1){for(n=0,r=t.length;n<r;n+=1)o+="<p>"+t[n].split(this._newLine).join("<br />")+"</p>";this.insertBlock(o)}else this.insertText(t[0]);(0,i.default)("body > br",this._doc).remove()}},SNFf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.extend({},e);return t.projects=t.projects.map(function(e){return e.map(function(e){return(0,r.default)(e)})}),t};var i=a(n("l/Rs")),r=a(n("TXOG"));function a(e){return e&&e.__esModule?e:{default:e}}},SSTo:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body#claims_new",function(){(0,i.default)(".js-not-contacted").on("click",function(){(0,i.default)(".js-not-contacted-message").show(),(0,i.default)(".js-claim-info").hide(),(0,i.default)(".js-owner-section").hide(),(0,i.default)(".js-yes-contacted").hide()}),(0,i.default)(".js-contacted").on("click",function(){(0,i.default)(".js-not-contacted-message").hide(),(0,i.default)(".js-claim-info").show()}),(0,i.default)(".js-type-owner").on("click",function(){(0,i.default)(".js-trademark-section").length?((0,i.default)(".js-none-of-the-above-error").hide(),(0,i.default)(".js-trademark-section").show(),(0,i.default)(".js-contacted").prop("checked",!1),(0,i.default)(".js-not-contacted").prop("checked",!1),(0,i.default)(".js-not-contacted-message").hide(),(0,i.default)(".js-claim-info").hide(),(0,i.default)(".js-owner-name").hide(),(0,i.default)(".js-owner-name-text").val(""),(0,i.default)(".js-owner-name").hide()):((0,i.default)(".js-none-of-the-above-error").hide(),(0,i.default)(".js-not-contacted-message").hide(),(0,i.default)(".js-claim-info").show(),(0,i.default)(".js-owner-name").hide(),(0,i.default)(".js-owner-name-text").val(""))}),(0,i.default)(".js-type-representative").on("click",function(){(0,i.default)(".js-trademark-section").length?((0,i.default)(".js-none-of-the-above-error").hide(),(0,i.default)(".js-trademark-section").show(),(0,i.default)(".js-contacted").prop("checked",!1),(0,i.default)(".js-not-contacted").prop("checked",!1),(0,i.default)(".js-not-contacted-message").hide(),(0,i.default)(".js-owner-name").show(),(0,i.default)(".js-claim-info").hide(),(0,i.default)(".js-owner-name").show()):((0,i.default)(".js-none-of-the-above-error").hide(),(0,i.default)(".js-not-contacted-message").hide(),(0,i.default)(".js-claim-info").show(),(0,i.default)(".js-owner-name").show())}),(0,i.default)(".js-type-none").on("click",function(){(0,i.default)(".js-trademark-section").length?((0,i.default)(".js-none-of-the-above-error").show(),(0,i.default)(".js-trademark-section").hide(),(0,i.default)(".js-not-contacted-message").hide(),(0,i.default)(".js-claim-info").hide()):((0,i.default)(".js-none-of-the-above-error").show(),(0,i.default)(".js-claim-info").hide())})})},Sm8F:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("#stored_card_form",function(e){var t=e.find(".selected input.card_toggle");t.length||(t=(0,i.default)("input.card_toggle:first")),(0,i.default)(document).on("change click","input.card_toggle",function(e){e.preventDefault();var t=(0,i.default)(this);(0,i.default)("input.card_toggle").not(t).closest(".payment_option").removeClass("selected"),t.closest(".payment_option").addClass("selected"),"click"===e.type&&setTimeout(function(){t.prop("checked",!0)},0)}),t.prop("checked",!0).trigger("change")})},SzcX:function(e,t,n){"use strict";var i,r=n("6djF"),a=(i=r)&&i.__esModule?i:{default:i};var o=n("l/Rs");n("l/Rs");!function(e){function t(e,t){return a.default.pageX(e)-t.offset().left}e.fn.draggable_bar=function(n,i){return i||(i=n,n=null),this.each(function(){var r=e(this),a=null,o=0;r.on("mousedown touchstart",n,function(n){var i=e(n.target);a=n.target,o=t(n,i)}),r.on("mousedown touchstart mousemove touchmove",n,function(e){var n;a&&(n=t(e,r)/r.width())>0&&n<1&&i(n,a,o)}),e(document).on("mouseup touchend",function(){a=null})})}}(o)},TGXB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n("l/Rs")),r=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}var s={get:function(e,t,n,r){return!n.hasClass("loading")&&(n.trigger("before_ksrjson",[n,r]),i.default.ajax({url:e,type:t||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){n.addClass("loading")},success:function(e){s.parse_response(e,n)},complete:function(){n.removeClass("loading")}}),!1)},enable_form:function(e,t){e.on("submit",function(n){n.preventDefault(),e.trigger("ajaxForm:beforeSerialize"),i.default.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),dataType:"json",beforeSend:function(){var n=e.find("input.confirmation");return e.is(".submitting")?((0,r.default)({error:a.default.t("library.ksr_json.Sorry_still_waiting_for_a_response_Please_try_refreshing_if")}),!1):!(n.length&&!n.prop("checked"))&&(t.addClass("loading"),void e.addClass("submitting"))},success:function(n){s.parse_response(n,t,e),t.trigger("ksr_json:afterSuccess")},error:function(n){s.parse_error(n,t,e),t.trigger("ksr_json:afterError")},complete:function(){t.removeClass("loading"),e.removeClass("submitting"),t.trigger("ksr_json:afterComplete")}})})},parse_response:function(e,t,n){var o,s,l,d={open:function(){(0,i.default)(n).trigger("jGrowl.open_"+e.status)},close:function(){(0,i.default)(n).trigger("jGrowl.close_"+e.status)}};switch(t.trigger("ksr_json:complete",e),i.default.isArray(e.flash)&&i.default.isArray(e.flash[0])?(0,r.default)(i.default.map(e.flash,function(e){return e[e.length-1]}),d):e.flash&&(0,r.default)(e.flash,d),parseInt(e.status,10)){case 200:case 406:o=(0,i.default)(e.data),e.data&&e.data.length>0&&(e.modal?((l=i.default.create_modal_dialog("",e.data)).data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(l.find(".modal_dialog_body")[0])):(o.find("a.cancel").length>0?(s=t.contents().detach(),o.find("a.cancel").one("click",function(){return t.contents().remove(),s.appendTo(t),!1})):t.contents().remove(),t.html(o),t.trigger("size_change"),"undefined"!=typeof FB&&FB.XFBML.parse(t[0]))),(0,i.default)('meta[name="csrf-token"]').attr("content",e.auth_token);break;case 204:t.remove();break;case 302:window.location.href=e.data.replace(/.json$/,"");break;case 303:t.load(e.data,function(){(0,i.default)('meta[name="csrf-token"]').attr("content",e.auth_token)});break;case 304:break;case 500:(0,r.default)({error:a.default.t("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")});break;case 422:(0,r.default)({error:a.default.t("library.ksr_json.Sorry_something_went_wrong_Your_form_may_have_explired")})}return e},parse_error:function(e,t,n){s.parse_response({flash:{},status:e.status,data:e.body},t,n)}};t.default=s},TJ96:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#spotlight_projects_index",function(e){var t,n;e.hasClass("spotlight_projects_watch")?(t="Watch",n="iTunes"):(t="Play",n="Steam"),(0,i.default)(".share-link").on("click",function(e){var n=(0,i.default)(window).height()/2-250,r=(0,i.default)(window).width()/2-250;window.open((0,i.default)(this).attr("href"),"name","height=500, width=500, top="+n+", left="+r),(0,a.track)(t+" Page Share"),e.preventDefault()}),(0,a.trackLinks)("a.js-service-more",t+" Click "+n+" More Link"),(0,a.trackLinks)("a.track-service",t+" Click "+n+" Link"),(0,a.trackLinks)("a.track-official",t+" Click Official Site Link"),(0,i.default)(".published_projects").on("click","a.more",function(e){var t=(0,i.default)(this),n=(0,i.default)(".published_projects"),r=t.attr("href");t.remove(),i.default.ajax({url:r,method:"GET",data:"format=js",dataType:"html",success:function(e){n.append(e)}}),e.preventDefault()})})},TQqI:function(e,t,n){var i=n("l/Rs");n("l/Rs");WYMeditor.WymClassSafari=function(e){this._wym=e,this._class="class"},WYMeditor.WymClassSafari.prototype.initIframe=function(e){var t=this;t._iframe=e,t._doc=e.contentDocument,t._doc.title=t._wym._index,i("html",t._doc).attr("dir",t._options.direction),this._doc.body.contentEditable="true",this._html(this._wym._options.html),i.isFunction(t._options.preBind)&&t._options.preBind(t),t._wym.bindEvents(),i(t._doc).bind("keydown",t.keydown),i(t._doc).bind("keyup",t.keyup),i.isFunction(t._options.postInit)&&t._options.postInit(t),t.listen(),i(t._element).trigger(WYMeditor.EVENTS.postIframeInitialization,t._wym)},WYMeditor.WymClassSafari.prototype._exec=function(e,t){return!!this.selected()&&(t?this._doc.execCommand(e,"",t):this._doc.execCommand(e,"",null),(n=this.selected())&&(r=i(n),(a=n.tagName.toLowerCase())===WYMeditor.BODY&&(o=this.documentStructureManager.structureRules,this._exec(WYMeditor.FORMAT_BLOCK,o.defaultRootContainer),this.fixBodyHtml()),e===WYMeditor.FORMAT_BLOCK&&r.siblings("body.wym_iframe").length&&r.siblings("body.wym_iframe").append(n),"span"===a&&(!r.attr("class")||"apple-style-span"===r.attr("class").toLowerCase())&&"font-weight: normal;"===r.attr("style")&&r.contents().unwrap()),!0);var n,r,a,o},WYMeditor.WymClassSafari.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title];e.ctrlKey?(e.which===WYMeditor.KEY.B&&(t._exec(WYMeditor.BOLD),e.preventDefault()),e.which===WYMeditor.KEY.I&&(t._exec(WYMeditor.ITALIC),e.preventDefault())):e.shiftKey&&e.which===WYMeditor.KEY.ENTER&&(t._exec("InsertLineBreak"),e.preventDefault())},WYMeditor.WymClassSafari.prototype.keyup=function(e){var t,n,r,a,o,s=WYMeditor.INSTANCES[this.title];r=s.documentStructureManager.structureRules.notValidRootContainers,n=s.documentStructureManager.structureRules.defaultRootContainer,s._selectedImage=null,i.browser.version<534.1&&e.which===WYMeditor.KEY.ENTER&&e.shiftKey&&s._exec("InsertLineBreak"),s.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY.CTRL||e.which===WYMeditor.KEY.COMMAND||e.metaKey||e.ctrlKey||(a=(t=s.selected())?t.tagName.toLowerCase():"body",t&&t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),s.isForbiddenMainContainer(a)&&(a=o),(a===WYMeditor.BODY||i.inArray(a,r)>-1&&o===WYMeditor.BODY)&&(s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml())),s.keyCanCreateBlockElement(e.which)&&(a=(t=s.selected()).tagName.toLowerCase(),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),i.inArray(a,r)>-1&&o===WYMeditor.BODY&&s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml()),i(s._element).trigger(WYMeditor.EVENTS.documentHTMLUpdated,[s,i(s._doc.body).html()])}},TXOG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return e.creator_name=e.creator.name,e.percent_raised=e.pledged/e.goal*100,e.percent_raised_rounded=Math.round(e.percent_raised),e.percent_raised_to_100=Math.min(100,e.percent_raised),e.formatted_percent_raised=a.default.percent(e.percent_raised,{precision:0}),e.formatted_money=a.default.money(e.pledged,{precision:0,currency:e.currency}),e.formatted_goal=a.default.money(e.goal,{precision:0,currency:e.currency}),e.formatted_backers_count=a.default.format_number(e.backers_count,{precision:0}),e.count=e.backers_count,e.javascript_deadline=1e3*e.deadline,e.javascript_state_changed_at=1e3*e.state_changed_at,e.formatted_deadline=(0,o.format)("ll",e.javascript_deadline),e.formatted_state_changed_at=(0,o.format)("ll",e.javascript_state_changed_at),e.raw_score=e.recommendations_raw_score,e.weighted_score=e.recommendations_score,e.model_name=e.recommendations_model_name,e.project_state=e.state,e.section=e.ref||e.url_ref||"refined_search",function(e,t){t.blurb||(t.blurb=e.blurb);t.name||(t.name=e.name);t.feature_image_url=t.feature_image_attributes.image_urls.baseball_card,t["has_background_image?"]=!r.default.isEmpty(t.background_image_attributes),t["hide_background_black?"]=t["has_background_image?"]||t.background_color,t.border_color="",t.text_color&&(t.border_color="background-color: #"+t.text_color+";");t.text_color_style="",t.text_color&&(t.text_color_style="color: #"+t.text_color+";");t.background_color_style="",t.background_color&&(t.background_color_style="background-color: #"+t.background_color+";");t.card_style="",t.card_style+=t.text_color_style,t.card_style+=t.background_color_style,t.card_background_style="",t["has_background_image?"]&&(t.card_background_style="background-image: url("+t.background_image_attributes.image_urls.baseball_card+"); opacity: "+t.background_image_opacity+";")}(e,e.profile),i.default.each(["live","successful","canceled","failed"],function(){var t=String(this);e[t+"?"]=e.state===t}),e.url_ref?e.url_with_ref=(0,d.default)(e.urls.web.project).setSearch("ref",e.url_ref).toString():e.url_with_ref=e.urls.web.project,e["live_or_successful?"]="live"===e.state||"successful"===e.state,e["video?"]=null!==e.video&&void 0!==e.video,e["potd_today?"]=(0,l.default)(1e3*e.potd_at,new Date),e["staff_pick?"]=e.staff_pick,e["friends_backing?"]=e.friends&&e.friends.length>0,e["friends_backing?"]&&(e.truncated_friends=e.friends.slice(0,2),(t=r.default.map(e.truncated_friends,function(e){return"<strong>"+r.default.escape(e.name.split(" ")[0])+"</strong>"})).length<e.friends.length&&t.push("<strong>"+s.default.t("presenters.projects.baseball_card_tall.amount_more",{count:e.friends.length-t.length})+"</strong>"),e.escaped_sentence=s.default.t("presenters.projects.baseball_card_tall.friends_are_backers",{friends:a.default.to_sentence(t),count:t.length})),e.json=JSON.stringify(e),e.location_json=JSON.stringify(e.location),e.baseball_card_size||(e.baseball_card_size="tall"),e};var i=c(n("l/Rs")),r=c(n("shXp")),a=c(n("L3hI")),o=n("kVy0"),s=c(n("wmCY")),l=c(n("f4ga")),d=c(n("hBlz"));function c(e){return e&&e.__esModule?e:{default:e}}},"Tct/":function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i};n("hsYx"),(0,a.default)("#NS_banners__password_reset",function(e){var t=e.closest("li");KSR.store.getItem("password_reset_dismissed")||t.show(),e.find("a.dismiss").on("click",function(e){KSR.store.setItem("password_reset_dismissed",!0),t.hide(),e.preventDefault()})})},Tqsz:function(e,t,n){"use strict";n("lX5T");var i=n("l/Rs");n("l/Rs");!function(e){function t(t){this.$container=e(t),this.embed()}e.fn.sound_player=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("sound_player",n))})},e.extend(t.prototype,{embed:function(t){var n="v"+parseInt(1e8*Math.random(),10),i=this;this.$container.find("span").attr("id",n),swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",n,this.$container.width(),this.$container.height(),"9.0.115","https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:t,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+n,class:"ksr_player",name:"sound_player_"+n},function(n){if(n.success)i.jwplayer=jwplayer(n.ref);else{var r=e("<audio />",{src:i.$container.attr("data-file"),controls:!0,autoplay:t});i.$container.html(r),i.$audio=r}}),this.initialized=!0}})}(i)},Tvr3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UNLOADED="unloaded",t.IN_PROGRESS="trying",t.LOADED="loaded"},"U6+P":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mountDataExportModal=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=c(n("GiK3")),a=c(n("O27J")),o=n("Z5jf"),s=n("jRaX"),l=c(n("9VV1")),d=n("aq1o");function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.onClose,n=e.email,i=e.onClick;return r.default.createElement(d.OverlayModal,{headerCopy:(0,o.boundT)("user_settings.Download my personal data"),onClose:t,size:"small"},r.default.createElement("div",null,r.default.createElement(o.BoundTranslate,{i18nKey:"user_settings.When_the_download_is_ready",email:r.default.createElement("b",null,n)})),r.default.createElement(d.PrimaryModalButton,{onClick:i},(0,o.boundT)("user_settings.Start_the_export")))};t.mountDataExportModal=function(e){var t=e.container,n=e.email,d=e.url,c=e.onSuccess,f=function(){return a.default.unmountComponentAtNode(t)},h=function(){c(),f()};a.default.render(r.default.createElement(u,{email:n,onClick:function(){return function(e){var t=e.url,n=e.onSuccess,r=e.onError;fetch(t,{method:"POST",credentials:"same-origin",headers:i({},(0,s.csrfHeader)(document),{Accept:"application/json","Content-Type":"application/json"})}).then(function(e){return e.json()}).then(n).catch(function(){(0,l.default)({error:(0,o.boundT)("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")}),r()})}({url:d,onSuccess:h,onError:f})},onClose:f}),t)}},U7ZL:function(e,t,n){"use strict";var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=c(n("l/Rs")),a=c(n("shXp")),o=c(n("L3hI")),s=c(n("XDtq")),l=c(n("MA+5")),d=c(n("c5nH"));function c(e){return e&&e.__esModule?e:{default:e}}!function(){var e=function(e,t,n,i){this.$fields=e,this.$staticList=t,this.$selectList=n,this.backerRewardsItemTmpl="backer_rewards_items/_fields",this.staticListTmpl="backer_rewards_items/_list",this.selectTmpl="backer_rewards_items/_option",this.list=new s.default({backerRewardsItems:i.backerRewardsItems}),this.rewardId=i.rewardId,this.formPrefix=i.formPrefix,this.project=d.default,this.list.on_change(this.onBackerRewardsItemsChange.bind(this)),this.project.on_change("items",this.onProjectItemsChange.bind(this)),this.bindSubmit(),this.render()};e.prototype.bindSubmit=function(){var e=this;this.$fields.length&&this.$getForm().composable("project_build_data",function(t){return t.concat(function e(t,n){return a.default.flatten(Object.keys(n).map(function(i){var r=n[i],o=t+"["+i+"]";return a.default.isObject(r)?e(o,r):{name:o,value:r}}))}(e.formPrefix,{backer_rewards_items_attributes:e.positionedItems()}))})},e.prototype.$getForm=function(){var e=this;return(0,r.default)(["$fields","$staticList","$selectList"].reduce(function(t,n){return t||e[n].closest("form")[0]},void 0))},e.prototype.positionedItems=function(){return this.list.get("backerRewardsItems").map(function(e,t){return a.default.extend(e,{position:t})})},e.prototype.onBackerRewardsItemsChange=function(){this.render(),this.$fields.trigger("dirty")},e.prototype.onProjectItemsChange=function(){var e=this.project.get("items"),t=this.list.get("backerRewardsItems").filter(function(t){return e.some(function(e){return t.item_id===e.id})});this.list.set("backerRewardsItems",t,{overwrite:!0})},e.prototype.cloneSelected=function(){return this.computeSelected().map(function(e,t){var n=t+"."+(new Date).getTime();return a.default.extend({},e,{id:null,identifier:n})})},e.prototype.computeSelected=function(){var e=this;return this.list.get("backerRewardsItems").filter(function(t){return e.project.get("items").some(function(e){return t.item_id===e.id})})},e.prototype.computeUnselected=function(){var e=this;return this.project.get("items").filter(function(t){return!e.list.get("backerRewardsItems").some(function(e){return e.item_id===t.id&&!e._destroy})})},e.prototype.presentBackerRewardsItem=function(e){var t=this.project.get("items").filter(function(t){return e.item_id===t.id})[0],n=a.default.extend({id:null,identifier:e.id,name:t.name,amount:t.amount,formattedAmount:t.formattedAmount,edit_path:t.edit_path},e);return this.rewardId||(n.id=null),n.showQuantity=e.quantity&&e.quantity>1,n},e.prototype.presentSelectItem=function(e){return a.default.extend(e,{formattedAmount:o.default.money(e.amount,{currency:this.project.get("currency")})})},e.prototype.renderItem=function(e){var t=this,n=this.presentBackerRewardsItem(e),i=(0,r.default)((0,l.default)(this.backerRewardsItemTmpl,n));return i.find("a.js-items__sortable-list-destroy").click(function(e){e.preventDefault(),t.destroy(n.identifier)}),i.data("backerRewardsItem",e),i},e.prototype.renderSelectItem=function(e){var t=this.presentSelectItem(e);return(0,r.default)((0,l.default)(this.selectTmpl,t))},e.prototype.renderStaticList=function(){if(this.$staticList.length){var e=this.computeSelected().map(this.presentBackerRewardsItem.bind(this));this.$staticList.html((0,l.default)(this.staticListTmpl,{items:e}))}},e.prototype.renderFields=function(){this.$fields.length&&this.$fields.html(this.computeSelected().map(this.renderItem.bind(this)))},e.prototype.renderSelectList=function(){this.$selectList.length&&this.$selectList.html(this.computeUnselected().map(this.renderSelectItem.bind(this)))},e.prototype.render=function(){this.renderFields(),this.renderSelectList(),this.renderStaticList()},e.prototype.destroy=function(e){var t=this,n=this.list.get("backerRewardsItems").map(function(n){return t.presentBackerRewardsItem(n).identifier===e&&(n._destroy=!0),n});this.list.set("backerRewardsItems",n,{overwrite:!0})},e.prototype.newBackerRewardsItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.default.extend({identifier:(new Date).getTime(),item_id:e,quantity:1},t)},e.prototype.add=function(e){var t=this.list.get("backerRewardsItems").reduce(function(t,n){return t[n.item_id===e?0:1].push(n),t},[[],[]]),n=i(t,2),r=n[0],a=n[1];a=a.concat(this.newBackerRewardsItem(e,r[0]&&{id:r[0].id})),this.list.set("backerRewardsItems",a,{overwrite:!0}),this.$fields.closest(".js-items__sortable-list").sortable("refresh")},window.ItemListController=e}()},UBnO:function(e,t,n){"use strict";var i=o(n("shXp")),r=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("uVjx"),n("+fgJ"),n("4C6Z");n("l/Rs");var s=n("l/Rs"),l=function(e,t){var n=this;this.options=s.extend({},this.default_options,t),Object.keys(this.constructor.decorator).forEach(function(e){var i=[n.constructor.decorator[e]];"function"==typeof t[e]&&i.push(t[e]),n.options[e]=function(){for(var e=0;e<i.length;e+=1)i[e].apply(n,arguments)}}),this.$input=e,this.$form=e.closest("form"),this.$container=e.closest(".js-asset-upload"),this.uploading_files=[]};l.prototype.raise=function(e){this.$input.trigger("error"),this.$form.trigger("ksr_file_upload:reset"),(0,r.default)({error:e}),this.$container.removeClass("uploading")},l.prototype.default_options={type:"POST",dataType:"text",mimeTypes:[],paramsUrl:null},l.prototype.identifier_for_file=function(e){return e.name+e.size+e.type+e.lastModified},(l.decorator={}).add=function(e,t){var n=this,r=t.files[0],o=r.name.replace(/\s+/g,"_"),l=this.identifier_for_file(r);if(this.options.mimeTypes&&this.options.mimeTypes.length>0&&this.options.mimeTypes.indexOf(r.type)<0)return this.raise(a.default.t("library.adhoc_fileuploader.This_is_not_a_valid_file_type")),!1;this.options.paramsUrl?s.ajax({url:this.options.paramsUrl,type:"GET",data:{filename:o,filetype:r.type},success:function(e){t.paramName="file",t.formData=i.default.map(e.params,function(e,t){return{name:t,value:e}}),t.submit(),n.uploading_files.push(l)},error:function(){n.raise(a.default.t("library.adhoc_fileuploader.Theres_something_wrong_with_the_filename_Please",{file_name:r.name}))}}):(t.submit(),this.uploading_files.push(l))},l.decorator.done=function(e,t){var n=t.files[0],i=this.identifier_for_file(n);this.uploading_files=this.uploading_files.filter(function(e){return e!==i}),this.uploading_files.length||(this.$container.removeClass("uploading"),window.onbeforeunload=this.previous_onbeforeunload)},l.decorator.submit=function(){this.$container.addClass("uploading"),this.previous_onbeforeunload=window.onbeforeunload;var e=this;window.onbeforeunload=function(){if(e.$container.hasClass("uploading"))return a.default.t("library.adhoc_fileuploader.Your_upload_has_not_completed_yet_Click_Stay")}},l.decorator.progress=function(e,t){var n=this.$container.find(".progress"),i=n.filter(".tmpl");if(i.length){var r=t.formData[2].value.replace(/[^\w-_+]/g,"_");(n=this.$container.find("."+r)).length||(n=i.clone().addClass(r).removeClass("tmpl"),s(".progress:last").after(n))}var o=parseInt(t.loaded/t.total*100,10);n.find(".bar").css("width",o+"%"),n.find(".percentage").text(o+"%"),100===o&&(n.addClass("finished"),n.find(".percentage").text(a.default.t("library.adhoc_fileuploader.Processing")))},l.decorator.fail=function(){this.raise(a.default.t("library.adhoc_fileuploader.There_was_an_error_with_this_file_Please_try_a_different"))},s.fn.adhoc_fileuploader=function(e){s(this).each(function(){var t=new l(s(this),e);s(this).fileupload(t.options)})}},UE8d:function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=f(n("8+5l")),a=f(n("A4of")),o=f(n("lSD1")),s=n("S9Yq"),l=f(n("GiK3")),d=f(n("KSGD")),c=n("O27J"),u=n("QzNM");function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=[];s.transitionEnd&&p.push(s.transitionEnd),s.animationEnd&&p.push(s.animationEnd);d.default.node,u.nameShape.isRequired,d.default.bool,d.default.bool,d.default.bool,d.default.number,d.default.number,d.default.number;var m=function(e){function t(){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=i=h(this,e.call.apply(e,[this].concat(a))),i.componentWillAppear=function(e){i.props.appear?i.transition("appear",e,i.props.appearTimeout):e()},i.componentWillEnter=function(e){i.props.enter?i.transition("enter",e,i.props.enterTimeout):e()},i.componentWillLeave=function(e){i.props.leave?i.transition("leave",e,i.props.leaveTimeout):e()},h(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var i=(0,c.findDOMNode)(this);if(i){var o=this.props.name[e]||this.props.name+"-"+e,l=this.props.name[e+"Active"]||o+"-active",d=null,u=void 0;(0,r.default)(i,o),this.queueClassAndNode(l,i);var f=function(e){e&&e.target!==i||(clearTimeout(d),u&&u(),(0,a.default)(i,o),(0,a.default)(i,l),u&&u(),t&&t())};n?(d=setTimeout(f,n),this.transitionTimeouts.push(d)):s.transitionEnd&&(u=function(e,t){return p.length?p.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){p.length&&p.forEach(function(n){return e.removeEventListener(n,t,!1)})}}(i,f))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,o.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,r.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=i({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,l.default.cloneElement(l.default.Children.only(this.props.children),e)},t}(l.default.Component);m.displayName="CSSTransitionGroupChild",m.propTypes={},t.default=m,e.exports=t.default},UVf0:function(e,t,n){"use strict";var i=a(n("cnnw")),r=a(n("tW2u"));function a(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:r.default,CSSTransitionGroup:i.default}},UhhV:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=s(n("+bVi")),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,r.default)(".NS-friends",function(e){var t=e.data("follows_count"),n=e.data("follows_backings_count"),r=e.find(".js-friend-count"),s=e.find(".js-backed-projects-count");e.on("ksr:follow_user",function(e){t+=1,n+=(0,i.default)(e.target).closest(".js-backer-count").data("backed_projects"),r.text(o.default.format_number(t,{precision:0})),s.text(o.default.format_number(n,{precision:0})),t>0&&(0,i.default)(".js-friends-tout").removeClass("friends-tout--no-friends")}),e.on("ksr:unfollow_user ksr:block_user",function(e){t-=1,n-=(0,i.default)(e.target).closest(".js-backer-count").data("backed_projects"),r.text(o.default.format_number(t,{precision:0})),s.text(o.default.format_number(n,{precision:0})),t<=0&&(0,i.default)(".js-friends-tout").addClass("friends-tout--no-friends")}),e.on("ksr:follow_all",function(e,i,a){t+=parseInt(i,10),n+=parseInt(a,10),r.text(o.default.format_number(t,{precision:0})),s.text(o.default.format_number(n,{precision:0}))}),(0,i.default)(document).on("mobius:loaded_page",function(){(0,i.default)(document).trigger("shifted")}),a.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},V8lC:function(e,t,n){"use strict";var i,r,a,o=n("l/Rs"),s=(i=o)&&i.__esModule?i:{default:i};n("Y0+b"),r=(0,s.default)("body.faqs").find(window.location.hash),a=(0,s.default)("#term.help"),r.length&&!r.find(".subcat").length&&r.animate({backgroundColor:"#ffffc9"},{duration:2e3,complete:function(){(0,s.default)(this).animate({backgroundColor:"#ffffff"},{duration:2500})}}),(0,s.default)(".NS_help__search_box").livequery(function(){(0,s.default)(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})}),(0,s.default)(document).on("livesearch:selected","#js-search .results li",function(e,t){t&&t[1]&&(window.location.href=t[1])}),(0,s.default)(document).on("click","body.help form.search .submit",function(){(0,s.default)(this).closest("form").submit()}),(0,s.default)(document).on("livesearch:revealed_results","#term.help",function(){(0,s.default)(this).addClass("expanded"),(0,s.default)(this).parents("#js-search").children(".submit").addClass("expanded")}),(0,s.default)(document).on("livesearch:close_results","#term.help",function(){(0,s.default)(this).removeClass("expanded"),(0,s.default)(this).parents("#js-search").children(".submit").removeClass("expanded")}),(0,s.default)("body.help").click(function(e){var t=(0,s.default)(e.target);t.is("#term")||t.closest("#js-search").length||a.trigger("livesearch:close_results")}),a.on("focus",function(){var e=a.data("livesearch");e&&e.search_xhr&&4===e.search_xhr.readyState&&a.trigger("livesearch:reveal_results")})},VUCL:function(e,t,n){var i,r,a,o;o=function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,t){var n=e.dom,i=n.removeNode,r=e.Selection.isDirectionBackward,a="\ufeff";function o(e,t){return(t||document).getElementById(e)}function s(e,t){var i,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=n.getDocument(e.startContainer),s=e.cloneRange();return s.collapse(t),(i=o.createElement("span")).id=r,i.style.lineHeight="0",i.style.display="none",i.className="rangySelectionBoundary",i.appendChild(o.createTextNode(a)),s.insertNode(i),i}function l(e,n,r,a){var s=o(r,e);s?(n[a?"setStartBefore":"setEndBefore"](s),i(s)):t.warn("Marker element has been removed. Cannot restore selection.")}function d(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function c(t,n){var i,a=e.DomRange.getRangeDocument(t),o=t.toString(),l=r(n);return t.collapsed?{document:a,markerId:(i=s(t,!1)).id,collapsed:!0}:(i=s(t,!1),{document:a,startMarkerId:s(t,!0).id,endMarkerId:i.id,collapsed:!1,backward:l,toString:function(){return"original text: '"+o+"', new text: '"+t.toString()+"'"}})}function u(n,r){var a=n.document;void 0===r&&(r=!0);var s=e.createRange(a);if(n.collapsed){var d=o(n.markerId,a);if(d){d.style.display="inline";var c=d.previousSibling;c&&3==c.nodeType?(i(d),s.collapseToPoint(c,c.length)):(s.collapseBefore(d),i(d))}else t.warn("Marker element has been removed. Cannot restore selection.")}else l(a,s,n.startMarkerId,!0),l(a,s,n.endMarkerId,!1);return r&&s.normalizeBoundaries(),s}function f(t,n){var i,a,s=[],l=r(n);(t=t.slice(0)).sort(d);for(var u=0,f=t.length;u<f;++u)s[u]=c(t[u],l);for(u=f-1;u>=0;--u)i=t[u],a=e.DomRange.getRangeDocument(i),i.collapsed?i.collapseAfter(o(s[u].markerId,a)):(i.setEndBefore(o(s[u].endMarkerId,a)),i.setStartAfter(o(s[u].startMarkerId,a)));return s}function h(e){for(var t=[],n=e.length-1;n>=0;n--)t[n]=u(e[n],!0);return t}function p(e,t){var n=o(t,e);n&&i(n)}e.util.extend(e,{saveRange:c,restoreRange:u,saveRanges:f,restoreRanges:h,saveSelection:function(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var i=e.getSelection(n),r=i.getAllRanges(),a=1==r.length&&i.isBackward(),o=f(r,a);return a?i.setSingleRange(r[0],a):i.setRanges(r),{win:n,rangeInfos:o,restored:!1}},restoreSelection:function(t,n){if(!t.restored){var i=t.rangeInfos,r=e.getSelection(t.win),a=h(i);1==i.length&&n&&e.features.selectionHasExtend&&i[0].backward?(r.removeAllRanges(),r.addRange(a[0],!0)):r.setRanges(a),t.restored=!0}},removeMarkerElement:p,removeMarkers:function(e){for(var t,n=e.rangeInfos,i=0,r=n.length;i<r;++i)(t=n[i]).collapsed?p(e.doc,t.markerId):(p(e.doc,t.startMarkerId),p(e.doc,t.endMarkerId))}})}),e},r=[n("5Nri")],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a)},"VgM/":function(e,t,n){"use strict";var i=o(n("wmCY")),r=o(n("obSy")),a=o(n("5Nri"));function o(e){return e&&e.__esModule?e:{default:e}}n("nEyA"),n("VUCL"),n("8nDS"),n("sWK4");var s=n("l/Rs");n("l/Rs");!function(e){var t,n,o=e([]),l='<div class="wym_dialog wym_dialog_link"><form><fieldset class="mb0"><input type="hidden" class="wym_dialog_type" value="'+r.default.DIALOG_LINK+'" /><div class="row"><div class="col col-12"><label>{URL}</label><input type="text" class="wym_href text" value="" size="40" /></div></div><div class="row row-indent"><div class="col col-12"><input class="wym_submit btn btn--blue" type="submit" value="{Insert}" /><a class="wym_cancel">{Cancel}</a></div></div></fieldset></form></div>',d='<div class="wym_dialog wym_dialog_image"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+r.default.DIALOG_IMAGE+'" /><div class="row"><label>{URL}</label><input type="text" class="wym_src" value="" size="40" /></div><div class="row"><label>{Alternative_Text}</label><input type="text" class="wym_alt" value="" size="40" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form>',c='<div class="wym_dialog wym_dialog_table"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+r.default.DIALOG_TABLE+'" /><div class="row"><label>{Caption}</label><input type="text" class="wym_caption" value="" size="40" /></div><div class="row"><label>{Summary}</label><input type="text" class="wym_summary" value="" size="40" /></div><div class="row"><label>{Number_Of_Rows}</label><input type="text" class="wym_rows" value="3" size="3" /></div><div class="row"><label>{Number_Of_Cols}</label><input type="text" class="wym_cols" value="2" size="3" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form>',u='<div class="wym_dialog wym_dialog_paste"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+r.default.DIALOG_PASTE+'" /><div class="row"><textarea class="wym_text" rows="10" cols="50"></textarea></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form>';r.default.editor.prototype.dialog=function(s,f,h){var p,m,g,v,_="",y="",b=r.default.Helper;switch(this._options.dialogLinkHtml=l,this._options.dialogImageHtml=d,this._options.dialogTableHtml=c,this._options.dialogPasteHtml=u,this._options.dialogHtml=r.default.DIALOG_BODY,s){case r.default.DIALOG_LINK:_=this._options.dialogLinkHtml,y=i.default.t("library.modal_dialog.Insert_a_link");break;case r.default.DIALOG_IMAGE:_=this._options.dialogImageHtml;break;case r.default.DIALOG_TABLE:_=this._options.dialogTableHtml;break;case r.default.DIALOG_PASTE:_=this._options.dialogPasteHtml;break;case r.default.PREVIEW:_=this._options.dialogPreviewHtml;break;default:_=h}return p=this._options.dialogHtml,p=b.replaceAll(p,r.default.BASE_PATH,this._options.basePath),p=b.replaceAll(p,r.default.DIRECTION,this._options.direction),p=b.replaceAll(p,r.default.DIALOG_TITLE,this.encloseString(s)),p=b.replaceAll(p,r.default.DIALOG_BODY,_),p=b.replaceAll(p,r.default.INDEX,this._index),p=this.replaceStrings(p),y||(y=s.replace("_"," ")),o=e.create_modal_dialog(y,p),t=o.data("modal_dialog"),g=(m=this._iframe).contentDocument&&m.contentDocument.defaultView?m.contentDocument.defaultView:m.contentWindow,n=a.default.saveSelection(g),v=this.selected(),t.open(),o.find("input:visible:first").focus(),r.default.INIT_DIALOG(this._index,v),t},s.fn.closeDialog=function(){a.default.restoreSelection(n),setTimeout(function(){t.close(),t.$elem.remove(),t=!1},250)},r.default.INIT_DIALOG=function(t,i){var o,l=r.default.INSTANCES[t],d=window.document,c=s(l._options.dialogTypeSelector).val(),u=l.uniqueStamp(),f=e([]);c===r.default.DIALOG_LINK&&(e(i).is("a")||(o=l.selected_contains("a")).length&&(i=o[0])),s.isFunction(l._options.preInitDialog)&&l._options.preInitDialog(l,window),i&&(f=s(i),s(".wym_css_class",d).val(f.attr("class")),s(".wym_rel",d).val(f.attr("rel")),f.attr(r.default.HREF)&&s(l._options.hrefSelector).val(f.attr(r.default.HREF)),s(l._options.srcSelector).val(f.attr(r.default.SRC)),s(l._options.titleSelector).val(f.attr(r.default.TITLE)),s(l._options.altSelector).val(f.attr(r.default.ALT))),s(l._options.cancelSelector,d).click(function(){s().closeDialog()}),s(l._options.dialogLinkSelector+" "+l._options.submitSelector).submit(function(t){t.preventDefault();var o,d,c=s(l._options.hrefSelector+":visible",this).val();c.length>0&&(a.default.restoreSelection(n),i&&i.tagName.toLowerCase()===r.default.A?o=s(i):l.selection_collapsed()?(d=l.selection().getRangeAt(0),o=e("<a>"+c+"</a>"),d.insertNode(o[0])):(l._exec(r.default.CREATE_LINK,u),o=s("a[href="+u+"]",l._doc.body)),o.attr(r.default.HREF,c),o.attr("target","_blank"),l._element.trigger("wym-documentHTMLUpdated",[l,e(l._doc.body).html()])),s().closeDialog()}),l._selected_image&&(s(l._options.dialogImageSelector+" "+l._options.srcSelector).val(s(l._selected_image).attr(r.default.SRC)),s(l._options.dialogImageSelector+" "+l._options.titleSelector).val(s(l._selected_image).attr(r.default.TITLE)),s(l._options.dialogImageSelector+" "+l._options.altSelector).val(s(l._selected_image).attr(r.default.ALT))),s(l._options.dialogImageSelector+" "+l._options.submitSelector).submit(function(t){t.preventDefault();var n=s(l._options.srcSelector).val(),i=e([]);n.length>0&&(l._exec(r.default.INSERT_IMAGE,u),(i=s("img[src$="+u+"]",l._doc.body)).attr(r.default.SRC,n),i.attr(r.default.TITLE,s(l._options.titleSelector).val()),i.attr(r.default.ALT,s(l._options.altSelector).val())),s().closeDialog()}),s(l._options.dialogTableSelector+" "+l._options.submitSelector).submit(function(e){e.preventDefault();var t,n,i,a,o,d,c=s(l._options.rowsSelector).val(),u=s(l._options.colsSelector).val();if(c>0&&u>0){for(t=l._doc.createElement(r.default.TABLE),n=null,o=s(l._options.captionSelector).val(),t.createCaption().innerHTML=o,i=0;i<c;i+=1)for(n=t.insertRow(i),a=0;a<u;a+=1)n.insertCell(a);s(t).attr("summary",s(l._options.summarySelector).val()),(d=s(l.findUp(l.container(),r.default.MAIN_CONTAINERS)).get(0))&&d.parentNode?s(d).after(t):s(l._doc.body).append(t)}s().closeDialog()}),s(l._options.dialogPasteSelector+" "+l._options.submitSelector).submit(function(e){e.preventDefault();var t=s(l._options.textSelector).val();l.paste(t),s().closeDialog()}),s.isFunction(l._options.postInitDialog)&&l._options.postInitDialog(l,window)}}(s)},Vmib:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("w6g1"),a.default.fn.spin.presets.ksr={className:"",lines:8,length:4,width:2,radius:5,speed:2}},Vo5L:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)("body#help_fees form.select_country").on("change",function(){(0,a.default)(this).submit()})})},Vy0d:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){var e=(0,a.default)(".toggle_box_nav li"),t=(0,a.default)(".toggle_box_content");e.length&&t.length&&e.on("click",function(){var n=(0,a.default)(this),i=e.index(n);return t.removeClass("current"),e.removeClass("current"),(0,a.default)(t[i]).addClass("current"),n.addClass("current"),!1})})},"W/DP":function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=s(n("UQDk")),o=s(n("MA+5"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_site__homepage_social",function(e){function t(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}e.find(".js-slider").each(function(){var n=(0,i.default)(this).closest(e),r=n.data("url"),s=n.data("ref");function l(){r&&i.default.ajax({url:(0,a.default)(r),type:"get",dataType:"json",success:function(e){var t=n.find(".project-list");n.find(".js-slider").removeClass("loading"),e.projects.length?i.default.each(e.projects,function(){t.append(function(e,t){var n=e;return n.urls.web.project=e.urls.web.project+"?ref="+t,n.baseball_card_size="tall-big",(0,i.default)('<div class="project col col-4 mobile-scroll-row-item">'+(0,o.default)("projects/_baseball_card_tall",n,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</div>")}(this,s))}):n.find(".js-slider").addClass("no-projects")}})}window.api_oauth_token&&(0,i.default)(window).on("scroll",function e(){window.scrollY+1.5*(0,i.default)(window).height()<=n.offset().top||((0,i.default)(window).unbind("scroll",e),t("Social Module","Load"),l(),n.find("p.no-content").hide(),n.find(".js-slider").show())})}),(0,i.default)(".js-facebook-login").click(function(){t("Social Module","Facebook connect")})})},WKaU:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("#credit_cards_index",function(e){var t=e.find(".js-add-source"),n=e.find(".payment_form");t.on("click",function(){n.removeClass("hide"),(0,i.default)(this).addClass("hide")})})},WREU:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("click",".js-click_select",function(e){var t=document.createRange(),n=window.getSelection();t.setStartBefore(this.firstChild),t.setEndAfter(this.lastChild),n.removeAllRanges(),n.addRange(t),e.preventDefault()})})},WfYy:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".js-nav--subnav",function(e){e.on("change_current",function(e,t){var n=(0,i.default)(this),r=(0,i.default)(t);r.length&&(n.find(".current").removeClass("current"),r.addClass("current"),n.find(".js-nav--subnav__selected-indicator").css({left:r.position().left,width:r.outerWidth()}),(0,i.default)(window).resize(function(){n.find(".js-nav--subnav__selected-indicator").css({left:r.position().left,width:r.outerWidth()})}))});var t=window.location.pathname,n=e.find(".nav--subnav__item__link").filter(function(){return new URL(this.href).pathname===t});e.trigger("change_current",n)})},Wip1:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("#curated_pages_reorder",function(e){function t(){(0,i.default)(".js-project").each(function(e){(0,i.default)(this).find("input.text").val(e+1)})}(0,i.default)(".js-project input.text").on("blur",function(){var e=(0,i.default)(this),n=parseInt(e.val(),10),r=e.closest(".js-project");isNaN(n)||((0,i.default)(".js-project").not(r).eq(n-1).before(r),t())}).on("focus",function(){this.select()}),e.find("form ol").sortable({containment:"document",tolerance:"pointer",items:"> li",stop:t})})},WoYN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.completed=!!e.backer_completed_at,e["is_"+e.status]=!0,e.formatted_deadline=(0,r.format)("ll",1e3*e.project.deadline),e.formatted_money=i.default.money(e.amount,{currency:e.project.currency}),e.formatted_status=a.default.t("presenters.backings.row.status."+e.display_status),e.project_state=l(e),e.reward){var t=e.reward.reward;if(e.formatted_reward=t.length>57?t.substring(0,57)+"":t,e.reward.estimated_delivery_on){var n=1e3*e.reward.estimated_delivery_on;e.formatted_estimated_delivery_on=(0,r.format)("MMM YYYY",(0,o.toUTC)(n))}}return e.messages&&(e.formatted_messages_count=a.default.t("presenters.backings.row.messages_count",{count:e.messages.count,formatted_count:i.default.format_number(e.messages.count,{precision:0})}),e.formatted_messages_last_activity_at=(0,r.format)("ll",1e3*e.messages.last_activity_at)),e};var i=s(n("L3hI")),r=n("kVy0"),a=s(n("wmCY")),o=n("HZrJ");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){switch(e.project.state){case"canceled":return a.default.t("presenters.backings.row.Canceled");case"failed":return a.default.t("presenters.backings.row.Unsuccessful");case"live":return a.default.t("presenters.backings.row.In_progress");case"successful":return a.default.t("presenters.backings.row.Successful");case"suspended":return a.default.t("presenters.backings.row.Suspended");default:return""}}},X1nT:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("GCDY"),n("LNuh"),(0,a.default)(function(){(0,a.default)(".js-lazy-video").livequery(function(){var e=this,t=(0,a.default)(this);t.whenNear(500,function(){e.src=t.data("src")})})})},X2U3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultTheme={name:"default","primary-light":"soft-black","primary-dark":"black","primary-accent":"ksr-green-400"}},X6aU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},XXTK:function(e,t,n){var i=n("l/Rs");n("l/Rs");WYMeditor.editor.prototype.resizable=function(e){var t=i(this._box).find("iframe"),n=i(this._box).find(".wym_iframe"),r={resize:function(){n.height(t.height())},alsoResize:t,handles:"s,e,se",minHeight:250},a=i.extend(r,e);i.isFunction(i.fn.resizable)?i(this._box).resizable(a):WYMeditor.console.error("Oops, jQuery UI.resizable unavailable.")}},"Y0+b":function(e,t,n){"use strict";n("FD+P"),n("84+x"),n("b5hM"),n("Qijp"),n("ac+W"),n("zcvo"),n("2TxY");n("l/Rs"),n("l/Rs")},YBD5:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("Vh6Q"),n("wmCY"),n("8NzR"),n("aTdG"),n("ZVp/"),n("N/lE"),n("0ax2"),n("iPPX"),n("Et0E"),n("iQ9M"),n("QqbN"),n("9VV1"),n("yYdC"),n("RZwK"),n("4RZc"),n("9kaj"),n("asZU"),n("E5Nj"),n("2fYv"),n("yqLu"),n("3txR"),n("ofuh"),n("8bXp"),window.$=a.default},YBJb:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#site_about",function(){(0,i.default)(".js-charter-link").click(function(){(0,a.trackLinks)("About KSR About Charter Click")}),(0,i.default)(".js-stats-link").click(function(){(0,a.trackLinks)("About KSR About Stats Click")}),(0,i.default)(".js-team-link").click(function(){(0,a.trackLinks)("About KSR About Team Click")}),(0,i.default)(".js-jobs-link").click(function(){(0,a.trackLinks)("About KSR About Jobs Click")}),(0,i.default)(".js-toggle-founding-story").click(function(){(0,a.trackLinks)("About KSR About Founding Story Toggle")}),(0,i.default)(".js-press-link").click(function(){(0,a.trackLinks)("About KSR About Press Click")}),(0,i.default)(".js-start-link").click(function(){(0,a.trackLinks)("Clicked Start Project",{context:"about"})})})},YOqD:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("#country-select",function(e){e.livequery(function(){var t=(0,i.default)(this);t.find("a.btn--green").on("click",function(e){t.find("form").submit(),e.preventDefault()}),t.find("select#country").on("change",function(){var n=(0,i.default)(this).val().toLowerCase();t.find(".country").hide(),t.find("."+n).show(),e.removeClass().addClass(n)}).trigger("change")})})},YRFD:function(e,t,n){var i=n("xA5w");e.exports=function(e,t){var n=i(e).getTime(),r=i(t).getTime();return n>r?-1:n<r?1:0}},"YT+p":function(e,t,n){var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=8)}([function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(){}var a={trace:r,debug:r,log:r,warn:r,info:r,error:r},o=a;function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach(function(t){o[t]=e[t]?e[t].bind(e):function(e){var t=self.console[e];return t?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];i[0]&&(i[0]=function(e,t){return t="["+e+"] > "+t}(e,i[0])),t.apply(self.console,i)}:r}(t)})}var l=function(e){if(!0===e||"object"===(void 0===e?"undefined":i(e))){s(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},d=a},function(e,t,n){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){"use strict";n.d(t,"b",function(){return r});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var i=n,r=0;e.isHeader(t,n);){r+=10,r+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(r+=10),n+=r}if(r>0)return t.subarray(i,i+r)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),i=0;i<n.length;i++){var r=n[i];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:n,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var n=0,i=[];e.isHeader(t,n);){for(var r=e._readSize(t,n+6),a=(n+=10)+r;n+8<a;){var o=e._getFrameData(t.subarray(n)),s=e._decodeFrame(o);s&&i.push(s),n+=o.size+10}e.isFooter(t,n)&&(n+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length,i=void 0,r=void 0,a=void 0,o="",s=0;s<n;){if(0===(i=e[s++])&&t)return o;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:r=e[s++],o+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=e[s++],a=e[s++],o+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&a)<<0)}}return o},e}(),r=i._utf8ArrayToStr;t.a=i},function(e,t,n){"use strict";var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=n}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=n}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],d=s[1],c=s[2],u=s[3],f=new Uint32Array(256),h=0,p=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var v=f[h],_=f[v],y=f[_],b=257*f[g]^16843008*g;i[h]=b<<24|b>>>8,r[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,b=16843009*y^65537*_^257*v^16843008*h,l[g]=b<<24|b>>>8,d[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,u[g]=b,h?(h=v^f[f[f[y^v]]],p^=f[f[p]]):h=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a=this.ksRows=4*(r+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(a),d=this.invKeySchedule=new Uint32Array(a),c=this.sBox,u=this.rcon,f=this.invSubMix,h=f[0],p=f[1],m=f[2],g=f[3],v=void 0,_=void 0;for(o=0;o<a;o++)o<r?v=l[o]=t[o]:(_=v,o%r==0?(_=c[(_=_<<8|_>>>24)>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_],_^=u[o/r|0]<<24):r>6&&o%r==4&&(_=c[_>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_]),l[o]=v=(l[o-r]^_)>>>0);for(s=0;s<a;s++)o=a-s,_=3&s?l[o]:l[o-4],d[s]=s<4||o<=4?_:h[c[_>>>24]]^p[c[_>>>16&255]]^m[c[_>>>8&255]]^g[c[255&_]],d[s]=d[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n){for(var i,r,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,d=l[0],c=l[1],u=l[2],f=l[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],m=h[1],g=h[2],v=h[3],_=new Int32Array(e),y=new Int32Array(_.length),b=void 0,w=void 0,E=void 0,C=void 0,k=void 0,S=void 0,T=void 0,A=void 0,R=void 0,x=void 0,I=void 0,D=void 0,N=this.networkToHostOrderSwap;t<_.length;){for(R=N(_[t]),x=N(_[t+1]),I=N(_[t+2]),D=N(_[t+3]),k=R^o[0],S=D^o[1],T=I^o[2],A=x^o[3],i=4,r=1;r<a;r++)b=d[k>>>24]^c[S>>16&255]^u[T>>8&255]^f[255&A]^o[i],w=d[S>>>24]^c[T>>16&255]^u[A>>8&255]^f[255&k]^o[i+1],E=d[T>>>24]^c[A>>16&255]^u[k>>8&255]^f[255&S]^o[i+2],C=d[A>>>24]^c[k>>16&255]^u[S>>8&255]^f[255&T]^o[i+3],k=b,S=w,T=E,A=C,i+=4;b=s[k>>>24]<<24^s[S>>16&255]<<16^s[T>>8&255]<<8^s[255&A]^o[i],w=s[S>>>24]<<24^s[T>>16&255]<<16^s[A>>8&255]<<8^s[255&k]^o[i+1],E=s[T>>>24]<<24^s[A>>16&255]<<16^s[k>>8&255]<<8^s[255&S]^o[i+2],C=s[A>>>24]<<24^s[k>>16&255]<<16^s[S>>8&255]<<8^s[255&T]^o[i+3],i+=3,y[t]=N(b^p),y[t+1]=N(C^m),y[t+2]=N(E^g),y[t+3]=N(w^v),p=R,m=x,g=I,v=D,t+=4}return y.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=n(2),s=n(0);var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.logEnabled=!0;try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.b.log("JS AES decrypt"),this.logEnabled=!1);var d=this.decryptor;d||(this.decryptor=d=new a),d.expandKey(t),o(d.decrypt(e,0,n))}else{this.logEnabled&&(s.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new r(c,t)),this.fastAesKey.expandKey().then(function(r){new i(c,n).decrypt(e,r).catch(function(i){l.onWebCryptoError(i,e,t,n,o)}).then(function(e){o(e)})}).catch(function(i){l.onWebCryptoError(i,e,t,n,o)})}},e.prototype.onWebCryptoError=function(e,t,n,i,r){this.config.enableSoftwareAES?(s.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,i,r)):(s.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.a=l},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,l,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(r(n))for(s=Array.prototype.slice.call(arguments,1),o=(d=n.slice()).length,l=0;l<o;l++)d[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,a=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var i,r,a,o,s;i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var d={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(d.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,u=c.substring(0,c.lastIndexOf("/")+1)+a.path;d.path=s.normalizePath(u)}else d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));return null===d.path&&(d.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},function(e,t,n){"use strict";var i=n(1),r=n(2),a=n(4),o=n(0);function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function d(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return!!(t+1<e.length&&s(e,t))}function u(e,t){if(t+1<e.length&&s(e,t)){var n=l(e,t);t+5<e.length&&(n=d(e,t));var i=t+n;if(i===e.length||i+1<e.length&&s(e,i))return!0}return!1}function f(e,t,n,i,a){if(!e.samplerate){var s=function(e,t,n,i){var a,s,l,d,c,u=navigator.userAgent.toLowerCase(),f=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[n+2])>>>6),!((s=(60&t[n+2])>>>2)>h.length-1))return d=(1&t[n+2])<<2,d|=(192&t[n+3])>>>6,o.b.log("manifest codec:"+i+",ADTS data:type:"+a+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+d),/firefox/i.test(u)?s>=6?(a=5,c=new Array(4),l=s-3):(a=2,c=new Array(2),l=s):-1!==u.indexOf("android")?(a=2,c=new Array(2),l=s):(a=5,c=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&s>=6?l=s-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(s>=6&&1===d||/vivaldi/i.test(u))||!i&&1===d)&&(a=2,c=new Array(2)),l=s)),c[0]=a<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=d<<3,5===a&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[s],channelCount:d,codec:"mp4a.40."+a,manifestCodec:f};e.trigger(Event.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s})}(t,n,i,a);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,o.b.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}}function h(e){return 9216e4/e}function p(e,t,n,i,r){var a=function(e,t,n,i,r){var a,o,s=e.length;if(a=l(e,t),o=d(e,t),(o-=a)>0&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+i*r}}(t,n,i,r,h(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,c=a.frameLength,u={unit:t.subarray(n+s,n+s+c),pts:o,dts:o};return e.samples.push(u),e.len+=c,{sample:u,length:c+s}}}var m=n(3);var g=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.a.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(u(e,t))return o.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=this._audioTrack,a=m.a.getID3Data(e,0)||[],s=m.a.getTimeStamp(a),l=s?90*s:9e4*t,d=0,u=l,h=e.length,g=a.length,v=[{pts:u,dts:u,data:a}];g<h-1;)if(c(e,g)&&g+5<h){f(r,this.observer,e,g,r.manifestCodec);var _=p(r,e,g,l,d);if(!_){o.b.log("Unable to parse AAC frame");break}g+=_.length,u=_.sample.pts,d++}else m.a.isHeader(e,g)?(a=m.a.getID3Data(e,g),v.push({pts:u,dts:u,data:a}),g+=a.length):g++;this.remuxer.remux(r,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}();var v=Math.pow(2,32)-1,_=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.remuxer=n}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,r,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:r,initSegment:a?t:null})),this.observer.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var i,r,a,o,s,l,d,c=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!n.length)return null;for(i=l;i<o;)r=e.readUint32(t,i),a=e.bin2str(t.subarray(i+4,i+8)),d=r>1?i+r:o,a===n[0]&&(1===n.length?c.push({data:t,start:i+8,end:d}):(s=e.findBox({data:t,start:i+8,end:d},n.slice(1))).length&&(c=c.concat(s))),i=d;return c},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var r=i.data[i.start],a=0===r?12:20,s=e.readUint32(i,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=0===(r=l.data[l.start])?12:20;var d=e.readUint32(l,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var u={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(u){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var h=e.bin2str(f.data.subarray(f.start+12,f.start+16));o.b.log("MP4Demuxer:"+u+":"+h+" found")}n[s]={timescale:d,type:u},n[u]={timescale:d,id:s}}}}}}),n},e.getStartDTS=function(t,n){var i,r,a;return i=e.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var r,a;return r=e.readUint32(i,4),a=t[r].timescale||9e4,e.findBox(n,["tfdt"]).map(function(t){var n,i;return n=t.data[t.start],i=e.readUint32(t,4),1===n&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i})[0]/a})})),a=Math.min.apply(null,r),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,i){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var a=e.readUint32(r,4),o=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,r-i*o);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*o,r=Math.max(r,0);var a=Math.floor(r/(v+1)),s=Math.floor(r%(v+1));e.writeUint32(t,4,a),e.writeUint32(t,8,s)}})})})},e.prototype.append=function(t,n,r,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),o=this.initData);var s,l=this.initPTS;if(void 0===l){var d=e.getStartDTS(o,t);this.initPTS=l=d-n,this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,r,a,t)},e.prototype.destroy=function(){},e}(),y={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,i,r){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=i+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),e.len+=a.frameLength,{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==a){var s=3===n?3-i:3===i?3:4,l=1e3*y.BitratesMap[14*s+r-1],d=3===n?0:2===n?1:2,c=y.SamplingRateMap[3*d+a],u=e[t+3]>>6==3?1:2,f=y.SamplesCoefficients[n][i],h=y.BytesInSlot[i],p=8*f*h;return{sampleRate:c,channelCount:u,frameLength:parseInt(f*l/c+o,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),i=4;n&&n.frameLength&&(i=n.frameLength);var r=t+i;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},b=y;var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(n+this.readEG()+256)%256),n=0===i?n:i},e.prototype.readSPS=function(){var e,t,n,i,r,a,o,s=0,l=0,d=0,c=0,u=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),m=this.skipBits.bind(this),g=this.skipEG.bind(this),v=this.skipUEG.bind(this),_=this.skipScalingList.bind(this);if(u(),e=u(),f(5),m(3),u(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var y=h();if(3===y&&m(1),v(),v(),m(1),p())for(a=3!==y?8:12,o=0;o<a;o++)p()&&_(o<6?16:64)}v();var b=h();if(0===b)h();else if(1===b)for(m(1),g(),g(),t=h(),o=0;o<t;o++)g();v(),m(1),n=h(),i=h(),0===(r=f(1))&&m(1),m(1),p()&&(s=h(),l=h(),d=h(),c=h());var w=[1,1];if(p()&&p())switch(u()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-r)*(i+1)*16-(r?2:4)*(d+c),pixelRatio:w}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();var E=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decryptdata=i,this.discardEPB=r,this.decrypter=new a.a(t,n)}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,i){var r=e[t].unit,a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),r.set(a,16),i||s.decryptAacSamples(e,t+1,n)})},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<=e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,i=32;i<=e.length-16;i+=160,n+=16)e.set(t.subarray(n,n+16),i);return e},e.prototype.decryptAvcSample=function(e,t,n,i,r,a){var o=this.discardEPB(r.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){r.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,n+1,i)})},e.prototype.decryptAvcSamples=function(e,t,n,i){for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,a,o),!o)return}}}},e}();var C={video:0,audio:1,id3:2,text:3},k=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.typeSupported=r,this.remuxer=n,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new E(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0)&&(n&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:C[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",r),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3",r),this._txtTrack=e.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,n,a,s){var l,d,c,u,f,h=t.length,p=!1;this.contiguous=a;var m=this.pmtParsed,g=this._avcTrack,v=this._audioTrack,_=this._id3Track,y=g.pid,b=v.pid,w=_.pid,E=this._pmtId,C=g.pesData,k=v.pesData,S=_.pesData,T=this._parsePAT,A=this._parsePMT,R=this._parsePES,x=this._parseAVCPES.bind(this),I=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),N=this._parseID3PES.bind(this),j=e._syncOffset(t);for(h-=(h+j)%188,l=j;l<h;l+=188)if(71===t[l]){if(d=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((u=l+5+t[l+4])===l+188)continue}else u=l+4;switch(c){case y:d&&(C&&(f=R(C))&&x(f,!1),C={data:[],size:0}),C&&(C.data.push(t.subarray(u,l+188)),C.size+=l+188-u);break;case b:d&&(k&&(f=R(k))&&(v.isAAC?I(f):D(f)),k={data:[],size:0}),k&&(k.data.push(t.subarray(u,l+188)),k.size+=l+188-u);break;case w:d&&(S&&(f=R(S))&&N(f),S={data:[],size:0}),S&&(S.data.push(t.subarray(u,l+188)),S.size+=l+188-u);break;case 0:d&&(u+=t[u]+1),E=this._pmtId=T(t,u);break;case E:d&&(u+=t[u]+1);var P=A(t,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=P.avc)>0&&(g.pid=y),(b=P.audio)>0&&(v.pid=b,v.isAAC=P.isAAC),(w=P.id3)>0&&(_.pid=w),p&&!m&&(o.b.log("reparse from beginning"),p=!1,l=j-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});C&&(f=R(C))?(x(f,!0),g.pesData=null):g.pesData=C,k&&(f=R(k))?(v.isAAC?I(f):D(f),v.pesData=null):(k&&k.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=k),S&&(f=R(S))?(N(f),_.pesData=null):_.pesData=S,null==this.sampleAes?this.remuxer.remux(v,g,_,this._txtTrack,n,a,s):this.decryptAndRemux(v,g,_,this._txtTrack,n,a,s)},e.prototype.decryptAndRemux=function(e,t,n,i,r,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,i,r,a,o)})}else this.decryptAndRemuxAvc(e,t,n,i,r,a,o)},e.prototype.decryptAndRemuxAvc=function(e,t,n,i,r,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,i,r,a,o)})}else this.remuxer.remux(e,t,n,i,r,a,o)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,i){var r,a,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){o.b.log("unkown stream type:"+e[t]);break}case 15:-1===s.audio&&(s.audio=a);break;case 21:-1===s.id3&&(s.id3=a);break;case 219:if(!i){o.b.log("unkown stream type:"+e[t]);break}case 27:-1===s.avc&&(s.avc=a);break;case 3:case 4:n?-1===s.audio&&(s.audio=a,s.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return s},e.prototype._parsePES=function(e){var t,n,i,r,a,s,l,d,c=0,u=e.data;if(!e||0===e.size)return null;for(;u[0].length<19&&u.length>1;){var f=new Uint8Array(u[0].length+u[1].length);f.set(u[0]),f.set(u[1],u[0].length),u[0]=f,u.splice(1,1)}if(1===((t=u[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;192&(n=t[7])&&((s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(s-=8589934592),64&n?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),s-l>54e5&&(o.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),d=(r=t[8])+9,e.size-=d,a=new Uint8Array(e.size);for(var h=0,p=u.length;h<p;h++){var m=(t=u[h]).byteLength;if(d){if(d>m){d-=m;continue}t=t.subarray(d),m-=d,d=0}a.set(t,c),c+=m}return i&&(i-=r+3),{data:a,pts:s,dts:l,len:i}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,n.push(e)):t.dropped++}e.debug.length&&o.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n,i,r,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,d=!1,c=this.pushAccesUnit.bind(this),u=function(e,t,n,i){return{key:e,pts:t,dts:n,units:[],debug:i}};e.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=u(!1,e.pts,e.dts,"")),s.forEach(function(t){switch(t.type){case 1:i=!0,l||(l=a.avcSample=u(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(d&&s.length>4){var f=new w(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(l.key=!0)}break;case 5:i=!0,l||(l=a.avcSample=u(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:i=!0,(n=new w(a.discardEPB(t.data))).readUByte();for(var h=0,p=0,m=!1,g=0;!m&&n.bytesAvailable>1;){h=0;do{h+=g=n.readUByte()}while(255===g);p=0;do{p+=g=n.readUByte()}while(255===g);if(4===h&&0!==n.bytesAvailable){if(m=!0,181===n.readUByte())if(49===n.readUShort())if(1195456820===n.readUInt())if(3===n.readUByte()){var v=n.readUByte(),_=31&v,y=[v,n.readUByte()];for(r=0;r<_;r++)y.push(n.readUByte()),y.push(n.readUByte()),y.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:y})}}else if(p<n.bytesAvailable)for(r=0;r<p;r++)n.readUByte()}break;case 7:if(i=!0,d=!0,!o.sps){var b=(n=new w(t.data)).readSPS();o.width=b.width,o.height=b.height,o.pixelRatio=b.pixelRatio,o.sps=[t.data],o.duration=a._duration;var E=t.data.subarray(1,4),C="avc1.";for(r=0;r<3;r++){var k=E[r].toString(16);k.length<2&&(k="0"+k),C+=k}o.codec=C}break;case 8:i=!0,o.pps||(o.pps=[t.data]);break;case 9:i=!1,o.audFound=!0,l&&c(l,o),l=a.avcSample=u(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&i&&l.units.push(t)}),t&&l&&(c(l,o),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t,n,i,r,a=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,d=l,c=[],u=-1;for(-1===l&&(u=0,r=31&e[0],l=0,a=1);a<o;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(u>=0)i={data:e.subarray(u,a-l-1),type:r},c.push(i);else{var f=this._getLastNalUnit();if(f&&(d&&a<=4-d&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-d)),(n=a-l-1)>0)){var h=new Uint8Array(f.data.byteLength+n);h.set(f.data,0),h.set(e.subarray(0,n),f.data.byteLength),f.data=h}}a<o?(u=a,r=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(u>=0&&l>=0&&(i={data:e.subarray(u,o),type:r,state:l},c.push(i)),0===c.length){var p=this._getLastNalUnit();if(p){var m=new Uint8Array(p.data.byteLength+e.byteLength);m.set(p.data,0),m.set(e,p.data.byteLength),p.data=m}}return s.naluState=l,c},e.prototype.discardEPB=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},e.prototype._parseAACPES=function(e){var t,n,a,s,l,d,u,m=this._audioTrack,g=e.data,v=e.pts,_=this.aacOverFlow,y=this.aacLastPTS;if(_){var b=new Uint8Array(_.byteLength+g.byteLength);b.set(_,0),b.set(g,_.byteLength),g=b}for(a=0,l=g.length;a<l-1&&!c(g,a);a++);if(a&&(a<l-1?(d="AAC PES did not start with ADTS header,offset:"+a,u=!1):(d="no ADTS header found in AAC PES",u=!0),o.b.warn("parsing error:"+d),this.observer.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:u,reason:d}),u))return;if(f(m,this.observer,g,a,this.audioCodec),n=0,t=h(m.samplerate),_&&y){var w=y+t;Math.abs(w-v)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((w-v)/90)),v=w)}for(;a<l;)if(c(g,a)&&a+5<l){var E=p(m,g,a,v,n);if(!E)break;a+=E.length,s=E.sample.pts,n++}else a++;_=a<l?g.subarray(a,l):null,this.aacOverFlow=_,this.aacLastPTS=s},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,i=0,r=0,a=e.pts;r<n;)if(b.isHeader(t,r)){var o=b.appendFrame(this._audioTrack,t,r,a,i);if(!o)break;r+=o.length,i++}else r++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();var S=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,i=m.a.getID3Data(e,0);if(i&&void 0!==m.a.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);t<n;t++)if(b.probe(e,t))return o.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=m.a.getID3Data(e,0),a=m.a.getTimeStamp(r),o=a?90*a:9e4*t,s=r.length,l=e.length,d=0,c=0,u=this._audioTrack,f=[{pts:o,dts:o,data:r}];s<l;)if(b.isHeader(e,s)){var h=b.appendFrame(u,e,s,o,d);if(!h)break;s+=h.length,c=h.sample.pts,d++}else m.a.isHeader(e,s)?(r=m.a.getID3Data(e,s),f.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(u,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}();var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();var A=Math.pow(2,32)-1,R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),r=0,i=8;r<a;r++)t.set(n[r],i),i+=n[r].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(A+1)),r=Math.floor(n%(A+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(A+1)),r=Math.floor(n%(A+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],o=[];for(n=0;n<t.sps.length;n++)r=(i=t.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)r=(i=t.pps[n]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,d=t.height,c=t.pixelRatio[0],u=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,r=t.width,a=t.height,o=Math.floor(i/(A+1)),s=Math.floor(i%(A+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),r=t.id,a=Math.floor(n/(A+1)),o=Math.floor(n%(A+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,o,s,l,d=t.samples||[],c=d.length,u=12+16*c,f=new Uint8Array(u);for(n+=8+u,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)a=(r=d[i]).duration,o=r.size,s=r.flags,l=r.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var n,i=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),n.set(i,e.FTYP.byteLength),n},e}();var x=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.typeSupported=i;var a=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,r,a,s,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var d=e.samples.length,c=t.samples.length,u=a,f=a;if(d&&c){var h=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;u+=Math.max(0,h),f+=Math.max(0,-h)}if(d){e.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p=this.remuxAudio(e,u,s,l);if(c){var m=void 0;p&&(m=p.endPTS-p.startPTS),t.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,f,s,m,l)}}else{var g=void 0;c&&(g=this.remuxVideo(t,f,s,l)),g&&e.codec&&this.remuxEmptyAudio(e,u,s,g)}}n.samples.length&&this.remuxID3(n,a),r.samples.length&&this.remuxText(r,a),this.observer.trigger(i.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var a,s,l=this.observer,d=e.samples,c=t.samples,u=this.typeSupported,f="audio/mp4",h={},p={tracks:h},m=void 0===this._initPTS;if(m&&(a=s=1/0),e.config&&d.length&&(e.timescale=e.samplerate,o.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(f="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),h.audio={container:f,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:R.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(a=s=d[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&c.length){var g=t.inputTimeScale;t.timescale=g,h.video={container:"video/mp4",codec:t.codec,initSegment:R.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(a=Math.min(a,c[0].pts-g*n),s=Math.min(s,c[0].dts-g*n),this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:a}))}Object.keys(h).length?(l.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,m&&(this._initPTS=a,this._initDTS=s)):l.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,a,s){var l,d,c,u,f,h,p,m=8,g=e.timescale,v=e.samples,_=[],y=v.length,b=this._PTSNormalize,w=this._initDTS,E=this.nextAvcDts,C=this.isSafari;C&&(n|=v.length&&E&&(s&&Math.abs(t-E/g)<.1||Math.abs(v[0].pts-E-w)<g/5)),n||(E=t*g),v.forEach(function(e){e.pts=b(e.pts-w,E),e.dts=b(e.dts-w,E)}),v.sort(function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||(i||e.id-t.id)});var k=v.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(k<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(k/90)+" ms to overcome this issue");for(var S=0;S<v.length;S++)v[S].dts+=k}var T=v[0];f=Math.max(T.dts,0),u=Math.max(T.pts,0);var A=Math.round((f-E)/90);n&&A&&(A>1?o.b.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&o.b.log("AVC:"+-A+" ms overlapping between fragments detected"),f=E,v[0].dts=f,u=Math.max(u-A,E),v[0].pts=u,o.b.log("Video/PTS/DTS adjusted: "+Math.round(u/90)+"/"+Math.round(f/90)+",delta:"+A+" ms")),T=v[v.length-1],p=Math.max(T.dts,0),h=Math.max(T.pts,0,p),C&&(l=Math.round((p-f)/(v.length-1)));for(var x=0,I=0,D=0;D<y;D++){for(var N=v[D],j=N.units,P=j.length,L=0,O=0;O<P;O++)L+=j[O].data.length;I+=L,x+=P,N.length=L,N.dts=C?f+D*l:Math.max(N.dts,f),N.pts=Math.max(N.pts,N.dts)}var M=I+4*x+8;try{d=new Uint8Array(M)}catch(e){return void this.observer.trigger(i.a.ERROR,{type:r.b.MUX_ERROR,details:r.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var F=new DataView(d.buffer);F.setUint32(0,M),d.set(R.types.mdat,4);for(var B=0;B<y;B++){for(var H=v[B],U=H.units,W=0,z=void 0,G=0,Y=U.length;G<Y;G++){var $=U[G],V=$.data,q=$.data.byteLength;F.setUint32(m,q),m+=4,d.set(V,m),m+=q,W+=4+q}if(C)z=Math.max(0,l*Math.round((H.pts-H.dts)/l));else{if(B<y-1)l=v[B+1].dts-H.dts;else{var K=this.config,X=H.dts-v[B>0?B-1:B].dts;if(K.stretchShortVideoTrack){var Q=K.maxBufferHole,J=K.maxSeekHole,Z=Math.floor(Math.min(Q,J)*g),ee=(a?u+a*g:this.nextAudioPts)-H.pts;ee>Z?((l=ee-X)<0&&(l=X),o.b.log("It is approximately "+ee/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=X}else l=X}z=Math.round(H.pts-H.dts)}_.push({size:W,duration:l,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:H.key?2:1,isNonSync:H.key?0:1}})}this.nextAvcDts=p+l;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=_[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=_,c=R.moof(e.sequenceNumber++,f,e),e.samples=[];var ie={data1:c,data2:d,startPTS:u/g,endPTS:(h+l)/g,startDTS:f/g,endDTS:this.nextAvcDts/g,type:"video",nb:_.length,dropped:te};return this.observer.trigger(i.a.FRAG_PARSING_DATA,ie),ie},e.prototype.remuxAudio=function(e,t,n,a){var s,l,d,c,u,f,h,p=e.inputTimeScale,m=e.timescale,g=p/m,v=(e.isAAC?1024:1152)*g,_=this._PTSNormalize,y=this._initDTS,b=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,E=[],C=this.nextAudioPts;if(n|=w.length&&C&&(a&&Math.abs(t-C/p)<.1||Math.abs(w[0].pts-C-y)<20*v),w.forEach(function(e){e.pts=e.dts=_(e.pts-y,t*p)}),0!==(w=w.filter(function(e){return e.pts>=0})).length){if(n||(C=a?t*p:w[0].pts),e.isAAC)for(var k=this.config.maxAudioFramesDrift,S=0,A=C;S<w.length;){var x,I=w[S];x=I.pts-A;var D=Math.abs(1e3*x/p);if(x<=-k*v)o.b.warn("Dropping 1 audio frame @ "+(A/p).toFixed(3)+"s due to "+Math.round(D)+" ms overlap."),w.splice(S,1),e.len-=I.unit.length;else if(x>=k*v&&D<1e4&&A){var N=Math.round(x/v);o.b.warn("Injecting "+N+" audio frame @ "+(A/p).toFixed(3)+"s due to "+Math.round(1e3*x/p)+" ms gap.");for(var j=0;j<N;j++){var P=Math.max(A,0);(d=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=I.unit.subarray()),w.splice(S,0,{unit:d,pts:P,dts:P}),e.len+=d.length,A+=v,S++}I.pts=I.dts=A,A+=v,S++}else Math.abs(x),I.pts=I.dts=A,A+=v,S++}for(var L=0,O=w.length;L<O;L++){var M=w[L],F=M.unit,B=M.pts;if(void 0!==h)l.duration=Math.round((B-h)/g);else{var H=Math.round(1e3*(B-C)/p),U=0;if(n&&e.isAAC&&H){if(H>0&&H<1e4)U=Math.round((B-C)/v),o.b.log(H+" ms hole between AAC samples detected,filling it"),U>0&&((d=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=F.subarray()),e.len+=U*d.length);else if(H<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(C/p).toFixed(3)+"s/"+(B/p).toFixed(3)+"s/"+-H+"ms"),e.len-=F.byteLength;continue}B=C}if(f=B,!(e.len>0))return;var W=b?e.len:e.len+8;s=b?0:8;try{c=new Uint8Array(W)}catch(e){return void this.observer.trigger(i.a.ERROR,{type:r.b.MUX_ERROR,details:r.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:W,reason:"fail allocating audio mdat "+W})}b||(new DataView(c.buffer).setUint32(0,W),c.set(R.types.mdat,4));for(var z=0;z<U;z++)(d=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=F.subarray()),c.set(d,s),s+=d.byteLength,l={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(l)}c.set(F,s);var G=F.byteLength;s+=G,l={size:G,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(l),h=B}var Y=0,$=E.length;if($>=2&&(Y=E[$-2].duration,l.duration=Y),$){this.nextAudioPts=C=h+g*Y,e.len=0,e.samples=E,u=b?new Uint8Array:R.moof(e.sequenceNumber++,f/g,e),e.samples=[];var V=f/p,q=C/p,K={data1:u,data2:c,startPTS:V,endPTS:q,startDTS:V,endDTS:q,type:"audio",nb:$};return this.observer.trigger(i.a.FRAG_PARSING_DATA,K),K}return null}},e.prototype.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),s=this.nextAudioPts,l=(void 0!==s?s:i.startDTS*r)+this._initDTS,d=i.endDTS*r+this._initDTS,c=1024*a,u=Math.ceil((d-l)/c),f=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(o.b.warn("remux empty Audio"),f){for(var h=[],p=0;p<u;p++){var m=l+p*c;h.push({unit:f,pts:m,dts:m}),e.len+=f.length}e.samples=h,this.remuxAudio(e,t,n)}else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e,t){var n,r=e.samples.length,a=e.inputTimeScale,o=this._initPTS,s=this._initDTS;if(r){for(var l=0;l<r;l++)(n=e.samples[l]).pts=(n.pts-o)/a,n.dts=(n.dts-s)/a;this.observer.trigger(i.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,r=e.samples.length,a=e.inputTimeScale,o=this._initPTS;if(r){for(var s=0;s<r;s++)(n=e.samples[s]).pts=(n.pts-o)/a;this.observer.trigger(i.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}();var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,r,a,o,s,l){var d=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),d.trigger(i.a.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,nb:1,dropped:0}),d.trigger(i.a.FRAG_PARSED)},e}();var D=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.typeSupported=n,this.config=i,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,r,o,s,l,d,c,u,f,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new a.a(this.observer,this.config));var m,g=this;try{m=performance.now()}catch(e){m=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a;try{a=performance.now()}catch(e){a=Date.now()}g.observer.trigger(i.a.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,o,s,l,d,c,u,f,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,o,s,l,d,c,u,f,h)},e.prototype.pushDecrypted=function(e,t,n,a,o,s,l,d,c,u,f,h){var p=this.demuxer;if(!p||l&&!this.probe(e)){for(var m=this.observer,v=this.typeSupported,y=this.config,b=[{demux:k,remux:x},{demux:_,remux:I},{demux:g,remux:x},{demux:S,remux:x}],w=0,E=b.length;w<E;w++){var C=b[w],T=C.demux.probe;if(T(e)){var A=this.remuxer=new C.remux(m,y,v,this.vendor);p=new C.demux(m,A,y,v),this.probe=T;break}}if(!p)return void m.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var R=this.remuxer;(l||d)&&(p.resetInitSegment(n,a,o,u),R.resetInitSegment()),l&&(p.resetTimeStamp(h),R.resetTimeStamp(h)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,f)},e}();t.a=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};n.d(i,"newCue",function(){return Ee});var r=n(6),a=n.n(r),o=n(1),s=n(2),l=n(0),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.unregisterListeners()},e.prototype.isEventHandler=function(){return"object"===d(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){l.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(o.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();var u=/^(\d+)x(\d+)$/,f=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,h=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=u.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(f.lastIndex=0;null!==(t=f.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}(),p={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function m(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,y=/#EXT-X-MEDIA:(.*)/g,b=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,E=function(){function e(){v(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return g(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=a.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),C=function(){function e(){v(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new E).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},e.prototype.cloneObj=function(e){return JSON.parse(JSON.stringify(e))},g(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=a.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}();function k(e,t){if(!e)return null;for(var n=null,i=0;i<e.length;i++){var r=e[i];r.id===t&&(n=r)}return n}var S=function(e){function t(n){v(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:"manifest"})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:"audioTrack",id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})},t.prototype.load=function(e,t){var n=this.loaders[t.type];if(void 0!==n){var i=n.context;if(i&&i.url===e)return void l.b.trace("playlist request ongoing");l.b.warn("abort previous loader for type:"+t.type),n.abort()}var r=this.hls.config,a=void 0,o=void 0,s=void 0,d=void 0;"manifest"===t.type?(a=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,d=r.manifestLoadingMaxRetryTimeout):"level"===t.type?(a=0,o=r.levelLoadingTimeOut):(a=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,d=r.levelLoadingMaxRetryTimeout,l.b.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader=void 0!==r.pLoader?new r.pLoader(r):new r.loader(r),t.url=e,t.responseType="";var c,u;c={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:d},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,c,u)},t.prototype.resolve=function(e,t){return a.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.prototype.parseMasterPlaylist=function(e,t){var n=[],i=void 0;function r(e,t){["video","audio"].forEach(function(n){var i=e.filter(function(e){return function(e,t){var n=p[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)});if(i.length){var r=i.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter(function(e){return-1===i.indexOf(e)})}}),t.unknownCodecs=e}for(_.lastIndex=0;null!=(i=_.exec(e));){var a={},o=a.attrs=new h(i[1]);a.url=this.resolve(i[2],t);var s=o.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),a.name=o.NAME,r([].concat((o.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=this.avc1toavcoti(a.videoCodec)),n.push(a)}return n},t.prototype.parseMasterPlaylistMedia=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=void 0,a=[],o=0;for(y.lastIndex=0;null!==(r=y.exec(e));){var s={},l=new h(r[1]);if(l.TYPE===n){if(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=n,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),i.length){var d=k(i,s.groupId);s.audioCodec=d?d.codec:i[0].codec}s.id=o++,a.push(s)}}return a},t.prototype.avc1toavcoti=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},t.prototype.parseLevelPlaylist=function(e,t,n,i){var r,a,o=0,s=0,d={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new E,u=0,f=null,p=new C;for(b.lastIndex=0;null!==(r=b.exec(e));){var m=r[1];if(m){p.duration=parseFloat(m);var g=(" "+r[2]).slice(1);p.title=g||null,p.tagList.push(g?["INF",m,g]:["INF",m])}else if(r[3]){if(!isNaN(p.duration)){var v=o++;p.type=i,p.start=s,p.levelkey=c,p.sn=v,p.level=n,p.cc=u,p.baseurl=t,p.relurl=(" "+r[3]).slice(1),d.fragments.push(p),f=p,s+=p.duration,p=new C}}else if(r[4]){if(p.rawByteRange=(" "+r[4]).slice(1),f){var _=f.byteRangeEndOffset;_&&(p.lastByteRangeEndOffset=_)}}else if(r[5])p.rawProgramDateTime=(" "+r[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),void 0===d.programDateTime&&(d.programDateTime=new Date(new Date(Date.parse(r[5]))-1e3*s));else{for(r=r[0].match(w),a=1;a<r.length&&void 0===r[a];a++);var y=(" "+r[a+1]).slice(1),k=(" "+r[a+2]).slice(1);switch(r[a]){case"#":p.tagList.push(k?[y,k]:[y]);break;case"PLAYLIST-TYPE":d.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":o=d.startSN=parseInt(y);break;case"TARGETDURATION":d.targetduration=parseFloat(y);break;case"VERSION":d.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":u++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(y);break;case"KEY":var S=new h(y),T=S.enumeratedString("METHOD"),A=S.URI,R=S.hexadecimalInteger("IV");T&&(c=new E,A&&["AES-128","SAMPLE-AES"].indexOf(T)>=0&&(c.method=T,c.baseuri=t,c.reluri=A,c.key=null,c.iv=R));break;case"START":var x=new h(y).decimalFloatingPoint("TIME-OFFSET");isNaN(x)||(d.startTimeOffset=x);break;case"MAP":var I=new h(y);p.relurl=I.URI,p.rawByteRange=I.BYTERANGE,p.baseurl=t,p.level=n,p.type=i,p.sn="initSegment",d.initSegment=p,p=new C;break;default:l.b.warn("line parsed but not handled: "+r)}}}return(p=f)&&!p.relurl&&(d.fragments.pop(),s-=p.duration),d.totalduration=s,d.averagetargetduration=s/d.fragments.length,d.endSN=o-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=u,d},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=e.url,d=n.type,c=n.id,u=n.level,f=this.hls;if(this.loaders[d]=void 0,void 0!==a&&0!==a.indexOf("data:")||(a=n.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var h="audioTrack"!==d&&"subtitleTrack"!==d,p=isNaN(u)?isNaN(c)?0:c:u,m=this.parseLevelPlaylist(r,a,p,"audioTrack"===d?"audio":"subtitleTrack"===d?"subtitle":"main");m.tload=t.tload,"manifest"===d&&f.trigger(o.a.MANIFEST_LOADED,{levels:[{url:a,details:m}],audioTracks:[],url:a,stats:t,networkDetails:i}),t.tparsed=performance.now(),m.targetduration?h?f.trigger(o.a.LEVEL_LOADED,{details:m,level:u||0,id:c||0,stats:t,networkDetails:i}):"audioTrack"===d?f.trigger(o.a.AUDIO_TRACK_LOADED,{details:m,id:c,stats:t,networkDetails:i}):"subtitleTrack"===d&&f.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:m,id:c,stats:t,networkDetails:i}):f.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration",networkDetails:i})}else{var g=this.parseMasterPlaylist(r,a);if(g.length){var v=g.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),_=this.parseMasterPlaylistMedia(r,a,"AUDIO",v),y=this.parseMasterPlaylistMedia(r,a,"SUBTITLES");if(_.length){var b=!1;_.forEach(function(e){e.url||(b=!0)}),!1===b&&g[0].audioCodec&&!g[0].attrs.AUDIO&&(l.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),_.unshift({type:"main",name:"main"}))}f.trigger(o.a.MANIFEST_LOADED,{levels:g,audioTracks:_,subtitles:y,url:a,stats:t,networkDetails:i})}else f.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest",networkDetails:i})}else f.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter",networkDetails:i})},t.prototype.loaderror=function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=s.a.MANIFEST_LOAD_ERROR,i=!0;break;case"level":n=s.a.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":n=s.a.AUDIO_TRACK_LOAD_ERROR,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:n,fatal:i,url:a.url,loader:a,response:e,context:t,networkDetails:r})},t.prototype.loadtimeout=function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=s.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":n=s.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":n=s.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:n,fatal:i,url:a.url,loader:a,context:t,networkDetails:r})},t}(c);var T=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.FRAG_LOADING));return i.loaders={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=this.hls.config;t.loaded=0,i&&(l.b.warn("abort previous fragment loader for type:"+n),i.abort()),i=this.loaders[n]=t.loader=void 0!==r.fLoader?new r.fLoader(r):new r.loader(r);var a,o,s=void 0;s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var d=t.byteRangeStartOffset,c=t.byteRangeEndOffset;isNaN(d)||isNaN(c)||(s.rangeStart=d,s.rangeEnd=c),a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(s,a,o)},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:r,frag:a,stats:t,networkDetails:i})},t.prototype.loaderror=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},t.prototype.loadtimeout=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},t.prototype.loadprogress=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.frag;r.loaded=e.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:i})},t}(c);var A=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=t.decryptdata,a=r.uri;if(a!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;i&&(l.b.warn("abort previous key loader for type:"+n),i.abort()),t.loader=this.loaders[n]=new s.loader(s),this.decrypturl=a,this.decryptkey=null;var d,c,u;d={url:a,frag:t,responseType:"arraybuffer"},c={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(d,c,u)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(o.a.KEY_LOADED,{frag:i})},t.prototype.loaderror=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(c),R={search:function(e,t){for(var n=0,i=e.length-1,r=null,a=null;n<=i;){var o=t(a=e[r=(n+i)/2|0]);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}},x={isBuffered:function(e,t){try{if(e)for(var n=e.buffered,i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}catch(e){}return!1},bufferInfo:function(e,t,n){try{if(e){var i,r=e.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var i,r,a,o,s,l=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var d=l.length;if(d){var c=l[d-1].end;e[s].start-c<n?e[s].end>c&&(l[d-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,i=0,r=a=t;s<l.length;s++){var u=l[s].start,f=l[s].end;if(t+n>=u&&t<f)r=u,i=(a=f)-t;else if(t+n<u){o=u;break}}return{len:i,start:r,end:a,nextStart:o}}},I=n(7),D=n(5),N=n.n(D),j=n(9),P=n.n(j);function L(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var O=L(),M=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.id=n;var i=this.observer=new N.a,r=t.config;i.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))};var a=function(e,n){(n=n||{}).frag=this.frag,n.id=this.id,t.trigger(e,n)}.bind(this);i.on(o.a.FRAG_DECRYPTED,a),i.on(o.a.FRAG_PARSING_INIT_SEGMENT,a),i.on(o.a.FRAG_PARSING_DATA,a),i.on(o.a.FRAG_PARSED,a),i.on(o.a.ERROR,a),i.on(o.a.FRAG_PARSING_METADATA,a),i.on(o.a.FRAG_PARSING_USERDATA,a),i.on(o.a.INIT_PTS_FOUND,a);var d={mp4:O.isTypeSupported("video/mp4"),mpeg:O.isTypeSupported("audio/mpeg"),mp3:O.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){l.b.log("demuxing in webworker");var u=void 0;try{u=this.w=P()(10),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(e){t.trigger(o.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:d,vendor:c,id:n,config:JSON.stringify(r)})}catch(e){l.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&URL.revokeObjectURL(u.objectURL),this.demuxer=new I.a(i,d,r,c),this.w=void 0}}else this.demuxer=new I.a(i,d,r,c)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,n,i,r,a,o,s){var d=this.w,c=isNaN(r.startDTS)?r.start:r.startDTS,u=r.decryptdata,f=this.frag,h=!(f&&r.cc===f.cc),p=!(f&&r.level===f.level),m=f&&r.sn===f.sn+1,g=!p&&m;if(h&&l.b.log(this.id+":discontinuity detected"),p&&l.b.log(this.id+":switch detected"),this.frag=r,d)d.postMessage({cmd:"demux",data:e,decryptdata:u,initSegment:t,audioCodec:n,videoCodec:i,timeOffset:c,discontinuity:h,trackSwitch:p,contiguous:g,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var v=this.demuxer;v&&v.push(e,u,t,n,i,c,h,p,g,a,o,s)}},e.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case o.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}();function F(e,t,n){var i=e[t],r=e[n],a=r.startPTS;isNaN(a)?r.start=n>t?i.start+i.duration:Math.max(i.start-r.duration,0):n>t?(i.duration=a-i.start,i.duration<0&&l.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-a,r.duration<0&&l.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function B(e,t,n,i,r,a){var o=n;if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),i=Math.max(i,t.endPTS),r=Math.min(r,t.startDTS),a=Math.max(a,t.endDTS)}var l=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=i,t.startDTS=r,t.endDTS=a,t.duration=i-n;var d,c,u,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for(d=f-e.startSN,(c=e.fragments)[d]=t,u=d;u>0;u--)F(c,u,u-1);for(u=d;u<c.length-1;u++)F(c,u,u+1);return e.PTSKnown=!0,l}function H(e,t){var n,i=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=e.fragments,s=t.fragments,d=0;if(r<i)t.PTSKnown=!1;else{for(var c=i;c<=r;c++){var u=o[a+c],f=s[c];f&&u&&(d=u.cc-f.cc,isNaN(u.startPTS)||(f.start=f.startPTS=u.startPTS,f.endPTS=u.endPTS,f.duration=u.duration,f.backtracked=u.backtracked,f.dropped=u.dropped,n=f))}if(d)for(l.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<s.length;c++)s[c].cc+=d;if(n)B(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(a>=0&&a<o.length){var h=o[a].start;for(c=0;c<s.length;c++)s[c].start+=h}t.PTSKnown=e.PTSKnown}}var U={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function W(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function z(e,t,n){if(function(e,t,n){var i=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(i=!0),i}(e,t,n)){var i=function(e,t){var n=e.fragments,i=t.fragments;if(i.length&&n.length){var r=function(e,t){for(var n=null,i=0;i<e.length;i+=1){var r=e[i];if(r&&r.cc===t){n=r;break}}return n}(n,i[0].cc);if(r&&(!r||r.startPTS))return r;l.b.log("No frag in previous level to align on")}else l.b.log("No fragments to align")}(t.details,n);i&&(l.b.log("Adjusting PTS using last level due to CC increase within current level"),W(i.start,n))}if(!1===n.PTSKnown&&t&&t.details){var r=t.details.programDateTime,a=(n.programDateTime-r)/1e3+t.details.fragments[0].start;isNaN(a)||(l.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),W(a,n))}}var G=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var Y={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},$=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.LEVEL_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_LOAD_EMERGENCY_ABORTED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_SWITCHED,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state=Y.STOPPED,i.ontick=i.tick.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),c.prototype.destroy.call(this),this.state=Y.STOPPED},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(l.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Y.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=Y.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Y.STOPPED,this.forceStartLoad=!1},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){switch(this.state){case Y.ERROR:break;case Y.BUFFER_FLUSHING:this.fragLoadError=0;break;case Y.IDLE:this._doTickIdle();break;case Y.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=Y.IDLE);break;case Y.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(l.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=Y.IDLE);break;case Y.ERROR:case Y.STOPPED:case Y.FRAG_LOADING:case Y.PARSING:case Y.PARSED:case Y.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,a=this.levels[r];if(a){var s=a.bitrate,d=void 0;d=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,d=Math.min(d,t.maxMaxBufferLength);var c=x.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,t.maxBufferHole),u=c.len;if(!(u>=d)){l.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+d.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var f=a.details;if(void 0===f||!0===f.live&&this.levelLastLoaded!==r)this.state=Y.WAITING_LEVEL;else{var h=this.fragPrevious;if(!f.live&&h&&!h.backtracked&&h.sn===f.endSN&&!c.nextStart)if(Math.min(n.duration,h.start+h.duration)-Math.max(c.end,h.start)<=Math.max(.2,h.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(o.a.BUFFER_EOS,p),void(this.state=Y.ENDED)}this._fetchPayloadOrEos(i,c,f)}}}}},t.prototype._fetchPayloadOrEos=function(e,t,n){var i=this.fragPrevious,r=this.level,a=n.fragments,o=a.length;if(0!==o){var s=a[0].start,d=a[o-1].start+a[o-1].duration,c=t.end,u=void 0;if(n.initSegment&&!n.initSegment.data)u=n.initSegment;else if(n.live){var f=this.config.initialLiveManifestSize;if(o<f)return void l.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+f);if(null===(u=this._ensureFragmentAtLivePoint(n,c,s,d,i,a,o)))return}else c<s&&(u=a[0]);u||(u=this._findFragment(s,i,o,a,c,d,n)),u&&this._loadFragmentOrKey(u,r,n,e,c)}},t.prototype._ensureFragmentAtLivePoint=function(e,t,n,i,r,a,o){var s=this.hls.config,d=this.media,c=void 0,u=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,i-u)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);l.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,d&&d.readyState&&d.duration>f&&(d.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>i&&d&&d.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r){var h=r.sn+1;if(h>=e.startSN&&h<=e.endSN){var p=a[h-e.startSN];r.cc===p.cc&&(c=p,l.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=R.search(a,function(e){return r.cc-e.cc}))&&l.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=a[Math.min(o-1,Math.round(o/2))],l.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},t.prototype._findFragment=function(e,t,n,i,r,a,o){var s=this.hls.config,d=void 0,c=void 0,u=s.maxFragLookUpTolerance,f=t?i[t.sn-i[0].sn+1]:void 0,h=function(e){var t=Math.min(u,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=r?1:e.start-t>r&&e.start?-1:0};if(r<a?(r>a-u&&(u=0),c=f&&!h(f)?f:R.search(i,h)):c=i[n-1],c){var p=(d=c).sn-o.startSN,m=t&&d.level===t.level,g=i[p-1],v=i[p+1];if(t&&d.sn===t.sn)if(m&&!d.backtracked)if(d.sn<o.endSN){var _=t.deltaPTS;_&&_>s.maxBufferHole&&t.dropped&&p?(d=g,l.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(d=v,l.b.log("SN just loaded, load next one: "+d.sn))}else d=null;else d.backtracked&&(v&&v.backtracked?(l.b.warn("Already backtracked from fragment "+v.sn+", will not backtrack to fragment "+d.sn+". Loading fragment "+v.sn),d=v):(l.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),d.dropped=0,g?(g.loadCounter&&g.loadCounter--,(d=g).backtracked=!0):p&&(d=null)))}return d},t.prototype._loadFragmentOrKey=function(e,t,n,i,r){var a=this.hls,d=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(l.b.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var c=d.fragLoadingLoopThreshold;if(e.loadCounter>c&&Math.abs(this.fragLoadIdx-e.loadIdx)<c)return void a.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),a.trigger(o.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new M(a,"main")),void(this.state=Y.FRAG_LOADING)}l.b.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=Y.KEY_LOADING,a.trigger(o.a.KEY_LOADING,{frag:e})},t.prototype.getBufferedFrag=function(e){return R.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),x.isBuffered(n,t)?e=this.getBufferedFrag(t):x.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(o.a.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(o.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},t.prototype.immediateLevelSwitch=function(){if(l.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,x.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n=void 0,i=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)n=0;else{var r=this.hls.nextLoadLevel,a=this.levels[r],o=this.fragLastKbps;n=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((i=this.getBufferedFrag(e.currentTime+n))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=Y.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(o.a.BUFFER_FLUSHING,n)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(l.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||l.b.log("media seeking to "+t.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:e,r=x.bufferInfo(i,t,this.config.maxBufferHole);if(this.state===Y.FRAG_LOADING){var a=this.fragCurrent;if(0===r.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,d=a.start+a.duration+o;t<s||t>d?(a.loader&&(l.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=Y.IDLE):l.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===Y.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=Y.IDLE);e&&(this.lastCurrentTime=t),this.state!==Y.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||l.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){l.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){l.b.log("trigger BUFFER_RESET"),this.hls.trigger(o.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t,n=!1,i=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&l.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,n=e.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],a=t.totalduration,s=0;if(l.b.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var d=r.details;d&&t.fragments.length>0?(H(d,t),s=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,d),t.PTSKnown&&!isNaN(s)?l.b.log("live playlist sliding:"+s.toFixed(3)):(l.b.log("live playlist - outdated PTS, unknown sliding"),z(this.fragPrevious,i,t))):(l.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,z(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=n,this.hls.trigger(o.a.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=t.startTimeOffset;isNaN(c)?t.live?(this.startPosition=this.computeLivePosition(s,t),l.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(c<0&&(l.b.log("negative start time offset "+c+", count from end of last fragment"),c=s+a+c),l.b.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Y.WAITING_LEVEL&&(this.state=Y.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===Y.KEY_LOADING&&(this.state=Y.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===Y.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var i=e.stats,r=this.levels[t.level],a=r.details;if(l.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=i,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=Y.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=Y.IDLE,i.tparsed=i.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(o.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state=Y.PARSING;var s=a.totalduration,d=t.level,c=t.sn,u=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(l.b.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,l.b.log("Parsing "+c+" of ["+a.startSN+" ,"+a.endSN+"],level "+d+", cc "+t.cc);var f=this.demuxer;f||(f=this.demuxer=new M(this.hls,"main"));var h=this.media,p=!(h&&h.seeking)&&(a.PTSKnown||!a.live),m=a.initSegment?a.initSegment.data:[];f.push(e.payload,m,u,r.videoCodec,t,s,p,void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Y.PARSING){var i,r,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,r=a.audio){var s=this.levels[this.level].audioCodec,d=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(l.b.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===d.indexOf("firefox")&&(s="mp4a.40.5"),-1!==d.indexOf("android")&&"audio/mpeg"!==r.container&&(s="mp4a.40.2",l.b.log("Android: force audio codec to "+s)),r.levelCodec=s,r.id=e.id}for(i in(r=a.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(o.a.BUFFER_CODECS,a),a){r=a[i],l.b.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var c=r.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,{type:i,data:c,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===Y.PARSING){var r=this.levels[this.level],a=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),l.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)l.b.warn("Already backtracked on this fragment, appending with the gap");else{var s=r.details;if(!s||a.sn!==s.startSN)return l.b.warn("missing video frame(s), backtracking fragment"),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=Y.IDLE,this.fragPrevious=a,void this.tick();l.b.warn("missing video frame(s) on first frag, appending with gap")}else a.backtracked=!1;var d=B(r.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),c=this.hls;c.trigger(o.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:d,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===Y.PARSING&&(t.appended=!0,t.pendingBuffering=!0,c.trigger(o.a.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Y.PARSING&&(this.stats.tparsed=performance.now(),this.state=Y.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){l.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(l.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Y.IDLE}var r=this.hls;r.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(l.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,n=void 0,i=void 0,r=!1;for(var a in t){var o=t[a];"main"===o.id?(i=a,n=o,"video"===a&&(this.videoBuffer=t[a].buffer)):r=!0}r&&n?(l.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==Y.PARSING&&t!==Y.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==Y.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;l.b.log("main buffered : "+U.toString(t.buffered));var n=this._bufferedFrags.filter(function(e){return x.isBuffered(t,(e.startPTS+e.endPTS)/2)});n.push(e),this._bufferedFrags=n.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.state=Y.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&x.isBuffered(this.media,this.media.currentTime)&&x.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);t.loadCounter=0,l.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Y.FRAG_LOADING_WAITING_RETRY}else l.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Y.ERROR;break;case s.a.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=Y.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=Y.ERROR));break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:this.state!==Y.ERROR&&(e.fatal?(this.state=Y.ERROR,l.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Y.WAITING_LEVEL||(this.state=Y.IDLE));break;case s.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==Y.PARSING&&this.state!==Y.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=Y.IDLE):(l.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,l.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*t.fragLoadingLoopThreshold))},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,i=this.mediaBuffer?this.mediaBuffer:e,r=i.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var a=e.seeking?n:this.startPosition,d=x.isBuffered(i,a),c=r.start(0),u=!d&&Math.abs(a-c)<t.maxSeekHole;(n!==a||u)&&(l.b.log("target start position:"+a),u&&(a=c,l.b.log("target start position not buffered, seek to buffered.start(0) "+a)),l.b.log("adjust currentTime from "+n+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var f=x.bufferInfo(e,n,0),h=!(e.paused||e.ended||0===e.buffered.length);if(n!==this.lastCurrentTime)this.stallReported&&(l.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(h){var p=performance.now(),m=this.hls;if(this.stalled){var g=p-this.stalled,v=f.len,_=this.nudgeRetry||0;if(v<=.5&&g>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,l.b.warn("playback stalling in low buffer @"+n),m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:v}));var y=f.nextStart,b=y-n;if(y&&b<t.maxSeekHole&&b>0){this.nudgeRetry=++_;var w=_*t.nudgeOffset;l.b.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+y+" + nudge "+w),e.currentTime=y+w,this.stalled=void 0,m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:y+w-n})}}else if(v>.5&&g>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,l.b.warn("playback stalling in high buffer @"+n),m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:v})),this.stalled=void 0,this.nudgeRetry=++_,_<t.nudgeMaxRetry){var E=e.currentTime,C=E+_*t.nudgeOffset;l.b.log("adjust currentTime from "+E+" to "+C),e.currentTime=C,m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else l.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=p,this.stallReported=!1}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=Y.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return x.isBuffered(e,(t.startPTS+t.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=Y.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},G(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,l.b.log("main stream:"+t+"->"+e),this.hls.trigger(o.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(c),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var q=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.FRAG_LOADED,o.a.ERROR));return i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},t.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],n=void 0,i={},r=null,a=!1,d=!1,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),u=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,a=a||!!e.videoCodec,d=d||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===c&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(r=i[e.bitrate])?(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,t.push(e)):r.url.push(e.url)}),!0===a&&!0===d&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||m(t))&&(!n||m(n))}),e.audioTracks&&(u=e.audioTracks.filter(function(e){return!e.audioCodec||m(e.audioCodec,"audio")})),t.length>0){n=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var f=0;f<t.length;f++)if(t[f].bitrate===n){this._firstLevel=f,l.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:t,audioTracks:u,firstLevel:this._firstLevel,stats:e.stats,audio:d,video:a,altAudio:u.length>0})}else this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this.currentLevelIndex!==e){l.b.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,n.trigger(o.a.LEVEL_SWITCH,i),n.trigger(o.a.LEVEL_SWITCHING,i)}var r=t[e],a=r.details;if(!a||!0===a.live){var d=r.urlId;n.trigger(o.a.LEVEL_LOADING,{url:r.url[d],level:e,id:d})}}else n.trigger(o.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(!0!==e.fatal){var t=!1,n=!1,i=void 0;switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.FRAG_LOOP_LOADING_ERROR:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:i=e.frag.level,n=!0;break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:i=e.context.level,t=!0;break;case s.a.REMUX_ALLOC_ERROR:i=e.level,t=!0}void 0!==i&&this.recoverLevel(e,i,t,n)}else e.type===s.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.recoverLevel=function(e,t,n,i){var r=this,a=this.hls.config,o=e.details,s=this._levels[t],d=void 0,c=void 0,u=void 0;if(s.loadError++,s.fragmentError=i,!0===n){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return l.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(e.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return r.loadLevel()},c),e.levelRetry=!0,this.levelRetryCount++,l.b.warn("level controller, "+o+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}!0!==n&&!0!==i||((d=s.url.length)>1&&s.loadError<d?(l.b.warn("level controller, "+o+" for level "+t+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%d,s.details=void 0):-1===this.manualLevelIndex?(u=0===t?this._levels.length-1:t-1,l.b.warn("level controller, "+o+": switch to "+u),this.hls.nextAutoLevel=this.currentLevelIndex=u):!0===i&&(l.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,n=e.level;if(n===this.currentLevelIndex){var i=this._levels[n];!1===i.fragmentError&&(i.loadError=0,this.levelRetryCount=0);var r=e.details;if(r.live){var a=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),o=i.details;o&&r.endSN===o.endSN&&(a/=2,l.b.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),l.b.log("live playlist, reload in "+a+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.cleanTimer()}},t.prototype.loadLevel=function(){var e=void 0,t=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(e=this._levels[this.currentLevelIndex])&&e.url.length>0&&(t=e.urlId,this.hls.trigger(o.a.LEVEL_LOADING,{url:e.url[t],level:this.currentLevelIndex,id:t}))},V(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(c),K=n(3);var X=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){this.media=void 0},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var a=K.a.getID3Frames(n[r].data);if(a){var o=n[r].pts,s=r<n.length-1?n[r+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var l=0;l<a.length;l++){var d=a[l];if(!K.a.isTimeStampFrame(d)){var c=new i(o,s,"");c.value=d,this.id3Track.addCue(c)}}}}},t}(c);var Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();var J=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Q(n),this.fast_=new Q(i)}return e.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),i=e/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var ee=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=n,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.clearTimer(),c.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=e.frag.level,r=n.levels[i].details.live,a=n.config,o=void 0,s=void 0;r?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this._bwEstimator=new J(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent,i=n.loader,r=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return l.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=i.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var s=performance.now()-a.trequest,d=Math.abs(t.playbackRate);if(s>500*n.duration/d){var c=e.levels,u=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/s),f=c[n.level],h=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*h/8)),m=t.currentTime,g=(p-a.loaded)/u,v=(x.bufferInfo(t,m,e.config.maxBufferHole).end-m)/d;if(v<2*n.duration/d&&g>v){var _=void 0,y=void 0;for(y=n.level-1;y>r;y--){var b=c[y].realBitrate?Math.max(c[y].realBitrate,c[y].bitrate):c[y].bitrate;if((_=n.duration*b/(6.4*u))<v)break}_<g&&(l.b.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+_.toFixed(1)+"<"+g.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(s,a.loaded),i.abort(),this.clearTimer(),e.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,r=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var i=t.tparsed-t.trequest;l.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,n,i,r,a,o,s,d){for(var c=r;c>=i;c--){var u=d[c].details,f=u?u.totalduration/u.fragments.length:t,h=!!u&&u.live,p=void 0;p=c<=e?o*n:s*n;var m=d[c].realBitrate?Math.max(d[c].realBitrate,d[c].bitrate):d[c].bitrate,g=m*f/p;if(l.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+m+"/"+f+"/"+a+"/"+g),p>m&&(!g||h&&!this.bitrateTestDelay||g<a))return c}return-1},Z(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,i=e.config,r=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,d=a?a.currentTime:0,c=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,u=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,f=(x.bufferInfo(a,d,i.maxBufferHole).end-d)/c,h=this._findBestLevel(o,s,u,r,t,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;l.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,m=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===f){var v=this.bitrateTestDelay;if(v)p=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-v,l.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=g=1}return h=this._findBestLevel(o,s,u,r,t,f+p,m,g,n),Math.max(h,0)}}]),t}(c);var te=L(),ne=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i._live=null,i._objectUrl=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-e.start)>.1){var r=i.updating;try{i.abort()}catch(e){r=!0,l.b.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(l.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,i=0;e.altAudio&&(t||n)&&(i=(t?1:0)+(n?1:0),l.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new te;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n),this._objectUrl=t.src}},t.prototype.onMediaDetaching=function(){l.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){l.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):l.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){l.b.log("media source opened"),this.hls.trigger(o.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){l.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){l.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;l.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0);this.hls.trigger(o.a.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){l.b.error("sourceBuffer error:",e),this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var i in e)if(!t[i]){var r=e[i],a=r.levelCodec||r.codec,d=r.container+";codecs="+a;l.b.log("creating sourceBuffer("+d+")");try{var c=t[i]=n.addSourceBuffer(d);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[i]={codec:a,container:r.container},r.buffer=c}catch(e){l.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:d})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){l.b.error("sourceBuffer error:",e.event),this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var i in t)n&&i!==n||t[i].ended||(t[i].ended=!0,l.b.log(i+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var i=e[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}l.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){l.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e,t=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(l.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(l.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var i in n)t+=n[i].buffered.length}catch(e){l.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void l.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=t[i.type];r?r.updating?n.unshift(i):(r.ended=!1,this.parent=i.parent,r.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){l.b.error("error while trying to append buffer:"+t.message),n.unshift(i);var a={type:s.b.MEDIA_ERROR,parent:i.parent};if(22===t.code)return this.segments=[],a.details=s.a.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(o.a.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=s.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return l.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0,void e.trigger(o.a.ERROR,a);a.fatal=!1,e.trigger(o.a.ERROR,a)}}}},t.prototype.flushBuffer=function(e,t,n){var i,r,a,o,s,d,c=this.sourceBuffer;if(Object.keys(c).length){if(l.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var u in c)if(!n||u===n){if((i=c[u]).ended=!1,i.updating)return l.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(a=i.buffered.start(r),o=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,d=t):(s=Math.max(a,e),d=Math.min(o,t)),Math.min(d,o)-s>.5)return this.flushBufferCounter++,l.b.log("flush "+u+" ["+s+","+d+"], of ["+a+","+o+"], pos:"+this.media.currentTime),i.remove(s,d),!1}catch(e){l.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else l.b.warn("abort flushing too many retries");l.b.log("buffer flushed")}return!0},t}(c),ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var re=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var n=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,r){return t.isLevelAllowed(r,n.restrictedLevels)&&r<=e});return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var i,r,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=n)&&(i=s,!(r=e[o+1])||i.width!==r.width||i.height!==r.height)){a=o;break}}return a},ie(t,[{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(c);var ae=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,n){var i=performance.now();if(t){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,d=1e3*a/r,c=this.hls;if(c.trigger(o.a.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:n}),d>0&&a>c.config.fpsDroppedMonitoringThreshold*s){var u=c.currentLevel;l.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=u)&&(u-=1,c.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,c.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(c);var oe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(n){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,i=this.stats,r=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var o=t.status;if(o>=200&&o<300){i.tload=Math.max(i.tfirst,performance.now());var s=void 0,d=void 0;d="arraybuffer"===r.responseType?(s=t.response).byteLength:(s=t.responseText).length,i.loaded=i.total=d;var c={url:t.responseURL,data:s};this.callbacks.onSuccess(c,i,r,t)}else i.retry>=a.maxRetry||o>=400&&o<499?(l.b.error(o+" while loading "+r.url),this.callbacks.onError({code:o,text:t.statusText},r,t)):(l.b.warn(o+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.prototype.loadtimeout=function(){l.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,t)},e}(),se=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var le=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.AUDIO_TRACK_LOADED,o.a.ERROR));return i.ticks=0,i.ontick=i.tick.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),c.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===s.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestParsed=function(e){var t=this,n=e.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(o.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(e){if(e.default&&!i)return t.audioTrack=r,void(i=!0);r++}),!1===i&&n.length&&(l.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(l.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,i=t.type,r=t.url,a={id:e,type:i,url:r};n.trigger(o.a.AUDIO_TRACK_SWITCH,a),n.trigger(o.a.AUDIO_TRACK_SWITCHING,a);var s=t.details;!r||void 0!==s&&!0!==s.live||(l.b.log("(re)loading playlist for audioTrack "+e),n.trigger(o.a.AUDIO_TRACK_LOADING,{url:r,id:e}))}},t.prototype.updateTrack=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,i=t.details;!n||void 0!==i&&!0!==i.live||(l.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(o.a.AUDIO_TRACK_LOADING,{url:n,id:e}))}},se(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(c),de=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var ce={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},ue=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.AUDIO_TRACKS_UPDATED,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.BUFFER_RESET,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED,o.a.INIT_PTS_FOUND));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state=ce.STOPPED,i.ontick=i.tick.bind(i),i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),c.prototype.destroy.call(this),this.state=ce.STOPPED},t.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[n]=i,this.videoTrackCC=n,l.b.log("InitPTS for cc:"+n+" found from video track:"+i),this.state===ce.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(l.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=ce.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ce.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ce.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ce.STOPPED},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){var e,t,n,i=this.hls,r=i.config;switch(this.state){case ce.ERROR:case ce.PAUSED:case ce.BUFFER_FLUSHING:break;case ce.STARTING:this.state=ce.WAITING_TRACK,this.loadedmetadata=!1;break;case ce.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var d=this.mediaBuffer?this.mediaBuffer:this.media,c=this.videoBuffer?this.videoBuffer:this.media,u=x.bufferInfo(d,e,r.maxBufferHole),f=x.bufferInfo(c,e,r.maxBufferHole),h=u.len,p=u.end,m=this.fragPrevious,g=Math.max(r.maxBufferLength,f.len),v=this.audioSwitch,_=this.trackId;if((h<g||v)&&_<a.length){if(void 0===(n=a[_].details)){this.state=ce.WAITING_TRACK;break}if(!v&&!n.live&&m&&m.sn===n.endSN&&!u.nextStart&&(!this.media.seeking||this.media.duration-p<m.duration/2)){this.hls.trigger(o.a.BUFFER_EOS,{type:"audio"}),this.state=ce.ENDED;break}var y=n.fragments,b=y.length,w=y[0].start,E=y[b-1].start+y[b-1].duration,C=void 0;if(v)if(n.live&&!n.PTSKnown)l.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=e,n.PTSKnown&&e<w){if(!(u.end>w||u.nextStart))return;l.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=w+.05}if(n.initSegment&&!n.initSegment.data)C=n.initSegment;else if(p<=w){if(C=y[0],null!==this.videoTrackCC&&C.cc!==this.videoTrackCC&&(C=function(e,t){return R.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(y,this.videoTrackCC)),n.live&&C.loadIdx&&C.loadIdx===this.fragLoadIdx){var k=u.nextStart?u.nextStart:w;return l.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(k+.05)),void(this.media.currentTime=k+.05)}}else{var S=void 0,T=r.maxFragLookUpTolerance,A=m?y[m.sn-y[0].sn+1]:void 0,I=function(e){var t=Math.min(T,e.duration);return e.start+e.duration-t<=p?1:e.start-t>p&&e.start?-1:0};p<E?(p>E-T&&(T=0),S=A&&!I(A)?A:R.search(y,I)):S=y[b-1],S&&(C=S,w=S.start,m&&C.level===m.level&&C.sn===m.sn&&(C.sn<n.endSN?(C=y[C.sn+1-n.startSN],l.b.log("SN just loaded, load next one: "+C.sn)):C=null))}if(C)if(C.decryptdata&&null!=C.decryptdata.uri&&null==C.decryptdata.key)l.b.log("Loading key for "+C.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+_),this.state=ce.KEY_LOADING,i.trigger(o.a.KEY_LOADING,{frag:C});else{if(l.b.log("Loading "+C.sn+", cc: "+C.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+_+", currentTime:"+e+",bufferEnd:"+p.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,C.loadCounter){C.loadCounter++;var D=r.fragLoadingLoopThreshold;if(C.loadCounter>D&&Math.abs(this.fragLoadIdx-C.loadIdx)<D)return void i.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:C})}else C.loadCounter=1;C.loadIdx=this.fragLoadIdx,this.fragCurrent=C,this.startFragRequested=!0,isNaN(C.sn)||(this.nextLoadPosition=C.start+C.duration),i.trigger(o.a.FRAG_LOADING,{frag:C}),this.state=ce.FRAG_LOADING}}break;case ce.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=ce.IDLE);break;case ce.FRAG_LOADING_WAITING_RETRY:var N=performance.now(),j=this.retryDate,P=(d=this.media)&&d.seeking;(!j||N>=j||P)&&(l.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ce.IDLE);break;case ce.WAITING_INIT_PTS:var L=this.videoTrackCC;if(void 0===this.initPTS[L])break;var O=this.waitingFragment;if(O){var M=O.frag.cc;L!==M?(t=this.tracks[this.trackId]).details&&t.details.live&&(l.b.warn("Waiting fragment CC ("+M+") does not match video track CC ("+L+")"),this.waitingFragment=null,this.state=ce.IDLE):(this.state=ce.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ce.IDLE;break;case ce.STOPPED:case ce.FRAG_LOADING:case ce.PARSING:case ce.PARSED:case ce.ENDED:}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(l.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===ce.ENDED&&(this.state=ce.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){l.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=ce.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ce.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,i=this.tracks[n],r=t.totalduration,a=0;if(l.b.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var o=i.details;o&&t.fragments.length>0?(H(o,t),a=t.fragments[0].start,t.PTSKnown?l.b.log("live audio playlist sliding:"+a.toFixed(3)):l.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,l.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(l.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===ce.WAITING_TRACK&&(this.state=ce.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===ce.KEY_LOADING&&(this.state=ce.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===ce.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var i=this.tracks[this.trackId],r=i.details,a=r.totalduration,s=t.level,d=t.sn,c=t.cc,u=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",f=this.stats=e.stats;if("initSegment"===d)this.state=ce.IDLE,f.tparsed=f.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(o.a.FRAG_BUFFERED,{stats:f,frag:t,id:"audio"}),this.tick();else{this.state=ce.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new M(this.hls,"audio"));var h=this.initPTS[c],p=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==h){this.pendingBuffering=!0,l.b.log("Demuxing "+d+" of ["+r.startSN+" ,"+r.endSN+"],track "+s);this.demuxer.push(e.payload,p,u,null,t,a,!1,h)}else l.b.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+d+" of ["+r.startSN+" ,"+r.endSN+"],track "+s),this.waitingFragment=e,this.state=ce.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ce.PARSING){var i=e.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(o.a.BUFFER_CODECS,i),l.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var s={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,s))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===ce.PARSING){var r=this.trackId,a=this.tracks[r],s=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),l.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),B(a.details,n,e.startPTS,e.endPTS);var d=this.audioSwitch,c=this.media,u=!1;if(d&&c)if(c.readyState){var f=c.currentTime;l.b.log("switching audio track : currentTime:"+f),f>=e.startPTS&&(l.b.log("switching audio track : flushing all audio"),this.state=ce.BUFFER_FLUSHING,s.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,s.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,s.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:r});var h=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&h.push({type:e.type,data:t,parent:"audio",content:"data"})}),!u&&h.length&&(h.forEach(function(e){t.state===ce.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(o.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ce.PARSING&&(this.stats.tparsed=performance.now(),this.state=ce.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==ce.PARSING&&t!==ce.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==ce.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(o.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;l.b.log("audio buffered : "+U.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ce.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);l.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=ce.FRAG_LOADING_WAITING_RETRY}else l.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=ce.ERROR}break;case s.a.FRAG_LOOP_LOADING_ERROR:case s.a.AUDIO_TRACK_LOAD_ERROR:case s.a.AUDIO_TRACK_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.state!==ce.ERROR&&(this.state=e.fatal?ce.ERROR:ce.IDLE,l.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case s.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===ce.PARSING||this.state===ce.PARSED)){var a=this.mediaBuffer,d=this.media.currentTime;if(a&&x.isBuffered(a,d)&&x.isBuffered(a,d+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,l.b.warn("audio:reduce max buffer length to "+c.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*c.fragLoadingLoopThreshold),this.state=ce.IDLE}else l.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ce.BUFFER_FLUSHING,this.hls.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(l.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(o.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=ce.PARSED):(this.state=ce.IDLE,this.fragPrevious=null,this.tick())},de(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,l.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(c),fe=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function i(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function a(n,a,o){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),d={};l?s=document.createElement("custom"):d.enumerable=!0,s.hasBeenReset=!1;var c="",u=!1,f=n,h=a,p=o,m=null,g="",v=!0,_="auto",y="start",b=50,w="middle",E=50,C="middle";if(Object.defineProperty(s,"id",r({},d,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},d,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(s,"startTime",r({},d,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},d,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},d,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},d,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},d,{get:function(){return g},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},d,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},d,{get:function(){return _},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},d,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},d,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},d,{get:function(){return w},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},d,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},d,{get:function(){return C},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");C=t,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),he=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function pe(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new he,this.regionList=[]}function me(){this.values=Object.create(null)}function ge(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);if(2===o.length)t(o[0],o[1])}}me.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ve=new fe(0,0,0),_e="middle"===ve.align?"middle":"center";function ye(e,t,n){var i=e;function r(){var t=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new me;ge(e,function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",_e,"end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",_e,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",_e,"end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===ve.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",_e);var a=i.get("position","auto");"auto"===a&&50===ve.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function be(e){return e.replace(/<br(?: \/)?>/gi,"\n")}pe.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=be(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(i=n()).match(/^()?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?ge(i,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new fe(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{ye(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var we=pe;function Ee(e,t,n,i){for(var r,a,o,s,l,d=window.VTTCue||window.TextTrackCue,c=0;c<i.rows.length;c++)if(o=!0,s=0,l="",!(r=i.rows[c]).isEmpty()){for(var u=0;u<r.chars.length;u++)r.chars[u].uchar.match(/\s/)&&o?s++:(l+=r.chars[u].uchar,o=!1);r.cueStartTime=t,t===n&&(n+=1e-4),a=new d(t,n,be(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ke={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Se=function(e){var t=e;return ke.hasOwnProperty(e)&&(t=ke[e]),String.fromCharCode(t)},Te=15,Ae=100,Re={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},xe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ie={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},De={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ne=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],je={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},Pe=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Le=function(){function e(t,n,i,r,a){Ce(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=r||"black",this.flash=a||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Oe=function(){function e(t,n,i,r,a,o){Ce(this,e),this.uchar=t||" ",this.penState=new Le(n,i,r,a,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Me=function(){function e(){Ce(this,e),this.chars=[];for(var t=0;t<Ae;t++)this.chars.push(new Oe);this.pos=0,this.currPenState=new Le}return e.prototype.equals=function(e){for(var t=!0,n=0;n<Ae;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Ae;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Ae;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(je.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Ae&&(je.log("ERROR","Too large cursor position "+this.pos),this.pos=Ae)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=Se(e);this.pos>=Ae?je.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<Ae;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<Ae;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Fe=function(){function e(){Ce(this,e),this.rows=[];for(var t=0;t<Te;t++)this.rows.push(new Me);this.currRow=Te-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<Te;e++)this.rows[e].clear();this.currRow=Te-1},e.prototype.equals=function(e){for(var t=!0,n=0;n<Te;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Te;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Te;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){je.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){je.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<Te;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime;if(a&&a<je.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(r.rows[i+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,d=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[d].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){je.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){je.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),je.log("INFO","Rolling up")}else je.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<Te;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),Be=function(){function e(t,n){Ce(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new Fe,this.nonDisplayedMemory=new Fe,this.lastOutputScreen=new Fe,this.currRollUpRow=this.displayedMemory.rows[Te-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Te-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,je.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";je.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(je.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){je.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){je.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){je.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){je.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){je.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){je.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){je.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){je.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){je.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){je.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){je.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(je.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,je.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){je.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}je.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=je.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),He=function(){function e(t,n,i){Ce(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new Be(1,n),new Be(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n,i,r,a=!1;this.lastTime=e,je.setTime(e);for(var o=0;o<t.length;o+=2)if(i=127&t[o],r=127&t[o+1],0!==i||0!==r){if(je.log("DATA","["+Pe([t[o],t[o+1]])+"] -> ("+Pe([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n)if(a=this.parseChars(i,r))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(a);else je.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,je.log("WARNING","Couldn't parse cleaned data "+Pe([i,r])+" orig: "+Pe([t[o],t[o+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,je.log("DEBUG","Repeated command ("+Pe([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var i=this.channels[n-1];return 20===e||28===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(je.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),je.log("DEBUG","MIDROW ("+Pe([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var n,i=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,i=64<=t&&t<=95?1===n?Re[e]:Ie[e]:1===n?xe[e]:De[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.interpretPAC=function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},e.prototype.parseChars=function(e,t){var n=null,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),17<=r&&r<=19){var a=t;a=17===r?t+80:18===r?t+112:t+144,je.log("INFO","Special char '"+Se(a)+"' in channel "+n),i=[a]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var o=Pe(i);je.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},e.prototype.parseBackgroundAttributes=function(e,t){var n,i,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=Ne[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();var Ue=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timelineController=t,this.track=n,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.track)},e}(),We=function(e,t,n){return e.substr(n||0,t.length)===t},ze=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},Ge={parse:function(e,t,n,i,r,a){var o=Object(K.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",l=0,d=0,c=0,u=[],f=void 0,h=!0,p=new we;p.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==d?r=n.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC];e.presentationOffset=n}(n,i,c)),c&&(r=c+n.ccOffset-n.presentationOffset),e.startTime+=r-d,e.endTime+=r-d,e.id=ze(e.startTime.toString())+ze(e.endTime.toString())+ze(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&u.push(e)},p.onparsingerror=function(e){f=e},p.onflush=function(){f&&a?a(f):r(u)},o.forEach(function(e){if(h){if(We(e,"X-TIMESTAMP-MAP=")){h=!1,e.substr(16).split(",").forEach(function(e){We(e,"LOCAL:")?s=e.substr(6):We(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{l-=t=t<0?t+8589934592:t,n=s,i=parseInt(n.substr(-3)),r=parseInt(n.substr(-6,2)),a=parseInt(n.substr(-9,2)),o=n.length>9?parseInt(n.substr(0,n.indexOf(":"))):0,d=(isNaN(i)||isNaN(r)||isNaN(a)||isNaN(o)?-1:(i+=1e3*r,i+=6e4*a,i+=36e5*o))/1e3,c=l/9e4,-1===d&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){f=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(h=!1)}var n,i,r,a,o;p.parse(e+"\n")}),p.flush()}};function Ye(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var $e=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_USERDATA,o.a.FRAG_DECRYPTED,o.a.MANIFEST_LOADING,o.a.MANIFEST_LOADED,o.a.FRAG_LOADED,o.a.LEVEL_SWITCHING,o.a.INIT_PTS_FOUND));if(i.hls=n,i.config=n.config,i.enabled=!0,i.Cues=n.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.config.enableCEA708Captions){var r=new Ue(i,1),a=new Ue(i,2);i.cea608Parser=new He(0,r,a)}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addCues=function(e,t,n,i){for(var r,a,o,s,l=this.cueRanges,d=!1,c=l.length;c--;){var u=l[c],f=(r=u[0],a=u[1],o=t,s=n,Math.min(a,s)-Math.max(r,o));if(f>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),d=!0,f/(n-t)>.5))return}d||l.push([t,n]),this.Cues.newCue(this[e],t,n,i)},t.prototype.onInitPtsFound=function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(!0===i["textTrack"+e])return i}return null},t.prototype.sendAddTrackEvent=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},t.prototype.createCaptionsTrack=function(e){var t="textTrack"+e;if(!this[t]){var n=this.getExistingTrack(e);if(n)this[t]=n,Ye(this[t]),this.sendAddTrackEvent(this[t],this.media);else{var i=this.createTextTrack("captions",this.config["captionsTextTrack"+e+"Label"],this.config.captionsTextTrack1LanguageCode);i&&(i[t]=!0,this[t]=i)}}},t.prototype.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){Ye(this.textTrack1),Ye(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},t.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Ye(t[n])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var r=void 0;if(i<n.length){var a=n[i];(function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)})(a,e)&&(r=a)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),r.mode=e.default?"showing":"hidden",t.textTracks.push(r)})}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,n=e.payload;if("main"===t.type){var i=t.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=t.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(t,n)}else this.hls.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype._parseVTTs=function(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var i=this.textTracks,r=this.hls;Ge.parse(t,this.initPTS,n,e.cc,function(t){var n=i[e.trackId];t.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(i){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),r.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){l.b.log("Failed to parse VTT cue: "+t),r.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},t.prototype.onFragDecrypted=function(e){var t=e.payload,n=e.frag;if("subtitle"===n.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);this._parseVTTs(n,t)}},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},t.prototype.extractCea608Data=function(e){for(var t,n,i,r=31&e[0],a=2,o=[],s=0;s<r;s++)t=e[a++],n=127&e[a++],i=127&e[a++],0===n&&0===i||0!=(4&t)&&0===(3&t)&&(o.push(n),o.push(i));return o},t}(c),Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function qe(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}var Ke=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_LOADED,o.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=void 0,i.subtitleDisplay=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=qe(this.media.textTracks),n=0;n<t.length;n++)"showing"===t[n].mode&&(e=n);this.subtitleTrack=e}},t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(o.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(l.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(l.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(!(e<-1||e>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var t=qe(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(t[this.trackId].mode="hidden"),this.trackId=e,l.b.log("switching to subtitle track "+e),this.hls.trigger(o.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e){var n=this.tracks[e];this.subtitleDisplay&&(t[e].mode="showing");var i=n.details;void 0!==i&&!0!==i.live||(l.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))}}},Ve(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(c),Xe=n(4);var Qe={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},Je=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.ERROR,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.SUBTITLE_TRACKS_UPDATED,o.a.SUBTITLE_TRACK_SWITCH,o.a.SUBTITLE_TRACK_LOADED,o.a.SUBTITLE_FRAG_PROCESSED));return i.config=n.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.state=Qe.STOPPED,i.currentTrackId=-1,i.ticks=0,i.decrypter=new Xe.a(n.observer,n.config),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this),this.state=Qe.STOPPED},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(o.a.FRAG_LOADING,{frag:e}),this.state=Qe.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=Qe.IDLE,this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=Qe.IDLE},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.tick=function(){var e=this;this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(function(){e.tick()},1),this.ticks=0)},t.prototype.doTick=function(){var e=this;switch(this.state){case Qe.IDLE:var t,n=this.tracks,i=this.currentTrackId,r=this.vttFragSNsProcessed[i],a=this.vttFragQueues[i],s=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!n)break;if(i<n.length&&(t=n[i].details),void 0===t)break;t.fragments.forEach(function(t){(function(e){return r.indexOf(e.sn)>-1})(t)||t.sn===s||function(e){return a.some(function(t){return t.sn===e.sn})}(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(l.b.log("Loading key for "+t.sn),e.state=Qe.KEY_LOADING,e.hls.trigger(o.a.KEY_LOADING,{frag:t})):(t.trackId=i,a.push(t),e.nextFrag()))})}},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;l.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.clearVttFragQueues()},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===Qe.KEY_LOADING&&(this.state=Qe.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,i=e.frag,r=this.hls;if(this.state===Qe.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&null!=n&&null!=n.key&&"AES-128"===n.method){var a;try{a=performance.now()}catch(e){a=Date.now()}this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t;try{t=performance.now()}catch(e){t=Date.now()}r.trigger(o.a.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:a,tdecrypt:t}})})}},t}(c),Ze={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:oe,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:ee,bufferController:ne,capLevelController:re,fpsController:ae,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Ze.subtitleStreamController=Je,Ze.subtitleTrackController=Ke,Ze.timelineController=$e,Ze.cueHandler=i,Ze.enableCEA708Captions=!0,Ze.enableWebVTT=!0,Ze.captionsTextTrack1Label="English",Ze.captionsTextTrack1LanguageCode="en",Ze.captionsTextTrack2Label="Spanish",Ze.captionsTextTrack2LanguageCode="es",Ze.audioStreamController=ue,Ze.audioTrackController=le;var et=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var tt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(l.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var a=this.observer=new N.a;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a);var o=this.abrController=new n.abrController(this),s=new n.bufferController(this),d=new n.capLevelController(this),c=new n.fpsController(this),u=new S(this),f=new T(this),h=new A(this),p=new X(this),m=[this.levelController=new q(this),this.streamController=new $(this)],g=n.audioStreamController;g&&m.push(new g(this)),this.networkControllers=m;var v=[u,f,h,o,s,d,c,p];if(g=n.audioTrackController){var _=new g(this);this.audioTrackController=_,v.push(_)}if(g=n.subtitleTrackController){var y=new g(this);this.subtitleTrackController=y,v.push(y)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&v.push(new e(t))}),this.coreComponents=v}return e.isSupported=function(){return e=L(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove,!!n&&!!i;var e,t,n,i},et(e,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return o.a}},{key:"ErrorTypes",get:function(){return s.b}},{key:"ErrorDetails",get:function(){return s.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Ze},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){l.b.log("destroy"),this.trigger(o.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){l.b.log("attachMedia"),this.media=e,this.trigger(o.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){l.b.log("detachMedia"),this.trigger(o.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=a.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),l.b.log("loadSource:"+e),this.url=e,this.trigger(o.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;l.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){l.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){l.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){l.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},et(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){l.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){l.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){l.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){l.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){l.b.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){l.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++){if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),e}();t.default=tt},function(e,t,n){function i(e){var t=[],n=e.toString(),i=n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!i)return t;for(var r,a=i[1],o=new RegExp("(\\\\n|\\W)"+(a+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");r=o.exec(n);)t.push(r[3]);return t}e.exports=function(e,t){t=t||{};var r=n.m,a=t.all?Object.keys(r):function(e,t){for(var n=[t],r=[],a={};n.length;){var o=n.pop();if(!a[o]&&e[o]){a[o]=!0,r.push(o);var s=i(e[o]);n=n.concat(s)}}return r}(r,e),o="("+function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var i=n(n.s=ENTRY_MODULE);return i.default||i}.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.map(function(e){return JSON.stringify(e)+": "+r[e].toString()}).join(",")+"})(self);",s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(l);return d.objectURL=l,d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=n(1),a=n(0),o=n(5),s=n.n(o);t.default=function(e){var t=new s.a;t.trigger=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(i))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(r){var o=r.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new i.a(t,o.typeSupported,s,o.vendor);try{Object(a.a)(!0===s.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(r.a.FRAG_DECRYPTED,n),t.on(r.a.FRAG_PARSING_INIT_SEGMENT,n),t.on(r.a.FRAG_PARSED,n),t.on(r.a.ERROR,n),t.on(r.a.FRAG_PARSING_METADATA,n),t.on(r.a.FRAG_PARSING_USERDATA,n),t.on(r.a.INIT_PTS_FOUND,n),t.on(r.a.FRAG_PARSING_DATA,function(t,n){var i=[],r={event:t,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),e.postMessage(r,i)})}}]).default},e.exports=i()},Ye5x:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=n("Z5jf"),a=s(n("8NzR")),o=n("U6+P");function s(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#users_edit_account",function(e){var t=!1;e.find("a.change_password_toggle").on("click",function(n){n.preventDefault();var r=(0,i.default)("li.change_password",e);t?(r.fadeOut(),r.find("input").prop("disabled",!0),r.find("input").val(""),t=!1):(r.fadeIn(),r.find("input").prop("disabled",!1),r.first().find("input").focus(),t=!0)}),e.find("a.js-request-data-export").on("click",function(e){e.preventDefault();var t=this,n=t.dataset.email,i=t.dataset.url,a=document.getElementById("modal-container");a&&(0,o.mountDataExportModal)({container:a,email:n,url:i,onSuccess:function(){var e=document.createElement("span");e.innerHTML=(0,r.boundT)("user_settings.Download_is_being_prepared"),t.parentNode.replaceChild(e,t)}})})})},YmKE:function(e,t,n){"use strict";var i=d(n("l/Rs")),r=d(n("8NzR")),a=d(n("L3hI")),o=d(n("9VV1")),s=d(n("wmCY")),l=d(n("c5nH"));function d(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_projects__hero_funding",function(e){var t=e.find(".video-player .poster");function n(){var n=e.find(".video-player"),r=t.height(),a=n.height(),o=Math.abs(r-a)<=1;t.length&&r>0&&(o||e.find(".video-player").animate({height:r,maxHeight:screen.height},300,"easeOutExpo",function(){(0,i.default)(document).trigger("ksr:video_player_resize")}),t.css({minHeight:0}))}n(),(0,i.default)(document).on("resize",function(){n()}),(0,i.default)("#project_share.js-disabled").on("click",function(e){(0,o.default)({error:s.default.t("onloads.views.projects.hero_funding.Sharing_is_disabled_until_your_project_is_launched")}),e.preventDefault()}),l.default.listen("state",function(t){var n=t.state;e.find(".js-campaign-state").addClass("hidden"),e.find(".js-campaign-state__"+n).removeClass("hidden")}),"live"===l.default.get("state")&&function t(){var n=e.find(".ksr_page_timer.poll");if(n.length){var i=window.ksr_page_clock,r=new Date(n.data("end_time"))-i.get_remote_time();if(r>0){var a=Math.min(r,2147483647);setTimeout(t,a)}else e.find(".js-hide-unless-campaign-running").addClass("hidden")}}(),l.default.listen("state_changed_at",function(t){e.find(".js-state_changed_at").text(a.default.time_ago_in_words(t.state_changed_at))})})},Yxm8:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body#site_fulfillment_report",function(){(0,i.default)(".js-fulfillment-report-expand").on("click",function(e){var t=(0,i.default)(this).closest(".fulfillment-report-sidebar");t.is(".is-expanded")?(t.find(".js-fulfillment-report__expandable-content").hide(),t.removeClass("is-expanded")):(t.find(".js-fulfillment-report__expandable-content").fadeIn(),t.addClass("is-expanded")),e.preventDefault()}),(0,i.default)(".js-facebook").on("click",function(e){e.preventDefault(),window.open((0,i.default)(this).attr("href"),"popupWindow","width=600,height=600,scrollbars=yes")})})},YzsH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseSelectParams=t.baseSelectState=t.baseRewardState=t.initialState=void 0;var i=n("Z5jf"),r=n("IPoO"),a=n("Tvr3"),o=n("HeCS");t.initialState={selectedReward:{id:null,totalCost:null,pledgeCost:null,projectMin:0,shippingCost:0,shippingLocation:void 0,shippingRequired:!1,truncated:null,doNotPin:!1},pledgeData:{currencySymbol:"$",defaultPledge:{amount:100,min:10},isRight:!1,isSymbolic:!1},validation:{touched:{},errors:{},fields:[r.PLEDGE_AMOUNT,r.PLEDGE_NO_REWARD,r.SHIPPING_LOCATION],serverErrors:[]}},t.baseRewardState={id:"",backsThis:!1,conversionEstimate:"",title:"",description:"",unavailable:!1,backersCount:"",campaignSuccessful:!1,campaignLive:!1,managePath:"",maxPledge:!1,minPledge:{amount:"",symbol:"",formatted:""},items:[],deliveryDate:"",shippingSummary:"",endsAt:"",limitExists:!1,limit:"",offsetHeight:null,remainingItems:"",shippingRulesStatus:a.UNLOADED,memoizedShippingOption:{}},t.baseSelectState=(0,o.initialState)(),t.baseSelectParams={titleString:(0,i.boundT)("project_page.reward.Shipping_destination"),placeholder:(0,i.boundT)("project_page.reward.Select_a_country"),options:[]}},Z36P:function(e,t,n){"use strict";var i=l(n("l/Rs")),r=n("4RZc"),a=l(n("shXp")),o=l(n("9VV1")),s=l(n("MA+5"));function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=".NS_message_threads__show";function t(e){return e.closest("#preview, .render_mustache, .js-message-thread").data("data")}(0,i.default)(document).on("click",e+" .pledge_details_link",function(t){(0,i.default)(e).find(".pledge_details").toggleClass("visible"),(0,i.default)(document).trigger("resize"),(0,i.default)(this).toggleClass("selected"),(0,r.track)("Message Info Toggle",{text:i.default.trim((0,i.default)(this).text())}),t.preventDefault()}),(0,i.default)(e+":visible").livequery(function(){var n=(0,i.default)(this),a=t(n);function o(e){i.default.ajax({url:a.urls.web.read,type:"put"}),n.trigger("message_thread_read",[a]),e&&e.preventDefault()}a.unread_messages_count>0&&o(),(0,i.default)(e+" .mark_as_unread").on("click",function(e){i.default.ajax({url:a.urls.web.unread,type:"put"}),n.trigger("message_thread_unread",[a]),e&&e.preventDefault(),(0,r.track)("Message Read Toggle",{toggled_to:"unread"})}),(0,i.default)(e+" .mark_as_read").on("click",o)}),(0,i.default)(document).on("submit",e+" form.reply",function(n){var r=(0,i.default)(this);r.find('[name="message[body]"]').val()?r.is(".submitting")||(function(e){var t=e.find('input[type="submit"]');e.addClass("submitting"),t.addClass("btn--disabled")}(r),function(n){var r="messages";"undefined"!=typeof current_project&&(r="project_messages");n.closest(".modal_dialog").length&&(r="backer_modal");"backers_show"===(0,i.default)("body").attr("id")&&(r="backer_page");"backings_show"!==(0,i.default)("body").attr("id")&&"backings_index"!==(0,i.default)("body").attr("id")||(r="backings_show");i.default.ajax({url:n.attr("action"),type:n.attr("method"),dataType:"json",data:n.serialize()+"&"+i.default.param({"mp[message_context]":r}),success:function(r){var l=t(n),d=n.closest(e).find("ul.messages");r.errors?a.default.each(a.default.keys(r.errors),function(e){(0,o.default)({error:e+": "+r.errors[e]})}):(d.append((0,s.default)("messages/_show",r)).trigger("message_sent",l?[l.backing?l.backing.id:void 0,d.children().length]:[]),(0,i.default)(document).trigger("resize")),n.get(0).reset(),function(e){var t=e.find('input[type="submit"]');e.removeClass("submitting"),t.removeClass("btn--disabled")}(n)}})}(r)):(0,o.default)({error:"Please add a message"}),n.preventDefault()}),(0,i.default)(document).on("focus",e+" form.reply textarea",function(){var e=(0,i.default)(this);e.closest("form.reply").addClass("replying"),e.removeAttr("placeholder")}),(0,i.default)(document).on("click",e+" .respond_link",function(t){(0,i.default)(e+" form.reply textarea").focus(),(0,r.track)("Message Reply Click"),t.preventDefault()})})},ZAAP:function(e,t,n){var i=n("l/Rs"),r=(n("l/Rs"),{});!function(){if(void 0===window.console&&"undefined"==typeof console){var e,t=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],n=function(){};for(r.console={},e=0;e<t.length;e+=1)r.console[t[e]]=n}else"undefined"!=typeof console?r.console=console:window.console.firebug?r.console=window.console:window.console&&(r.console=window.console)}(),i.extend(r,{VERSION:"@@VERSION",INSTANCES:[],STRINGS:[],SKINS:[],CUSTOM_COMMANDS:[],NAME:"name",INDEX:"{Wym_Index}",WYM_INDEX:"wym_index",BASE_PATH:"{Wym_Base_Path}",WYM_PATH:"{Wym_Wym_Path}",IFRAME_BASE_PATH:"{Wym_Iframe_Base_Path}",IFRAME_DEFAULT:"iframe/default/",JQUERY_PATH:"{Wym_Jquery_Path}",DIRECTION:"{Wym_Direction}",LOGO:"{Wym_Logo}",TOOLS:"{Wym_Tools}",TOOLS_ITEMS:"{Wym_Tools_Items}",TOOL_NAME:"{Wym_Tool_Name}",TOOL_TITLE:"{Wym_Tool_Title}",TOOL_CLASS:"{Wym_Tool_Class}",CLASSES:"{Wym_Classes}",CLASSES_ITEMS:"{Wym_Classes_Items}",CLASS_NAME:"{Wym_Class_Name}",CLASS_TITLE:"{Wym_Class_Title}",CONTAINERS:"{Wym_Containers}",CONTAINERS_ITEMS:"{Wym_Containers_Items}",CONTAINER_NAME:"{Wym_Container_Name}",CONTAINER_TITLE:"{Wym_Containers_Title}",CONTAINER_CLASS:"{Wym_Container_Class}",HTML:"{Wym_Html}",IFRAME:"{Wym_Iframe}",STATUS:"{Wym_Status}",DIALOG_TITLE:"{Wym_Dialog_Title}",DIALOG_BODY:"{Wym_Dialog_Body}",NEWLINE:"\n",STRING:"string",BODY:"body",DIV:"div",P:"p",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",PRE:"pre",BLOCKQUOTE:"blockquote",A:"a",BR:"br",IMG:"img",TABLE:"table",TR:"tr",TD:"td",TH:"th",UL:"ul",OL:"ol",LI:"li",CLASS:"class",HREF:"href",SRC:"src",TITLE:"title",REL:"rel",ALT:"alt",DIALOG_LINK:"Link",DIALOG_IMAGE:"Image",DIALOG_TABLE:"Table",DIALOG_PASTE:"Paste_From_Word",BOLD:"Bold",ITALIC:"Italic",CREATE_LINK:"CreateLink",INSERT_IMAGE:"InsertImage",INSERT_TABLE:"InsertTable",INSERT_HTML:"InsertHTML",PASTE:"Paste",INDENT:"Indent",OUTDENT:"Outdent",TOGGLE_HTML:"ToggleHtml",FORMAT_BLOCK:"FormatBlock",PREVIEW:"Preview",UNLINK:"Unlink",INSERT_UNORDEREDLIST:"InsertUnorderedList",INSERT_ORDEREDLIST:"InsertOrderedList",MAIN_CONTAINERS:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"],FORBIDDEN_MAIN_CONTAINERS:["strong","b","em","i","sub","sup","a","span"],BLOCKS:["address","blockquote","div","dl","fieldset","form","h1","h2","h3","h4","h5","h6","hr","noscript","ol","p","pre","table","ul","dd","dt","li","tbody","td","tfoot","th","thead","tr"],BLOCKING_ELEMENTS:["table","blockquote","pre"],NON_BLOCKING_ELEMENTS:["p","div","h1","h2","h3","h4","h5","h6"],LIST_TYPE_ELEMENTS:["ul","ol"],HEADING_ELEMENTS:["h1","h2","h3","h4","h5","h6"],POTENTIAL_LIST_ELEMENTS:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","td"],POTENTIAL_TABLE_INSERT_ELEMENTS:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","li"],INLINE_TABLE_INSERTION_ELEMENTS:["li"],SELECTABLE_TABLE_ELEMENTS:["td","th","caption"],BLOCKING_ELEMENT_SPACER_CLASS:"wym-blocking-element-spacer",EDITOR_ONLY_CLASS:"wym-editor-only",CLASSES_REMOVED_BY_PARSER:["apple-style-span"],KEY:{BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,END:35,HOME:36,CURSOR:[37,38,39,40],LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,B:66,I:73,R:82,COMMAND:224},POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS:[8,13,37,38,39,40,46],EVENTS:{postIframeInitialization:"wym-postIframeInitialization",postBlockMaybeCreated:"wym-postBlockMaybeCreated",documentHTMLUpdated:"wym-documentHTMLUpdated"},NODE:{ELEMENT:1,ATTRIBUTE:2,TEXT:3},editor:function(e,t){this._index=r.INSTANCES.push(this)-1,this._element=e,this._options=t,this._options.html||(this._options.html=i(e).val()),this._options.wymPath=this._options.wymPath||r.computeWymPath(),this._options.basePath=this._options.basePath||r.computeBasePath(this._options.wymPath),this._options.jQueryPath=this._options.jQueryPath||r.computeJqueryPath(),this._options.iframeBasePath=this._options.iframeBasePath||this._options.basePath+r.IFRAME_DEFAULT,this.init()}}),i.fn.wymeditor=function(e){return e=i.extend({html:"",basePath:!1,wymPath:!1,iframeBasePath:!1,jQueryPath:!1,skin:"default",lang:"en",direction:"ltr",customCommands:[],structureRules:{defaultRootContainer:"p"},boxHtml:String()+"<div class='wym_box'><div class='wym_area_top'>"+r.TOOLS+"</div><div class='wym_area_left'></div><div class='wym_area_right'>"+r.CONTAINERS+r.CLASSES+"</div><div class='wym_area_main'>"+r.HTML+r.IFRAME+r.STATUS+"</div><div class='wym_area_bottom'>"+r.LOGO+"</div></div>",logoHtml:String()+'<a class="wym_wymeditor_link" href="http://www.wymeditor.org/">WYMeditor</a>',iframeHtml:String()+'<div class="wym_iframe wym_section"><iframe src="'+r.IFRAME_BASE_PATH+'wymiframe.html"></iframe></div>',toolsHtml:String()+'<div class="wym_tools wym_section"><h2>{Tools}</h2><ul>'+r.TOOLS_ITEMS+"</ul></div>",toolsItemHtml:String()+'<li class="'+r.TOOL_CLASS+'"><a href="#" name="'+r.TOOL_NAME+'" title="'+r.TOOL_TITLE+'">'+r.TOOL_TITLE+"</a></li>",toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:"Superscript",css:"wym_tools_superscript"},{name:"Subscript",title:"Subscript",css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image"},{name:"InsertTable",title:"Table",css:"wym_tools_table"},{name:"Paste",title:"Paste_From_Word",css:"wym_tools_paste"},{name:"ToggleHtml",title:"HTML",css:"wym_tools_html"},{name:"Preview",title:"Preview",css:"wym_tools_preview"}],containersHtml:String()+'<div class="wym_containers wym_section"><h2>{Containers}</h2><ul>'+r.CONTAINERS_ITEMS+"</ul></div>",containersItemHtml:String()+'<li class="'+r.CONTAINER_CLASS+'"><a href="#" name="'+r.CONTAINER_NAME+'">'+r.CONTAINER_TITLE+"</a></li>",containersItems:[{name:"P",title:"Paragraph",css:"wym_containers_p"},{name:"H1",title:"Heading_1",css:"wym_containers_h1"},{name:"H2",title:"Heading_2",css:"wym_containers_h2"},{name:"H3",title:"Heading_3",css:"wym_containers_h3"},{name:"H4",title:"Heading_4",css:"wym_containers_h4"},{name:"H5",title:"Heading_5",css:"wym_containers_h5"},{name:"H6",title:"Heading_6",css:"wym_containers_h6"},{name:"PRE",title:"Preformatted",css:"wym_containers_pre"},{name:"BLOCKQUOTE",title:"Blockquote",css:"wym_containers_blockquote"},{name:"TH",title:"Table_Header",css:"wym_containers_th"}],classesHtml:String()+'<div class="wym_classes wym_section"><h2>{Classes}</h2><ul>'+r.CLASSES_ITEMS+"</ul></div>",classesItemHtml:String()+'<li class="wym_classes_'+r.CLASS_NAME+'"><a href="#" name="'+r.CLASS_NAME+'">'+r.CLASS_TITLE+"</a></li>",classesItems:[],statusHtml:String()+'<div class="wym_status wym_section"><h2>{Status}</h2></div>',htmlHtml:String()+'<div class="wym_html wym_section"><h2>{Source_Code}</h2><textarea class="wym_html_val"></textarea></div>',boxSelector:".wym_box",toolsSelector:".wym_tools",toolsListSelector:" ul",containersSelector:".wym_containers",classesSelector:".wym_classes",htmlSelector:".wym_html",iframeSelector:".wym_iframe iframe",iframeBodySelector:".wym_iframe",statusSelector:".wym_status",toolSelector:".wym_tools a",containerSelector:".wym_containers a",classSelector:".wym_classes a",htmlValSelector:".wym_html_val",hrefSelector:".wym_href",srcSelector:".wym_src",titleSelector:".wym_title",relSelector:".wym_rel",altSelector:".wym_alt",textSelector:".wym_text",rowsSelector:".wym_rows",colsSelector:".wym_cols",captionSelector:".wym_caption",summarySelector:".wym_summary",submitSelector:"form",cancelSelector:".wym_cancel",previewSelector:"",dialogTypeSelector:".wym_dialog_type",dialogLinkSelector:".wym_dialog_link",dialogImageSelector:".wym_dialog_image",dialogTableSelector:".wym_dialog_table",dialogPasteSelector:".wym_dialog_paste",dialogPreviewSelector:".wym_dialog_preview",updateSelector:".wymupdate",updateEvent:"click",dialogFeatures:"menubar=no,titlebar=no,toolbar=no,resizable=no,width=560,height=300,top=0,left=0",dialogFeaturesPreview:"menubar=no,titlebar=no,toolbar=no,resizable=no,scrollbars=yes,width=560,height=300,top=0,left=0",dialogHtml:String()+'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html dir="'+r.DIRECTION+'"><head><title>'+r.DIALOG_TITLE+'</title><script type="text/javascript" src="'+r.JQUERY_PATH+'"><\/script><script type="text/javascript" src="'+r.WYM_PATH+'"><\/script></head>'+r.DIALOG_BODY+"</html>",dialogLinkHtml:String()+'<body class="wym_dialog wym_dialog_link"  onload="WYMeditor.INIT_DIALOG('+r.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+r.DIALOG_LINK+'" /><legend>{Link}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_href" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row"><label>{Relationship}</label><input type="text" class="wym_rel" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogImageHtml:String()+'<body class="wym_dialog wym_dialog_image" onload="WYMeditor.INIT_DIALOG('+r.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+r.DIALOG_IMAGE+'" /><legend>{Image}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_src" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Alternative_Text}</label><input type="text" class="wym_alt" value="" size="40" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogTableHtml:String()+'<body class="wym_dialog wym_dialog_table" onload="WYMeditor.INIT_DIALOG('+r.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+r.DIALOG_TABLE+'" /><legend>{Table}</legend><div class="row"><label>{Caption}</label><input type="text" class="wym_caption" value="" size="40" /></div><div class="row"><label>{Summary}</label><input type="text" class="wym_summary" value="" size="40" /></div><div class="row"><label>{Number_Of_Rows}</label><input type="text" class="wym_rows" value="3" size="3" /></div><div class="row"><label>{Number_Of_Cols}</label><input type="text" class="wym_cols" value="2" size="3" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogPasteHtml:String()+'<body class="wym_dialog wym_dialog_paste" onload="WYMeditor.INIT_DIALOG('+r.INDEX+')"><form><input type="hidden" class="wym_dialog_type" value="'+r.DIALOG_PASTE+'" /><fieldset><legend>{Paste_From_Word}</legend><div class="row"><textarea class="wym_text" rows="10" cols="50" autofocus="autofocus"></textarea></div><div class="row"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogPreviewHtml:String()+'<body class="wym_dialog wym_dialog_preview" onload="WYMeditor.INIT_DIALOG('+r.INDEX+')"></body>',stringDelimiterLeft:"{",stringDelimiterRight:"}",preInit:null,preBind:null,postInit:null,preInitDialog:null,postInitDialog:null},e),this.each(function(){this._wym=new r.editor(i(this),e)})},i.extend({wymeditors:function(e){return r.INSTANCES[e]}}),r.computeWymPath=function(){var e=i(i.grep(i("script"),function(e){return e.src?e.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)||e.src.match(/\/core\.js(\?.*)?$/):null}));return e.length>0?e.attr("src"):(r.console.warn("Error determining wymPath. No base WYMeditor file located."),r.console.warn("Assuming wymPath to be the current URL"),r.console.warn("Please pass a correct wymPath option"),"")},r.computeBasePath=function(e){var t=e.lastIndexOf("/");return e.substr(0,t+1)},r.computeJqueryPath=function(){return i(i.grep(i("script"),function(e){return e.src&&e.src.match(/jquery(-(.*)){0,1}(\.pack|\.min|\.packed)?\.js(\?.*)?$/)})).attr("src")},r.INIT_DIALOG=function(e){var t,n=window.opener.WYMeditor.INSTANCES[e],a=n.selected(),o=i(n._options.dialogTypeSelector).val(),s=n.uniqueStamp();o===r.DIALOG_LINK&&(a&&a.tagName&&a.tagName.toLowerCase!==r.A&&(a=i(a).parentsOrSelf(r.A)),!a&&n._selectedImage&&(a=i(n._selectedImage).parentsOrSelf(r.A))),i.isFunction(n._options.preInitDialog)&&n._options.preInitDialog(n,window),a&&(i(n._options.hrefSelector).val(i(a).attr(r.HREF)),i(n._options.srcSelector).val(i(a).attr(r.SRC)),i(n._options.titleSelector).val(i(a).attr(r.TITLE)),i(n._options.relSelector).val(i(a).attr(r.REL)),i(n._options.altSelector).val(i(a).attr(r.ALT))),n._selectedImage&&(i(n._options.dialogImageSelector+" "+n._options.srcSelector).val(i(n._selectedImage).attr(r.SRC)),i(n._options.dialogImageSelector+" "+n._options.titleSelector).val(i(n._selectedImage).attr(r.TITLE)),i(n._options.dialogImageSelector+" "+n._options.altSelector).val(i(n._selectedImage).attr(r.ALT))),i(n._options.dialogLinkSelector+" "+n._options.submitSelector).submit(function(){var e,t=i(n._options.hrefSelector).val();t.length>0&&(a[0]&&a[0].tagName.toLowerCase()===r.A?e=a:(n._exec(r.CREATE_LINK,s),e=i("a[href="+s+"]",n._doc.body)),e.attr(r.HREF,t),e.attr(r.TITLE,i(n._options.titleSelector).val()),e.attr(r.REL,i(n._options.relSelector).val())),window.close()}),i(n._options.dialogImageSelector+" "+n._options.submitSelector).submit(function(){var e,t=i(n._options.srcSelector).val();t.length>0&&(n._exec(r.INSERT_IMAGE,s),(e=i("img[src$="+s+"]",n._doc.body)).attr(r.SRC,t),e.attr(r.TITLE,i(n._options.titleSelector).val()),e.attr(r.ALT,i(n._options.altSelector).val())),window.close()}),t=r.MAKE_TABLE_ONCLICK(n),i(n._options.dialogTableSelector+" "+n._options.submitSelector).submit(t),i(n._options.dialogPasteSelector+" "+n._options.submitSelector).submit(function(){var e=i(n._options.textSelector).val();n.paste(e),window.close()}),i(n._options.dialogPreviewSelector+" "+n._options.previewSelector).html(n.xhtml()),i(n._options.cancelSelector).mousedown(function(){window.close()}),i.isFunction(n._options.postInitDialog)&&n._options.postInitDialog(n,window)},r.MAKE_TABLE_ONCLICK=function(e){return function(){var t=i(e._options.rowsSelector).val(),n=i(e._options.colsSelector).val(),r=i(e._options.captionSelector).val(),a=i(e._options.summarySelector).val();e.insertTable(t,n,r,a),window.close()}},i.fn.isPhantomNode=function(){return 3===this[0].nodeType&&!/[^\t\n\r ]/.test(this[0].data)},i.fn.nextContentsUntil=function(e,t){var n,r=[],a=this.get(0);if(e=e||"",t=t||"",!a)return i();for(a=a.nextSibling;a&&!i(a).is(e);)r.push(a),a=a.nextSibling;return n=i(r),t?n.filter(t):n},i.fn.nextAllContents=function(){return i(this).nextContentsUntil("","")},i.fn.prevContentsUntil=function(e,t){var n,r=[],a=this.get(0);if(e=e||"",t=t||"",!a)return i();for(a=a.previousSibling;a&&!i(a).is(e);)r.push(a),a=a.previousSibling;return n=i(r),t?n.filter(t):n},i.fn.prevAllContents=function(){return i(this).prevContentsUntil("","")},r.isPhantomNode=function(e){return 3===e.nodeType&&!/[^\t\n\r ]/.test(e.data)},r.isPhantomString=function(e){return!/[^\t\n\r ]/.test(e)},i.fn.parentsOrSelf=function(e){var t=this;return 3===t[0].nodeType&&(t=t.parents().slice(0,1)),1===t.filter(e).size()?t:t.parents(e).slice(0,1)},r.changeNodeType=function(e,t){var n,r,a=e.attributes;for(i(e).wrapInner("<"+t+">"),n=i(e).children().get(0),r=0;r<a.length;r++)a[r].specified&&n.setAttribute(a[r].nodeName,a[r].nodeValue);return i(e).contents().unwrap(),n},r.Helper={replaceAll:function(e,t,n){var i=new RegExp(t,"g");return e.replace(i,n)},insertAt:function(e,t,n){return e.substr(0,n)+t+e.substring(n)},trim:function(e){return i.trim(e)},contains:function(e,t){var n;for(n=0;n<e.length;n+=1)if(e[n]===t)return!0;return!1},indexOf:function(e,t){var n,i=-1;for(n=0;n<e.length;n+=1)if(e[n]===t){i=n;break}return i},findByName:function(e,t){var n,i;for(n=0;n<e.length;n+=1)if((i=e[n]).name===t)return i;return null}},window.WYMeditor=r},ZDod:function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("8NzR")),a=l(n("wmCY")),o=n("4RZc"),s=n("vgZZ");function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".js-language-banner",function(e){var t=void 0!==a.default.locale?a.default.locale:void 0;e.find(".js-yes").on("click",function(){(0,s.write_cookie)("dismiss_language_banner","1"),(0,o.track)("Language Banner Yes",{lang:t})}),e.find(".js-no").on("click",function(n){n.preventDefault();var r=(0,i.default)(n.currentTarget).closest("form");i.default.ajax({method:r.attr("method"),url:r.attr("action"),data:r.serialize()}),e.addClass("is-hidden"),(0,s.write_cookie)("dismiss_language_banner","1"),(0,o.track)("Language Banner No",{lang:t})}),e.removeClass("is-hidden"),(0,o.track)("Language Banner View",{lang:t})})},"ZG+P":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),function(){function e(e){var t=a.default.t("onloads.views.follows.follow_button.Follow"),n=a.default.t("onloads.views.follows.follow_button.Following")+'<svg class="svg-icon__check ml1"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#check"></use></svg>';e.data("is-following")?(e.html(n),e.removeClass("btn--border-green"),e.addClass("btn--green")):(e.html(t),e.removeClass("btn--green"),e.addClass("btn--border-green")),e.removeClass("hidden")}function t(t,n){t.data("is-following")?(t.data("is-following",!1),e(t),n&&t.trigger("ksr:unfollow_user")):(t.data("is-following",!0),e(t),n&&t.trigger("ksr:follow_user"))}(0,i.default)(".js-follow-all").livequery(function(){var e=(0,i.default)(this);e.on("click",function(){var n=e.data("url"),o=(0,i.default)('<span class="spinner" />').spin("ksr","#000"),s=e.data("type");i.default.ajax({url:n,dataType:"json",method:"post",data:{type:s},beforeSend:function(){e.addClass("btn--disabled"),e.prepend(o)}}).success(function(n){200===n.status?(!function(e,n,r){(0,i.default)(".js-follow-user").each(function(){(0,i.default)(this).data("is-following")||t((0,i.default)(this),!1)}),e.unbind("click"),e.html(a.default.t("onloads.views.follows.follow_all_button.Following_all")),e.addClass("btn--disabled"),e.trigger("ksr:follow_all",[n,r])}(e,n.user_count,n.project_count),(0,r.default)({success:n.message})):(e.removeClass("btn--disabled"),(0,r.default)({success:n.message}))}).complete(function(){o.remove()})})}),(0,i.default)(".js-follow-user").livequery(function(){var n=(0,i.default)(this);n.on("click",function(e){var a=n.data("is-following")?n.data("unfollow-path"):n.data("follow-path");n.prop("disabled",!0),i.default.ajax({url:a,dataType:"json",method:"post"}).success(function(e){200===e.status?t(n,!0):(0,r.default)({error:e.message})}).complete(function(){n.prop("disabled",!1)}),e.preventDefault()}),n.on("mouseenter focus",function(){!function(e){e.data("is-following")&&(e.data("previous-html",e.html()),e.html(a.default.t("onloads.views.follows.follow_button.Unfollow")))}(n)}),n.on("mouseleave blur",function(){!function(e){var t=e.data("previous-html");e.data("is-following")&&t&&e.html(t)}(n)}),n.on("ksr:set_to_follow",function(){n.data("is-following")&&t(n,!0)}),e(n)})}()},ZYc1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PROJECT_STATES={canceled:"CANCELED",live:"LIVE",failed:"FAILED",successful:"SUCCESSFUL",started:"STARTED",submitted:"SUBMITTED",suspended:"SUSPENDED",purged:"PURGED"}},a1l5:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=s(n("hBlz")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body.profile",function(){function e(e){(e=e||(0,i.default)(".mobius")).each(function(){var e=(0,i.default)(this).data("mobius");if(e)for(var n in e.clear_extra_params(),t)t.hasOwnProperty(n)&&e.add_param(n,t[n])})}(0,i.default)("body#users_show").length&&void 0!==history.pushState&&((0,o.track)("Visited User Profile"),history.pushState(null,null,window.location.pathname));var t=(0,a.default)().query(!0);e(),(0,i.default)(".mobius").livequery(function(){e((0,i.default)(this))})})},aGLy:function(e,t,n){(function(i){var r,a,o,s;o=function(e,t,n,i){var r=e.Backbone,a=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,i){n.each(t,function(t,r){n[r]&&(e.prototype[r]=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,r){return n[t](this[i],s(e,this),r)};case 4:return function(e,r,a){return n[t](this[i],s(e,this),r,a)};default:return function(){var e=a.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}}(t,r,i))})},s=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},d=t.Events={},c=/\s+/,u=function(e,t,i,r,a){var o,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(o=n.keys(i);s<o.length;s++)t=u(e,t,o[s],i[o[s]],a)}else if(i&&c.test(i))for(o=i.split(c);s<o.length;s++)t=e(t,o[s],r,a);else t=e(t,i,r,a);return t};d.on=function(e,t,n){return f(this,e,t,n)};var f=function(e,t,n,i,r){(e._events=u(h,e._events||{},t,n,{context:i,ctx:e,listening:r}),r)&&((e._listeners||(e._listeners={}))[r.id]=r);return e};d.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),o=a[r];if(!o){var s=this._listenId||(this._listenId=n.uniqueId("l"));o=a[r]={obj:e,objId:r,id:s,listeningTo:a,count:0}}return f(e,t,i,this,o),this};var h=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),a=i.context,o=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:a,ctx:a||o,listening:s})}return e};d.off=function(e,t,n){return this._events?(this._events=u(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},d.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var a=e?[e._listenId]:n.keys(r),o=0;o<a.length;o++){var s=r[a[o]];if(!s)break;s.obj.off(t,i,this)}return this};var p=function(e,t,i,r){if(e){var a,o=0,s=r.context,l=r.listeners;if(t||i||s){for(var d=t?[t]:n.keys(e);o<d.length;o++){var c=e[t=d[o]];if(!c)break;for(var u=[],f=0;f<c.length;f++){var h=c[f];i&&i!==h.callback&&i!==h.callback._callback||s&&s!==h.context?u.push(h):(a=h.listening)&&0==--a.count&&(delete l[a.id],delete a.listeningTo[a.objId])}u.length?e[t]=u:delete e[t]}return e}for(var p=n.keys(l);o<p.length;o++)delete l[(a=l[p[o]]).id],delete a.listeningTo[a.objId]}};d.once=function(e,t,i){var r=u(m,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(r,t,i)},d.listenToOnce=function(e,t,i){var r=u(m,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,r)};var m=function(e,t,i,r){if(i){var a=e[t]=n.once(function(){r(t,a),i.apply(this,arguments)});a._callback=i}return e};d.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return u(g,this._events,e,void 0,n),this};var g=function(e,t,n,i){if(e){var r=e[t],a=e.all;r&&a&&(a=a.slice()),r&&v(r,i),a&&v(a,[t].concat(i))}return e},v=function(e,t){var n,i=-1,r=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,o);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,o,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};d.bind=d.on,d.unbind=d.off,n.extend(t,d);var _=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,d,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var a=i.unset,o=i.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var d=this.attributes,c=this.changed,u=this._previousAttributes;for(var f in r)t=r[f],n.isEqual(d[f],t)||s.push(f),n.isEqual(u[f],t)?delete c[f]:c[f]=t,a?delete d[f]:d[f]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!o){s.length&&(this._pending=i);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,d[s[h]],i)}if(l)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var r in e){var a=e[r];n.isEqual(t[r],a)||(i[r]=a)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){var t=this,i=(e=n.extend({parse:!0},e)).success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;if(!t.set(r,e))return!1;i&&i.call(e.context,t,n,e),t.trigger("sync",t,n,e)},M(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t;var a=(i=n.extend({validate:!0,parse:!0},i)).wait;if(r&&!a){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var o=this,s=i.success,l=this.attributes;i.success=function(e){o.attributes=l;var t=i.parse?o.parse(e,i):e;if(a&&(t=n.extend({},r,t)),t&&!o.set(t,i))return!1;s&&s.call(i.context,o,e,i),o.trigger("sync",o,e,i)},M(this,i),r&&a&&(this.attributes=n.extend({},l,r));var d=this.isNew()?"create":i.patch?"patch":"update";"patch"!==d||i.attrs||(i.attrs=r);var c=this.sync(d,this,i);return this.attributes=l,c},destroy:function(e){var t=this,i=(e=e?n.clone(e):{}).success,r=e.wait,a=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&a(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(M(this,e),o=this.sync("delete",this,e)),r||a(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||O();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});o(_,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},E=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),a=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;i<a;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+a+n]=r[i]};n.extend(y.prototype,d,{model:_,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,w))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){(t=n.extend({},b,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var a,o,s=[],l=[],d=[],c=[],u={},f=t.add,h=t.merge,p=t.remove,m=!1,g=this.comparator&&null==r&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(o=0;o<e.length;o++){a=e[o];var _=this.get(a);if(_){if(h&&a!==_){var y=this._isModel(a)?a.attributes:a;t.parse&&(y=_.parse(y,t)),_.set(y,t),d.push(_),g&&!m&&(m=_.hasChanged(v))}u[_.cid]||(u[_.cid]=!0,s.push(_)),e[o]=_}else f&&(a=e[o]=this._prepareModel(a,t))&&(l.push(a),this._addReference(a,t),u[a.cid]=!0,s.push(a))}if(p){for(o=0;o<this.length;o++)u[(a=this.models[o]).cid]||c.push(a);c.length&&this._removeModels(c,t)}var w=!1,C=!g&&f&&p;if(s.length&&C?(w=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,E(this.models,s,0),this.length=this.models.length):l.length&&(g&&(m=!0),E(this.models,l,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(o=0;o<l.length;o++)null!=r&&(t.index=r+o),(a=l[o]).trigger("add",a,this,t);(m||w)&&this.trigger("sort",this,t),(l.length||c.length||d.length)&&(t.changes={added:l,removed:c,merged:d},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},M(this,e),this.sync("read",this,e)},create:function(e,t){var i=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;i||this.add(e,t);var r=this,a=t.success;return t.success=function(e,t,n){i&&r.add(e,n),a&&a.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var a=this.indexOf(r);this.models.splice(a,1),this.length--,delete this._byId[r.cid];var o=this.modelId(r.attributes);null!=o&&delete this._byId[o],t.silent||(t.index=a,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof _},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),a=this.modelId(t.attributes);r!==a&&(null!=r&&delete this._byId[r],null!=a&&(this._byId[a]=t))}}this.trigger.apply(this,arguments)}});o(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,d,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(k);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,r){var a=T[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:a,dataType:"json"};if(r.url||(o.url=n.result(i,"url")||O()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",r.emulateJSON&&(o.data._method=a);var s=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),s)return s.apply(this,arguments)}}"GET"===o.type||r.emulateJSON||(o.processData=!1);var l=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,l&&l.call(r.context,e,t,n)};var d=r.xhr=t.ajax(n.extend(o,r));return i.trigger("request",i,d,r),d};var T={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var A=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},R=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,I=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(A.prototype,d,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var a=this;return t.history.route(e,function(n){var o=a._extractParameters(e,n);!1!==a.execute(r,o,i)&&(a.trigger.apply(a,["route:"+i].concat(o)),a.trigger("route",i,o),t.history.trigger("route",a,i,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(D,"\\$&").replace(R,"(?:$1)?").replace(x,function(e,t){return t?e:"([^/?]+)"}).replace(I,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var N=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,L=/#.*$/;N.started=!1,n.extend(N.prototype,d,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(j,"")},start:function(e){if(N.started)throw new Error("Backbone.history has already been started");if(N.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(P,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var a=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!N.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new N;_.extend=y.extend=A.extend=C.extend=N.extend=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};var O=function(){throw new Error('A "url" property or function must be specified')},M=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t},s="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i,r=[n("shXp"),n("l/Rs"),t],void 0===(a=function(e,t,n){s.Backbone=o(s,n,e,t)}.apply(t,r))||(e.exports=a)}).call(t,n("DuR2"))},aHws:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("BafW"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,i.default)(document).on("click",".NS_post_likes__button button",function(e){e.preventDefault();var t=(0,i.default)(this).closest("form");i.default.ajax({url:t.attr("action"),dataType:"json",type:"POST",success:function(e){(e.modal&&i.default.create_login_modal(e.data,"post_like"),e.post)&&(r.default.find(e.post.id)||new r.default({id:e.post.id})).set(e.post)}})})})},"ac+W":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_navigator=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.livesearch_pretty_input_dropdown(t),n.on("livesearch:selected",function(e,t){t&&(window.location=t[1])})})}}(i)},arWD:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("yQDW"),n("LNuh"),(0,a.default)(function(){(0,a.default)(".js-lazy-image").livequery(function(){(0,a.default)(this).unveil(500,function(){var e=(0,a.default)('<div class="loader-dots loader-dots--mega loader-dots--inline loader-dots--overlay" />').css("visibility","hidden");(0,a.default)(this).after(e);var t={x:(0,a.default)(this).offset().left+this.clientWidth/2-e.width()/2,y:(0,a.default)(this).offset().top+this.clientHeight/2-e.height()/2};e.css("top",parseInt(t.y)+"px").css("left",parseInt(t.x)+"px").css("visibility","visible"),(0,a.default)(this).load(function(){return e.remove()})})})})},asZU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestId=void 0;var i=n("I2cB"),r=n("Z6GA"),a=t.requestId=function(e){return i.maybe.fromNullable(e.documentElement.dataset).chain((0,r.maybeProp)("requestId")).chain(function(e){return i.maybe.fromNullable("__REQUEST_ID_MIDDLEWARE_SWAP_TOKEN__"===e?null:e)}).getOrElse(null)};window.request_id=a(document)},axe2:function(e,t,n){"use strict";var i=f(n("GiK3")),r=f(n("O27J")),a=f(n("l/Rs")),o=f(n("shXp")),s=f(n("aGLy")),l=n("jCVd"),d=f(n("6djF")),c=f(n("wmCY")),u=n("Tvaj");function f(e){return e&&e.__esModule?e:{default:e}}n("SzcX"),window.VideoTrackView=s.default.View.extend({VIDEO_PAUSE_LENGTH:1e3,PIXELS_PER_SECOND:100,MINIMUM_MILLISECONDS:2e3,NEW_CAPTION_OFFSET:-500,events:{"click .js-timeline":"jumpTimelineEvent","click .js-cue":"pauseEvent","keypress .js-cue-textarea":"autoPauseEvent","keydown .js-cue-textarea":"catchWaywardKeysEvent","keyup .js-cue-textarea":"typeInCueEvent","cut .js-cue-textarea":"cutPasteInCueEvent","paste .js-cue-textarea":"cutPasteInCueEvent","mousemove .js-timeline":"showHoverLineEvent","mouseleave .js-timeline":"hideHoverLineEvent","click .js-save-track":"saveTrackEvent","click .js-destroy-cue":"destroyCueEvent"},initialize:function(){this.model.on("add:cues_attributes",o.default.bind(this.addCue,this)),this.model.on("destroy:cues_attributes",o.default.bind(this.removeCue,this)),this.model.on("add:cues_attributes destroy:cues_attributes",o.default.bind(this.dirty,this)),this.model.on("change:cues_attributes[*]",o.default.bind(this.dirty,this)),this.model.on("change:cues_attributes[*].start_time",o.default.bind(this.adjustCue,this)),this.model.on("change:cues_attributes[*].end_time",o.default.bind(this.adjustCue,this)),this.model.on("reset:cues_attributes",o.default.bind(this.renderCuesOnTimeline,this)),this._initializeDraggableBar(),this._initializeUnsavedNavigation(),this._initializeDocumentListeners(),this.disableSaveButton()},initializeVideo:function(){this.video=new window.CaptioningVideo(this.videoEl()),this.video.importTrackFrom(this.model),this._initializeVideoMetadata()},videoEl:function(){return this.$el.find("video").get(0)},_initializeVideoMetadata:function(){var e=this;this.video.el.readyState>=this.video.el.HAVE_METADATA?this.renderTimeline():this.video.$el.one("loadedmetadata",function(){e.renderTimeline()})},_initializeDraggableBar:function(){var e=this;this.$el.on("mousedown touchstart",".js-non-draggable",function(e){e.stopImmediatePropagation()}),this.$el.draggable_bar(".js-timeline",function(t,n,i){var r,o,s,l=e.$el.find(".js-timeline"),d=(0,a.default)(n),c=d.data("cue-cid")||d.closest("[data-cue-cid]").data("cue-cid"),u=e.model.get("cues_attributes"),f=u.get(c);f&&(e.video.pause(),r=f.get("start_time"),o=t*l.width()+l.scrollLeft()-i,o-=l.width()/2,d.is(".js-cue-handle")&&(o+=d.width()),o=e.xFromTimeline(o),d.is(".js-cue-handle")?(o=e._pointWithinBounds(u.indexOf(f),o),o=Math.max(r+e.MINIMUM_MILLISECONDS,o),f.set("end_time",o)):(s=f.get("end_time")-r,o=e._rangeWithinBounds(u.indexOf(f),o,s),f.set({start_time:o,end_time:o+s})))})},_pointWithinBounds:function(e,t){var n=this.model.get("cues_attributes"),i=n.at(e),r=n.at(e+1);return r&&r.get("start_time")<t&&(t=r.get("start_time")-1),Math.max(t,i.get("start_time")+.5)},_rangeWithinBounds:function(e,t,n){var i=this.model.get("cues_attributes"),r=i.at(e-1),a=i.at(e+1);return n=n||0,a&&a.get("start_time")<t+n&&(t=a.get("start_time")-n-1),r&&r.get("end_time")>t&&(t=r.get("end_time")+1),Math.max(0,Math.min(this.video.duration(),t+n)-n)},_initializeUnsavedNavigation:function(){var e=this;(0,a.default)(window).on("beforeunload.video_tracks",function(){if(e._dirty)return c.default.t("views.video_track.You_have_unsaved_changes")})},_initializeDocumentListeners:function(){var e=this;(0,a.default)(document).on("keydown.video_tracks",function(t){e.handleKeyboardShortcutsFromEvent(t)}).on("keyup.video_tracks",function(t){if(t.which===u.ENTER&&!t.shiftKey){var n,i=e.getCurrentCue();n=i?i.get("end_time")+1:e.video.getCurrentTime(),e.addCueAt(n),t.preventDefault()}})},remove:function(){(0,a.default)(window).off(".video_tracks"),(0,a.default)(document).off(".video_tracks"),s.default.View.prototype.remove.apply(this,arguments)},render:function(){var e,t={track:this.model.toJSON(),encodings:this.model.get("encodings")||{},editProjectPath:this.$el.data("edit-project-path")},n=Math.random().toString(16).substr(2);return(e=o.default.clone(t.encodings)).high&&(e.high+=(e.high.split("?")[1]?"&":"?")+n),t.encodings=e,r.default.render(p(t),this.el),this.initializeVideo(),this},createSpoke:function(e,t){var n=(t=t||{}).level||(e%1e4==0?3:e%5e3==0?2:e%500==0?1:0);return{msecs:e/1e3,x:this.xOnTimeline(e),level:n,displayText:n>1}},renderTimeline:function(){var e,t=this.video.duration(),n=this.xOnTimeline(t),i=this,a=o.default.range(500,t,500),s={};s.timelineEnd=n,s.spokes=o.default.map(a,function(e){return i.createSpoke(e)}),s.spokes.push(this.createSpoke(0,{level:4})),s.spokes.push(this.createSpoke(this.video.duration(),{level:4})),r.default.render(h(s),this.$el.find(".timeline_wrapper").get(0)),e=this.$el.find(".timeline"),this.renderCuesOnTimeline(),this._attachEventsToTimeline(e)},renderCuesOnTimeline:function(){var e=this.model.get("cues_attributes");this.$el.find(".js-timeline__cues").empty(),e.forEach(o.default.bind(this.adjustCue,this)),e.length>0&&this.focusCue(e.first())},_attachEventsToTimeline:function(e){var t=this;this.video.$el.on("timeupdate",function(){var n,i=t.video.getCurrentTime(),r=t.xOnTimeline(i);t.video.paused()||e.scrollLeft(r),t.$(".js-timeline-line").css("left",r+e.width()/2),(n=t.model.get("cues_attributes").find(function(e){return e.get("start_time")<=i&&e.get("end_time")>i}))&&t.focusCue(n)}),this.video.$el.on("play",function(){t.$(".js-timeline").css("overflow-x","hidden")}),this.video.$el.on("pause",function(){t.$(".js-timeline").css("overflow-x","scroll")})},enableSaveButton:function(){this.$(".js-save-track").text(c.default.t("views.video_track.Save")).addClass("btn--green").removeClass("btn--gray").prop("disabled",!1)},disableSaveButton:function(){this.$(".js-save-track").text(c.default.t("views.video_track.Saved")).removeClass("btn--green").addClass("btn--gray").prop("disabled",!0)},dirty:function(){this._dirty=!0,this._saving||this.enableSaveButton()},addCue:function(e){this.adjustCue(e),this.focusCue(e)},removeCue:function(e){this.$cue(e.cid).remove()},adjustCue:function(e){var t=this.$cue(e.cid),n=e.get("start_time"),i=e.get("end_time");t.css("left",Math.floor(this.xOnTimeline(n))),t.width(Math.floor(this.xOnTimeline(i-n)))},$cue:function(e){var t=this.$(".js-timeline"),n=t.find('[data-cue-cid="'+e+'"]'),i=this.model.get("cues_attributes").get(e);return i?(0===n.length&&(n=t.find(".js-cue-template").clone(),n.removeClass("js-cue-template"),n.addClass("js-cue"),n.attr("data-cue-cid",e),n.find(".js-cue-textarea").val(i.get("body")),n.appendTo(t.find(".js-timeline__cues"))),n.removeClass("hidden"),n):n},cue:function(e){var t=(0,a.default)(e),n=t.data("cue-cid")||t.closest("[data-cue-cid]").data("cue-cid");return this.model.get("cues_attributes").get(n)},autoPause:function(){var e=this;this.video.paused()&&!this.unpauseTimer||(this.video.pause(),this.unsetPauseTimer(),this.unpauseTimer=setTimeout(function(){delete e.unpauseTimer,e.video.play()},this.VIDEO_PAUSE_LENGTH))},unsetPauseTimer:function(){clearTimeout(this.unpauseTimer)},focusCue:function(e){this.showingCue(e)||this.video.setCurrentTime(e.get("start_time")),this.$cue(e.cid).find(":input").focus()},xOnTimeline:function(e){return e*this.PIXELS_PER_SECOND/1e3},xFromTimeline:function(e){return e/this.PIXELS_PER_SECOND*1e3},saveTrack:function(){var e=this.$(".js-save-track"),t=this.$(".js-last-save"),n=this.$(".js-timeline__cues :input"),i=this.model.save(),r=this;i&&(this._saving=!0,this._dirty=!1,this.disableSaveButton(),e.text(c.default.t("views.video_track.Saving")),n.prop("disabled",!0),i.success(function(){r.timedText(t)}).error(function(){e.text(c.default.t("views.video_track.Errored"))}).always(function(){r._saving=!1,r._dirty?r.enableSaveButton():r.disableSaveButton(),n.prop("disabled",!1)}))},focusPreviousCue:function(){var e,t=this.model.get("cues_attributes"),n=this.video.getCurrentTime();(e=o.default.last(t.filter(function(e){return e.get("end_time")<n})))&&this.focusCue(e)},focusNextCue:function(){var e,t=this.model.get("cues_attributes"),n=this.video.getCurrentTime();(e=t.find(function(e){return e.get("start_time")>n}))&&this.focusCue(e)},getCurrentCue:function(){var e=this.model.get("cues_attributes"),t=this.video.getCurrentTime();return e.find(function(e){return e.get("start_time")<=t&&e.get("end_time")>=t})},showingCue:function(e){var t=this.video.getCurrentTime(),n=e.get("start_time"),i=e.get("end_time");return t>=n&&t<i},pointOnTimeline:function(e){var t=this.$(".js-timeline");return e-=t.offset().left,e+=t.scrollLeft(),e-=t.width()/2,this.xFromTimeline(e)},willOverlapCues:function(e,t){return!!this.model.get("cues_attributes").find(function(n){var i=n.get("start_time"),r=n.get("end_time");return i>=e&&i<e+t||r>=e&&r<e+t})},alignWithCursor:function(e,t){var n=this.$(".js-timeline"),i=n.offset().left,r=n.scrollLeft();e.removeClass("hidden"),e.css("left",d.default.pageX(t)-i+r)},addCueAt:function(e,t){var n=this.model.get("cues_attributes");t=t||this.MINIMUM_MILLISECONDS,this.willOverlapCues(e,t)||n.add({start_time:e,end_time:e+t})},jumpTimelineEvent:function(e){var t,n=(0,a.default)(e.target);n.is(".js-timeline")?this.video.setCurrentTime(0):n.is(".js-timeline--area")&&(t=this.pointOnTimeline(d.default.pageX(e)),this.video.setCurrentTime(t))},addCueEvent:function(e){var t=this.pointOnTimeline(d.default.pageX(e));this.addCueAt(t),e.preventDefault()},pauseEvent:function(){this.video.pause()},autoPauseEvent:function(){this.autoPause()},catchWaywardKeysEvent:function(e){e.which===u.BACKSPACE?this.autoPause():e.which!==u.ENTER||e.shiftKey||e.preventDefault()},typeInCueEvent:function(e){var t=this.cue(e.currentTarget);if(e.which!==u.ENTER||e.shiftKey)t.set("body",(0,a.default)(e.currentTarget).val());else{var n=this.video.getCurrentTime(),i=t.get("start_time"),r=n;t.shouldOverrideEndTime&&(n<i&&(r=i,i=n),(r+=this.NEW_CAPTION_OFFSET)-i<this.MINIMUM_MILLISECONDS&&(r=i+this.MINIMUM_MILLISECONDS),t.set({start_time:i,end_time:r})),this.addCueAt(Math.max(t.get("end_time"),r)+1),e.stopPropagation()}e.preventDefault()},cutPasteInCueEvent:function(e){var t=this.cue(e.currentTarget);setTimeout(function(){t.set("body",(0,a.default)(e.currentTarget).val())},0)},destroyCueEvent:function(e){this.cue(e.currentTarget).destroy(),e.preventDefault()},showHoverLineEvent:function(e){var t=this.$(".js-timeline-mouse-line");this.alignWithCursor(t,e)},hideHoverLineEvent:function(){this.$(".js-timeline-mouse-line").addClass("hidden")},saveTrackEvent:function(e){!this._saving&&this._dirty&&this.saveTrack(),e.preventDefault()},handleKeyboardShortcuts:function(e,t){return e===u.ESC?(this.video.paused()?this.video.play():this.video.pause(),this.$(".js-onboarding").addClass("fade-out"),!0):e===u.TAB&&(t?this.focusPreviousCue():this.focusNextCue(),!0)},handleKeyboardShortcutsFromEvent:function(e){return!!this.handleKeyboardShortcuts(e.which,e.shiftKey)&&(e.preventDefault(),!0)},timedText:function(e,t,n){var i=this;t=t||1e3,n=n||new Date,clearTimeout(this.timedTextTimeoutId),this.timedTextTimeoutId=setTimeout(function(){i.timedText(e,t,n)},t),this._renderLastSaved(e,n)},_renderLastSaved:function(e,t){e.text(c.default.t("views.video_track.Saved")+" "+(0,l.distance)(new Date,t))}});var h=function(e){var t=e.spokes,n=e.timelineEnd;return i.default.createElement("div",{className:"timeline relative bg-white clear border-top js-timeline user-select-none"},i.default.createElement("div",{className:"timeline_scroller z1 relative js-timeline--area",style:{width:n}},i.default.createElement("div",{className:"timeline_spokes absolute grey"},t.map(function(e,t){return i.default.createElement("div",{key:t},i.default.createElement("div",{className:"spoke spoke--level-"+e.level+" absolute",style:{bottom:0,left:e.x}}),e.displayText&&i.default.createElement("div",{className:"absolute pl2",style:{bottom:15,left:e.x}},e.msecs,"s"))}),i.default.createElement("div",{className:"spoke end",style:{bottom:0,left:0}}),i.default.createElement("div",{className:"spoke end",style:{bottom:0,left:n}})),i.default.createElement("div",{className:"js-timeline__cues absolute"}),i.default.createElement("div",{className:"js-cue-template timeline_handle z1 absolute bg-white border rounded tiny_type hidden"},i.default.createElement("div",{className:"timeline_drag_handle js-cue-handle absolute"},i.default.createElement("span",{className:"ss-icon ss-navigateright"})),i.default.createElement("div",{className:"js-non-draggable"},i.default.createElement("div",{className:"cue-textarea-wrapper"},i.default.createElement("textarea",{className:"cue-textarea js-cue-textarea",placeholder:c.default.t("video_tracks.Transcribe_and_press_Enter"),maxLength:"200"})),i.default.createElement("div",{className:"caption-actions"},i.default.createElement("a",{href:"javascript:void(0)",className:"js-destroy-cue"},i.default.createElement("div",{className:"ss-icon ss-delete"})))))),i.default.createElement("div",{className:"timeline_hover_line js-timeline-mouse-line absolute hidden"}),i.default.createElement("div",{className:"timeline_line absolute z1 js-timeline-line"}))},p=function(e){var t=e.track,n=e.encodings,r=e.editProjectPath;return i.default.createElement("div",null,i.default.createElement("div",{className:"clearfix mt3 mt5-sm"},i.default.createElement("div",{className:"f5 right mt3 mt5-sm"},i.default.createElement("button",{className:"btn btn--gray button_save_track right js-save-track",disabled:!0},c.default.t("views.video_track.Saved")),i.default.createElement("div",{className:"right mr2 js-last-save mt2 grey-dark"})),i.default.createElement("h2",{className:"mb2"},c.default.t("views.video_track.Language_track",{label:t.label})),i.default.createElement("a",{className:"left mb3 mb5-sm regular blue",href:r},i.default.createElement("span",{className:"ss-icon ss-navigateleft",style:{fontSize:"0.8em"}})," ",c.default.t("views.video_track.Back_to_edit"))),i.default.createElement("div",{className:"container-flex bg-grey-light border rounded mb3 mb10-sm"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col col-4 mt3 mt5-sm mr2 ml3 ml5-sm"},i.default.createElement("h4",{className:"grey-dark"},c.default.t("views.video_track.Controls")),i.default.createElement("hr",null),i.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Play_pause")),i.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},i.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Esc"))),i.default.createElement("hr",{className:"mt2"}),i.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Add_caption")),i.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},i.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Enter"))),i.default.createElement("hr",{className:"mt2"}),i.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Line_break")),i.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},i.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Shift")),"+",i.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Enter"))),i.default.createElement("hr",{className:"mt2"}),i.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Next_caption")),i.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},i.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Tab"))),i.default.createElement("hr",{className:"mt2"}),i.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Previous_caption")),i.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},i.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Shift")),"+",i.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Tab"))),i.default.createElement("hr",{className:"mt2"})),i.default.createElement("div",{className:"col col-7 mt3 mt5-sm pb3 pb5-sm ml2"},i.default.createElement("div",{className:"onboarding js-onboarding"},i.default.createElement("div",{className:"onboarding-copy formatted-lists"},i.default.createElement("h3",{className:"mb3 mb5-sm"},c.default.t("views.video_track.Getting_started")),i.default.createElement("ol",null,i.default.createElement("li",{dangerouslySetInnerHTML:{__html:c.default.t("views.video_track.Press_esc_to_play")}}),i.default.createElement("li",null,c.default.t("views.video_track.When_you_type_the_video")),i.default.createElement("li",{dangerouslySetInnerHTML:{__html:c.default.t("views.video_track.When_its_time_to_start_a_new_caption")}})),i.default.createElement("h3",{className:"center mt3 mt7-sm",dangerouslySetInnerHTML:{__html:c.default.t("views.video_track.Press_esc_and_start_typing")}})),i.default.createElement("div",{className:"onboarding-bg"})),i.default.createElement("div",{className:"video-player show-controls-below js-video-player"},i.default.createElement("video",null,n&&i.default.createElement("source",{src:n.high,type:"video/mp4"})),i.default.createElement("div",{className:"play_button_big play_button_dark absolute-center rounded has_played_hide play_button_big_hide"},i.default.createElement("span",{className:"ss-icon ss-play"}),c.default.t("views.video_track.Play")),i.default.createElement("div",{className:"player_controls white bg-green-dark"},i.default.createElement("div",{className:"left"},i.default.createElement("a",{className:"button button_icon button_dark playpause play mr2"},i.default.createElement("span",{className:"play ss-icon ss-play"}),i.default.createElement("span",{className:"pause ss-icon ss-pause"})),i.default.createElement("span",{className:"time current_time f12 left"},"00:00")),i.default.createElement("div",{className:"right"},i.default.createElement("span",{className:"time total_time f12 left mr2"},"00:00"),i.default.createElement("a",{className:"left button button_icon button_icon_white volume"},i.default.createElement("span",{className:"ss-icon ss-volume icon_volume_nudge"}),i.default.createElement("span",{className:"ss-icon ss-highvolume"})),i.default.createElement("div",{className:"volume_container left"},i.default.createElement("div",{className:"progress_bar progress_bar_dark progress_bg"},i.default.createElement("div",{className:"progress_bar_bg"}),i.default.createElement("div",{className:"progress progress_bar_progress"}),i.default.createElement("div",{className:"progress_handle progress_bar_handle"}))),i.default.createElement("a",{className:"left button button_icon button_icon_white fullscreen"},i.default.createElement("span",{className:"ss-icon ss-expand"}),i.default.createElement("span",{className:"ss-icon ss-contract"}))),i.default.createElement("div",{className:"clip"},i.default.createElement("div",{className:"progress_container pr2 pl2"},i.default.createElement("div",{className:"progress_bar progress_bar_dark progress_bg"},i.default.createElement("div",{className:"progress_bar_bg"}),i.default.createElement("div",{className:"buffer progress_bar_buffer"}),i.default.createElement("div",{className:"progress progress_bar_progress"}),i.default.createElement("div",{className:"progress_handle progress_bar_handle"})))),i.default.createElement("div",{className:"clear"}))))),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col col-12 relative"},i.default.createElement("div",{className:"timeline_wrapper"})))))}},b5hM:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){var t=38,n=40,i=13;function r(t,n){this.$elem=t,this.options=e.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(e){return e}},n);var i=this.$elem.closest(".field_with_icon"),r=e([]);(r=i.length?i.siblings(".results"):this.$elem.siblings(".results")).length?(this.$results=r,this.$results.find("div.no_results").remove()):(this.$results=e('<div class="results"></div>'),i.length?i.after(this.$results):this.$elem.after(this.$results)),this.$results.find("ul.result_list").length||this.$results.append('<ul class="result_list"></ul>'),this.$no_results=e('<div class="no_results">'+this.options.no_results_html+"</div>"),this.$no_results.hide(),this.$results.append(this.$no_results),this.handle_optional_content(),this.livesearch=t.livesearch(this.options).data("livesearch"),this._attach()}e.fn.livesearch_input_dropdown=function(t){return t=t||{},e(this).each(function(){var n=e(this).data("livesearch.input_dropdown");n||(n=new r(e(this),t),e(this).data("livesearch.input_dropdown",n))})},e.extend(r.prototype,{_attach:function(){var e=this;this.$elem.on("livesearch:results",function(t,n){e.options.process_results&&(n=e.options.process_results(n)),e.show_results(n),e.push_history(n)}),this.bind_results(),this.bind_popstate(),this.$elem.on("keydown.autocomplete",function(r){var a,o,s,l=!!e.$results.find(".selected").length;switch(r.keyCode){case t:l?((a=e.$results.find(".selected").prev(":not(.not_result)")).length||(a=e.$results.find("li:not(.not_result)").last()),e.select(a,!1)):e.select(e.$results.find("li:not(.not_result)").last(),!1),r.preventDefault();break;case n:l?((o=e.$results.find(".selected").next(":not(.not_result)")).length||(o=e.$results.find("li:not(.not_result)").first()),e.select(o,!1)):e.select(e.$results.find("li:not(.not_result)").first(),!1),r.preventDefault();break;case i:s=e.$results.find(".selected"),e.input_can_submit()||r.preventDefault(),s.length&&(r.preventDefault(),e.select(s,!0))}})},history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var e=this;this.replacing_history_state=!1,window.onpopstate=function(t){t.state&&t.state.livesearch?(e.show_results(t.state.livesearch.results),e.livesearch.suspend_while(function(){e.$elem.val(t.state.livesearch.input_value).trigger("input")})):e.reset(!0)}}},input_can_submit:function(){var e=this.livesearch.search_xhr.readyState,t=e>0&&e<4;return this.options.input_can_submit_on_enter&&!t&&this.$elem.is(":focus")},bind_results:function(){var t=this;this.$results.find("li").on("click",function(n){t.select(e(this),!0),n.preventDefault()}),this.$results.find("li").on("mouseover",function(){t.select(e(this)),t.unselect_on_mouseout=!0}),this.$results.on("mouseout",function(){t.unselect_on_mouseout&&t.unselect_currently_selected()}),this.$elem.on("livesearch:reveal_results",function(){t.reveal_results()})},build_result_names_list:function(t){var n=[],i=this;return e.each(t,function(e,t){i.options.return_name_from_result?t=i.options.return_name_from_result(t):"string"!=typeof t&&(t=t[0]),n.push(t)}),n},show_results:function(t){var n,i,r,a=this.$results.children("ul"),o=e([]);t.results&&(r=t,t=t.results),this.unselect_currently_selected(),a.empty(),t.length?(this.$no_results.hide(),a.show()):(this.$no_results.show(),a.hide()),n=this.build_result_names_list(t),e.each(n,function(n,i){var r=e("<li>"+i+"</li>");r.data("livesearch_result",t[n]),a.append(r)}),r&&r.count>t.length&&(i="see all "+r.count+" results",o=e("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:i,class:"see_all not_result"}).html(i).wrap("<li>"),a.append(o)),this.bind_results(),this.reveal_results()},push_history:function(e){if(this.history_api_supported()&&!this.options.ignore_history){"string"==typeof e&&(e=JSON.parse(e));var t={livesearch:{input_value:this.$elem.val(),results:e}};this.replacing_history_state?(history.replaceState(t),this.replacing_history_state=!1):history.pushState(t,"","?"+this.livesearch.last_search)}},reveal_results:function(){var t=this;this.$results.slideDown(function(){e(window).resize(),t.$results.trigger("sticky_bar:fix_to_bottom"),t.$results.trigger("shifted"),t.$results.trigger("livesearch:revealed_results")})},reset:function(e){this.$results.hide(),this.$elem.val(""),e&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var e=this.$results.children("ul").children("li.selected");e.trigger("livesearch:unselect"),e.removeClass("selected"),this.unselect_on_mouseout=!1},select:function(e,t){var n=this;e.is(".not_result")||(this.unselect_currently_selected(),e.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){n.$elem.val(e.text()),n.$elem.focus()}),e.trigger("livesearch:soft_select"),t&&e.trigger("livesearch:selected",[e.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})}(i)},bAet:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(".NS-curated_page_projects-new").livequery(function(){var e=(0,a.default)(this),t=e.find("form.curated_pages_form"),n=parseInt((0,a.default)("div.blurb .character_counter .number:first",e).text(),10);(0,a.default)(".blurb textarea",e).validates_max_length().validates_presence(),(0,a.default)(".blurb",e).on("validate:invalid",function(){(0,a.default)(this).addClass("errored")}),(0,a.default)(document).on("validate:valid",".blurb, .meta h1",function(){(0,a.default)(this).removeClass("errored")}),(0,a.default)("div.blurb",e).on("keypress cut paste input",function(){var e=(0,a.default)(this),t=e.find("textarea").val().length,i=n-t;e.find("textarea").validate(),e.find(".character_counter .number").text(i)}),e.find(".save").click(function(){var e=t.find(".buttons .loading");(0,a.default)("div.blurb textarea").validate()&&(e.show(),a.default.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"json",global:!1,success:function(n){t.trigger("close.modal_dialog"),t.trigger("project_added_to_curated_page",[n]),e.hide()}}))}),e.find(".cancel").click(function(){(0,a.default)(this).trigger("close.modal_dialog")})})},bRUp:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("#NS_discover__sorts",function(e){var t=e.hasClass("refresh_enabled");e.find("li > a").on("click",function(n){var r=(0,i.default)(this),a=r.closest("li");t?(e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),r.addClass("ksr-green-500").removeClass("black")):(e.find(".selected").removeClass("selected"),a.addClass("selected")),(0,i.default)(document).trigger("discovery:sorts:changed",a.data("sort")),e.trigger("ksr_popover:close"),n.preventDefault()}),(0,i.default)(document).on("discovery:sentence:changed",function(n,i){t?(e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),e.find('li[data-sort="'+(i.sort||"magic")+'"] a').addClass("ksr-green-500").removeClass("black")):(e.find(".selected").removeClass("selected"),e.find('li[data-sort="'+(i.sort||"magic")+'"]').addClass("selected"))}),(0,i.default)(document).on("discovery:sorts:load_sample",function(n,i){e.find(".selected").removeClass(),t?i.sort?e.find('li[data-sort="'+i.sort+'"] a').addClass("ksr-green-500").removeClass("black"):e.find('li[data-sort="magic"] a').addClass("ksr-green-500").removeClass("black"):i.sort?e.find('li[data-sort="'+i.sort+'"]').addClass("selected"):e.find('li[data-sort="magic"]').addClass("selected")})})},"bfo+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIdentityDocument=void 0;var i=n("Z6GA");t.createIdentityDocument=function(e,t,n){return(0,i.fetchGraph)("\n  mutation ($projectId: ID!, $foreignKey: String, $foreignKeyBack: String) {\n    createIdentityDocument(input:{projectId:$projectId, foreignKey:$foreignKey, foreignKeyBack:$foreignKeyBack}) {\n      isSuccessful\n    }\n  }\n",{projectId:e,foreignKey:t,foreignKeyBack:n})}},c1YT:function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");!function(e){e.fn.render=function(t){return e(this).each(function(){e(this).data("renderer")(t)}),this},e.fn.define_renderer=function(t){return e(this).data("renderer",t),this}}(i)},c3QO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.addMemoizedShippingLocation=function(e,t){return i({type:"ADD_MEMOIZED_SHIPPING_TO_SELECTED_REWARD"},e,{namespace:t})},t.continueToNextPage=function(e){return{type:"REWARD_CONTINUE",rewardId:e}},t.freezePin=function(){return{type:"REWARD_FREEZE_PIN"}},t.onCheckoutFailure=function(e){return{type:"REWARD_CHECKOUT_FAILURE",err:e}},t.onRewardSelected=function(e){return{type:"REWARD_SET_SELECTED_REWARD",rewardFacts:e}},t.onPledgeValueUpdated=function(e){return{type:"REWARD_NEW_PLEDGE_VALUE",newValue:e}},t.payWithApplePay=function(e,t){return{type:"REWARD_APPLE_PAY",dispatch:e,rewardId:t}},t.requestRedirect=function(e){return{type:"REWARD_REQUEST_REDIRECT",path:e}},t.saveRewardOffset=function(e,t){return{type:"REWARD_SAVE_OFFSET",offsetHeight:t,rewardId:e}},t.toggleTruncation=function(){return{type:"REWARD_TRUNCATION_TOGGLE"}},t.truncateDescription=function(){return{type:"REWARD_TRUNCATE_DESCRIPTION"}},t.updateApplePayCapable=function(e){return{type:"REWARD_UPDATE_APPLE_PAY",newValue:e}},t.validateField=function(e){return{type:"REWARD_TOUCH_FIELD",fieldName:e}},t.noopAction=function(){return{type:"NOOP"}}},cBsc:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("oTWu"),n("h1HY"),(0,r.default)("body#blog_posts_category",function(e){var t,n;(t=(0,i.default)("#sidebar",e)).sticky_bar({parent:t.closest("#content")}),n=(0,i.default)(".mobius",e),(0,i.default)("div.load_more",e).show(),(0,i.default)("div.pagination",e).hide(),n.persistent_paging()})},cDEd:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("change","body#help_copyright form.select_country",function(){(0,a.default)(this).submit()})})},cE9f:function(e,t,n){"use strict";var i=s(n("rXeC")),r=s(n("I1z3")),a=s(n("obSy")),o=s(n("wmCY"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e={Bold:{name:"Bold",title:"Strong",css:"wym_tools_strong"},Italic:{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},Superscript:{name:"Superscript",title:"Superscript",css:"wym_tools_superscript"},Subscript:{name:"Subscript",title:"Subscript",css:"wym_tools_subscript"},InsertOrderedList:{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},ToggleUnorderedList:{name:"ToggleUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list",html:'<li><a name="ToggleUnorderedList" href="#" title="'+o.default.t("onloads.initializers.editor.editor.List")+'"><span class="ss-icon ss-list"></span></a></li>'},Indent:{name:"Indent",title:"Indent",css:"wym_tools_indent"},Outdent:{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},Undo:{name:"Undo",title:"Undo",css:"wym_tools_undo"},Redo:{name:"Redo",title:"Redo",css:"wym_tools_redo"},CreateLink:{name:"CreateLink",title:"Link",css:"wym_tools_link",html:'<li class="wym_tools_link"><a name="CreateLink" href="#" title="'+o.default.t("onloads.initializers.editor.editor.Link")+'"><span class="ss-icon ss-link"></span></a></li>'},Unlink:{name:"Unlink",title:"Unlink",css:"wym_tools_unlink",html:'<li class="wym_tools_unlink"><a name="Unlink" href="#" title="'+o.default.t("onloads.initializers.editor.editor.Unlink")+'"><span class="ss-icon ss-unlink"></span></a></li>'},AssetVideo:{name:"AssetVideo",title:"Asset_Video",css:"wym_tools_asset_video",html:'<li><a name="AssetVideo" href="#" title="'+o.default.t("onloads.initializers.editor.editor.Video")+'"><span class="ss-icon ss-video"></span></a></li>'},AssetAudio:{name:"AssetAudio",title:"Asset_Audio",css:"wym_tools_asset_audio",html:'<li><a name="AssetAudio" href="#" title="'+o.default.t("onloads.initializers.editor.editor.Audio")+'"><span class="ss-icon ss-music"></span></a></li>'},AssetPhoto:{name:"AssetPhoto",title:"Asset_Photo",css:"wym_tools_asset_photo",html:'<li><a name="AssetPhoto" href="#" title="'+o.default.t("onloads.initializers.editor.editor.Image")+'"><span class="ss-icon ss-picture"></span></a></li>'},InsertImage:{name:"InsertImage",title:"Image",css:"wym_tools_image"},InsertTable:{name:"InsertTable",title:"Table",css:"wym_tools_table"},Paste:{name:"Paste",title:"Paste_From_Word",css:"wym_tools_paste"},ToggleHtml:{name:"ToggleHtml",title:"HTML",css:"wym_tools_html",html:'<li class="wym_tools_html"><a name="ToggleHtml" href="#" title="'+o.default.t("onloads.initializers.editor.editor.HTML")+'"><span class="ss-icon ss-navigateleft"></span><span class="ss-icon ss-navigateright"></span></a></li>'},Preview:{name:"Preview",title:"Preview",css:"wym_tools_preview"},Headerify:{name:"Headerify",title:"Header",css:"wym_tools_header"},Blockquote:{name:"Blockquote",title:"Blockquote",css:"wym_tools_blockquote"},Code:{name:"Code",title:"Code",css:"wym_tools_code"},KsrProject:{name:"KsrProject",title:"Project",css:"wym_tools_project"},KsrReward:{name:"KsrReward",title:"Reward",css:"wym_tools_reward"},ReadMore:{name:"ReadMore",title:"ReadMore",css:"wym_tools_read_more"}},t={skin:"ksr",iframeBasePath:"/wymeditor_iframe/",logoHtml:"",disable_sanitization:!0,wymPath:" ",boxHtml:'<div class="wym_box"><div class="wym_area_top">'+a.default.TOOLS+'</div><div class="wym_area_left"></div><div class="wym_area_right"></div><div class="wym_area_main">'+a.default.HTML+a.default.IFRAME+'</div><div class="wym_area_bottom"></div></div>',htmlHtml:'<div class="wym_html wym_section"><textarea class="wym_html_val"></textarea></div>',postInit:function(e){var t=(0,i.default)(e._doc.body),n=(0,i.default)(e._element);e.ensure_template_links_target_top_or_new_windows=function(){t.on("click",".template a",function(e){var t=(0,i.default)(e.currentTarget);t.is(".js-preserve-navigation")||t.closest(".js-preserve-navigation").length||(e.preventDefault(),this.host===window.top.location.host?window.top.location=this.href:window.open(this.href))})},t.on("dragover drop",function(e){return e.preventDefault(),!1}),(0,i.default)(e._iframe.contentWindow).on("focus",function(e){n.trigger("wym."+e.type)}),t.html(e.html()),t.find(".template").attr("contentEditable","false"),e.ensure_template_links_target_top_or_new_windows(),e.insert_empty_p_if_next_block_is_uneditable(),t.on("mouseenter",".template, .read_more",function(){var t=(0,i.default)('<li class="delete"><a href="#" class="delete template-delete" title="'+o.default.t("onloads.initializers.editor.editor.Delete")+'"><span class="ss-icon ss-delete"></span></a></li>'),r=(0,i.default)([]),a=(0,i.default)(this),s=(0,i.default)('<ul class="field-tools js-preserve-navigation"></ul>'),l=a.attr("data-edit_url");a.find(".field-tools").length||(t.click(function(t){t.preventDefault(),a.remove(),n.trigger("wym-documentHTMLUpdated",[e,(0,i.default)(e._doc.body).html()])}),l&&((r=(0,i.default)('<li class="edit"><a href="'+l+'" class="edit template-edit" title="'+o.default.t("onloads.initializers.editor.editor.Edit")+'"><span class="ss-icon ss-write"></span></a></li>')).click(function(t){t.preventDefault();var r=i.default.open_remote_modal_dialog(l,{title:o.default.t("onloads.initializers.editor.editor.Update_Image_Caption"),do_not_cache:!0});r&&r.$elem.on("modal_dialog:remote_dialog_loaded",function(){var t=(0,i.default)(this).find("form"),o=t.find("#link"),s=a.parent("a");o.val(s.attr("href")),(0,i.default)(this).find("form").on("submit",function(l){l.preventDefault(),i.default.ajax({url:t.attr("action"),data:t.serialize(),type:t.attr("method"),dataType:"json",success:function(t){var l=o.val(),d=!!s.length,c=(0,i.default)(t.html);a.replaceWith(c),a=c,l?d?s.attr("href",l):a.wrap('<a href="'+l+'"></a>'):d&&a.unwrap(),n.trigger("wym-documentHTMLUpdated",[e,(0,i.default)(e._doc.body).html()]),r.close()}})})})}),s.append(r)),s.append(t),a.append(s))}),t.on("mouseleave",".template, .read_more",function(){(0,i.default)(this).find(".field-tools").remove()})},updateSelector:"form",updateEvent:"submit",before_sanitize:function(e){if(e){var t=(0,i.default)(this._doc.body).clone();return t.find(".template").has("embed, object, iframe").empty(),t.html()}return!1},before_update:function(){(0,i.default)(this._doc.body).find(".template").has("embed, object, iframe").empty(),(0,i.default)(this._doc.body).find(".field-tools").remove()}},n=i.default.extend({},t,{skin:"ksr_chromeless",toolsItems:[]});(0,i.default)(".editor:visible").livequery(function(){var a,o=(0,i.default)(this),s=[],l=i.default.extend({},t);o.data("wym_index")||(o.is(".chromeless")?o.wymeditor(n):(i.default.each(o.data("tools").split(" "),function(){var t=this.toString();e[t]?s.push(e[t]):i.default.console.log("Editor - missing tool: "+t)}),i.default.extend(l,{toolsItems:s}),o.wymeditor(l)),a=i.default.wymeditors(o.data("wym_index")),o.closest("form").on("ajaxForm:beforeSerialize",function(){a.update()}),o.is(".resizable")&&a.resizable({iframeFix:!0}),o.on("destroy",function(){if(r.default.msie){var e=(0,i.default)("<input></input>");(0,i.default)("body").append(e),e.focus(),e.remove()}}))}),i.default.ui.plugin.add("resizable","iframeFix",{start:function(){var e=(0,i.default)(this).data("resizable"),t=e?e.options:{};e&&(0,i.default)(!0===t.iframeFix?"iframe":t.iframeFix).each(function(){(0,i.default)('<div class="ui-resizable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css((0,i.default)(this).offset()).appendTo("body")})},stop:function(){(0,i.default)("div.ui-resizable-iframeFix").each(function(){this.parentNode.removeChild(this)})}})})},cFFW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},cLqc:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".js-project-faqs-content",function(e){e.on("click",".js-faq-question-toggle",function(e){e.preventDefault();var t=(0,i.default)(this).closest(".js-faq"),n=t.find(".js-faq-answer"),r=(0,i.default)(this).data("faq_id"),o=t.find(".js-arrow-icon");t.hasClass("js-expanded")?(0,a.track)("Clicked Project FAQ Question",{context:"collapsed",which:r}):(0,a.track)("Clicked Project FAQ Question",{context:"expanded",which:r}),t.toggleClass("js-expanded"),o.toggleClass("rotate-90"),n.toggleClass("hide")}),e.on("click",".js-ask-a-question",function(){(0,a.track)("Clicked Ask Question")}),(0,i.default)("body").on("click",".js-submit-question",function(){(0,a.track)("Submitted Ask Question")}),e.on("click",".js-edit-faqs",function(){(0,a.track)("Edited FAQ Question")})})},cOfE:function(e,t,n){"use strict";var i=c(n("l/Rs")),r=c(n("Jvcu")),a=c(n("I1z3")),o=n("kVy0"),s=c(n("wmCY")),l=n("g/lJ"),d=c(n("MA+5"));function c(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){function e(e){var t=e.val(),n=(0,i.default)(".js-subcategories"),r=n.data("subcategories")[t];n.html((0,d.default)("projects/_edit_subcategories",{root_id:t,subcategories:r}))}(0,i.default)(".js-root_category").livequery(function(){var t=(0,i.default)(this);e(t),t.prop("disabled",!1)}),(0,i.default)(document).on("change",".js-root_category",function(){e((0,i.default)(this))}),function(){var e,t=!1;function n(n){(0,i.default)("#duration_duration, #duration_deadline").each(function(){var r=(0,i.default)(this),o=r.is(":checked");r.is("#duration_duration")?o&&(n||(t=!0,(0,i.default)("#project_duration").focus()),a.default.msie?(0,i.default)("#project-duration-calendar").hide():(0,i.default)("#project-duration-calendar").slideUp(200),(0,i.default)("#project_campaign_attributes_deadline").val("")):r.is("#duration_deadline")&&o&&((0,i.default)("#project_campaign_attributes_duration").val(""),a.default.msie?(0,i.default)("#project-duration-calendar").show():(0,i.default)("#project-duration-calendar").slideDown(200),e&&(0,i.default)("#project-duration-calendar input.input-calendar-date").val(e._copy_date_with_time(e.selected_date,e.time).toString("yyyy-MM-dd HH:mm:ss")))})}(0,i.default)("#project-duration-calendar").find("div.calendar").livequery(function(){var t,a=(0,i.default)("#project-duration-calendar input.input-calendar-date");(0,i.default)(this).on("calendar_date_picker:date_selected",function(e,t){var n=(0,o.format)("YYYY-MM-DD HH:mm:ss Z",t);a.val(n),a.trigger("change")}),t=""!==a.val()?(0,l.parseWithZone)(a.val()):(0,r.default)(new Date,30),e=(0,i.default)(this).calendar_date_picker({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:s.default.t("onloads.views.projects.edit_define_your_project.Time"),selected_date:t,time:{format:s.default.t("time.formats.simple"),am:s.default.t("time.am"),pm:s.default.t("time.pm")}}).data("calendar_date_picker"),n(!0)}),(0,i.default)("#the-basics-panel").on("focus","#project_duration",function(){t?t=!1:((0,i.default)("#duration_duration").prop("checked",!0),n())}),(0,i.default)(document).on("change click","#the-basics-panel .funding-duration input.radio",n),(0,i.default)(document).on("click","#the-basics-panel .funding-duration em.rec",function(){(0,i.default)(this).closest("li").find("input.text").focus()})}()})},cWTi:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=(0,i.default)("#curated_pages_show"),t="#curated_pages_show form.curated_pages_form",n=(0,i.default)(t);n.length&&(!function(){var a,o=(0,i.default)("#main.published"),s=(0,i.default)(".project-card-list.live",e),l=(0,i.default)(".tools .delete").closest("form"),d=!!o.length,c=(0,i.default)(".find_projects .project-results ul.result_list",e).clone(),u=(0,i.default)(".find_projects .project-results div.instructions",e).clone(),f=!!c.length;function h(e){var t=e.siblings(".value"),n=e.children("span.add_prompt");if(!t.siblings("textarea:visible, input:visible").length)return""===i.default.trim(t.text())?(n.show(),e.addClass("empty")):(n.hide(),e.removeClass("empty")),e}function p(){var e,t,n=(0,i.default)(".submit.launch, #add_shortcut_url");e=(0,i.default)(".curated_page_project:visible:not(.new)"),t=e.length-e.find("div.blurb.errored").length,""===i.default.trim((0,i.default)("#curated_page_title:not(:visible)").val())||""===i.default.trim((0,i.default)("#curated_page_description:not(:visible)").val())||t<1?n.attr("disabled",!0).addClass("disabled"):n.removeAttr("disabled").removeClass("disabled")}function m(e){var t={};e.data("livesearch_result")?(t.html=e.data("livesearch_result").html,t.id=e.data("livesearch_result").id):(t.html=e.data("html"),t.id=+e.data("id")),console.assert(t.html.length),console.assert(t.id);var n=(0,i.default)(t.html).find(".project-card").parent().html();return console.assert(n.length),t.card=n,t}(0,i.default)(document).on("form_synced","form.header_form",function(e,t){var n=(0,i.default)(this);t.curated_page&&t.curated_page.description&&h(n.find(".description .value").html(t.curated_page.description).siblings(".edit_prompt"))}),(0,i.default)(document).on("form_synced",".curated_page_project > form",function(e,t){var n=(0,i.default)(this);t.curated_page_project&&t.curated_page_project.blurb&&h(n.find(".blurb .value").html(t.curated_page_project.blurb).siblings(".edit_prompt"))}),e.on("click",".value:not(.image), .edit_prompt",function(){var e,t,n,a,o,s,l=(0,i.default)(this),d=(0,i.default)(this).siblings("input, textarea");d.is(":visible")||(d.show().focus(),d.parent().append((e=d,t=(0,i.default)('<div class="buttons"></div>'),n=e.val(),a=(0,i.default)('<div class="save btn btn--green btn--small">'+r.default.t("onloads.views.curated_pages.show.Save")+"</div>"),o=(0,i.default)('<div class="cancel btn btn--gray btn--small">'+r.default.t("onloads.views.curated_pages.show.Cancel")+"</div>"),s=(0,i.default)('<span class="loading icon-loading-small"></span>'),a.click(function(){e.trigger("close")}),o.click(function(){e.val(n),e.trigger("close")}),s.hide(),t.append(a),t.append(o),t.append(s),t)),setTimeout(function(){(0,i.default)(document).on("click",c)},100),l.is(".empty")?l.find(".add_prompt").hide():l.hide(),l.siblings(".value").hide(),l.trigger("field_opened"));function c(e){e.target===d[0]||(0,i.default)(e.target).is("a.cancel, a.save")||(0,i.default)(document).off("click",c)}}),(0,i.default)(".edit_prompt",n).each(function(){h((0,i.default)(this))}),e.on("close","input:not(.not_edit_in_place), textarea",function(){var e=(0,i.default)(this),t=e.siblings(".edit_prompt"),n=e.siblings(".value");function r(){n.show(),d||t.show(),e.siblings(".buttons").remove(),e.hide(),e.trigger("field_closed")}e.validate()?e.is("textarea")?(e.siblings(".buttons").find(".loading").css("display","inline-block"),e.closest("form").sync_form({success:function(e){e.valid&&r()},complete:function(){e.siblings(".buttons").find(".loading").hide()}})):(n.text(e.val()),h(t),r(),e.closest("form").sync_form()):e.focus()}),(0,i.default)(document).on("keydown",t+" input:not(.not_edit_in_place)",function(e){13===e.keyCode&&(e.preventDefault(),(0,i.default)(this).trigger("close")),27===e.keyCode&&(e.preventDefault(),(0,i.default)(this).siblings(".buttons").find(".cancel").click())}),(0,i.default)(document).on("click",".curated_page_project a.remove",function(e){e.preventDefault();var t,n,r=(0,i.default)(this),a=r.closest("form"),o=parseInt(a.find("input.project_id").val(),10);c.find("li").each(function(){(0,i.default)(this).attr("data-id")===o&&(0,i.default)(this).show()}),a.sync_form({type:"delete",success:function(){n&&r.closest(".curated_page_project").remove(),t=!0}}),r.closest(".curated_page_project").fadeOut(function(){p(),t&&(0,i.default)(this).remove(),n=!0})}),(0,i.default)(".blurb textarea, .meta .description textarea").livequery(function(){(0,i.default)(this).validates_max_length().validates_presence()}),(0,i.default)("#curated_page_title").data("validations",[[function(e){return!(!e.length&&d)}]]),(0,i.default)(document).on("field_opened",".blurb",function(){(0,i.default)(this).find(".label").show(),(0,i.default)(this).find(".character_counter").show()}),(0,i.default)(document).on("field_closed",".blurb",function(){(0,i.default)(this).find(".label").hide(),(0,i.default)(this).find(".character_counter").hide()}),(0,i.default)(document).on("field_opened",".meta .description",function(){(0,i.default)(this).find(".character_counter").show()}),(0,i.default)(document).on("field_closed",".meta .description",function(){(0,i.default)(this).find(".character_counter").hide()}),(0,i.default)(document).on("validate:invalid",".blurb, .meta h1, .meta .description",function(){(0,i.default)(this).addClass("errored")}),(0,i.default)(document).on("validate:valid",".blurb, .meta h1, .meta .description",function(){(0,i.default)(this).removeClass("errored")}),(0,i.default)(document).on("keypress cut paste input field_opened","div.blurb, .meta .description",function(e){var t=(0,i.default)(this),n=t.find("textarea").val().length,r=parseInt(t.find("textarea").data("maxlength"),10)-n;"field_opened"!==e.type&&t.find("textarea").validate(),t.find(".character_counter .number").text(r)}),(0,i.default)(document).on("form_synced",".curated_page_project",function(e,t){var n=(0,i.default)(this),r=n.find("form");t.valid&&(r.attr("action",t.url),r.attr("method","put"),r.find("#curated_page_project_id").val(t.curated_page_project.id),n.css("border","0"))}),(0,i.default)(document).on("click",".image a.remove",function(e){e.preventDefault();var t=(0,i.default)(this);i.default.ajax({url:t.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(e){t.closest(".image").find("img").attr("src",e)}})}),e.on("click",".add_project",function(){var e=(0,i.default)(this).closest(".curated_page_project").find(".find_projects");e.show(),e.find(".input-search").focus()}),(0,i.default)(document).on("livesearch:soft_select livesearch:unselect",".find_projects .project-results ul.result_list li",function(e){var t=(0,i.default)(this),n=t.closest(".curated_page_project").find(".project");console.assert(n.length);var r=n.children(".add_project");console.assert(r.length);var a,o=n.find(".project-card");if("livesearch:soft_select"===e.type){a=m(t);var s=(0,i.default)(a.card);r.hide(),o.remove(),n.append(s)}else console.assert(o),o.remove(),r.show()}),(0,i.default)(document).on("livesearch:selected",".find_projects .project-results ul.result_list li",function(e){e.preventDefault();var t,n,r=(0,i.default)(this),o=m(r),l=(0,i.default)('<div class="curated_page_project">'+o.html+"</div>"),d=r.closest(".curated_page_project");console.assert(d.length),r.trigger("livesearch:unselect"),c.find("li").each(function(){(0,i.default)(this).attr("data-id")===o.id&&(0,i.default)(this).hide()}),f?(d.find("ul.result_list").replaceWith(c.clone()),d.find(".project-results > h2").text("My Backed Projects"),a.bind_results()):(d.find("ul.result_list").empty().before(u.clone()),d.find(".project-results > h2").text("Adding Projects")),a.livesearch.last_search=!1,d.find("input.input-search").val("").blur(),t=d.find("input.exclude"),n="",s.children(".curated_page_project").each(function(){var e=(0,i.default)(this).find("input.project_id").val();e&&(n+=e+",")}),n+=l.find("input.project_id").val(),t.val(n),d.hide(),d.after(l),l.find(".blurb .value").click()}),(0,i.default)(document).on("livesearch:results",".find_projects",function(){(0,i.default)(this).find(".project-results > h2").text("Search Results"),(0,i.default)(this).find(".project-results > .instructions").remove()}),(0,i.default)(".find_projects input.input-search").livequery(function(){var e=(0,i.default)(this),t=(0,i.default)(this).siblings("input.exclude"),n=e.siblings(".ss-search");a=e.livesearch_input_dropdown({url:e.data("livesearch-url"),serialize:e.add(t),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(e){return e.name}}).data("livesearch.input_dropdown"),e.on("livesearch:searching",function(){n.removeClass("ss-search").addClass("icon-loading-small")}),e.on("livesearch:results livesearch:ajax_error",function(){n.removeClass("icon-loading-small").addClass("ss-search")})}),(0,i.default)(document).on("form_synced",p),p(),d&&((0,i.default)(document).on("mouseenter",".curated_page_project, .image.value",function(){(0,i.default)(this).find("a.remove").show()}).on("mouseleave",".curated_page_project, .image.value",function(){(0,i.default)(this).find("a.remove").hide()}),(0,i.default)(document).on("mouseenter",".project-card-list.live .value, .value ~ textarea, .value ~ input",function(){(0,i.default)(this).siblings(".edit_prompt").show()}).on("mouseleave",".value, .value ~ textarea, .value ~ input",function(){(0,i.default)(this).siblings(".edit_prompt:not(.empty)").hide()})),(0,i.default)(document).on("click","#new_root_slug .cancel",function(e){e.preventDefault(),(0,i.default)(this).trigger("close.modal_dialog")}),(0,i.default)(document).on("submit","#new_root_slug",function(e){e.preventDefault();var t=(0,i.default)(this),n=t.find(".shortcut.url");n.addClass("processing"),n.removeClass("invalid"),n.find(".error_message").text(""),i.default.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(e){if(n.removeClass("processing"),e.valid){t.trigger("close.modal_dialog");var r=(0,i.default)(".tools .launch");r.length&&r.closest("form").submit(),(0,i.default)("#add_shortcut_url").replaceWith('<a class="btn btn--red shortcut_url" href="'+e.url+'">'+e.url+"</a>")}else t.removeClass("submitting-non-ajax"),n.addClass("invalid"),n.find(".error_message").text(e.errors.slug[0])}})}),l.confirm_submit({title:r.default.t("onloads.views.curated_pages.show.Delete_your_Curated_Page"),copy:r.default.t("onloads.views.curated_pages.show.Are_you_sure_you_want_to_delete_your_current_Curated_Page"),yes_copy:r.default.t("onloads.views.curated_pages.show.Yes_delete"),no_copy:r.default.t("onloads.views.curated_pages.show.Nevermind")})}(),(0,i.default)(".js-add_project").on("click",function(e){var t=(0,i.default)(".new");console.assert(t.length),t.is(":visible")?t.hide():t.show().find(".add_project").click(),e.preventDefault()}))})},cnnw:function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=d(n("GiK3")),a=d(n("KSGD")),o=d(n("tW2u")),s=d(n("UE8d")),l=n("QzNM");function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.nameShape.isRequired,a.default.bool,a.default.bool,a.default.bool,(0,l.transitionTimeout)("Appear"),(0,l.transitionTimeout)("Enter"),(0,l.transitionTimeout)("Leave");var u=function(e){function t(){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=i=c(this,e.call.apply(e,[this].concat(o))),i._wrapChild=function(e){return r.default.createElement(s.default,{name:i.props.transitionName,appear:i.props.transitionAppear,enter:i.props.transitionEnter,leave:i.props.transitionLeave,appearTimeout:i.props.transitionAppearTimeout,enterTimeout:i.props.transitionEnterTimeout,leaveTimeout:i.props.transitionLeaveTimeout},e)},c(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return r.default.createElement(o.default,i({},this.props,{childFactory:this._wrapChild}))},t}(r.default.Component);u.displayName="CSSTransitionGroup",u.propTypes={},u.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=u,e.exports=t.default},"d/4O":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("LNuh"),function(){function e(e,t){var n,i,r,a=("normal"===(i=(n=e).css("line-height"))?1.2*parseInt(n.css("font-size"),10):parseInt(i,10))*t;return e.css("max-height",a+"px"),(r=e[0]).clientHeight<r.scrollHeight}(0,a.default)(".js-line-clamp").livequery(function(){var t=(0,a.default)(this),n=(0,a.default)(this).find(".clamped"),i=t.find(".fade,.expand");!function(e,t){var n=e.parents(":hidden:last"),i=n.attr("style");n.length&&n.show(),t(),n.length&&(void 0===i?n.removeAttr("style"):n.attr("style",i))}(t,function(){!function(e){var t,n=e.children(":not(.fade)").last();t=parseInt(n.css("padding-bottom"),10)+parseInt(n.css("margin-bottom"),10),e.css("margin-bottom",t),n.css("padding-bottom",0),n.css("margin-bottom",0)}(n),e(n,t.data("lines"))&&(i.show(),i.one("click",function(e){e.preventDefault(),e.stopPropagation(),function(e){e.css("max-height",e[0].scrollHeight+"px")}(n),i.hide()}))})})}()},d3qi:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("qBp/"),(0,a.default)(function(){a.default.clipster(".clipster")})},d4Y8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectCardContainer=void 0;var i=s(n("GiK3")),r=n("PMix"),a=n("ci1u"),o=s(n("Fe8w"));function s(e){return e&&e.__esModule?e:{default:e}}t.ProjectCardContainer=function(e){var t=e.dispatch,n=e.horizontal,s=void 0!==n&&n,l=e.projects,d=void 0===l?[]:l,c=e.refTag,u=e.remindMeEnabled,f=(0,r.RebrandToggleCard)(),h=d.map(function(e,n){var r=s?"col-full":"col-full col-sm-12-24 col-lg-8-24";return i.default.createElement("div",{className:r,key:e?e.pid:n},i.default.createElement(f,{horizontal:s,refTag:c,state:e||{}},u&&e&&i.default.createElement(o.default,{dispatch:t,project:e,atoms:["absolute","t2","r2"]})))});return i.default.createElement(a.Grid,{atoms:["js-project-group"]},i.default.createElement(a.Row,{atoms:["flex","flex-wrap"]},h))}},dKWP:function(e,t,n){"use strict";var i=u(n("l/Rs")),r=u(n("8NzR")),a=u(n("9VV1")),o=u(n("wmCY")),s=n("4RZc");n("LNuh"),n("jN36"),n("9DJv");var l=n("8Ml/"),d=u(n("shXp")),c=n("PP63");function u(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#checkouts_thanks",function(e){(0,c.thanksPageRecs)(),(0,i.default)(".short_url",e).click(function(){(0,i.default)(this).select(),(0,s.track)("Checkout Share",{share_type:"copy_link"})}),(0,i.default)(".js-verifying",e).livequery(function(){i.default.pollster((0,i.default)(this).data("poll_url"),function(e){if("verifying"!==e.state)return window.location.reload(),!0},{delay:2500})}),e.find(".js-facebook-share").click(function(e){if(e.preventDefault(),"undefined"!=typeof FB){i.default.ajax((0,i.default)(this).data("ks-share-url")),(0,s.track)("Checkout Show Share",{share_type:"facebook"});var t=(0,i.default)(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&void 0===e.error_code?((0,a.default)({success:o.default.t("onloads.views.checkouts.thanks.Facebook_post_was_published")}),(0,s.track)("Checkout Share",{share_type:"facebook"})):(0,a.default)({notice:o.default.t("onloads.views.checkouts.thanks.Facebook_post_was_not_published")})})}}),twttr.ready(function(t){t.events.bind("click",function(){(0,s.track)("Checkout Show Share",{share_type:"twitter"}),i.default.ajax(e.find(".js-twitter-share").data("ks-share-url"))})}),(0,l.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=d.default.debounce(l.trackProjectCards,150)})},dRgk:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("+bVi")),a=n("Tvaj");function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,i.default)(function(){var e;function t(t){var n=(0,i.default)(t.currentTarget);if(!n.hasClass("ksr-popover-excluded")){var a=(0,i.default)('.ksr-popover[data-target-id="#'+n.attr("id")+'"], .js-popover[data-target-id="#'+n.attr("id")+'"]');if(!a.hasClass("visible")&&!a.hasClass("block"))return function(t){var n=t.data("ksr_popover_override");if("function"==typeof n&&!n(t))return;var a=(0,i.default)(t.data("targetId"));a.hasClass("js-popover-trigger")?a.removeClass("shadow-2 border-transparent").addClass("border-dark-grey-500"):a.addClass("ksr-popover-active");e&&o();e=t,t.hasClass("js-popover")?t.addClass("block"):t.addClass("visible");(0,i.default)("body").addClass("ksr-popover-visible"),r.default.mobile&&(0,i.default)("body, html").addClass("ksr-mobile-popover-visible");s(t),(0,i.default)(document).trigger("ksr_popover:opened",{$popover:t})}(a),!1;o()}}var n={};function o(t){var n=(t=t||{}).update_focus||!1;if(e){var r=(0,i.default)(e.data("targetId"));r.hasClass("js-popover-trigger")?r.addClass("shadow-2 border-transparent").removeClass("border-dark-grey-500"):r.removeClass("ksr-popover-active"),e.hasClass("js-popover")?e.removeClass("block"):e.removeClass("visible"),(0,i.default)("body").removeClass("ksr-popover-visible"),(0,i.default)("body, html").removeClass("ksr-mobile-popover-visible"),n&&r.find(".ksr-icon__arrow-down").focus(),(0,i.default)(document).trigger("ksr_popover:closed",{$popover:e}),e=!1}}function s(e){if(!r.default.mobile){var t,n=e.data("targetId"),a=(0,i.default)(n),o=(0,i.default)(window).width(),s=a.offset().top+a.outerHeight()+20;e.hasClass("js-popover")?(o<600?(t=0,s=0):(t=a.offset().left,t-=Math.max(0,t+e.outerWidth()-(o-4)),t=Math.max(4,t)),e.offset({left:t,top:s})):(t=a.offset().left-32,t-=Math.max(0,t+e.outerWidth()-(o-32)),t=Math.max(4,t),e.offset({left:t,top:s}),e.find(".arrow").css({left:a.offset().left-e.offset().left+a.outerWidth()/2}))}}(0,i.default)(".ksr-popover, .js-popover").livequery(function(){var e=(0,i.default)(this).data("targetId");n[e]||((0,i.default)(document).on("click",e,t),n[e]=!0)}),(0,i.default)(document).on("click",".ksr-popover .close, .js-popover .close",function(e){o(),e.preventDefault()}),(0,i.default)(document).on("ksr_popover:reposition",".ksr-popover, .js-popover",function(){s((0,i.default)(this))}),(0,i.default)(document).on("ksr_popover:close",".ksr-popover, .js-popover",function(){o()}),(0,i.default)(document).on("click",function(t){(0,i.default)(t.target).closest(e).length||o()}),(0,i.default)(document).on("keydown",function(e){e.keyCode===a.ESC&&o({update_focus:!0})}),(0,i.default)(document).on("ksr_popover:opened",function(e,t){t.$popover.aria_set_visible().aria_focus_first_element().aria_activate_keyboard_tabindex()}),(0,i.default)(document).on("ksr_popover:closed",function(e,t){t.$popover.aria_set_hidden().aria_deactivate_keyboard_tabindex()})})},"dY/E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namespaceModule=t.namespaceDispatchFactory=t.namespaceActions=t.namespaceActionFactory=t.namespaceReducerFactory=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("Z6GA");var a=t.namespaceReducerFactory=function(e){return function(t,n){return function(i,r){var a=void 0===i;return(r&&r.namespace)===e||a?t(i,r,n):i}}},o=t.namespaceActionFactory=function(e){return function(t){return function(){var n=t.apply(void 0,arguments);return i({},n,{namespace:e})}}},s=t.namespaceActions=function(e){return function(t){return(0,r.mapObject)(o(e),t)}},l=t.namespaceDispatchFactory=function(e){return function(t){return function(n){return t(i({},n,{namespace:e}))}}};t.namespaceModule=function(e,t,n){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.uuidNoDashes)(),d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=d.Component,u=void 0===c?e:c,f=d.reducer,h=void 0===f?t:f,p=d.actions,m=void 0===p?n:p,g=a(o),v=l(o),_=s(o)(m);return{namespace:o,actions:_,reducer:g(h,_),Component:function(e,t){var n=e.dispatch,r=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["dispatch"]);return u(i({dispatch:v(n)},r),t)}}}}},dgQY:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=n("4RZc"),a=o(n("c5nH"));function o(e){return e&&e.__esModule?e:{default:e}}!function(){function e(e,t){if(void 0!==e){var n="internal";(0,i.default)("body").is(".widget")&&(n="external"),i.default.ajax({url:e,type:"post",data:{event_type:t,location:n}})}}function t(e){return(0,i.default)("body").is(".widget")||e.closest("#projects_show").length?"Project":e.closest(".school").length?"School":e.closest(".NS_site__homepage_staff_picks").length?"Homepage Editorial":e.closest("#projects_start").length?"Start Project":e.closest("body.posts").length?"Project Post":e.closest("#projects_edit").length?"Project Edit":e.closest("#jobs_index").length?"Jobs Page":e.closest(".activity").length?"Activity":"Other"}var n;function o(e){window.koala_video_progress_endpoint&&(n=setInterval(function(){var t=e.current_position();!function(e){i.default.ajax({type:"POST",url:window.window.koala_video_progress_endpoint,data:JSON.stringify({project_name:a.default.data.name,project_pid:a.default.data.id,backers_count:a.default.data.backers_count,blurb:a.default.data.blurb,category_name:a.default.data.category.name,comments_count:a.default.data.comments_count,creator_name:a.default.data.creator.name,currency_symbol:a.default.data.currency_symbol,goal:a.default.data.goal,launched_at:a.default.data.launched_at,photo_full:a.default.data.photo.full,photo_thumb:a.default.data.photo.thumb,project_url:a.default.data.urls.web.project,usd_pledged:a.default.data.usd_pledged,video:a.default.data.video,video_playhead_position:e}),contentType:"text/plain; charset=UTF-8"})}(Math.floor(t))},1e3))}function s(e){return function(n){var a=(0,i.default)(n.target),o=t(a),s=a.attr("data-video-name");(0,r.track)(o+" "+e,{video_name:s})}}(0,i.default)(document).on("ksr_video:playing",function(n,a){var s=(0,i.default)(n.target),l=t(s),d=s.data("ksr_video"),c=d.current_position(),u=s.closest(".video-player").attr("data-video-tracker-url"),f=s.attr("data-video-name");o(d),a?(e(u,"start"),(0,r.track)(l+" Video Start",{track_count:s.find("track").length,track_language:s.data("language"),video_name:f})):(0,r.track)(l+" Video Resume",{position:c,video_name:f})}).on("ksr_video:paused",function(e){var a=(0,i.default)(e.target),o=a.data("ksr_video"),s=t(a),l=o.current_position(),d=a.attr("data-video-name");clearInterval(n),(0,r.track)(s+" Video Pause",{position:l,video_name:d})}).on("ksr_video:ended",function(n){var a=(0,i.default)(n.target),o=a.data("ksr_video"),s=t(a),l=o.duration(),d=a.closest(".video-player").attr("data-video-tracker-url"),c=a.attr("data-video-name");e(d,"complete"),(0,r.track)(s+" Video Complete",{duration:l,video_name:c})}).on("ksr_video:change_track",function(e,n){var a=(0,i.default)(e.target),o=t(a),s=a.attr("data-video-name");(0,r.track)(o+" Video Change Track",{track_language:n,video_name:s})}).on("ksr_video:muted",s("Video Mute")).on("ksr_video:unmuted",s("Video Unmute")).on("ksr_video:volume_adjusted",s("Video Volume Adjustment"))}()},eFoH:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(document).on("click","input#share_a_link",function(){(0,a.default)("#share_a_link").focus().select()})},eIYa:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("Vmib"),(0,r.default)("#account-setup-panel",function(e){e.find("#bank_account_form").livequery(function(){var t=(0,i.default)(this),n=(0,i.default)('<div class="spinner"/>').spin("ksr","#fff"),r=e.find("#account_errors");function a(e){n.remove(),r.html("<ul>"+i.default.map(e,function(e){return"<li>"+e+"</li>"}).join()+"</ul>"),r.removeClass("hide").addClass("flash-error"),i.default.scrollTo(r)}function o(){n.remove(),r.html("").addClass("hide").removeClass("flash-error"),i.default.ajax({type:"GET",url:e.data("refresh_url"),data:{},success:function(t){e.html(t),e.find(".collapsed.js-payment-source-form").removeClass("collapsed")},error:function(t){e.html(t.responseText)}})}t.on("submit",function(e){if(e.preventDefault(),!function(e){var t=!1;e.find("input:not(.optional)").validates_presence(),(t=e.validate())&&e.removeClass("submitting-non-ajax");return t}(t))return!1;t.after(n),Stripe.setPublishableKey(t.data("public-key"));var r={country:t.data("country"),currency:t.data("currency"),account_number:t.find("input#account_account_number").val()},s=t.find("input#account_routing_number");s.length>0&&(r.routing_number=s.val());var l=t.find("input#account_account_holder");l.length>0&&(r.account_holder_name=l.val()),Stripe.bankAccount.createToken(r,function(e,n){200!==e&&n.error?a([n.error.message]):i.default.ajax({type:t.attr("method"),url:t.attr("action"),dataType:"json",data:{account:{token:n.id}},success:function(){o()},error:function(e){a(e.responseJSON.errors)}})})})})})},"f+bT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnavailableReward=t.InactiveReward=t.BackedReward=t.AvailableReward=t.RewardsList=void 0;var i=y(n("GiK3")),r=n("Z5jf"),a=n("Z6GA"),o=n("Tvaj"),s=n("c3QO"),l=n("dY/E"),d=n("E/SE"),c=n("Tvr3"),u=y(n("Ak0P")),f=n("uA/L"),h=n("hP+2"),p=n("IPoO"),m=n("8UPI"),g=n("49v0"),v=n("+4Bd"),_=n("pJCm");function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){return(!e.which||e.which===o.ENTER||e.which===o.SPACE)&&(e.which==o.SPACE&&e.preventDefault(),!0)},w="relative px3 pt3 pb6 border",E=(t.RewardsList=function(e){var t=e.state,n=e.dispatch,o=e.dropdowns;if(void 0===t.reward.pledgeData.applePayCapable&&"undefined"!=typeof Stripe){var u="undefined"!=typeof Stripe&&void 0!==window.STRIPE_PUBLISHABLE_KEY;n((0,g.checkAndInitApplePay)(n,window,u))}var h=function(e,t){var i=e.id,r=(e.closedHeight,e.minPledge),o=e.shippingEnabled,u=e.shippingRulesStatus;if(b(t)){if(o&&u===c.UNLOADED){var f=(0,l.namespaceActionFactory)(i)(d.loadAsync);n(f((0,a.encodeId)("Reward",i)))}n((0,s.onRewardSelected)({id:i,minPledge:r,shippingEnabled:o}))}},p=function(e){return n((0,s.continueToNextPage)(e))},m=function(e){return n((0,s.requestRedirect)(e))},v=function(e){return n((0,s.validateField)(e))},_=(0,a.partial)(function(e,t){return e((0,s.payWithApplePay)(e,t))},n),y=(0,a.debounce)(v,750),w=function(e,t){n((0,s.onPledgeValueUpdated)(t.target.value)),y(e)},A=t.reward.rewardsList[t.reward.rewardsListOrder[0]],R=!A||A.isCreator||A.campaignSuccessful||!A.campaignLive||t.reward.backedReward.length>0,x=!!t.reward.backedReward.length,I=!!t.reward.unavailableRewardsListOrder.length;return i.default.createElement("div",null,i.default.createElement(f.Heading,{atoms:["normal mb3 mb7-sm mobile-hide"]},(0,r.boundT)("project_page.reward.Support")),x&&i.default.createElement(C,{state:t.reward,backedRewardArray:t.reward.backedReward,onRedirectClick:m}),!R&&i.default.createElement(S,{state:t.reward,onApplePayClick:_,onContinueClick:p,onPledgeValueChange:w,onRewardSelect:h,onValidateField:v}),R&&i.default.createElement(k,{state:t,onRedirectClick:m}),!R&&i.default.createElement(E,{state:t,dispatch:n,dropdowns:o,onApplePayClick:_,onContinueClick:p,onPledgeValueChange:w,onRewardSelect:h,onValidateField:v}),I&&i.default.createElement(T,{state:t}))},function(e){var t=e.state,n=e.dispatch,r=e.dropdowns,o=e.onApplePayClick,l=e.onContinueClick,d=e.onPledgeValueChange,c=e.onRewardSelect,u=e.onValidateField;return t.reward.rewardsListOrder.map(function(e){var f=t.reward.rewardsList[e],m=e==t.reward.selectedReward.id,g=m?"border-dark-grey-400":"border-grey-400",v=m&&t.reward.selectedReward.truncated;return i.default.createElement(h.Hover,{active:m,dispatch:n,doNotPin:t.reward.selectedReward.doNotPin,savedOffset:f.offsetHeight,rewardId:e,type:p.AVAILABLE,onClick:(0,a.partial)(c,f),onKeyPress:(0,a.partial)(c,f),key:"hover-"+e},i.default.createElement(A,{key:e,reward:f,dispatch:n,state:t.reward,activeReward:m,atoms:(0,a.computedAtoms)(w,"pointer",g),onApplePayClick:o,onBlurField:(0,a.partial)(u,p.PLEDGE_AMOUNT),onContinueClick:l,onPledgeValueChange:(0,a.partial)(d,p.PLEDGE_AMOUNT),onTruncateClick:function(){return n((0,s.toggleTruncation)())},ShippingCountryDropdown:r[e],selectState:t.shippingSelects[e+"-select"],truncationStatus:v}))})}),C=function(e){var t=e.state,n=e.backedRewardArray,r=e.onRedirectClick;return n.map(function(e){var n=function(e,t){b(t)&&!e.campaignSuccessful&&r(e.managePath)},o=e.campaignSuccessful?p.BACKED_SUCCESSFUL:p.BACKED_LIVE;return e.id===p.NO_REWARD?i.default.createElement(h.Hover,{type:o,onClick:(0,a.partial)(n,e),onKeyPress:(0,a.partial)(n,e),key:"hover-"+e.id},i.default.createElement(S,{state:t,backed:!0,backingAmount:e.backingAmount})):i.default.createElement(h.Hover,{type:o,onClick:(0,a.partial)(n,e),onKeyPress:(0,a.partial)(n,e),key:"hover-"+e.id},i.default.createElement(R,{key:e.id,reward:e,atoms:(0,a.computedAtoms)(w,"pointer border-blue-500")}))})},k=function(e){var t=e.state,n=e.onRedirectClick;return t.reward.rewardsListOrder.map(function(e){var r=t.reward.rewardsList[e];return i.default.createElement(x,{key:e,atoms:(0,a.computedAtoms)(w,"border-grey-400 mb3"),reward:r,backerReportClick:(0,a.partial)(n,r.reportPath)})})},S=function(e){var t=e.backed,n=e.backingAmount,r=e.state,o=e.onApplePayClick,s=void 0===o?function(){}:o,l=e.onContinueClick,d=void 0===l?function(){}:l,c=e.onPledgeValueChange,u=void 0===c?function(){}:c,f=e.onRewardSelect,h=void 0===f?function(){}:f,g=e.onValidateField,y=void 0===g?function(){}:g,b="\n    "+r.pledgeData.currencySymbol+"\n    "+r.pledgeData.defaultPledge.min;return i.default.createElement(m.PledgeWithoutReward,{atoms:(0,a.computedAtoms)(w),backed:t,backingAmount:n,continueClick:d,currentTotalCost:r.selectedReward.totalCost,errors:(0,v.unboundValidator)((0,_.ERROR_MESSAGES)(b))({fields:[p.PLEDGE_NO_REWARD],state:r.validation}),onBlurField:(0,a.partial)(y,p.PLEDGE_NO_REWARD),onApplePayClick:s,onPledgeValueChange:(0,a.partial)(u,p.PLEDGE_NO_REWARD),onRewardClick:h,onRewardKeyPress:h,pledgeData:r.pledgeData,selected:r.selectedReward.id===p.NO_REWARD,serverErrors:r.validation.serverErrors})},T=function(e){var t=e.state;return i.default.createElement("div",null,i.default.createElement(f.Heading,{weight:"normal"},(0,r.boundT)("projects.rewards_list_experiment.All_gone")),t.reward.unavailableRewardsListOrder.map(function(e){var n=t.reward.unavailableRewardsList[e];return i.default.createElement(I,{key:e,reward:n,atoms:(0,a.computedAtoms)("bg-grey-100 border-grey-400 mb3",w)})}))},A=t.AvailableReward=function(e){var t=e.atoms,n=void 0===t?[]:t,r=e.reward,o=e.dispatch,s=e.activeReward,l=e.truncationStatus,d=e.ShippingCountryDropdown,c=e.selectState,f=e.state,p=e.onApplePayClick,g=e.onBlurField,y=e.onContinueClick,b=e.onPledgeValueChange,w=e.onTruncateClick,E=s,C=E&&r.shippingEnabled,k="\n    "+r.minPledge.symbol+"\n    "+(+f.selectedReward.pledgeCost+f.selectedReward.shippingCost)+"\n  ",S=(0,v.unboundValidator)((0,_.ERROR_MESSAGES)(k)),T=(0,a.partial)(h.truncateReward,o,E,l);return i.default.createElement("div",{className:(0,a.computedAtoms)(n)},i.default.createElement(m.RewardSummary,{active:E,onTruncateClick:w,reward:r,truncateReward:T,truncationStatus:l}),i.default.createElement(m.BackerCountAndLimits,{reward:r}),i.default.createElement(u.default,{enter:"slide-down",leave:"slide-up",durationLeave:150,durationAppear:300},E&&i.default.createElement(m.ShippingAndPayments,{consts:{DISPLAY_SHIPPING:C},reward:r,selectState:c,dispatch:o,currentTotalCost:f.selectedReward.totalCost,onApplePayClick:(0,a.partial)(p,r.id),onBlurField:g,onClick:(0,a.partial)(y,r.id),onPledgeValueChange:b,pledgeData:f.pledgeData,ShippingCountryDropdown:d,validator:S,validation:f.validation})))},R=t.BackedReward=function(e){var t=e.atoms,n=e.reward,r=n.campaignSuccessful,o=n.unavailable;return i.default.createElement("div",{className:(0,a.computedAtoms)(t)},i.default.createElement(m.BackedLabel,null),i.default.createElement(m.RewardSummary,{reward:n}),o&&i.default.createElement(m.Unavailable,null),i.default.createElement(m.BackerCountAndLimits,{reward:n}),r&&i.default.createElement(m.SurveyInfo,{surveys:n.surveys}))},x=t.InactiveReward=function(e){var t=e.atoms,n=e.backerReportClick,r=e.reward,o=r.campaignSuccessful,s=r.isCreator,l=+r.backersCount>0;return i.default.createElement("div",{className:(0,a.computedAtoms)("default-cursor",t)},i.default.createElement(m.RewardSummary,{reward:r}),i.default.createElement(m.BackerCountAndLimits,{reward:r}),o&&s&&l&&i.default.createElement(m.CreatorInformation,{surveys:r.creatorSurveyData,onClick:n}))},I=t.UnavailableReward=function(e){var t=e.atoms,n=e.reward;return i.default.createElement("div",{className:(0,a.computedAtoms)(t)},i.default.createElement(m.RewardSummary,{reward:n}),i.default.createElement(m.Unavailable,null),i.default.createElement(m.BackerCountAndLimits,{reward:n,unavailable:!0}))}},f4ga:function(e,t,n){var i=n("WNGz");e.exports=function(e,t){var n=i(e),r=i(t);return n.getTime()===r.getTime()}},fbTF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.short_filesize=a.default.number_to_human_size(e.data_file_size,{precision:1}),e};var i,r=n("L3hI"),a=(i=r)&&i.__esModule?i:{default:i}},fhGM:function(e,t,n){"use strict";var i,r=n("rXeC"),a=(i=r)&&i.__esModule?i:{default:i};n("obSy"),n("5Nri"),n("nEyA"),n("VUCL"),n("8nDS"),(0,a.default)(".editor").livequery("wym-postIframeInitialization",function(){var e=a.default.wymeditors((0,a.default)(this).data("wym_index")),t=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/|[a-z0-9.\-]+[.](?:com|org|net))(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))*(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:''.,<>?]|\b))/gi,n=[13,32,192,219,221,59,188,222];(0,a.default)(e._doc.body).on("keyup paste",function(i){var r,o=!1;a.default.each(n,function(){if(i.keyCode===parseInt(this,10))return o=!0,!1}),(o||"paste"===i.type)&&(r=function(){var n,i=(0,a.default)(e.selected()),r=i.html();function o(){return 3===this.nodeType}function s(){for(var t,i,r=e._iframe,o=r.contentDocument&&r.contentDocument.defaultView?r.contentDocument.defaultView:r.contentWindow,s=rangy.saveSelection(o),l=(0,a.default)(this).text(),d=l.indexOf(n[0]);-1!==d;)"@"!==l[d-1]&&(t=l.slice(0,d),i=l.slice(d+n[0].length,l.length),l=t+'<a href="'+n[0]+'">'+n[0]+"</a>"+i),d=l.indexOf(n[0],d+2*n[0].length+15);(0,a.default)(this).replaceWith(l),rangy.restoreSelection(s),rangy.removeMarkers(s)}for(;null!==(n=t.exec(r));)n[0]=n[0].replace(/&nbsp$/,""),n[0]=(0,a.default)("<div/>").html(n[0]).remove().text(),i.contents().filter(o).each(s)},"paste"===i.type?setTimeout(r,500):r())})})},fpIj:function(e,t,n){"use strict";var i,r=n("l/Rs");var a={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],run:function(e){e.domains=e.domains||a.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||a.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||a.sift3Distance,e.ignoreTLDs=e.ignoreTLDs||!1;var t=a.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction,e.ignoreTLDs);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,i,r){e=e.toLowerCase();var a,o,s,l=this.splitEmail(e),d=this.findClosestDomain(l.domain,t,i);for(s=0;s<this.whitelistRegexes.length;s+=1)if(this.whitelistRegexes[s].exec(l.domain))return!1;if(d){if(d!==l.domain)return{address:l.address,domain:d,full:l.address+"@"+d}}else if(!r&&(a=this.findClosestDomain(l.topLevelDomain,n),l.domain&&a&&a!==l.topLevelDomain))return d=(o=l.domain).substring(0,o.lastIndexOf(l.topLevelDomain))+a,{address:l.address,domain:d,full:l.address+"@"+d};return!1},findClosestDomain:function(e,t,n){var i,r,a=99,o=null;if(!e||!t)return!1;for(n||(n=this.sift3Distance),r=0;r<t.length;r+=1){if(e===t[r])return e;(i=n(e,t[r]))<a&&(a=i,o=t[r])}return a<=this.threshold&&null!==o&&o},sift3Distance:function(e,t){var n,i=0,r=0,a=0,o=0;if(null===e||0===e.length)return null===t||0===t.length?0:t.length;if(null===t||0===t.length)return e.length;for(;i+r<e.length&&i+a<t.length;){if(e.charAt(i+r)===t.charAt(i+a))o+=1;else for(r=0,a=0,n=0;n<5;n+=1){if(i+n<e.length&&e.charAt(i+n)===t.charAt(i)){r=n;break}if(i+n<t.length&&e.charAt(i)===t.charAt(i+n)){a=n;break}}i+=1}return(e.length+t.length)/2-o},splitEmail:function(e){var t,n,i,r=e.split("@"),a="";if(r.length<2)return!1;for(t=0;t<r.length;t+=1)if(""===r[t])return!1;if(0===(i=(n=r.pop()).split(".")).length)return!1;if(1===i.length)a=i[0];else{for(t=1;t<i.length;t+=1)a+=i[t]+".";i.length>=2&&(a=a.substring(0,a.length-1))}return{topLevelDomain:a,domain:n,address:r.join("@")}}}};((i=r)&&i.__esModule?i:{default:i}).default.fn.mailcheck=function(e){var t,n,i=this;e.suggested&&(t=e.suggested,e.suggested=function(e){t(i,e)}),e.empty&&(n=e.empty,e.empty=function(){n.call(null,i)}),e.email=this.val(),a.mailcheck.run(e)}},"g/lJ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseWithZone=void 0;var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n("I2cB"),a=l(n("xA5w")),o=l(n("w4by")),s=l(n("NSOL"));function l(e){return e&&e.__esModule?e:{default:e}}var d=/ ([\-|\+])([0-9]{2})([0-9]{2})$/;t.parseWithZone=function(e){var t=e.match(d);return(t?r.result.Ok(e):r.result.Error(e)).fold(function(e){return(0,a.default)(e)},function(e){var n=i(t,4),r=n[1],l=n[2],d=n[3],c=parseInt(""+r+l,10),u=parseInt(""+r+d,10);return(0,s.default)((0,o.default)((0,a.default)(e),c),u)})}},gHGJ:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_guest_checkouts__new",function(e){var t={email_invalid:a.default.t("guest_checkouts.new.Your_email_is_invalid"),email_presence:a.default.t("guest_checkouts.new.Your_email_must_be_present"),finished_checkout:a.default.t("guest_checkouts.new.This_checkout_has_already_been_completed"),other_backer:a.default.t("guest_checkouts.new.Another_email_is_associated_with_this_checkout"),password_presence:a.default.t("guest_checkouts.new.Your_password_must_be_present"),previous_backer:a.default.t("guest_checkouts.new.You_have_already_backed_this_project"),registered_user:a.default.t("guest_checkouts.new.This_email_has_already_been_taken_Try_logging_in")};function n(e,t){var n=(0,i.default)(t).data("error");return void 0!==n&&null!==n}function r(e,n){var r=(0,i.default)(n),a=r.data("error");t.hasOwnProperty(a)&&r.addClass("atomic-form-v1-error").closest("div").find(".js-error-message").removeClass("hide h0").addClass("inline-block mb4").text(t[a])}function o(e,t){(0,i.default)(t).removeClass("atomic-form-v1-error").data("error",null).closest("div").find(".js-error-message").addClass("hide h0").removeClass("inline-block mb4")}function s(e,t){t.find(":input").each(o),e.find("input[type=submit]").removeClass("bttn-grey").addClass("bttn-green"),t.find("input[type=submit]").addClass("bttn-grey").removeClass("bttn-green")}var l=e.find("#user_login_form :input, #user_registration_form :input");l.filter("[type=email]").validates_email({error:"email_invalid"}).validates_presence({error:"email_presence"}),l.filter("[type=password]").validates_presence({error:"password_presence"}),l.on("paste keyup cut change input click",function(e){setTimeout(function(){var t=(0,i.default)(e.target);t.validate();var r=t.closest("form").find(":input").filter(n).length<1;t.closest("form").find("input[type=submit]").attr("disabled",r?null:"disabled")},0)}).on("blur",function(){(0,i.default)(this).each(r)}).on("validate:valid",function(){(0,i.default)(this).each(o)}).on("validate:invalid",function(e,t){(0,i.default)(this).data("error",t)});var d=e.find("#user_registration_form");d.on("submit",function(e){e.preventDefault();var t=(0,i.default)(this);t.validate()?i.default.ajax({url:t.attr("action"),method:t.attr("method"),data:t.serialize(),success:function(e){window.location.href=window.location.pathname.replace(location.pathname,e.redirect_path)},error:function(e){t.find("input[type=email]").trigger("validate:invalid",e.responseJSON.error).each(r)}}):t.find(":input").each(r)}),d.find(":input").on("focus",function(){s(d,c)});var c=e.find("#user_login_form");c.on("submit",function(e){(0,i.default)(this).validate()||(e.preventDefault(),(0,i.default)(this).find(":input").each(r))}),c.find(":input").on("focus",function(){s(c,d)})})},gmJr:function(e,t,n){"use strict";var i,r=o(n("l/Rs")),a=o(n("TGXB"));function o(e){return e&&e.__esModule?e:{default:e}}(i=r.default)(document).on("click",".message .report-spam a",function(e){e.preventDefault();var t=i(this),n=this,r=t.closest(".message"),o=r.clone(),s=i('<p class="flagged_message"><em class="spam_reported"></em></p>');o.find("span.report-spam").remove(),i.modal_confirm(function(){return r.find(".body").before(s),a.default.get(t.data("url"),"post",s.find("em"),n)},{message:o.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})}),i(document).on("ksr_json:complete",".message .spam_reported",function(e,t){var n=i(this).closest(".message"),r=n.find(".report-spam");t.modal||(r.hide(),200!==t.status||r.is(".admin")||n.find(".body").hide())})},grXb:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(t,n){var i;t._hashFence?t._hashFence=!1:(i=window.location.hash.substring(1),t.slides.each(function(r){if(e(this).data("cycle-hash")==i){if(!0===n)t.startingSlide=r;else{var a=t.currSlide<r;t.nextSlide=r,t.API.prepareTx(!0,a)}return!1}}))}e(document).on("cycle-pre-initialize",function(n,i){t(i,!0),i._onHashChange=function(){t(i,!1)},e(window).on("hashchange",i._onHashChange)}),e(document).on("cycle-update-view",function(e,t,n){n.hash&&"#"+n.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=n.hash)}),e(document).on("cycle-destroyed",function(t,n){n._onHashChange&&e(window).off("hashchange",n._onHashChange)})}(i)},gwva:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body#users_watched_projects",function(e){e.on("click","a.js-unstar",function(e){e.preventDefault();var t=(0,i.default)(this);i.default.ajax({url:t.attr("href"),type:"DELETE",dataType:"json",success:function(){var e=t.closest(".project");e.fadeOut(function(){var t=e.closest(".section");t.find(".project:visible").length||t.remove()})}})}),e.on("click","a.potd",function(e){e.preventDefault();var t=(0,i.default)(this);i.default.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(){window.location.reload()}})})})},"h+ZX":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShippingRules=void 0;var i=n("Z6GA");t.getShippingRules=function(e){return(0,i.fetchGraph)("\n  query($rewardId: ID!) {\n    reward: node (id: $rewardId) {\n      ... on Reward {\n        shippingRules {\n          nodes {\n            id\n            cost {\n              amount\n              symbol\n            }\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n",{rewardId:e})}},h1HY:function(e,t,n){"use strict";n("RORv");var i=n("l/Rs");n("l/Rs");!function(e){e.fn.persistent_paging=function(){return e(this).each(function(){var t=e(this),n=[[1,0,t.find(".page")]],i=[],r=!1,a=t.data("mobius"),o=/^#p(\d*)/.exec(window.location.hash);o&&1!==parseInt(o[1],10)&&(t.one("mobius:loaded_page",function(t,n,i){e.scrollTo(i.offset().top+70)}),a.load_page(parseInt(o[1],10))),t.on("mobius:loaded_page",function(i,r,o){var s,l,d,c=[];function u(){if(this[0]===l)return s=!0,!1}for(n.push([r,!1,o]),d=[],e.each(n,function(){d.push([this[0],this[2].offset().top,this[2]])}),n=d,l=1;l<=n[n.length-1][0];l+=1)s=!1,e.each(n,u),s||c.push(l);c.length?e.each(c,function(){var i=n[0],r=parseInt(this,10),o=e([]),s=[],l=e([]),d=e([]);e.each(n,function(){this[0]>i[0]&&this[0]<r&&(i=this)}),(o=i[2].next(".missing")).length?(s=o.data("missing_pages"),-1===e.inArray(r,s)&&(s.push(r),o.data("missing_pages",s))):(l=(o=t.siblings(".missing").clone()).find(".loading"),d=o.find(".load_more"),o.data("missing_pages",[r]),o.find("a").click(function(e){var n=o.data("missing_pages"),i=n.pop();e.preventDefault(),n.length&&o.data("missing_pages",n),d.addClass("loading"),a.load_page(i,o),t.one("mobius:loaded_page",function(){d.removeClass("loading")})}),i[2].after(o),l.hide(),o.show())}):t.find("div.missing").remove()}),e(document).scroll(function(){var t,a=e(window).scrollTop();e.each(n,function(){var e=this[1];a>e&&(i=this)}),i[0]!==r&&(t="#p"+i[0],window.history&&window.history.replaceState?history.replaceState(null,null,t):window.location.replace(t),e(document).trigger("infinite_scroll:scrolled_to",[i[0]]),r=i[0])})})}}(i)},h8C7:function(e,t,n){"use strict";var i=a(n("9VV1")),r=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}var o=n("l/Rs");n("l/Rs");!function(e){function t(t){var n=t.data("status-url");n&&e.pollster(n,function(n){var a,o=t.data("track-label");return n.ok?(a=e(n.html),t.replaceWith(a),(0,i.default)({success:r.default.t("library.video_tracks_editor.Successfully_imported_label",{label:o})}),!0):!!n.error&&(a=e(n.html),t.replaceWith(a),(0,i.default)({error:r.default.t("library.video_tracks_editor.Something_went_wrong_while_importing_label",{label:o,error:n.error})}),!0)},{delay:1e3})}e.fn.videoTracksEditor=function(){var n=e(this);n.on("click",".js-add-track",function(t){var n=e(t.currentTarget),i=n.closest(".js-subtitles"),r=i.find(".js-language-select"),a=i.find(".js-track-list"),o=r.find("option:selected").val();e.ajax({method:"POST",url:n.data("create-track-path"),data:{language:o,captionable_type:n.data("captionable-type"),captionable_id:n.data("captionable-id")},dataType:"json"}).success(function(e){a.append(e.html),r.find('option[value="'+o+'"]').prop("disabled",!0),r.ksr_val(r.find("option").not("[disabled]").first().val())}),t.preventDefault()}),n.on("click",".js-captionable--destroy-track",function(t){var n=e(t.currentTarget),i=n.closest(".js-subtitles").find(".js-language-select"),a=n.data("path");t.preventDefault(),confirm(r.default.t("library.video_tracks_editor.Are_you_sure_you_want_to_delete_this_track"))&&e.ajax({method:"DELETE",url:a}).success(function(e){var t=n.data("language");e.ok&&(i.find('option[value="'+t+'"]').prop("disabled",!1),n.closest(".js-captionable--track-item").remove())})}),n.on("change",".js-importer--input",function(){var n,a=e(this),o=a.closest(".js-importer"),s=a.closest(".js-captionable--track-item"),l=o.find(".js-importer--text"),d=this.files&&this.files[0],c=new FormData;d&&(a.hide(),l.text(r.default.t("library.video_tracks_editor.Uploading")),c.append("track[file]",d),(n=e.ajax({url:a.data("url"),type:"PUT",processData:!1,contentType:!1,data:c})).success(function(n){var r;n.ok?(r=e(n.html),s.replaceWith(r),t(r)):(0,i.default)({error:n.error})}),n.error(function(){(0,i.default)({error:r.default.t("library.video_tracks_editor.Something_went_wrong_while_uploading_file",{file:d.name})}),a.show()}))}),n.find(".js-captionable--track-item").each(function(){t(e(this))})}}(o)},"hP+2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.truncateReward=t.Hover=void 0;var i,r=n("GiK3"),a=(i=r)&&i.__esModule?i:{default:i},o=n("Z5jf"),s=n("uA/L"),l=n("c3QO"),d=n("IPoO");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Hover=function(e){var t,n=e.active,i=e.children,r=e.dispatch,u=e.doNotPin,f=e.savedOffset,h=e.rewardId,p=e.type,m=e.onClick,g=void 0===m?function(){}:m,v=e.onKeyPress,_=void 0===v?function(){}:v,y=(c(t={},d.AVAILABLE,{text:(0,o.boundT)("project_page.reward.Select_this_reward"),classes:"pledge--available"}),c(t,d.BACKED_LIVE,{text:(0,o.boundT)("project_page.reward.Manage_your_pledge"),classes:"pledge--backed"}),c(t,d.BACKED_SUCCESSFUL,{text:(0,o.boundT)("project_page.reward.View_your_pledge"),classes:"pledge--backed js-view_your_pledge"}),t);return a.default.createElement("div",{role:"button",ref:function(e){if(!e||p!==d.AVAILABLE||f){if(window&&e&&n&&!u){var t=document.getElementById("global-header"),i=t&&t.classList.contains("stick")?t.offsetHeight:0,a=document.getElementsByClassName("NS_projects__hero_funding"),o=a.length?a[0].offsetHeight:820;window.scrollTo(0,f+o-(i+20)),r((0,l.freezePin)())}}else setTimeout(function(){return r((0,l.saveRewardOffset)(h,e.offsetTop))},0)},className:y[p].classes+" hover-group mb3 pointer block text-left",tabIndex:"0",onClick:g,onKeyPress:_},!n&&a.default.createElement("div",{className:"pledge__hover hover-zoomout"},a.default.createElement("div",{className:"pledge__hover-content"},a.default.createElement(s.Paragraph,{type:"body-200"},y[p].text))),i)},t.truncateReward=function(e,t,n,i){!n&&i&&t&&i.clientHeight>80&&e((0,l.truncateDescription)())}},hU5k:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(".NS_blogs__blog_header .js-show-blog-search").on("click",function(e){e.preventDefault(),(0,a.default)(".js-blog-search").addClass("is-visible"),(0,a.default)(".js-blog-search input.text").focus()}),(0,a.default)(".NS_blogs__blog_header .js-blog-search input.text").on("blur",function(){(0,a.default)(".js-blog-search").removeClass("is-visible")})},iDDm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.filters={},(e=function(e){return i.default.each(i.default.keys(e.aggregations),function(t){i.default.each(i.default.keys(e.aggregations[t]),function(n){var i=e.aggregations[t][n];e.aggregations[t][n]={count:i}})}),e}(e=function(e){e.project.disputed>0&&(e.filters.disputed={true:{count:e.project.disputed}});return e}(e))).aggregations.must_have_creator_note={true:{},false:{}},e.not_filtered=!0,"successful"===(e=function(e){e.params&&(i.default.each(i.default.keys(e.params),function(t){i.default.has(e.aggregations,t)?(e.aggregations[t][e.params[t]]||(e.aggregations[t][e.params[t]]={}),e.aggregations[t][e.params[t]].selected=!0):i.default.has(e.filters,t)?e.filters[t][e.params[t]].selected=!0:(e.aggregations[t]={})[e.params[t]]={selected:!0}}),e.params.sort_by&&(e.params["sort_by_"+e.params.sort_by]=" "+(e.params.asc_or_desc||"asc")),e.actual_reward_selected=!1,e.params.reward_id&&(e.actual_reward_selected=!0,e.selected_reward=i.default.findWhere(e.rewards,{id:parseInt(e.params.reward_id,10)}),e.selected_reward||(e.actual_reward_selected=!1,e.selected_reward=i.default.findWhere(e.rewards,{id:"none"})),e.selected_reward.selected=!0),i.default.each(["survey_answered","completed","must_have_creator_note","status","backer_banned","disputed"],function(t){e.params[t]&&(e.not_filtered=!1)}));return e}(e)).project.state&&(e.project.is_successful=!0),(e=function(e){return e.show_aggregations=e.total_entries>0||!(e.params&&e.params.term&&!e.params.creator_note&&!e.params.creator_note_not),e}(e)).formatted_total_entries=r.default.format_number(e.total_entries,{precision:0}),e.count=e.total_entries,(e=function(e){return i.default.each(e.rewards,function(e){e.formatted_minimum=r.default.money(e.minimum,{currency:o.default.get("currency"),precision:0}),e.reward.length>35?e.truncated_description=e.reward.substring(0,35)+"":e.truncated_description=e.reward}),e}(e)).message_url=(0,a.default)(e.urls.web.message_batches).segment("new").query(e.params),e.isCreator=o.default.get("creator.id")===s.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var i=l(n("shXp")),r=l(n("L3hI")),a=l(n("hBlz")),o=l(n("c5nH")),s=l(n("eF8u"));function l(e){return e&&e.__esModule?e:{default:e}}},iPPX:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)("body").hasClass("admin")||(window._sf_async_config={uid:5536,domain:window.location.hostname.replace("www.","")},window._sf_endpt=(new Date).getTime(),a.default.getScript("//a248.e.akamai.net/chartbeat.download.akamai.com/102508/js/chartbeat.js"))})},iQ9M:function(e,t,n){"use strict";var i=d(n("l/Rs")),r=d(n("shXp")),a=n("kVy0"),o=d(n("wmCY")),s=d(n("dH3X")),l=n("jO9b");function d(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),n("CCL3"),n("v4vi"),n("A/M2"),n("IhN0"),n("kUTX"),n("Y0+b"),(0,i.default)(".field.search.location-search").livequery(function(){var e=(0,i.default)(this);e.on("livesearch_selector:select",function(){(0,i.default)(this).siblings("span.input-tip").hide(),(0,i.default)(this).parent().siblings("span.input-tip").hide(),(0,i.default)(this).trigger("shifted")}),e.on("livesearch_selector:unselect",function(){(0,i.default)(this).siblings("span.input-tip").show(),(0,i.default)(this).parent().siblings("span.input-tip").show(),(0,i.default)(this).trigger("shifted")}),e.livesearch_selector({url:e.data("searchUrl"),cancel_copy:"",process_data:function(){return{term:this.$elem.val()}},process_results:function(e){return r.default.map(e.locations,function(e){return[e.short_name,e.id]})}})}),(0,i.default)("input.date").livequery(function(){var e=(0,i.default)(this),t=e.val(),n=e.closest(".js-date-field").find(".js-hidden-calendar-input");n.val(t?(0,a.format)("YYYY-MM-DD",t):""),e.datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},class_name:"absolute z_top",parse_callback:function(e){var t=(0,l.parseWithFormat)(e,"l");return(0,s.default)(t)?t:void 0},format_callback:function(e){return n.val(e?(0,a.format)("YYYY-MM-DD",e):""),e?(0,a.format)("l",e):""}})}),(0,i.default)("input.datetime").livequery(function(){var e=(0,i.default)(this),t=e.data("options")||{};e.datetime_picker_field(i.default.extend(!0,{calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:o.default.t("onloads.initializers.forms.Time")},class_name:"absolute z_top",position:e.is(".position_calendar_below")?"bottom":"right",parse_callback:function(e){var t=(0,l.parseWithFormat)(e,"l LT");return(0,s.default)(t)?t:void 0},format_callback:function(t){return e.closest(".js-datetime-field").find(".js-hidden-calendar-input").val(t?(0,a.formatWithLocale)("en","YYYY-MM-DD HH:mm:ss Z",t):""),t?(0,a.format)("l LT",t):""}},t))}),(0,i.default)(".js-calendar-picker").livequery(function(){var e,t=(0,i.default)(this),n=t.find('input[type="hidden"]'),s=t.find(".calendar"),l=s.data("options")||{};s.on("calendar_date_picker:date_selected",function(e,t){t?n.val((0,a.format)("YYYY-MM-DD HH:mm:ss Z",t)):n.val(""),n.trigger("change")}),""!==n.val()&&(e=new Date(n.val())),s.calendar_date_picker(r.default.extend({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:o.default.t("onloads.initializers.forms.Time"),selected_date:e},l)).data("calendar_date_picker")}),(0,i.default)("form ul.js-sortable, form ol.js-sortable, form tbody.js-sortable").livequery(function(){var e=(0,i.default)(this),t=!1;e.find(".move").length&&(t=".move"),e.find(".move").click(function(e){e.preventDefault()}),e.sortable({containment:"document",axis:"y",handle:t,update:function(){e.find("input.position").each(function(e){(0,i.default)(this).val(e+1)})}}),e.closest("form").submit(function(){e.find("input.position").each(function(e){(0,i.default)(this).val(e+1)})})})},iUX3:function(e,t,n){"use strict";n("RORv"),n("orei");var i=n("l/Rs");n("l/Rs");!function(e){function t(e,t){this.$elem=e,this.options=t,this.total_elements=e.find(t.items).length,e.serialScroll(t),this.bind_events()}e.fn.infinite_carousel=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("infinite_carousel");i||(i=new t(e(this),n),e(this).data("infinite_carousel",i))})},e.extend(t.prototype,{bind_events:function(){var e=this;this.$elem.on("notify.serialScroll",function(t,n){e.total_elements=e.$elem.find(e.options.items).length+1,n+1>=e.total_elements-e.options.step&&e.$elem.trigger("infinite_carousel:last_page")})}})}(i)},ienZ:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};a.default.fn.validate.defaults.on_valid.push(function(e){(0,a.default)(e).removeClass("errored")}),a.default.fn.validate.defaults.on_invalid.push(function(e){(0,a.default)(e).addClass("errored")})},"if/t":function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("jN36"),(0,r.default)(".NS-social--follow-friends",function(e){i.default.pollster(window.location.href,function(t){return 200===t.status&&(e.html(t.html),!0)},{delay:1e3})})},iis7:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("shXp")),a=s(n("8NzR")),o=s(n("wmCY"));function s(e){return e&&e.__esModule?e:{default:e}}(0,a.default)(".js-project-community-content",function(e){function t(e){return i.default.getJSON(FOUNDING_BACKERS_URL,{page:e}).then(function(e){if(e.length<4)return 0;var t=e.length<8?4:8,n=(0,i.default)(".js-founding-backers"),a=(0,i.default)(".js-founding-backer:first"),s=(0,r.default)(t).times(function(t){var n=e[t];return function(e,t){var n=e.clone();return n.find(".js-founding-backer-avatar img").removeAttr("src"),n.find(".js-founding-backer-avatar img").attr("src",t.avatar),n.find(".js-founding-backer-name").text(t.name),n.find(".js-founding-backer-backings").text(o.default.t("views.community_section.Backed_x_projects",{count:t.backings})),n}(a,n)});return n.empty().append(s),t})}e.on("click",".js-hero-scroll",function(e){i.default.scrollTo((0,i.default)(".js-community-locations").offset().top-45,400),e.preventDefault()});var n=1;e.on("click",".js-more-backers",function(){(n+=1)>25&&(n=1),(0,i.default)(".js-more-backers").attr("disabled","disabled"),t(n).then(function(e){0===e&&2===n?(0,i.default)(".js-more-backers").fadeOut():0===e&&t(n=1)}).always(function(){(0,i.default)(".js-more-backers").removeAttr("disabled")})})})},iptH:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(e){return(e||"").toLowerCase()}e.fn.cycle=function(n){var i;return 0!==this.length||e.isReady?this.each(function(){var i,r,a,o,s=e(this),l=e.fn.cycle.log;if(!s.data("cycle.opts")){for(var d in(!1===s.data("cycle-log")||n&&!1===n.log||r&&!1===r.log)&&(l=e.noop),l("--c2 init--"),i=s.data())i.hasOwnProperty(d)&&/^cycle[A-Z]+/.test(d)&&(o=i[d],l((a=d.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t))+":",o,"("+typeof o+")"),i[a]=o);(r=e.extend({},e.fn.cycle.defaults,i,n||{})).timeoutId=0,r.paused=r.paused||!1,r.container=s,r._maxZ=r.maxZ,r.API=e.extend({_container:s},e.fn.cycle.API),r.API.log=l,r.API.trigger=function(e,t){return r.container.trigger(e,t),r.API},s.data("cycle.opts",r),s.data("cycle.API",r.API),r.API.trigger("cycle-bootstrap",[r,r.API]),r.API.addInitialSlides(),r.API.preInitSlideshow(),r.slides.length&&r.API.initSlideshow()}}):(i={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(i.s,i.c).cycle(n)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),n=t.slides;t.slideCount=0,t.slides=e(),n=n.jquery?n:t.container.find(n),t.random&&n.sort(function(){return Math.random()-.5}),t.API.add(n)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.preInit)&&n.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.postInit)&&n.postInit(t)},initSlideshow:function(){var t,n=this.opts(),i=n.container;n.API.calcFirstSlide(),"static"==n.container.css("position")&&n.container.css("position","relative"),e(n.slides[n.currSlide]).css("opacity",1).show(),n.API.stackSlides(n.slides[n.currSlide],n.slides[n.nextSlide],!n.reverse),n.pauseOnHover&&(!0!==n.pauseOnHover&&(i=e(n.pauseOnHover)),i.hover(function(){n.API.pause(!0)},function(){n.API.resume(!0)})),n.timeout&&(t=n.API.getSlideOpts(n.currSlide),n.API.queueTransition(t,t.timeout+n.delay)),n._initialized=!0,n.API.updateView(!0),n.API.trigger("cycle-initialized",[n]),n.API.postInitSlideshow()},pause:function(t){var n=this.opts(),i=n.API.getSlideOpts(),r=n.hoverPaused||n.paused;t?n.hoverPaused=!0:n.paused=!0,r||(n.container.addClass("cycle-paused"),n.API.trigger("cycle-paused",[n]).log("cycle-paused"),i.timeout&&(clearTimeout(n.timeoutId),n.timeoutId=0,n._remainingTimeout-=e.now()-n._lastQueue,(n._remainingTimeout<0||isNaN(n._remainingTimeout))&&(n._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),n=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,n||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,n){var i,r=this.opts(),a=r.slideCount;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(t){var i,a=e(this);n?r.container.prepend(a):r.container.append(a),r.slideCount++,i=r.API.buildSlideOpts(a),r.slides=n?e(a).add(r.slides):r.slides.add(a),r.API.initSlide(i,a,--r._maxZ),a.data("cycle.opts",i),r.API.trigger("cycle-slide-added",[r,i,a])}),r.API.updateView(!0),r._preInitialized&&a<2&&r.slideCount>=1&&(r._initialized?r.timeout&&(i=r.slides.length,r.nextSlide=r.reverse?i-1:1,r.timeoutId||r.API.queueTransition(r)):r.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();((e=parseInt(t.startingSlide||0,10))>=t.slides.length||e<0)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,n){var i,r=t;return n&&r.manualFx&&(i=e.fn.cycle.transitions[r.manualFx]),i||(i=e.fn.cycle.transitions[r.fx]),i||(i=e.fn.cycle.transitions.fade,r.API.log('Transition "'+r.fx+'" not found.  Using fade.')),i},prepareTx:function(e,t){var n,i,r,a,o,s=this.opts();s.slideCount<2?s.timeoutId=0:(!e||s.busy&&!s.manualTrump||(s.API.stopTransition(),s.busy=!1,clearTimeout(s.timeoutId),s.timeoutId=0),s.busy||(0!==s.timeoutId||e)&&(i=s.slides[s.currSlide],r=s.slides[s.nextSlide],a=s.API.getSlideOpts(s.nextSlide),o=s.API.calcTx(a,e),s._tx=o,e&&void 0!==a.manualSpeed&&(a.speed=a.manualSpeed),s.nextSlide!=s.currSlide&&(e||!s.paused&&!s.hoverPaused&&s.timeout)?(s.API.trigger("cycle-before",[a,i,r,t]),o.before&&o.before(a,i,r,t),n=function(){s.busy=!1,s.container.data("cycle.opts")&&(o.after&&o.after(a,i,r,t),s.API.trigger("cycle-after",[a,i,r,t]),s.API.queueTransition(a),s.API.updateView(!0))},s.busy=!0,o.transition?o.transition(a,i,r,t,n):s.API.doTransition(a,i,r,t,n),s.API.calcNextSlide(),s.API.updateView()):s.API.queueTransition(a)))},doTransition:function(t,n,i,r,a){var o=t,s=e(n),l=e(i),d=function(){l.animate(o.animIn||{opacity:1},o.speed,o.easeIn||o.easing,a)};l.css(o.cssBefore||{}),s.animate(o.animOut||{},o.speed,o.easeOut||o.easing,function(){s.css(o.cssAfter||{}),o.sync||d()}),o.sync&&d()},queueTransition:function(t,n){var i=this.opts(),r=void 0!==n?n:t.timeout;if(0===i.nextSlide&&0==--i.loop)return i.API.log("terminating; loop=0"),i.timeout=0,r?setTimeout(function(){i.API.trigger("cycle-finished",[i])},r):i.API.trigger("cycle-finished",[i]),void(i.nextSlide=i.currSlide);r&&(i._lastQueue=e.now(),void 0===n&&(i._remainingTimeout=t.timeout),i.paused||i.hoverPaused||(i.timeoutId=setTimeout(function(){i.API.prepareTx(!1,!i.reverse)},r)))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(n){var i,r,a=this.opts(),o=n.data()||{};for(var s in o)o.hasOwnProperty(s)&&/^cycle[A-Z]+/.test(s)&&(i=o[s],r=s.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),a.API.log("["+(a.slideCount-1)+"]",r+":",i,"("+typeof i+")"),o[r]=i);(o=e.extend({},e.fn.cycle.defaults,a,o)).slideNum=a.slideCount;try{delete o.API,delete o.slideCount,delete o.currSlide,delete o.nextSlide,delete o.slides}catch(e){}return o},getSlideOpts:function(t){var n=this.opts();void 0===t&&(t=n.currSlide);var i=n.slides[t],r=e(i).data("cycle.opts");return e.extend({},n,r)},initSlide:function(t,n,i){var r=this.opts();n.css(t.slideCss||{}),i>0&&n.css("zIndex",i),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),n.addClass(r.slideClass)},updateView:function(e,t,n){var i=this.opts();if(i._initialized){var r=i.API.getSlideOpts(),a=i.slides[i.currSlide];!e&&!0!==t&&(i.API.trigger("cycle-update-view-before",[i,r,a]),i.updateView<0)||(i.slideActiveClass&&i.slides.removeClass(i.slideActiveClass).eq(i.currSlide).addClass(i.slideActiveClass),e&&i.hideNonActive&&i.slides.filter(":not(."+i.slideActiveClass+")").hide(),0===i.updateView&&setTimeout(function(){i.API.trigger("cycle-update-view",[i,r,a,e])},r.speed/(i.sync?2:1)),0!==i.updateView&&i.API.trigger("cycle-update-view",[i,r,a,e]),e&&i.API.trigger("cycle-update-view-after",[i,r,a]))}},getComponent:function(t){var n=this.opts(),i=n[t];return"string"==typeof i?/^\s*[\>|\+|~]/.test(i)?n.container.find(i):e(i):i.jquery?i:e(i)},stackSlides:function(t,n,i){var r,a=this.opts();t||(t=a.slides[a.currSlide],n=a.slides[a.nextSlide],i=!a.reverse),e(t).css("zIndex",a.maxZ);var o=a.maxZ-2,s=a.slideCount;if(i){for(r=a.currSlide+1;r<s;r++)e(a.slides[r]).css("zIndex",o--);for(r=0;r<a.currSlide;r++)e(a.slides[r]).css("zIndex",o--)}else{for(r=a.currSlide-1;r>=0;r--)e(a.slides[r]).css("zIndex",o--);for(r=s-1;r>a.currSlide;r--)e(a.slides[r]).css("zIndex",o--)}e(n).css("zIndex",a.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: 2.0.2"},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,n,i){e.API.stackSlides(n,t,i),e.cssBefore={opacity:1,display:"block"}}},fade:{before:function(t,n,i,r){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,r),t.cssBefore=e.extend(a,{opacity:0,display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,n,i,r){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,r),t.cssBefore=e.extend(a,{opacity:1,display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,n,i){e.API.stackSlides(t,n,i);var r=e.container.css("overflow","hidden").width();e.cssBefore={left:i?r:-r,top:0,opacity:1,display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:i?-r:r}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(i)},jAPW:function(e,t,n){var i,r,a;!function(o){"use strict";r=[n("l/Rs")],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a)}(function(e){"use strict";var t=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};function n(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function i(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}return t.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(r,a,o){"object"==typeof a&&(o=a,a=0),"function"==typeof o&&(o={onAfter:o}),"max"===r&&(r=9e9),o=e.extend({},t.defaults,o),a=a||o.duration;var s=o.queue&&o.axis.length>1;return s&&(a/=2),o.offset=i(o.offset),o.over=i(o.over),this.each(function(){if(null!==r){var l,d=n(this),c=d?this.contentWindow||window:this,u=e(c),f=r,h={};switch(typeof f){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(f)){f=i(f);break}f=d?e(f):e(f,c);case"object":if(0===f.length)return;(f.is||f.style)&&(l=(f=e(f)).offset())}var p=e.isFunction(o.offset)&&o.offset(c,f)||o.offset;e.each(o.axis.split(""),function(e,n){var i="x"===n?"Left":"Top",r=i.toLowerCase(),a="scroll"+i,g=u[a](),v=t.max(c,n);if(l)h[a]=l[r]+(d?0:g-u.offset()[r]),o.margin&&(h[a]-=parseInt(f.css("margin"+i),10)||0,h[a]-=parseInt(f.css("border"+i+"Width"),10)||0),h[a]+=p[r]||0,o.over[r]&&(h[a]+=f["x"===n?"width":"height"]()*o.over[r]);else{var _=f[r];h[a]=_.slice&&"%"===_.slice(-1)?parseFloat(_)/100*v:_}o.limit&&/^\d+$/.test(h[a])&&(h[a]=h[a]<=0?0:Math.min(h[a],v)),!e&&o.axis.length>1&&(g===h[a]?h={}:s&&(m(o.onAfterFirst),h={}))}),m(o.onAfter)}function m(t){var n=e.extend({},o,{queue:!0,duration:a,complete:t&&function(){t.call(c,f,o)}});u.animate(h,n)}})},t.max=function(t,i){var r="x"===i?"Width":"Height",a="scroll"+r;if(!n(t))return t[a]-e(t)[r.toLowerCase()]();var o="client"+r,s=t.ownerDocument||t.document,l=s.documentElement,d=s.body;return Math.max(l[a],d[a])-Math.min(l[o],d[o])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var i=Math.round(t.now);n!==i&&(e(t.elem)[t.prop](i),t._last=this.get(t))}},t})},jCVd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distance=t.distanceWithLocale=void 0;var i=l(n("mXYp")),r=l(n("HKs4")),a=l(n("uyaC")),o=l(n("X66P")),s=l(n("40X/"));function l(e){return e&&e.__esModule?e:{default:e}}var d={de:r.default,en:a.default,es:o.default,fr:s.default},c=t.distanceWithLocale=function(e,t,n){return(0,i.default)(t,n,{addSuffix:!0,locale:d[e]})};t.distance=function(e,t){return c(window.I18n.locale,e,t)}},jD6c:function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)(".NS_project_profiles__project_link",function(e){e.find(".js-profile-link").on("click",function(){(0,o.track)("Spotlight Hero Link Click")})})},jN36:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){function t(t,n,i){this.url=t,this.finished=n||function(){},this.options=e.extend({delay:3e4,on_error:function(){},on_complete:function(){},continue_on_error:!1},i),this.xhr=!1,this.running=!1,this.go()}e.pollster=function(e,n,i){return new t(e,n,i)},window.Pollster=t,t.prototype.start=function(){var e=this;this.running=!0,this.timeout=setTimeout(function(){e.go()},this.options.delay)},t.prototype.stop=function(){this.running=!1,this.timeout&&clearTimeout(this.timeout)},t.prototype.go=function(){var t=!1,n=this;function i(){t?n.stop():n.start()}this.xhr||(this.xhr=e.ajax({url:this.url,dataType:"json",type:"get",global:!1,cache:!1,success:function(e){t=n.finished(e),i()},error:function(){n.options.continue_on_error&&i(),n.options.on_error()},complete:function(){n.xhr=!1,n.options.on_complete()}}))}}(i)},jO9b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseWithFormat=t.parseWithFormatAndLocale=void 0;var i,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n("xA5w"),o=(i=a)&&i.__esModule?i:{default:i};var s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["day","month","year"],i=t.split(e),r=n.reduce(function(e,t,n){return e[t]=i[n],e},{}),a=r.day;return r.month+"/"+a+"/"+r.year},l={l:{de:function(e){return s(".",e)},en:function(e){return e},es:function(e){return s("/",e)},fr:function(e){return s("/",e)},ja:function(e){return s("/",e,["year","month","day"])}},"l LT":{de:function(e){var t=e.split(" "),n=r(t,2),i=n[0],a=n[1];return s(".",i)+" "+a},en:function(e){return e},es:function(e){var t=e.split(" "),n=r(t,2),i=n[0],a=n[1];return s("/",i)+" "+a},fr:function(e){var t=e.split(" "),n=r(t,2),i=n[0],a=n[1];return s("/",i)+" "+a},ja:function(e){var t=e.split(" "),n=r(t,2),i=n[0],a=n[1];return s("/",i,["year","month","day"])+" "+a}}},d=t.parseWithFormatAndLocale=function(e,t,n){return(0,o.default)(l[t][e](n))};t.parseWithFormat=function(e,t){return d(window.I18n.locale,t,e)}},joJ6:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".NS_users__profile",function(){(0,i.default)("#profile_tools .js-profile-share-link").click(function(e){(0,i.default)("#profile_tools .share_hover").toggle(),e.preventDefault()}),(0,i.default)("a.twitter").click(function(e){window.open((0,i.default)(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()}),(0,i.default)("a.facebook").click(function(e){window.open((0,i.default)(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()})})},k7Hi:function(e,t,n){"use strict";var i=a(n("9VV1")),r=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}n("l/Rs");var o=n("l/Rs");o.fn.in_place_editor=function(){return o(this).each(function(){var e=o(this),t=e.next("form.in_place_editor"),n=t.find(".js-in-place-editor-cancel"),a=e.siblings(".trigger_editor")||e,s=t.find("input.text"),l=!1;function d(){t.addClass("inactive"),e.show()}a.on("click",function(){s.css("fontSize",e.css("fontSize")),e.hide(),t.removeClass("inactive"),s.focus()}),n.on("click",function(){s.val(e.text()),d()}),t.on("submit",function(n){n.preventDefault(),l||(t.addClass("submitting"),l=!0,o.ajax({url:t.attr("action").replace(/(\.\w+)?$/,".js"),data:t.serialize(),type:"POST",complete:function(){t.removeClass("submitting"),l=!1},success:function(){var n=s.val();e.html(n),d(),l=!1,t.siblings(".clipster").data("text",n)},error:function(e){var n=JSON.parse(e.responseText),a="<p>"+r.default.t("library.in_place_editor.Oops_there_was_a_problem_with_your_submission");t.removeClass("submitting"),l=!1,n.errors?(a+=":<br/>"+o.map(n.errors,function(e,t){return t+": "+e}),a+="</p>"):a+=". "+r.default.t("library.in_place_editor.Please_refresh_the_page_before_trying_again")+"</p>",(0,i.default)({error:o(a).html()})}}))})})},o("span.in_place_editor").in_place_editor()},kO76:function(e,t,n){"use strict";var i=o(n("8NzR")),r=n("8Ml/"),a=o(n("shXp"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#site_index",function(){(0,r.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=a.default.debounce(r.trackProjectCards,150)})},kUTX:function(e,t,n){"use strict";n("FPSz");n("l/Rs");!function(e){function t(t,n){this.$field=t,this.$calendar=void 0,this.options=e.extend({calendar:{},position:"right"},n),this._in_manual_edit=!1,this._blurs_to_ignore=-1,this._attach()}e.fn.datetime_picker_field=function(n){return this.each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;this.$field.focus(function(){e._in_time_field=!1,e._ensure_calendar()}),this.$field.blur(function(){e._hide_calendar_or_refocus(),e._blurs_to_ignore-=1}),e.$field.bind("keypress cut paste input",function(){e._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var t=this,n=e("<div></div>"),i=e.extend({selected_date:this.get_selected_datetime()},this.options.calendar);return this.options.class_name?n.addClass(this.options.class_name):(n.css("position","absolute"),n.css("z-index",1e3)),"bottom"===this.options.position?(n.css("left",this.$field.offset().left),n.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(n.css("left",this.$field.offset().left+this.$field.width()+20),n.css("top",this.$field.offset().top)),n.hide(),this._get_surrounding_element().append(n),n.calendar_date_picker(i),n.mousedown(function(){t._in_time_field=!1,t._blurs_to_ignore+=1}),n.find("label").mousedown(function(e){t._in_time_field=!0,t._blurs_to_ignore+=1,e.stopPropagation()}),n.find("input").blur(function(){t._hide_calendar_or_refocus(),t._blurs_to_ignore-=1}),t._blurs_to_ignore=0,n.bind("calendar_date_picker:date_selected",function(e,n){if(!t._in_manual_edit){var i=t.options.format_callback(n);i!==t.$field.val()&&(t.$field.val(i),t.$field.trigger("input"),t.options.calendar.time_text||(t._hide_calendar(),t._focus_next()))}}),n.find(".time input").bind("keydown",function(n){13===n.keyCode&&(e(this).blur(),t._hide_calendar())}),this.$calendar=n,n.fadeIn(),this.options.open_calendar_callback&&this.options.open_calendar_callback(),this.$calendar},_hide_calendar:function(){this.$calendar&&(this.$calendar.fadeOut(function(){e(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback())},_focus_next:function(){var e=this.$field.parents("form:eq(0)").find(":input"),t=e.index(this.$field);t>-1&&t+1<e.length&&e.eq(t+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var e=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){e._in_time_field?e.$calendar&&e.$calendar.length&&e.$calendar.find("input").focus():e.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0,this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime()),this._in_manual_edit=!1},get_selected_datetime:function(){var e=this.$field.val();return this.options.parse_callback(e)},_get_surrounding_element:function(){return this.options.surrounding_element?e(this.options.surrounding_element):e("body")}})}(n("l/Rs"))},kitm:function(e,t,n){"use strict";n("uVjx"),n("+fgJ"),n("4C6Z"),n("CuRd"),n("UBnO"),n("l8Wg"),n("ATbN")},kqul:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_survey_questions__address",function(e){e.find(".country select").change(function(){var t=(0,i.default)(this).closest(".country"),n=t.data("original_country"),r=t.data("original_shipping_amount"),o=(0,i.default)(this).val(),s=(0,i.default)(this).find("option:selected").html(),l=(0,i.default)(this).find("option:selected").data("cost"),d=(0,i.default)("body").attr("id"),c=t.find(".shipping_changed_message"),u=(0,i.default)(".state .select"),f=(0,i.default)(".state .text"),h=(0,i.default)(".state .text_container");u.prop("disabled",!0).addClass("hidden"),f.prop("disabled",!0),h.addClass("hidden"),e.hasClass("is_preview")||(u.hasClass(o)?i.default.each(u,function(){var e=(0,i.default)(this);e.hasClass(o)&&e.prop("disabled",!1).removeClass("hidden")}):(f.prop("disabled",!1),h.removeClass("hidden")),n&&(l>r?(c.show(),c.find(".country-name").html(s),(0,a.track)("Survey Address for Backing with Restricted Shipping",{original_country:n,country:o,original_shipping_amount:r,shipping_amount:l,survey_context:d})):c.hide()))}),e.find(".country select").trigger("change")})},kwpy:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=u(n("rXeC")),a=u(n("8NzR")),o=n("vgZZ"),s=n("mEL7"),l=n("4RZc"),d=u(n("hBlz")),c=u(n("c5nH"));function u(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#projects_show",function(e){var t={live:"aspect-ratio--16x9",replay:"aspect-ratio--4x1-lg aspect-ratio--3x1-md aspect-ratio--7x3-sm aspect-ratio--5x3",countdown:"aspect-ratio--2x1-lg aspect-ratio--5x3-md aspect-ratio--5x4-sm aspect-ratio--5x6"};(0,r.default)("#verifying-pledge.modal_dialog .remote_modal_dialog",e).click(function(){(0,r.default)(this).parents("div#verifying-pledge").trigger("close.modal_dialog")}),location.hash&&setTimeout(function(){(0,r.default)(location.hash).find(".faq-question a").click()},500),(0,r.default)("body").is(".touchable")&&(e.on("modal_dialog:opened",function(){(0,r.default)("video").length&&window.Touch&&((0,r.default)("#video-section",e).css("visibility","hidden"),(0,r.default)("video")[0].pause())}),e.on("close.modal_dialog",function(){(0,r.default)("#video-section",e).css("visibility","visible")}));var n=(0,o.read_cookie)("edit_survey_response");n&&r.default.open_remote_modal_dialog(d.default.decode(n),{class_name:"backings-info__modal",remote_modal_dialog_contents_loaded:function(){(0,o.destroy_cookie)("edit_survey_response",d.default.parse(window.location.href).path)},dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")}});var a=function(){var e=c.default.get("backing"),t=e?e.urls.web.backing:null;r.default.open_remote_modal_dialog((0,d.default)(t).addQuery("ref","reward_view_pledge").addQuery("clicked_reward","true").suffix("js").toString(),{id:(0,r.default)(this).attr("data-modal-id"),class_name:"backings-info__modal",dataType:"html"})};(0,r.default)(document).on("click",".js-view_your_pledge",function(){a()}),(0,r.default)(document).on("keypress",".js-view_your_pledge",function(e){13!=e.which&&32!=e.which||a()}),e.find(".js-livestream-notice").on("click",function(e){e.preventDefault(),r.default.scrollTo((0,r.default)("#kickstarter_live_livestream"),"easeOutExp")}),window.addEventListener("message",function(n){if(-1!==["https://huzza.io","https://live.kickstarter.com",window.location.origin].indexOf(n.origin)&&"object"===i(n.data)&&"kickstarter_live_state_change"===n.data.type){var r=n.data.value;!function(e,n){var i,r=[];for(var a in t)a===n?i=t[a]:r.push(t[a]);e.removeClass(r.join(" ")),e.addClass(i)}(e.find(".js-livestream-ratio"),r),"live"===r?e.find(".js-livestream-notice").removeClass("hidden"):"replay"!==r&&"countdown"!==r||e.find(".js-livestream-notice").addClass("hidden")}},!1);var u=1;(0,r.default)(window).resize(function(){u>0&&((0,l.track)("Window Resize Start"),u-=1)}),(0,r.default)(document).on("ksr_popover:opened",function(){(0,r.default)(".ksr-popover.visible").parent(".NS_projects__project_share")&&(0,l.track)("Project Show Share Sheet")}),e.find(".js-launched").length>0&&(0,s.trackPixel)(s.PixelEvent.COMPLETE_REGISTRATION)})},l8Wg:function(e,t,n){"use strict";var i=d(n("shXp")),r=d(n("9VV1")),a=d(n("wmCY")),o=n("4RZc"),s=d(n("hBlz"));n("4C6Z");var l=d(n("c5nH"));function d(e){return e&&e.__esModule?e:{default:e}}n("l/Rs");var c=n("l/Rs");c.fn.ksr_uploader=function(e){function t(t,n,i){return c.pollster(t,function(t){return!!t.image_src&&(n.find(".success img.preview").attr("src",t.image_src).removeAttr("data-status_url"),c(".js-subs-preview").removeClass("o0p"),n.removeClass("encoding"),i.trigger("ksr_uploader:uploaded",[t]),e.after_encode&&e.after_encode(),!0)},{delay:5e3})}return e=e||{},c(this).each(function(){var n,d,u=c(this),f=new RegExp(window.location.host+"|^/"),h=!u.attr("url").match(f),p=h?i.default.map(u.data("params"),function(e,t){return{name:t,value:e}}):[{name:"new_style",value:!0}],m=u.siblings(".progress"),g=u.parent(),v=g.parent(),_=u.closest("form"),y=v.find(".success img.preview"),b=_.find("input[type=submit]"),w=b.map(function(){return c(this).val()}).get(),E=!1;function C(e){E=e,u.data("uploading",e)}function k(e){var i=e,r=_.find(".success");if("string"==typeof i)try{i=c.parseJSON(i)||{}}catch(e){i={}}C(!1),i.image_src&&r.find("img.preview").attr("src",i.image_src),i.id&&r.find("input.asset_id").val(i.id),y.attr("data-status_url",i.status_url),u.trigger("file_added",[i]),b.val(function(e){return w[e]}),v.removeClass("uploading"),v.addClass("has_file"),c(".js-subs-percentage").addClass("hide"),c(".js-subs-preview").addClass("o0p"),c(".js-subs-uploader-icon").addClass("hide"),i.status_url?n=t(i.status_url,v,u):u.trigger("ksr_uploader:uploaded",[i])}function S(e,t,n){var i=c.map(t.messages,function(e){return e}),r=_.find(".js-asset-upload").attr("class");void 0===r&&(r=_.closest(".js-asset-upload").attr("class")),c.each(i,function(t,i){(0,o.track)(e,{project_pid:l.default.data.id,type:n.type,file_size:n.size,context:r,error_description:i})})}u.siblings("label").hide(),u.fileupload({dataType:"text",dropZone:g,pasteZone:null,url:u.attr("url"),type:"POST",replaceFileInput:!1,add:function(e,t){t.files[0].size<1?t.files=[]:(n&&n.stop(),d=t.submit(),C(!0),m.removeClass("finished"),v.addClass("uploading"),u.trigger("file_queued"),window.onbeforeunload=function(){if(E)return a.default.t("library.ksr_uploader.Your_upload_has_not_completed_yet_Click_Stay")})},submit:function(e,t){h?p.push({name:"success_action_redirect",value:c.support.xhrFormDataFileUpload?"":(0,s.default)().path("/iframe_upload_catcher.html").fragment("").toString()}):p.push({name:"authenticity_token",value:c('meta[name="csrf-token"]').attr("content")}),t.formData=p},done:function(t,n){h?function(t){if("function"==typeof e.remote_upload_success)return void e.remote_upload_success.apply(u,arguments);var n=t.files[0];c.ajax({url:u.data("assetPath"),data:{file_name:encodeURIComponent(n.name),content_type:n.type,updated_at:(n.lastModifiedDate||new Date).getTime(),file_size:n.size,s3_key:i.default.findWhere(p,{name:"key"}).value},type:"POST",success:function(e){k(e)},error:function(){_.trigger("ksr_file_upload:reset"),C(!1),(0,r.default)({error:a.default.t("library.ksr_uploader.Could_not_upload_this_file")}),v.removeClass("uploading"),void 0!==l.default&&0===l.default.get("launched_at")&&S("Errored Project Asset Upload",t,n)}})}(n):k(n.result)},progress:function(e,t){var n=parseInt(t.loaded/t.total*100,10);m.find(".bar").css("width",n+"%"),m.find(".percentage").text(n+"%"),c(".js-subs-percentage").text(n+"%"),100===n&&(m.addClass("finished"),m.find(".percentage").text(a.default.t("library.ksr_uploader.Processing")),b.val(a.default.t("library.ksr_uploader.Processing_please_wait")),c(".js-subs-percentage").text("Processing..."))},fail:function(e,t){u.trigger("error"),_.trigger("ksr_file_upload:reset"),C(!1),(0,r.default)({error:a.default.t("library.ksr_uploader.There_was_an_error_with_this_file_Please_try_a_different")}),b.val(function(e){return w[e]}),v.removeClass("uploading"),void 0!==l.default&&0===l.default.get("launched_at")&&S("Failed Project Asset Upload",t,t.files[0])}}),y.data("status_url")&&(n=t(y.data("status_url"),v,u),y.removeAttr("status_url")),g.on("pollster:stop",function(){n&&n.stop()}),g.on("ksr_file_upload:cancel cancel",function(){d&&d.abort(),_.trigger("ksr_file_upload:reset"),u.trigger("error"),C(!1)}),g.on("destroy",function(){g.trigger("ksr_file_upload:cancel")}),g.on("resize",function(){g.find("object").attr("width",g.outerWidth()).attr("height",g.outerHeight())})})}},lQ6a:function(e,t,n){var i,r,a;a=function(){"use strict";var e,t,n=["webkit","Moz","ms","O"],i={};function r(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function a(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(n,r,a,o){var s=["opacity",r,~~(100*n),a,o].join("-"),l=.01+a/o*100,d=Math.max(1-(1-n)/r*(100-l),n),c=e.substring(0,e.indexOf("Animation")).toLowerCase(),u=c&&"-"+c+"-"||"";return i[s]||(t.insertRule("@"+u+"keyframes "+s+"{0%{opacity:"+d+"}"+l+"%{opacity:"+n+"}"+(l+.01)+"%{opacity:1}"+(l+r)%100+"%{opacity:"+n+"}100%{opacity:"+d+"}}",t.cssRules.length),i[s]=1),s}function s(e,t){var i,r,a=e.style;if(void 0!==a[t=t.charAt(0).toUpperCase()+t.slice(1)])return t;for(r=0;r<n.length;r++)if(void 0!==a[i=n[r]+t])return i}function l(e,t){for(var n in t)e.style[s(e,n)||n]=t[n];return e}function d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function c(e,t){return"string"==typeof e?e:e[t%e.length]}var u,f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};function h(e){this.opts=d(e||{},h.defaults,f)}if(h.defaults={},d(h.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,a=n.el=r(null,{className:i.className});if(l(a,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),t&&t.insertBefore(a,t.firstChild||null),a.setAttribute("role","progressbar"),n.lines(a,n.opts),!e){var o,s=0,d=(i.lines-1)*(1-i.direction)/2,c=i.fps,u=c/i.speed,f=(1-i.opacity)/(u*i.trail/100),h=u/i.lines;!function e(){s++;for(var t=0;t<i.lines;t++)o=Math.max(1-(s+(i.lines-t)*h)%u*f,i.opacity),n.opacity(a,t*i.direction+d,o,i);n.timeout=n.el&&setTimeout(e,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(t,n){var i,s=0,d=(n.lines-1)*(1-n.direction)/2;function u(e,t){return l(r(),{position:"absolute",width:n.scale*(n.length+n.width)+"px",height:n.scale*n.width+"px",background:e,boxShadow:t,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*s+n.rotate)+"deg) translate("+n.scale*n.radius+"px,0)",borderRadius:(n.corners*n.scale*n.width>>1)+"px"})}for(;s<n.lines;s++)i=l(r(),{position:"absolute",top:1+~(n.scale*n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:e&&o(n.opacity,n.trail,d+s*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&a(i,l(u("#000","0 0 4px #000"),{top:"2px"})),a(t,a(i,u(c(n.color,s),"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){u=r("style",{type:"text/css"}),a(document.getElementsByTagName("head")[0],u),t=u.sheet||u.styleSheet;var p=l(r("group"),{behavior:"url(#default#VML)"});!s(p,"transform")&&p.adj?function(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}t.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){var i=n.scale*(n.length+n.width),r=2*n.scale*i;function o(){return l(e("group",{coordsize:r+" "+r,coordorigin:-i+" "+-i}),{width:r,height:r})}var s,d=-(n.width+n.length)*n.scale*2+"px",u=l(o(),{position:"absolute",top:d,left:d});function f(t,r,s){a(u,a(l(o(),{rotation:360/n.lines*t+"deg",left:~~r}),a(l(e("roundrect",{arcsize:n.corners}),{width:i,height:n.scale*n.width,left:n.scale*n.radius,top:-n.scale*n.width>>1,filter:s}),e("fill",{color:c(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}if(n.shadow)for(s=1;s<=n.lines;s++)f(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=n.lines;s++)f(s);return a(t,u)},h.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=(r=(r=r.childNodes[t+i])&&r.firstChild)&&r.firstChild)&&(r.opacity=n)}}():e=s(p,"animation")}return h},"object"==typeof e&&e.exports?e.exports=a():void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r)},lRBY:function(e,t,n){"use strict";n("l/Rs");var i=n("l/Rs");i.fn.tabs=function(){return i(this).each(function(){var e=i(this);e.on("activate",function(t,n){var r=i(n),a=i("#"+r.data("pane"));e.data("pane")&&e.data("pane").trigger("deactivated"),e.data("pane",a.trigger("activated"))}),e.children().on("click",function(){i(this).parent().trigger("activate",i(this))})})},i.fn.panes=function(){var e=i(this);return e.each(function(){e.children().on("activated",function(){i(this).show()}).on("deactivated",function(){i(this).hide()})})}},lSD1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("cFFW");var a,o="clearTimeout",s=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-d)),i=setTimeout(e,n);return d=t,i},l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};((i=r)&&i.__esModule?i:{default:i}).default&&["","webkit","moz","o","ms"].some(function(e){var t=l(e,"request");if(t in window)return o=l(e,"cancel"),s=function(e){return window[t](e)}});var d=(new Date).getTime();(a=function(e){return s(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)},t.default=a,e.exports=t.default},lX5T:function(e,t,n){n("l/Rs"),n("l/Rs");var i=function(){var e,t,n,r,a,o,s="undefined",l="object",d="application/x-shockwave-flash",c="SWFObjectExprInst",u=window,f=document,h=navigator,p=!1,m=[],g=[],v=[],_=[],y=!1,b=!1,w=!0,E=!1,C=function(){var e=typeof f.getElementById!=s&&typeof f.getElementsByTagName!=s&&typeof f.createElement!=s,t=h.userAgent.toLowerCase(),n=h.platform.toLowerCase(),i=/win/.test(n||t),r=/mac/.test(n||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===h.appName,c=[0,0,0],m=null;if(typeof h.plugins!=s&&typeof h.plugins["Shockwave Flash"]==l)(m=h.plugins["Shockwave Flash"].description)&&typeof h.mimeTypes!=s&&h.mimeTypes[d]&&h.mimeTypes[d].enabledPlugin&&(p=!0,o=!1,m=m.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),c[0]=B(m.replace(/^(.*)\..*$/,"$1")),c[1]=B(m.replace(/^.*\.(.*)\s.*$/,"$1")),c[2]=/[a-zA-Z]/.test(m)?B(m.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof u.ActiveXObject!=s)try{var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");g&&(m=g.GetVariable("$version"))&&(o=!0,c=[B((m=m.split(" ")[1].split(","))[0]),B(m[1]),B(m[2])])}catch(e){}return{w3:e,pv:c,wk:a,ie:o,win:i,mac:r}}();C.w3&&((typeof f.readyState!=s&&("complete"===f.readyState||"interactive"===f.readyState)||typeof f.readyState==s&&(f.getElementsByTagName("body")[0]||f.body))&&k(),y||(typeof f.addEventListener!=s&&f.addEventListener("DOMContentLoaded",k,!1),C.ie&&(f.attachEvent("onreadystatechange",function e(){"complete"==f.readyState&&(f.detachEvent("onreadystatechange",e),k())}),u==top&&function e(){if(!y){try{f.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}k()}}()),C.wk&&function e(){y||(/loaded|complete/.test(f.readyState)?k():setTimeout(e,0))}()));function k(){if(!y&&document.getElementsByTagName("body")[0]){try{var e,t=F("span");t.style.display="none",(e=f.getElementsByTagName("body")[0].appendChild(t)).parentNode.removeChild(e),e=null,t=null}catch(e){return}y=!0;for(var n=m.length,i=0;i<n;i++)m[i]()}}function S(e){y?e():m[m.length]=e}function T(){var e=g.length;if(e>0)for(var t=0;t<e;t++){var n=g[t].id,i=g[t].callbackFn,r={success:!1,id:n};if(C.pv[0]>0){var a=M(n);if(a)if(!H(g[t].swfVersion)||C.wk&&C.wk<312)if(g[t].expressInstall&&R()){var o={};o.data=g[t].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var l={},d=a.getElementsByTagName("param"),c=d.length,u=0;u<c;u++)"movie"!=d[u].getAttribute("name").toLowerCase()&&(l[d[u].getAttribute("name")]=d[u].getAttribute("value"));x(o,l,n,i)}else I(a),i&&i(r);else W(n,!0),i&&(r.success=!0,r.ref=A(n),r.id=n,i(r))}else if(W(n,!0),i){var f=A(n);f&&typeof f.SetVariable!=s&&(r.success=!0,r.ref=f,r.id=f.id),i(r)}}}function A(e){var t=null,n=M(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==s?n:n.getElementsByTagName(l)[0]||n),t}function R(){return!b&&H("6.0.65")&&(C.win||C.mac)&&!(C.wk&&C.wk<312)}function x(i,a,o,l){var d=M(o);if(o=O(o),b=!0,n=l||null,r={success:!1,id:o},d){"OBJECT"==d.nodeName.toUpperCase()?(e=D(d),t=null):(e=d,t=o),i.id=c,(typeof i.width==s||!/%$/.test(i.width)&&B(i.width)<310)&&(i.width="310"),(typeof i.height==s||!/%$/.test(i.height)&&B(i.height)<137)&&(i.height="137");var h=C.ie?"ActiveX":"PlugIn",p="MMredirectURL="+encodeURIComponent(u.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+h+"&MMdoctitle="+encodeURIComponent(f.title.slice(0,47)+" - Flash Player Installation");if(typeof a.flashvars!=s?a.flashvars+="&"+p:a.flashvars=p,C.ie&&4!=d.readyState){var m=F("div");o+="SWFObjectNew",m.setAttribute("id",o),d.parentNode.insertBefore(m,d),d.style.display="none",P(d)}N(i,a,o)}}function I(e){if(C.ie&&4!=e.readyState){e.style.display="none";var t=F("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(D(e),t),P(e)}else e.parentNode.replaceChild(D(e),e)}function D(e){var t=F("div");if(C.win&&C.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(l)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||t.appendChild(i[a].cloneNode(!0))}}return t}function N(e,t,n){var i,r,a,o,c=M(n);if(n=O(n),C.wk&&C.wk<312)return i;if(c){var u,f,h,p=C.ie?F("div"):F(l);for(h in typeof e.id==s&&(e.id=n),t)t.hasOwnProperty(h)&&"movie"!==h.toLowerCase()&&j(p,h,t[h]);for(u in C.ie&&(r=e.data,a=p.innerHTML,(o=F("div")).innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+r+"'>"+a+"</object>",p=o.firstChild),e)e.hasOwnProperty(u)&&("styleclass"===(f=u.toLowerCase())?p.setAttribute("class",e[u]):"classid"!==f&&"data"!==f&&p.setAttribute(u,e[u]));C.ie?v[v.length]=e.id:(p.setAttribute("type",d),p.setAttribute("data",e.data)),c.parentNode.replaceChild(p,c),i=p}return i}function j(e,t,n){var i=F("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function P(e){var t=M(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(C.ie?(t.style.display="none",function e(){if(4==t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function L(e){return e&&e.nodeType&&1===e.nodeType}function O(e){return L(e)?e.id:e}function M(e){if(L(e))return e;var t=null;try{t=f.getElementById(e)}catch(e){}return t}function F(e){return f.createElement(e)}function B(e){return parseInt(e,10)}function H(e){e+="";var t=C.pv,n=e.split(".");return n[0]=B(n[0]),n[1]=B(n[1])||0,n[2]=B(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function U(e,t,n,i){var r=f.getElementsByTagName("head")[0];if(r){var l="string"==typeof n?n:"screen";if(i&&(a=null,o=null),!a||o!=l){var d=F("style");d.setAttribute("type","text/css"),d.setAttribute("media",l),a=r.appendChild(d),C.ie&&typeof f.styleSheets!=s&&f.styleSheets.length>0&&(a=f.styleSheets[f.styleSheets.length-1]),o=l}a&&(typeof a.addRule!=s?a.addRule(e,t):typeof f.createTextNode!=s&&a.appendChild(f.createTextNode(e+" {"+t+"}")))}}function W(e,t){if(w){var n=t?"visible":"hidden",i=M(e);y&&i?i.style.visibility=n:"string"==typeof e&&U("#"+e,"visibility:"+n)}}function z(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=s?encodeURIComponent(e):e}m[0]=function(){p?function(){var e=f.getElementsByTagName("body")[0],t=F(l);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",d);var n=e.appendChild(t);if(n){var i=0;!function r(){if(typeof n.GetVariable!=s)try{var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),C.pv=[B(a[0]),B(a[1]),B(a[2])])}catch(e){C.pv=[8,0,0]}else if(i<10)return i++,void setTimeout(r,10);e.removeChild(t),n=null,T()}()}else T()}():T()};C.ie&&window.attachEvent("onunload",function(){for(var e=_.length,t=0;t<e;t++)_[t][0].detachEvent(_[t][1],_[t][2]);for(var n=v.length,r=0;r<n;r++)P(v[r]);for(var a in C)C[a]=null;for(var o in C=null,i)i[o]=null;i=null});return{registerObject:function(e,t,n,i){if(C.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,g[g.length]=r,W(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(C.w3)return A(e)},embedSWF:function(e,t,n,i,r,a,o,d,c,u){var f=O(t),h={success:!1,id:f};C.w3&&!(C.wk&&C.wk<312)&&e&&t&&n&&i&&r?(W(f,!1),S(function(){n+="",i+="";var p={};if(c&&typeof c===l)for(var m in c)p[m]=c[m];p.data=e,p.width=n,p.height=i;var g={};if(d&&typeof d===l)for(var v in d)g[v]=d[v];if(o&&typeof o===l)for(var _ in o)if(o.hasOwnProperty(_)){var y=E?encodeURIComponent(_):_,b=E?encodeURIComponent(o[_]):o[_];typeof g.flashvars!=s?g.flashvars+="&"+y+"="+b:g.flashvars=y+"="+b}if(H(r)){var w=N(p,g,t);p.id==f&&W(f,!0),h.success=!0,h.ref=w,h.id=w.id}else{if(a&&R())return p.data=a,void x(p,g,t,u);W(f,!0)}u&&u(h)})):u&&u(h)},switchOffAutoHideShow:function(){w=!1},enableUriEncoding:function(e){E=typeof e===s||e},ua:C,getFlashPlayerVersion:function(){return{major:C.pv[0],minor:C.pv[1],release:C.pv[2]}},hasFlashPlayerVersion:H,createSWF:function(e,t,n){return C.w3?N(e,t,n):void 0},showExpressInstall:function(e,t,n,i){C.w3&&R()&&x(e,t,n,i)},removeSWF:function(e){C.w3&&P(e)},createCSS:function(e,t,n,i){C.w3&&U(e,t,n,i)},addDomLoadEvent:S,addLoadEvent:function(e){if(typeof u.addEventListener!=s)u.addEventListener("load",e,!1);else if(typeof f.addEventListener!=s)f.addEventListener("load",e,!1);else if(typeof u.attachEvent!=s)!function(e,t,n){e.attachEvent(t,n),_[_.length]=[e,t,n]}(u,"onload",e);else if("function"==typeof u.onload){var t=u.onload;u.onload=function(){t(),e()}}else u.onload=e},getQueryParamValue:function(e){var t=f.location.search||f.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return z(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return z(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(b){var i=M(c);i&&e&&(i.parentNode.replaceChild(e,i),t&&(W(t,!0),C.ie&&(e.style.display="block")),n&&n(r)),b=!1}},version:"2.3"}}()},lk0j:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=n("4RZc"),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_projects_view_fees",function(){(0,i.default)(".js-view-fees").on("click",function(){(0,a.track)("Viewed Fees Breakdown",{project_pid:o.default.data.id})})})},mCzb:function(e,t,n){"use strict";var i=c(n("shXp")),r=c(n("8NzR")),a=c(n("l/Rs")),o=c(n("+bVi")),s=c(n("c5nH")),l=c(n("eF8u")),d=n("4RZc");function c(e){return e&&e.__esModule?e:{default:e}}n("wGdM"),(0,r.default)(".NS_projects__content",function(){var e,t;void 0!==l.default&&(e=l.default.get("id")===s.default.get("creator.id"),t=s.default.get("is_backing"));var n,r,c=t||e,u=0,f=!o.default["not-mobile"],h=(0,a.default)(".js-project-nav").height(),p=20;function m(){return i.default.filter(n,function(e){return!0===e.state.is_selected})}function g(){var e=m();if(e.length){var t=e[0];t.toggle_pledge_form(),t.state.is_truncated&&t.toggle_description_truncation(),t.el.$truncate_link.addClass("hide"),t.reset_pledge_form(),t.reset_pledge_error(),t.reset_country_error()}}function v(){r=(0,a.default)(".js-reward-available"),window.rewards=r.map(function(e,t){var n=(0,a.default)(t),r=function(e){return i.default.filter(s.default.get("rewards"),function(t){return t.id===e})}(n.data("rewardId"))[0];return r.closed_height=n.height(),r.index=n.index(),new window.RewardController(n,r)}).get(),r.on("change","select",function(e){var t=(0,a.default)(e.delegateTarget).data("reward");t.shipping_rules.length&&(t.update_pledge_total(),t.reset_pledge_error()),t.validate()}),r.on("click",function(e){!function(e,t){if(u=0,"live"!==s.default.get("state")&&t.preventDefault(),!c&&!e.state.is_selected){var n=m(),i=0;n.length>0&&n[0].index<e.index&&(i=n[0].el.$rw.height()-n[0].closed_height);var r=e.el.$rw.offset().top-i-p;(0,a.default)(document).scrollTo(r,100),g(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),(0,d.track)("Checkout Reward Click",{checkout_reward_id:e.id,checkout_amount:e.reward_data.minimum})}}((0,a.default)(this).data("reward"),e)}),r.on("submit","form",function(e){var t=(0,a.default)(e.delegateTarget).data("reward"),n=t.validate();return t.state.submit_halted=!n,t.state.submit_halted&&(0,a.default)(e.target).removeClass("submitting-non-ajax"),n&&(0,d.track)("Checkout Reward Continue Click"),n}),r.on("blur input",'input[name="backing[amount]"]',function(e){(0,a.default)(e.delegateTarget).data("reward").validate()}),r.on("click",".js-desc-toggle",function(e){var t=(0,a.default)(e.delegateTarget).data("reward");e.preventDefault(),t.toggle_description_truncation()})}f||(p+=h),(0,a.default)(document).on("click",function(){3===(u+=1)&&(g(),u=0)}),(0,a.default)(document).on("projectnav:rewards projectnav:description",function(){v()}),v()})},mL1Z:function(e,t,n){"use strict";var i=n("APD3"),r=/^ms-/;e.exports=function(e){return i(e).replace(r,"-ms-")}},mXYp:function(e,t,n){var i=n("YRFD"),r=n("xA5w"),a=n("25hp"),o=n("GI7G"),s=n("uyaC"),l=1440,d=2520,c=43200,u=86400;e.exports=function(e,t,n){var f=n||{},h=i(e,t),p=f.locale,m=s.distanceInWords.localize;p&&p.distanceInWords&&p.distanceInWords.localize&&(m=p.distanceInWords.localize);var g,v,_={addSuffix:Boolean(f.addSuffix),comparison:h};h>0?(g=r(e),v=r(t)):(g=r(t),v=r(e));var y,b=a(v,g),w=v.getTimezoneOffset()-g.getTimezoneOffset(),E=Math.round(b/60)-w;if(E<2)return f.includeSeconds?b<5?m("lessThanXSeconds",5,_):b<10?m("lessThanXSeconds",10,_):b<20?m("lessThanXSeconds",20,_):b<40?m("halfAMinute",null,_):m(b<60?"lessThanXMinutes":"xMinutes",1,_):0===E?m("lessThanXMinutes",1,_):m("xMinutes",E,_);if(E<45)return m("xMinutes",E,_);if(E<90)return m("aboutXHours",1,_);if(E<l)return m("aboutXHours",Math.round(E/60),_);if(E<d)return m("xDays",1,_);if(E<c)return m("xDays",Math.round(E/l),_);if(E<u)return m("aboutXMonths",y=Math.round(E/c),_);if((y=o(v,g))<12)return m("xMonths",Math.round(E/c),_);var C=y%12,k=Math.floor(y/12);return C<3?m("aboutXYears",k,_):C<9?m("overXYears",k,_):m("almostXYears",k+1,_)}},mYWD:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".js-project-description-content, #description",function(){var e=5,t=(0,i.default)(".js-open-supporting-material");function n(e){(0,i.default)(".js-carousel-thumbnail").removeClass("cycle-slide-active"),(0,i.default)(".js-carousel-thumbnail:eq("+e+")").addClass("cycle-slide-active")}function r(t,n){var i=Math.floor(n/e)*e;t.trigger("goto",i)}function o(){return(0,i.default)(".cycle-slide-active .js-slide-media .video-player")}function s(){var e=o(),t=(0,i.default)(".cycle-slide-active .js-slide-media");e.height(t.height()).width(t.width())}function l(e){var t=(0,i.default)(".js-prototype-gallery-slide:eq("+e+")").data("slide-id");(0,a.track)("Viewed Prototype Gallery Slide",{slide_id:t})}t.click(function(){(0,i.default)("html").css("overflow","hidden")}),-1!==window.location.hash.indexOf("prototype-slide-")&&t.click(),(0,i.default)("#NS_project_supporting_material_showcase__show").livequery(function(){(0,i.default)(document).trigger("ksr_video:pause_all_videos");var t=(0,i.default)(this).closest(".modal_dialog");t.on("before_close.modal_dialog",function(){(0,i.default)(".js-prototype-slideshow").cycle("destroy"),window.location.hash="",(0,i.default)(window).off("resize.projectSupportingMaterials"),(0,i.default)("html").css("overflow","visible")}),(0,i.default)(window).on("hashchange",function(){""===window.location.hash&&t.trigger("close.modal_dialog")});var d=(0,i.default)(".js-prototype-carousel");(0,i.default)(".js-carousel-thumbnail").length>e?(d.serialScroll({items:".js-carousel-thumbnail",lock:!1,step:e,cycle:!1,duration:500}),(0,i.default)(".prototype-carousel__next").click(function(){d.trigger("next")}),(0,i.default)(".prototype-carousel__previous").click(function(){d.trigger("prev")})):(0,i.default)(".js-prototype-carousel-pager").addClass("hide"),d.on("click",".js-carousel-thumbnail",function(){window.location.hash=(0,i.default)(this).data("slide-hash"),(0,a.track)("Selected Prototype Gallery Thumbnail")}),(0,i.default)(".js-prototype-gallery-pager").click(function(){(0,a.track)("Advanced Prototype Gallery Carousel")});var c=(0,i.default)(".js-prototype-slideshow");c.on("cycle-before",function(){o().trigger("ksr_video:pause")}),c.on("cycle-after",function(e,t){n(t.nextSlide),r(d,t.nextSlide),l(t.nextSlide),s()}),c.on("cycle-post-initialize",function(e,t){n(t.currSlide),r(d,t.currSlide),l(t.currSlide),s(),(0,i.default)(window).on("resize.projectSupportingMaterials",s)}),c.cycle()})})},mZAT:function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");!function(e){e.fn.term_form=function(){return this.each(function(){var t=e(this);t.find(".text").on("input keydown paste cut",function(){e.trim(e(this).val())?e("form.term .ss-delete").show():e("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){t.submit()}),t.find(".ss-delete").on("click",function(){e("form.term .text").val("").trigger("input").focus(),t.submit()}),t.find(".text").on("focus",function(){e(this).addClass("focused")}),t.find(".text").on("blur",function(){var t=e(this);t.val()||t.removeClass("focused")})}),this}}(i)},mZAn:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)(".NS_projects__edit_submission",function(e){e.on("click","a.reply",function(e){var t=(0,i.default)(".NS_projects__edit_submission .reply_container form");return e.preventDefault(),t.is(":visible")?t.slideUp(300,"easeOutQuad"):t.slideDown(300,"easeOutQuad",function(){(0,i.default)(this).find("textarea").focus()}),!1}),e.find(".js-continue-to-launch").on("click",function(e){(0,i.default)("#content-wrap").find("#finished").hide(),e.preventDefault(),(0,i.default)(this).trigger("project_edit:toggle_tab",["launch"])})})},mjY1:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.History=e.History||{},i=e.jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,t,n){return t&&t.originalEvent&&t.originalEvent[e]||n&&n[e]||void 0},onDomLoad:function(e){i(e)}},void 0!==n.init&&n.init()}}(window)},mnU0:function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("8NzR")),a=l(n("9VV1")),o=l(n("wmCY")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,r.default)("#credit_cards_new",function(e){var t,n=e.find(".js-new-card-form"),r=e.find(".js-credit-card-choice"),l=e.find(".js-edit-ccs"),d=o.default.t("onloads.views.credit_cards.new.This_card_will_not_be_shown_again"),c=o.default.t("onloads.views.credit_cards.new.Edit_credit_cards"),u=o.default.t("onloads.views.credit_cards.new.Cancel"),f=o.default.t("onloads.views.credit_cards.new.Looks_like_something_went_wrong");r.on("click",".js-remove-cc-btn",function(e){t=(0,i.default)(e.delegateTarget)}),(0,i.default)(document).on("click",".js-yes-remove-btn",function(e){e.preventDefault();var o=(0,i.default)(this).attr("href");i.default.getJSON(o,function(){((0,i.default)(".modal_dialog").trigger("close.modal_dialog"),t.remove(),(0,a.default)({success:d}),(0,i.default)(".js-credit-card-choice").length)?r.find(".js-credit-card-info").first().click():((0,i.default)(".js-stored-card-form").html(n),n.show())}).fail(function(){(0,i.default)(".modal_dialog").trigger("close.modal_dialog"),(0,a.default)({error:f})})}),l.on("click",function(e){e.preventDefault(),r.find(".js-remove-cc-btn").toggle(),l.toggleClass("js-editing-inactive"),l.hasClass("js-editing-inactive")?((0,i.default)(this).text(c),(0,s.track)("Collapsed Edit Payment Sources Form")):((0,i.default)(this).text(u),(0,s.track)("Expanded Edit Payment Sources Form"))})})},mvPF:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(t,n){var i,r,a,o=n.autoHeight;if("container"==o)r=e(n.slides[n.currSlide]).outerHeight(),n.container.height(r);else if(n._autoHeightRatio)n.container.height(n.container.width()/n._autoHeightRatio);else if("calc"===o||"number"==e.type(o)&&o>=0){if((a="calc"===o?function(t,n){var i=0,r=-1;return n.slides.each(function(t){var n=e(this).height();n>r&&(r=n,i=t)}),i}(0,n):o>=n.slides.length?0:o)==n._sentinelIndex)return;n._sentinelIndex=a,n._sentinel&&n._sentinel.remove(),(i=e(n.slides[a].cloneNode(!0))).removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),i.css({position:"static",visibility:"hidden",display:"block"}).prependTo(n.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),i.find("*").css("visibility","hidden"),n._sentinel=i}}function n(t,n,i,r,a){var o=e(r).outerHeight();n.container.animate({height:o},n.autoHeightSpeed,n.autoHeightEasing)}function i(r,a){a._autoHeightOnResize&&(e(window).off("resize orientationchange",a._autoHeightOnResize),a._autoHeightOnResize=null),a.container.off("cycle-slide-added cycle-slide-removed",t),a.container.off("cycle-destroyed",i),a.container.off("cycle-before",n),a._sentinel&&(a._sentinel.remove(),a._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(r,a){var o,s=a.autoHeight,l=e.type(s),d=null;function c(){t(r,a)}"string"!==l&&"number"!==l||(a.container.on("cycle-slide-added cycle-slide-removed",t),a.container.on("cycle-destroyed",i),"container"==s?a.container.on("cycle-before",n):"string"===l&&/\d+\:\d+/.test(s)&&(o=(o=s.match(/(\d+)\:(\d+)/))[1]/o[2],a._autoHeightRatio=o),"number"!==l&&(a._autoHeightOnResize=function(){clearTimeout(d),d=setTimeout(c,50)},e(window).on("resize orientationchange",a._autoHeightOnResize)),setTimeout(c,30))})}(i)},mxM5:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_site__about_subnav",function(){(0,i.default)(".js-about-link").click(function(){(0,a.track)("About KSR Subnav About Click")}),(0,i.default)(".js-charter-link").click(function(){(0,a.track)("About KSR Subnav Charter Click")}),(0,i.default)(".js-press-link").click(function(){(0,a.track)("About KSR Subnav Press Click")}),(0,i.default)(".js-jobs-link").click(function(){(0,a.track)("About KSR Subnav Jobs Click")}),(0,i.default)(".js-team-link").click(function(){(0,a.track)("About KSR Subnav Team Click")}),(0,i.default)(".js-stats-link").click(function(){(0,a.track)("About KSR Subnav Stats Click")}),(0,i.default)(".js-happening-link").click(function(){(0,a.track)("About KSR Subnav Happening Click")})})},"n+Gj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submitFlaggingMutation=void 0;var i=n("OgtI");t.submitFlaggingMutation=function(e,t){var n=(0,i.encodeId)("Project",window.current_project.data.id);return(0,i.fetchGraph)("\n  mutation($contentId: ID!, $details: String, $kind: FlaggingKind!) {\n    createFlagging(\n      input: {\n        contentId: $contentId,\n        details: $details,\n        kind: $kind\n      }\n    ) {\n      flagging {\n        kind\n      }\n    }\n  }\n",{details:e,kind:t,contentId:n})}},nEat:function(e,t,n){"use strict";var i=s(n("shXp")),r=s(n("l/Rs")),a=s(n("nW38")),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,r.default)(document).on("click",".NS_post_likes__namepile a#full_namepile",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),dataType:"json",type:"GET",success:function(e){var n=i.default.map(e.users,function(e){return(0,a.default)('<a href="{{url}}">{{name}}</a>',e)});n=o.default.to_sentence(n),t.parent().html(n+" like this update.")}})})})},nEyA:function(e,t,n){var r,a,o,s;s=function(e){return e.createModule("ClassApplier",["WrappedSelection"],function(e,t){var n=e.dom,r=n.DomPosition,a=n.arrayContains,o=e.util,s=o.forEach,l=o.isHostMethod(document,"createElementNS");function d(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))return!1;return!0}function c(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function u(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function f(e,t){return"object"==typeof e.classList?e.classList.contains(t):u("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function h(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,i=n?e.className:e.getAttribute("class");i?u(i,t)||(i+=" "+t):i=t,n?e.className=i:e.setAttribute("class",i)}}var p=function(){function e(e,t,n){return t&&n?" ":""}return function(t,n){if("object"==typeof t.classList)t.classList.remove(n);else{var i="string"==typeof t.className,r=i?t.className:t.getAttribute("class");r=r.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),e),i?t.className=r:t.setAttribute("class",r)}}}();function m(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function g(e){return e&&e.split(/\s+/).sort().join(" ")}function v(e){return g(m(e))}function _(e,t){return v(e)==v(t)}function y(e,t){for(var n=t.split(/\s+/),i=0,r=n.length;i<r;++i)if(!f(e,c(n[i])))return!1;return!0}function b(e,t,i,r){-1==i&&(i=t.childNodes.length);var a=e.parentNode,o=n.getNodeIndex(e);s(r,function(e){!function(e,t,n,i,r){var a=e.node,o=e.offset,s=a,l=o;a==i&&o>r&&++l,a!=t||o!=n&&o!=n+1||(s=i,l+=r-n),a==t&&o>n+1&&--l,e.node=s,e.offset=l}(e,a,o,t,i)}),t.childNodes.length==i?t.appendChild(e):t.insertBefore(e,t.childNodes[i])}function w(e,t){var i=e.parentNode,r=n.getNodeIndex(e);s(t,function(e){!function(e,t,n){e.node==t&&e.offset>n&&--e.offset}(e,i,r)}),n.removeNode(e)}function E(e,t){return function(e,t,n,i,r){for(var a,o=[];a=e.firstChild;)b(a,t,n++,r),o.push(a);return i&&w(e,r),o}(e,e.parentNode,n.getNodeIndex(e),!0,t)}function C(e,t){var n=e.cloneRange();n.selectNodeContents(t);var i=n.intersection(e);return""!=(i?i.toString():"")}function k(e){for(var t,n=e.getNodes([3]),i=0;(t=n[i])&&!C(e,t);)++i;for(var r=n.length-1;(t=n[r])&&!C(e,t);)--r;return n.slice(i,r+1)}function S(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,i,r,a=0,o=e.attributes.length;a<o;++a)if("class"!=(r=(n=e.attributes[a]).name)){if(null===n!=(null===(i=t.attributes.getNamedItem(r))))return!1;if(n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function T(e,t){for(var n,i=0,r=e.attributes.length;i<r;++i)if(n=e.attributes[i].name,(!t||!a(t,n))&&e.attributes[i].specified&&"class"!=n)return!0;return!1}var A=n.getComputedStyleProperty,R="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||R(e.parentNode))};function x(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||R(e)&&!R(e.parentNode))}function I(e){return(R(e)||1!=e.nodeType&&R(e.parentNode))&&!x(e)}var D=/^inline(-block|-table)?$/i;function N(e){return e&&1==e.nodeType&&!D.test(A(e,"display"))}var j=/[^\r\n\t\f \u200B]/;function P(e){var t,n,i=[];for(t=0;n=e[t++];)i.push(new r(n.startContainer,n.startOffset),new r(n.endContainer,n.endOffset));return i}function L(e,t){for(var n,i,r,a=0,o=e.length;a<o;++a)n=e[a],i=t[2*a],r=t[2*a+1],n.setStartAndEnd(i.node,i.offset,r.node,r.offset)}function O(e,i,r,a){var o,s,l=0==r;if(n.isAncestorOf(i,e))return e;if(n.isCharacterDataNode(i)){var d=n.getNodeIndex(i);if(0==r)r=d;else{if(r!=i.length)throw t.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+r+" in "+i.data);r=d+1}i=i.parentNode}if(function(e,t){return n.isCharacterDataNode(e)?0==t?!!e.previousSibling:t!=e.length||!!e.nextSibling:t>0&&t<e.childNodes.length}(i,r)){o=i.cloneNode(!1),s=i.parentNode,o.id&&o.removeAttribute("id");for(var c,u=0;c=i.childNodes[r];)b(c,o,u++,a);return b(o,s,n.getNodeIndex(i)+1,a),i==e?o:O(e,s,n.getNodeIndex(o),a)}if(e!=i){o=i.parentNode;var f=n.getNodeIndex(i);return l||f++,O(e,o,f,a)}return e}function M(e){var t=e?"nextSibling":"previousSibling";return function(n,i){var r,a,o=n.parentNode,s=n[t];if(s){if(s&&3==s.nodeType)return s}else if(i&&(s=o[t])&&1==s.nodeType&&(a=s,(r=o).namespaceURI==a.namespaceURI&&r.tagName.toLowerCase()==a.tagName.toLowerCase()&&_(r,a)&&S(r,a)&&"inline"==A(r,"display")&&"inline"==A(a,"display"))){var l=s[e?"firstChild":"lastChild"];if(l&&3==l.nodeType)return l}return null}}var F=M(!1),B=M(!0);function H(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&(this.textNodes[0]=t)}H.prototype={doMerge:function(e){var t=this.textNodes,i=t[0];if(t.length>1){var r,a=n.getNodeIndex(i),o=[],l=0;s(t,function(t,d){r=t.parentNode,d>0&&(r.removeChild(t),r.hasChildNodes()||n.removeNode(r),e&&s(e,function(e){e.node==t&&(e.node=i,e.offset+=l),e.node==r&&e.offset>a&&(--e.offset,e.offset==a+1&&d<len-1&&(e.node=i,e.offset=l))})),o[d]=t.data,l+=t.data.length}),i.data=o.join("")}return i.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e=[];return s(this.textNodes,function(t,n){e[n]="'"+t.data+"'"}),"[Merge("+e.join(",")+")]"}};var U=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],W={};function z(e,t,n){var i,r,a,o,s=this;s.cssClass=s.className=e;var l=null,u={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),n=t.tagNames,l=t.elementProperties,u=t.elementAttributes,r=0;o=U[r++];)t.hasOwnProperty(o)&&(s[o]=t[o]);i=t.normalize}else i=t;s.normalize=void 0===i||i,s.attrExceptions=[];var f=document.createElement(s.elementTagName);s.elementProperties=s.copyPropertiesToElement(l,f,!0),d(u,function(e,t){s.attrExceptions.push(e),u[e]=""+t}),s.elementAttributes=u,s.elementSortedClassName=s.elementProperties.hasOwnProperty("className")?g(s.elementProperties.className+" "+e):e,s.applyToAnyTagName=!1;var h=typeof n;if("string"==h)"*"==n?s.applyToAnyTagName=!0:s.tagNames=c(n.toLowerCase()).split(/\s*,\s*/);else if("object"==h&&"number"==typeof n.length)for(s.tagNames=[],r=0,a=n.length;r<a;++r)"*"==n[r]?s.applyToAnyTagName=!0:s.tagNames.push(n[r].toLowerCase());else s.tagNames=[s.elementTagName]}z.prototype={elementTagName:"span",elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,n){var i,r,a,o,s,l,d={};for(var c in e)if(e.hasOwnProperty(c))if(o=e[c],s=t[c],"className"==c)h(t,o),h(t,this.className),t[c]=g(t[c]),n&&(d[c]=o);else if("style"==c){for(i in r=s,n&&(d[c]=a={}),e[c])e[c].hasOwnProperty(i)&&(r[i]=o[i],n&&(a[i]=r[i]));this.attrExceptions.push(c)}else t[c]=o,n&&(d[c]=t[c],l=W.hasOwnProperty(c)?W[c]:c,this.attrExceptions.push(l));return n?d:""},copyAttributesToElement:function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},appliesToElement:function(e){return a(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],function(e){return t.appliesToElement(e)&&!e.hasChildNodes()})},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&f(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||I(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&function(e){if(0==e.data.length)return!0;if(j.test(e.data))return!1;switch(A(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return N(e.previousSibling)||N(e.nextSibling)}(e)},postApply:function(e,t,n,r){var a,o,l=e[0],d=e[e.length-1],c=[],u=l,f=d,h=0,p=d.length;s(e,function(e){(o=F(e,!r))?(a||(a=new H(o),c.push(a)),a.textNodes.push(e),e===l&&(u=a.textNodes[0],h=u.length),e===d&&(f=a.textNodes[0],p=a.getLength())):a=null});var m=B(d,!r);if(m&&(a||(a=new H(d),c.push(a)),a.textNodes.push(m)),c.length){for(i=0,len=c.length;i<len;++i)c[i].doMerge(n);t.setStartAndEnd(u,h,f,p)}},createContainer:function(e){var t=n.getDocument(e),i=l&&!n.isHtmlNamespace(e)&&e.namespaceURI?t.createElementNS(e.namespaceURI,this.elementTagName):t.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,i,!1),this.copyAttributesToElement(this.elementAttributes,i),h(i,this.className),this.onElementCreate&&this.onElementCreate(i,this),i},elementHasProperties:function(e,t){var n=this;return d(t,function(t,i){if("className"==t)return y(e,i);if("object"==typeof i){if(!n.elementHasProperties(e[t],i))return!1}else if(e[t]!==i)return!1})},elementHasAttributes:function(e,t){return d(t,function(t,n){if(e.getAttribute(t)!==n)return!1})},applyToTextNode:function(e,t){if(function(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}(e)){var n=e.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))h(n,this.className);else{var i=e.parentNode,r=this.createContainer(i);i.insertBefore(r,e),r.appendChild(e)}}},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&v(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!T(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,n=e.getNodes([1],function(e){return t.isEmptyContainer(e)}),i=[e],r=P(i);s(n,function(e){w(e,r)}),L(i,r)},undoToTextNode:function(e,t,n,i){if(!t.containsNode(n)){var r=t.cloneRange();r.selectNode(n),r.isPointInRange(t.endContainer,t.endOffset)&&(O(n,t.endContainer,t.endOffset,i),t.setEndAfter(n)),r.isPointInRange(t.startContainer,t.startOffset)&&(n=O(n,t.startContainer,t.startOffset,i))}this.isRemovable(n)?E(n,i):p(n,this.className)},splitAncestorWithClass:function(e,t,n){var i=this.getSelfOrAncestorWithClass(e);i&&O(i,e,t,n)},undoToAncestor:function(e,t){this.isRemovable(e)?E(e,t):p(e,this.className)},applyToRange:function(e,t){var n=this,i=P((t=t||[])||[]);e.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(e);var r=k(e);if(r.length){s(r,function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,i)});var a=r[r.length-1];e.setStartAndEnd(r[0],0,a,a.length),n.normalize&&n.postApply(r,e,i,!1),L(t,i)}var o=n.getEmptyElements(e);s(o,function(e){h(e,n.className)})},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(t){var n=e.getSelection(t);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(e,t){var n=this,i=P(t=t||[]);e.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(e,i);var r,a,o=k(e),l=o[o.length-1];if(o.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,i),n.splitAncestorWithClass(e.startContainer,e.startOffset,i);for(var d=0,c=o.length;d<c;++d)r=o[d],(a=n.getSelfOrAncestorWithClass(r))&&n.isModifiable(r)&&n.undoToAncestor(a,i);e.setStartAndEnd(o[0],0,l,l.length),n.normalize&&n.postApply(o,e,i,!0),L(t,i)}var u=n.getEmptyElements(e);s(u,function(e){p(e,n.className)})},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(t){var n=e.getSelection(t),i=e.getSelection(t).getAllRanges();this.undoToRanges(i),n.setRanges(i)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,i=0;n=t[i++];)if(!this.isIgnorableWhiteSpaceNode(n)&&C(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(t){var n=e.getSelection(t);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var t=[],n=this;return e.getNodes([3],function(e){var i=n.getSelfOrAncestorWithClass(e);i&&!a(t,i)&&t.push(i)}),t},detach:function(){}},z.util={hasClass:f,addClass:h,removeClass:p,getClass:m,hasSameClasses:_,hasAllClasses:y,replaceWithOwnChildren:E,elementsHaveSameNonClassAttributes:S,elementHasNonClassAttributes:T,splitNodeAt:O,isEditableElement:R,isEditingHost:x,isEditable:I},e.CssClassApplier=e.ClassApplier=z,e.createClassApplier=function(e,t,n){return new z(e,t,n)},o.createAliasForDeprecatedMethod(e,"createCssClassApplier","createClassApplier",t)}),e},a=[n("5Nri")],void 0===(o="function"==typeof(r=s)?r.apply(t,a):r)||(e.exports=o)},nHv6:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){var e=".ksr_toggle";(0,a.default)(e).length&&((0,a.default)(e+" a").on("click",function(t){var n=(0,a.default)(this);n.closest(e).find("a").removeClass("selected"),n.addClass("selected"),n.closest(e).find(".bg").css({left:n.position().left}),t.preventDefault()}),(0,a.default)(e+" a.selected").click(),(0,a.default)(e+" .bg").addClass("show"))})},"nV3+":function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=s(n("9VV1")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#two_factor_authentication_confirm",function(e){e.find(".js-resend_code").on("click",function(e){(0,o.track)("Two-factor Authentication Resend Code"),i.default.ajax({dataType:"json",success:function(e){(0,a.default)(e)}}),e.preventDefault()}),e.find("#remember").on("change",function(){(0,o.track)("Two-factor Authentication Remember Changed")})})},nW38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateSettings=void 0,t.default=function(e,t){return a.default.template(e,o)(t)};var i,r=n("shXp"),a=(i=r)&&i.__esModule?i:{default:i};var o=t.templateSettings={interpolate:/\{\{(.+?)\}\}/g}},nh5m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.backerRewardsInit=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=h(n("GiK3")),a=h(n("O27J")),o=n("LbfT"),s=n("EIRz"),l=n("FlGX"),d=n("tRFe"),c=h(n("RKyf")),u=n("49v0"),f=n("f+bT");function h(e){return e&&e.__esModule?e:{default:e}}var p=void 0,m=void 0,g=function(e){var t=e.state,n=e.dispatch,i=e.dropdowns;return r.default.createElement(f.RewardsList,{state:t,dispatch:n,dropdowns:i})},v=function(){var e=document.getElementById("react-backer-rewards"),t=m=m||(0,l.loadAndParseRewardData)(e.dataset),n=t.hydratedState,f=t.shippingReducers,h=t.shippingDropdowns,v=(0,s.combineReducers)({applePay:u.reducer,reward:d.reducer,shippingSelects:(0,s.combineReducers)(i({},f)),tracking:c.default});p=p||(0,o.createEnhancedStore)(v,n),a.default.render(r.default.createElement(g,{state:p.getState(),dispatch:p.dispatch,dropdowns:h}),e)};(t.backerRewardsInit=function(){document.getElementById("react-backer-rewards")&&(v(),p.subscribe(v))})()},nzM3:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("shXp")),a=s(n("9VV1")),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,i.default)(document).on("click",".js-watch a",function(e){var t=(0,i.default)(this);e.preventDefault(),o.default.set("is_starred",!0),i.default.ajax({url:t.attr("href"),dataType:"json",type:"POST",success:function(e){e.modal&&(i.default.create_login_modal(e.data,"star_project"),o.default.set("is_starred",!1)),e.flash&&(0,a.default)(r.default.map(e.flash,function(e){return e[e.length-1]}))}})})})},oAbu:function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.options=n,this.$target=this.options.target||t,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.offset=this.$target.width():this.offset=this.$target.height(),this.index=0,this.playing=!0,this.options.index_control?this.$index_control_children=this.options.index_control.children():this.$index_control_children=e([]),this.options.should_autoadvance_callback||(this.options.should_autoadvance_callback=function(){return!0}),this.number=this.options.number||this.$index_control_children.length,this.update_offset(),this._attach(),n.play_delay&&this.playing_timer()}e.fn.spriteshow=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("spriteshow");i||(i=new t(e(this),n),e(this).data("spriteshow",i))})},e.extend(t.prototype,{_attach:function(){var t=this;this.$index_control_children.click(function(n){n.preventDefault(),t.set_index(e(this).index()),t.pause()}),this.options.controls&&(this.options.controls.children(".left").click(function(e){e.preventDefault(),t.page_left(),t.pause()}),this.options.controls.children(".right").click(function(e){e.preventDefault(),t.page_right(),t.pause()}),this.options.controls.children(".play-pause").click(function(){t.playing?t.pause():t.play()}))},update_offset:function(){var t=e([]);"fade"===this.options.effect&&(t=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(t),this.$target.fadeOut(function(){e(this).remove()}),this.$target=t),this.current_offset=this.index*this.offset,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(e){this.index=e,this.$index_control_children.removeClass("selected"),this.$index_control_children.filter(":eq("+e.toString()+")").addClass("selected"),this.$target.trigger("spriteshow:index",[e]),this.update_offset()},page_left:function(){var e=this.index-1;e<0&&(e=this.number-1),this.set_index(e)},page_right:function(){var e=this.index+1;e>=this.number&&(e=0,this.options.play_once&&this.pause()),this.set_index(e)},playing_timer:function(){var e=this;this.play_timeout=setTimeout(function(){if(e.playing&&e.options.should_autoadvance_callback()&&e.page_right(),e.options.pause_when_behind_by){var t=(new Date).getTime();e.last_play_date&&Math.abs(e.last_play_date-t-e.options.play_delay)>e.options.pause_when_behind_by?(e.slow_strikes?e.slow_strikes+=1:e.slow_strikes=0,e.slow_strikes>3&&e.pause()):e.slow_strikes=0,e.last_play_date=t}e.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})}(i)},oLWu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cardTypeFromNumber=t.cardFromType=t.cardFromNumber=t.truncateString=t.floatsOnly=t.digitsOnly=t.isDigitsSpacesOrDashes=t.isFloatsOnly=t.isDigitsOnly=t.cleanInputValue=void 0;var i,r=n("GMuJ"),a=n("I2cB"),o=(t.cleanInputValue=function(e){return"string"==typeof e?e.trim():e},t.isDigitsOnly=function(e){return"number"==typeof e||/^\d+$/.test(e)}),s=t.isFloatsOnly=function(e){return"number"==typeof e||/^(\d|\.)+$/.test(e)},l=(t.isDigitsSpacesOrDashes=function(e){return/^[\d\s-]+$/g.test(e)},t.digitsOnly=function(e){if(!o(e)){return a.maybe.fromNullable(e.toString().match(/(\d)+/g)).map(function(e){return e.join("")}).getOrElse("")}return e},t.floatsOnly=function(e){if(!s(e)){return a.maybe.fromNullable(e.toString().match(/(\d|\.)+/g)).map(function(e){return e.join("")}).getOrElse("")}return e},t.truncateString=function(e,t){return"string"!=typeof e?e:e>t?e.slice(0,t):e},t.cardFromNumber=(i=r.cards,function(e){var t=function(t){return e.slice(0,t.length)===t},n=i.filter(function(e){return e.patterns.some(t)});return n.length?n[0]:r.DEFAULT}));t.cardFromType=function(e){return function(t){var n=e.filter(function(e){return t===e.type});return n.length?n[0]:r.DEFAULT}}(r.cards),t.cardTypeFromNumber=function(e){var t=l(e);return t&&t.type}},oTWu:function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:t.parent(),attach_to:"top",lock_to_bottom:!0},n),this.paused=!1,this.last_scroll_top=0,this.last_up=!1,this.fixed=!1,this.original_top=t.offset().top,this.original_bottom=this.original_top+t.height(),this.update_window_larger_then_elem(),this.attach_to_top="top"===this.options.attach_to,this.attach_to_bottom=!this.attach_to_top,this.bind_events(),this.reposition()}function n(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"shifted scroll resize load hashchange"},n),this.original_top=t.offset().top,this.bind_events(),this.reposition()}e.fn.sticky_bar=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("stickybar");i?e(this).trigger("shifted"):(i=new t(e(this),n),e(this).data("stickybar",i))})},e.fn.simple_sticky_bar=function(t){return t=t||{},e(this).each(function(){var i=e(this).data("simple_stickybar");i?e(this).trigger("shifted"):(i=new n(e(this),t),e(this).data("simple_stickybar",i))})},e.extend(n.prototype,{bind_events:function(){var t=this;e(window).on(this.options.adjust_on,function(e){t.reposition(e)})},reposition:function(){e(window).scrollTop()<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}}),e.extend(t.prototype,{bind_events:function(){var t=this;e(window).resize(function(e){e.target===window&&t.update_window_larger_then_elem()}),e(document).on("shifted",function(){t.fixed=!1,t.$elem.css("position","static"),t.$elem.css("top","auto"),t.$elem.css("bottom","auto"),t.original_top=t.$elem.offset().top,t.original_bottom=t.original_top+t.$elem.height(),t.reposition()}),e(window).on(this.options.adjust_on,function(e){t.paused||t.reposition(e)}),this.$elem.on("sticky_bar:fix_to_bottom",function(){t.fixed=!0,t.$elem.css("position","fixed"),t.$elem.css("top",-(t.$elem.height()-e(window).height()))}),this.$elem.on("sticky_bar:pause",function(){t.paused=!0}),this.$elem.on("sticky_bar:unpause",function(){t.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=e(window).height()>this.$elem.height()},lockToBottom:function(e){this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",e-this.$elem.outerHeight()-this.$elem.offsetParent().offset().top)},reposition:function(t){var n=e(window).scrollTop(),i=n+e(window).height(),r=this.$elem.offset().top,a=r+this.$elem.height(),o=this.options.parent,s=o.offset().top+o.outerHeight(),l=t&&"scroll"===t.type,d=!(n>this.last_scroll_top),c=d!==this.last_up;e("body").width()<640||this.attach_to_top&&n<this.original_top||this.attach_to_bottom&&i>this.original_bottom?(this.fixed=!1,this.$elem.css("position","static"),this.$elem.css("top","auto"),this.$elem.css("bottom","auto")):this.options.lock_to_bottom&&!this.window_larger_then_elem&&i>s?this.lockToBottom(s):this.options.lock_to_bottom&&this.window_larger_then_elem&&n+this.$elem.height()>s?this.lockToBottom(s):c&&l?this.window_larger_then_elem||(this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",r),this.$elem.css("bottom","auto")):this.fixed||(this.attach_to_top?this.window_larger_then_elem||(!l||d)&&n<r?(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",0)):l&&d||!(i>a)||(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",-(this.$elem.height()-e(window).height()))):(this.window_larger_then_elem||(!l||!d)&&i>a)&&(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("bottom",0))),this.was_fixed!==this.fixed&&this.$elem.trigger("sticky_bar:fixed_changed",[this.fixed]),this.last_scroll_top=n,this.last_up=d}})}(i)},obSy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n("rXeC"));n("+V2Z");var r=u(n("shXp")),a=u(n("9VV1")),o=u(n("wmCY")),s=u(n("1i/z")),l=u(n("5Nri")),d=u(n("hBlz")),c=n("Z6GA");function u(e){return e&&e.__esModule?e:{default:e}}n("nEyA"),n("VUCL"),n("8nDS"),n("RIos"),n("ZAAP"),n("RuYt"),n("y96e"),n("TQqI"),n("I6Sp"),n("CkfE"),n("C8f7"),n("XXTK"),WYMeditor.SKINS.ksr={},WYMeditor.SKINS.ksr_chromeless={},n("/uZq"),WYMeditor.CUSTOM_COMMANDS=[{name:"AssetVideo",run:function(){h.apply(this,["asset_video"])}},{name:"AssetAudio",run:function(){h.apply(this,["audio"])}},{name:"AssetPhoto",run:function(){h.apply(this,["photo"])}},{name:"Blockquote",run:function(){var e,t=(0,i.default)(this.selected()),n=t.closest("blockquote");n.length?(e=(0,i.default)("<p></p>"),t.is(":first-child")?n.before(e):n.after(e),e.append(t),!n.is(":empty")&&n.find("p:not(:empty)").length||n.remove(),this.setFocusToNode(e[0])):this.container("blockquote")}},{name:"Code",run:function(e){var t=this,n=e||(0,i.default)([]),a=n.html()||"",s=n.data("style")||"",l=i.default.create_modal_dialog(o.default.t("onloads.initializers.editor.custom_commands.code.Code_it_up"),'<form><input class="style" value="'+s+'"/><textarea class="code">'+(0,c.unescape)(a)+'</textarea><input type="submit" /></form>'),d=l.data("modal_dialog");d.open(),l.find("form").on("submit",function(e){e.preventDefault();var a=(0,i.default)(this),o=r.default.escape(a.find("textarea.code").val()),s=a.find("input.style").val();n.length?n.html(o):t.insertBlock('<pre class="template code brush: '+s+'" data-style="'+s+'" contenteditable="false">'+o+"</pre>"),d.close()})}},{name:"Headerify",run:function(){(0,i.default)(this.selected()).is("h1")?this.container("p"):this.container("h1")}},{name:"ReadMore",run:function(){(0,i.default)(this._doc).find("div.read_more").remove(),this.insertBlock('<div class="read_more" contentEditable="false"></div>'),this.insert_empty_p_if_next_block_is_uneditable()}},{name:"ToggleUnorderedList",run:function(){var e,t=this.selected(),n=(0,i.default)(t),r=n.closest("li");r.length?((e=(0,i.default)(this.getCommonParentList(r,!0))).after("<p>"+n.text()+"</p>"),n.remove(),e.closest("ul:empty").remove()):this.insertUnorderedlist()}},{name:"KsrReward",run:function(){var e=this,t=this._iframe,n=t.contentDocument&&t.contentDocument.defaultView?t.contentDocument.defaultView:t.contentWindow,r=l.default.saveSelection(n),a=!1,s=[],d=this.dialog(o.default.t("onloads.initializers.editor.custom_commands.reward.Add_a_project_reward"),!1,'<form class="find_project_reward"><fieldset><label>'+o.default.t("onloads.initializers.editor.custom_commands.reward.Project")+'</label><div class="field search"><span class="ss-icon z3 ss-search"></span><span class="ss-icon z3 ss-delete"></span><input type="text" class="find-project text z2" name="q" size="40"/><div class="results z1 limited-height"><span class="ss-icon ss-directup"></div></div></fieldset><fieldset class="reward" style="display:none;"><label>'+o.default.t("onloads.initializers.editor.custom_commands.reward.Reward")+'</label><select name="reward"></select></fieldset><input type="submit" value="'+o.default.t("onloads.initializers.editor.custom_commands.reward.Insert")+'" class="btn btn--blue"/><a class="wym_cancel">'+o.default.t("onloads.initializers.editor.custom_commands.reward.Cancel")+"</a></form>"),c=d.$elem,u=c.find("input.find-project"),f=c.find("select");u.closest(".field").livesearch_selector({url:"/projects/options.js",serialize:u,process_data:function(e){return e+"&rewards=true"},cancel_copy:""}),c.on("livesearch:selected",function(e,t){a=t[1],f.empty(),s=[],i.default.each(t[2].rewards,function(e){s.push(this.html),f.append('<option value="'+e+'">'+this.minimum+""+this.reward+"</option>")}),f.closest("fieldset").slideDown()}),u.on("livesearch_selector:unselect",function(){f.empty(),f.closest("fieldset").slideUp(),a=!1}),c.on("submit",function(e){e.preventDefault()}),c.one("submit",function(){if(a){var t=c.find("form select").val(),n=s[t];l.default.restoreSelection(r),l.default.removeMarkers(r),e.insertBlock(n),e.ensure_template_links_target_top_or_new_windows(),e.insert_empty_p_if_next_block_is_uneditable(),d.close()}})}}],(0,i.default)(function(){(0,i.default)(".editor").on("wym-postIframeInitialization",function(){var e=(0,i.default)(this),t=i.default.wymeditors(e.data("wym_index"));if(void 0!==t){var n=t._doc;(0,i.default)(n).on("click","pre.code",function(){var e=(0,i.default)(this);e.find("ul.field-tools").remove(),t.exec("Code",[e])})}})});var f=[];function h(e){var t=this,n=this._iframe,r=n.contentDocument&&n.contentDocument.defaultView?n.contentDocument.defaultView:n.contentWindow,d=l.default.saveSelection(r),c={photo:o.default.t("onloads.initializers.editor.custom_commands.asset.Add_an_image"),audio:o.default.t("onloads.initializers.editor.custom_commands.asset.Add_an_audio_file"),asset_video:o.default.t("onloads.initializers.editor.custom_commands.asset.Add_a_video")}[e],u=i.default.open_remote_modal_dialog((0,i.default)(t._element).data("asset_upload_url")+"&type="+e,{ignore_parent:!0,do_not_cache:!0,title:c});(0,i.default)(document).one("modal_dialog:remote_dialog_loaded",function(e){var n=(0,i.default)(e.target),r=n.find("#new_asset"),c=n.find("input[type=file]"),f=n.find("form.embed"),h=r.find(".progress"),p=r.find("input[type=submit]"),m=p.val(),g=!1;r.find("input[type=submit]"),c.ksr_uploader(),f.on("submit",function(e){var n=f.find("input#url").val();n&&(i.default.ajax({url:f.attr("action"),type:f.attr("method"),data:{"data[data-href]":n,width:(0,i.default)(t._doc.body).width()-18},dataType:"html",success:function(e){var n=(0,i.default)(e);n.children().length?(t.insertBlock(n),t.ensure_template_links_target_top_or_new_windows(),t.insert_empty_p_if_next_block_is_uneditable()):(0,a.default)({error:o.default.t("onloads.initializers.editor.custom_commands.asset.Unable_to_embed")}),u&&u.close()},error:function(){(0,a.default)({error:o.default.t("onloads.initializers.editor.custom_commands.asset.Unable_to_embed")}),u&&u.close()}}),e.preventDefault())}),r.on("ksr_file_upload:reset",function(){r.parent().removeClass("upload_finished").removeClass("uploading"),h.removeClass("finished")}),r.on("file_queued",function(){r.parent().addClass("uploading"),r.find("input[type=submit]").val(o.default.t("onloads.initializers.editor.custom_commands.asset.Uploading_please_wait"))}),r.on("file_added",function(e,t){r.trigger("destroy"),r.attr("method","put"),r.attr("action",t.update_path),r.parent().addClass("upload_finished"),r.find(".credit_and_caption").length?p.val(m):r.submit()}),r.on("submit",function(e){var n=(0,i.default)('<p id="asset_errors" class="red f6"/>'),a=r.find(".credit_and_caption"),c=r.find("input#asset_caption");if(e.preventDefault(),!g&&r.parent().is(".upload_finished"))if(n.empty(),c.validates_max_length(),c.validate()){g=i.default.ajax({type:r.attr("method"),url:r.attr("action"),dataType:"json",data:r.serialize(),success:function(e){var n,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURI(e).replace(/[!'#$,()*]/g,escape)}(r.find("#link").val());n=a?s.default.render('<a href="{{link_to}}">{{{inner}}}</a>',{link_to:a,inner:e.html}):(0,i.default)(e.html),u.$parent_modal&&(u.$parent_modal.show(),u.$parent_modal=(0,i.default)([])),l.default.restoreSelection(d),t.insertBlock(n),l.default.removeMarkers(d),t.insert_empty_p_if_next_block_is_uneditable(),t.ensure_template_links_target_top_or_new_windows(),u.close(),(0,i.default)(t._element).trigger("wymeditor:videos_changed").trigger("wym-documentHTMLUpdated")},error:function(){f(o.default.t("onloads.initializers.editor.custom_commands.asset.Something_went_wrong"))},complete:function(){g=!1}})}else f(o.default.t("onloads.initializers.editor.custom_commands.asset.Caption_must_be_less_than_255_characters"));function f(e){a.find("#asset_errors").remove(),a.prepend(n.html(e))}}),(0,i.default)(document).one("closed.modal_dialog",function(e){(0,i.default)(e.target).find("form.js-asset-upload").length&&((0,i.default)(e.target).data("modal_dialog")&&(0,i.default)(e.target).remove())})})}(0,i.default)(document).on("wym-postIframeInitialization",".editor",function(){var e=(0,i.default)(this),t=e.closest("form"),n=!1;e.trigger("wymeditor:videos_changed"),t.is(".edit_post")||t.bind("submit",function(r){!n&&e.is(".assets_processing")&&(r.preventDefault(),t.removeClass("submitting-non-ajax"),i.default.modal_confirm(function(){n=!0,e.removeClass("assets_processing"),t.submit(),n=!1},{title:o.default.t("onloads.initializers.editor.custom_commands.asset.Your_media_is_being_encoded"),message:o.default.t("onloads.initializers.editor.custom_commands.asset.We_are_harnessing_the_wonders_of_science_to_convert_your_media"),confirm_text:o.default.t("onloads.initializers.editor.custom_commands.asset.Save")}))})}),(0,i.default)(document).on("wymeditor:videos_changed",".editor",function(){var e=(0,i.default)(this),t=i.default.wymeditors(e.data("wym_index")),n=0;r.default.each(f,function(e){e.stop()}),f=[],void 0!==t&&((0,i.default)(".processing",t._doc).each(function(){var r=(0,i.default)(this);n+=1,f.push(i.default.pollster((0,d.default)(r.data("status_path")).addQuery("width",(0,i.default)(t._doc.body).width()-18).toString(),function(t){if(t.html){var a=(0,i.default)(t.html);return n-=1,r.closest(".template").replaceWith(a),e.trigger("wymeditor:videos_changed"),e.trigger("wymeditor:video_encoded"),!0}}))}),n>0?e.trigger("wymeditor:assets_processing"):(0,i.default)(".failed_video",t._doc).length?e.trigger("wymeditor:assets_processing_failed"):e.trigger("wymeditor:assets_finished"),t._doc.defaultView&&t._doc.defaultView.$&&t._doc.defaultView.$.videos_changed())}),(0,i.default)(document).on("wymeditor:assets_processing",".editor",function(){(0,i.default)(this).addClass("assets_processing")}),(0,i.default)(document).on("wymeditor:assets_finished",".editor",function(){(0,i.default)(this).removeClass("assets_processing")}),(0,i.default)(document).on("wymeditor:assets_processing_failed",".editor",function(){(0,i.default)(this).removeClass("assets_processing_failed").addClass("videos_failed")}),(0,i.default)(document).on("ksr_video:pause_all_videos",function(){r.default.each(WYMeditor.INSTANCES,function(e){e._doc&&e._doc.defaultView&&e._doc.defaultView.$&&e._doc.defaultView.$(".video-player").trigger("ksr_video:pause")})}),t.default=WYMeditor},"of/u":function(e,t,n){"use strict";var i=o(n("8NzR")),r=o(n("l/Rs")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".pledges__checkout_faqs",function(e){e.on("click",".faq-question a",function(e){var t=(0,r.default)(this).closest(".faq");t.toggleClass("expanded"),(0,a.track)("Toggled Pledge Checkout FAQ",{pledge_faq_question:t.find(".question").text()}),e.preventDefault()}),(0,r.default)("body#pledges_edit").length&&setTimeout(function(){(0,r.default)(".faqs li#change_my_pledge_amount").addClass("expanded"),(0,r.default)(".faqs li#change_my_reward_selection").addClass("expanded"),(0,r.default)(".faqs li#cancel_my_pledge").length&&(0,r.default)(".faqs li#cancel_my_pledge").addClass("expanded")},800)})},ofuh:function(e,t,n){"use strict";var i=d(n("l/Rs")),r=d(n("shXp")),a=d(n("8NzR")),o=d(n("L3hI")),s=n("16WZ"),l=d(n("wmCY"));function d(e){return e&&e.__esModule?e:{default:e}}(0,a.default)(".NS_layouts__notifications",function(e){function t(t){var n=(0,i.default)(".js-banner-text",e);if(0!==n.length){var a=r.default.pairs(r.default.countBy((0,i.default)(".js-alert-box",e).map(function(){return(0,i.default)(this).data("category")}).get(),function(e){return e})),s=r.default.reduce(a,function(e,t){return e+t[1]},0),d=(0,i.default)(".js-cta",e),c=(0,i.default)(".js-banner-dismiss",e),u=(0,i.default)(".js-banner-toggle-button",e);if(1===s&&t){n.html((0,i.default)(".js-alert-body",e).html()),n.has("a")&&(0,i.default)(".js-banner-text a").addClass("white text-underline");var f=(0,i.default)(".js-alert-cta")[0];f?(d.html(f),d.show()):(d.html(""),d.hide());var h=(0,i.default)(".js-alert-dismiss",e);h.length?(c[0].setAttribute("href",h.attr("href")),c.show()):c.hide(),u.hide()}else{var p=r.default.map(a,function(e){return e[0]}).sort().map(function(e){return"<span class='bold'>"+l.default.t(e)+"</span>"}),m="<span class='bold'>"+l.default.t("banners.title.alerts",{count:s})+"</span>",g=o.default.to_sentence(p);n.html(l.default.t("banners.title.text",{alerts:m,categories:g})),(0,i.default)(".js-alert-title--urgent",e).text(l.default.t("banners.subtitles.urgent")),(0,i.default)(".js-alert-title--nonurgent",e).text(2===(0,i.default)(".js-alert-section",e).length?l.default.t("banners.subtitles.nonurgent.more"):l.default.t("banners.subtitles.nonurgent.less")),d.hide(),c.hide(),u.show()}(0,i.default)(".js-banner-buttons-container",e).show()}}t(!0),(0,i.default)(".js-alert-body").has("a")&&(0,i.default)(".js-alert-body a").addClass("text-underline"),e.on("click",".js-alert-dismiss, .js-banner-dismiss",function(){function e(e){e.slideUp(200,function(){(0,i.default)(this).remove(),t(!1),(0,s.rebindScroll)()})}var n=(0,i.default)(this),r=n.closest(".js-banner-wrap"),a=n.closest(".js-alert-wrap"),o=".js-alert-box";return 1===r.find(o).length?e(r):1===a.find(o).length?e(a):e(n.closest(o)),i.default.post(n.attr("href"),{_method:"delete"}),!1}),e.on("click",".js-banner-toggle, .js-banner-toggle-button",function(){(0,i.default)(".js-banner-wrap",e).toggleClass("bg-red-400 bg-grey-200",500),(0,i.default)(".js-banner-text",e).toggleClass("o-none",500).toggleClass("click-through",500),(0,i.default)(".alert-container",e).toggleClass("alert-container--open",500),(0,i.default)(".js-banner-toggle-icon",e).toggleClass("rotate-180",500),setTimeout(function(){(0,s.rebindScroll)()},501)})})},olXR:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("c5nH"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,i.default)(document).on("click",".js-unwatch a",function(e){var t=(0,i.default)(this);e.preventDefault(),r.default.set("is_starred",!1),i.default.ajax({url:t.attr("href"),dataType:"json",type:"DELETE"})})})},oo6k:function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)("body#survey_responses_edit_address",function(e){e.find(".back").click(function(e){e.preventDefault(),window.history.go(-1)}),(0,o.track)("Edit Address Page")})},orEx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getContextFromPathName=function(e){return/^\/projects\/.+pledge\/new$/.test(e)?"Reward Selection":/^\/checkouts\/.+payments\/new$/.test(e)?"Payments Page":/^\/projects\/[^\/pledge|\/payments]/.test(e)?"Project Page":null},t.parseResponseForMessage=function(e,t){try{var n=e.responseJSON.data.errors,i=[];for(var r in n)i.push(n[r][0]);return i[0]}catch(e){return t}}},orNa:function(e,t,n){var i=n("xA5w");e.exports=function(e,t){var n=i(e),r=i(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}},orei:function(e,t,n){(function(e){var t,n,i;n=".serialScroll",(i=(t=e).serialScroll=function(e){return t(window).serialScroll(e)}).defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0},t.fn.serialScroll=function(e){return this.each(function(){var r,a=t.extend({},i.defaults,e),o=a.event,s=a.step,l=a.lazy,d=a.target?this:document,c=t(a.target||this,d),u=c[0],f=a.items,h=a.start,p=a.interval,m=a.navigation;function g(e){e.data+=h,v(e,this)}function v(e,n){t.isNumeric(n)||(n=e.data);var i,o=e.type,l=a.exclude?b().slice(0,-a.exclude):b(),d=l.length-1,u=l[n],f=a.duration;if(o&&e.preventDefault(),p&&(y(),r=setTimeout(_,a.interval)),!u){if(h!==(i=n<0?0:d))n=i;else{if(!a.cycle)return;n=d-i}u=l[n]}!u||a.lock&&c.is(":animated")||o&&a.onBefore&&!1===a.onBefore(e,u,c,b(),n)||(a.stop&&c.stop(!0),a.constant&&(f=Math.abs(f/s*(h-n))),c.scrollTo(u,f,a),w("notify",n))}function _(){w("next")}function y(){clearTimeout(r)}function b(){return t(f,u)}function w(e){c.trigger(e+n,[].slice.call(arguments,1))}function E(e){if(t.isNumeric(e))return e;for(var n,i=b();-1===(n=i.index(e))&&e!==u;)e=e.parentNode;return n}delete a.step,delete a.start,u&&(l||(f=b()),(a.force||p)&&v({},h),t(a.prev||[],d).bind(o,-s,g),t(a.next||[],d).bind(o,s,g),u._bound_||c.bind("prev"+n,-s,g).bind("next"+n,s,g).bind("goto"+n,v),p&&c.bind("start"+n,function(e){p||(y(),p=!0,_())}).bind("stop"+n,function(){y(),p=!1}),c.bind("notify"+n,function(e,t){var n=E(t);n>-1&&(h=n)}),u._bound_=!0,a.jump&&(l?c:b()).bind(o,function(e){v(e,E(e.target))}),m&&(m=t(m,d).bind(o,function(e){e.data=Math.round(b().length/m.length)*m.index(this),v(e,this)})))})}}).call(t,n("l/Rs"))},p44K:function(e,t,n){"use strict";var i,r=n("shXp"),a=(i=r)&&i.__esModule?i:{default:i};var o=n("l/Rs"),s=n("l/Rs");s.fn.validate=function(){var e=!0;return!this.length||(this.is(":input")?(this.each(function(){var t,n=s(this),i=!1,r=n.data("validations");r&&r.length&&(a.default.each(r,function(r){var a=r[0],o=r[1]||{};if("function"!=typeof o.when||o.when.call(n))return a.call(n,n.val())?void 0:(e=!1,i=!0,"string"==typeof o.error&&(t=o.error),!1)}),i?s.each(s.fn.validate.defaults.on_invalid,function(e,i){i(n,t)}):s.each(s.fn.validate.defaults.on_valid,function(e,t){t(n)}))}),e):this.find(":input").validate())},s.fn.validate.defaults={on_valid:[function(e){s(e).trigger("validate:valid")}],on_invalid:[function(e,t){s(e).trigger("validate:invalid",[t])}]},function(e){function t(t,n){var i=e(this);i.data("validations")||i.data("validations",[]),i.data("validations").push([t,n])}function n(e){return function(n){return this.each(function(){t.call(this,e,n)}),this}}e.fn.validates_custom=function(e,n){return this.each(function(){t.call(this,e,n)}),this},e.fn.validates_format=n(function(t){return t.match(new RegExp(e(this).data("format")))}),e.fn.validates_min_length=n(function(t){return t.length>=parseInt(e(this).data("minlength"),10)}),e.fn.validates_max_length=n(function(t){return t.length<=parseInt(e(this).data("maxlength"),10)}),e.fn.validates_presence=n(function(t){return!!e.trim(t)}),e.fn.validates_email=n(function(e){return e.match(/^.+@.+\..{2,}$/)}),e.fn.validates_luhn_check=n(function(e){var t,n,i,r=String(e).replace(/[^\d]/g,""),a=0;for(n=r.length-1;n>=0;n-=1)i=n%2+1,a+=(t=parseInt(r[n],10))>4&&2===i?t*i%10+1:t*i;return a%10==0}),e.fn.validates_routing_number=n(function(t){var n,i,r,a=String(t).replace(/[^\d]/g,""),o=e(this).closest("form").attr("data-country"),s=(a+"").split(""),l=0,d=[0,3,6];switch(o){case"US":for(i=0,r=d.length;i<r;i+=1)n=d[i],l+=3*parseInt(s[n],10),l+=7*parseInt(s[n+1],10),l+=parseInt(s[n+2],10);return 0!==l&&l%10==0;case"CA":return 8===a.length;case"AU":case"NZ":return 6===a.length;default:return!0}}),e.fn.validates_vat_format=n(function(e){var t=String(e).toUpperCase();switch(t.substr(0,2)){case"NL":return/^\w{2}\d{9}B\d{2}$/.test(t);default:return/^\w{2}[\w\d]{6}/.test(t)}}),e.fn.validates_postal_code=n(function(t){var n=e(this).closest("form").data("country"),i=!1,r={US:[/(^\d{5}$)|(^\d{5}-\d{4}$)/]};return void 0===r[n]||(e.each(r[n],function(e,n){n.test(t)&&(i=!0)}),i)}),e.fn.validates_business_id=n(function(t){var n=String(t).toUpperCase().replace(/\s+/g,""),i=e(this).closest("form").attr("data-country"),r=!1,a={AU:[/^\d{9}$/,/^\d{11}$/],BE:[/^(BE)?[A-Z0-9]{12}$/],CA:[/^\d{9,10}$/],CH:[/^(CHE-?)?[0-9]{3}\.?[0-9]{3}(\.?[0-9]{3})?(TVA|MWST|IVA|VAT)?$/],ES:[/^[ABCDEFGHJNPQRSUVW][0-9]{7}[A-Z0-9]$/],FI:[/^\d{7}\-\d$/],FR:[/^\d{14}$/],GB:[/^\d{7,8}$/,/^(AC|E[NS]|FC|G[ENS]|I[CP]|LP|N[ACFILOPRVZ]|OC|R[0C]|S[ACEFILOPRZ]|ZC)\d{5,6}[A-Z]?$/i],IE:[/^\d{5,6}$/,/^[A-Z]{2}\d{5,6}$/i,/^R\d{3}$/i,/^\d{2,4}(?:SAL|F|R|T|SA)$/],LU:[/^\d{4,8}$/,/^B\d{4,8}$/i,/^F\d{3,8}$/i],NL:[/^\d{8}$/],US:[/^\d{2}-?\d{7}$/]};return""===n||(void 0===a[i]||(e.each(a[i],function(e,t){t.test(n)&&(r=!0)}),r))})}(o)},"p5+3":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("change","body#terms_oct2012 form.select_country",function(){(0,a.default)(this).submit()})})},p5aI:function(e,t,n){"use strict";function i(){}function r(e){if(!(this instanceof r))return new r(e);this.value=e}function a(e){if(!(this instanceof a))return new a(e);this.value=e}Object.defineProperty(t,"__esModule",{value:!0}),r.prototype=new i,a.prototype=new i,r.prototype.isSuccess=!0,r.prototype.isFailure=!1,a.prototype.isSuccess=!1,a.prototype.isFailure=!0,r.prototype.toString=function(){return"Validation.Success("+this.value+")"},a.prototype.toString=function(){return"Validation.Failure("+this.value+")"},r.prototype.concat=function(e){return e},a.prototype.concat=function(e){return e.isSuccess?this:a(this.value.concat(e.value))},t.Validation=i,t.Success=r,t.Failure=a},pD7l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=_(n("fbTF")),r=_(n("iDDm")),a=_(n("0SSf")),o=_(n("WoYN")),s=_(n("Eaq5")),l=_(n("sZX6")),d=_(n("X6aU")),c=_(n("5GF7")),u=_(n("stBO")),f=_(n("HSFe")),h=_(n("R4hA")),p=_(n("CcZ3")),m=_(n("5RPx")),g=_(n("SNFf")),v=_(n("TXOG"));function _(e){return e&&e.__esModule?e:{default:e}}var y={"assets/_uploaded_item":i.default,"backer_report/_index":r.default,"backer_report/_row":a.default,"backings/_row":o.default,"backings/_table":s.default,"discover/_location_li":l.default,"discover/_location_refresh_li":d.default,"discover/_location_options":c.default,"discover/_project_baseball_card_li":u.default,"discover/_search_location_li":f.default,"discover/_search_location_refresh_li":h.default,"message_threads/_show":p.default,"messages/_show":m.default,"projects/_baseball_card_grid":g.default,"projects/_baseball_card_tall":v.default};t.default=y},pJCm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shippingValidations=t.ERROR_MESSAGES=void 0;var i=n("Z5jf"),r=n("NBJa"),a=n("IPoO");t.ERROR_MESSAGES=function(e){return{shipping_country_presence:(0,i.boundT)("project_page.reward_errors.Please_select_a_shipping_country"),pledge_value_presence:(0,i.boundT)("project_page.reward_errors.Please_enter_a_pledge_amount"),pledge_value_sufficient:(0,i.boundT)("project_page.reward_errors.Please_enter_a_pledge_amount_of_at_least",{amount:e})}},t.shippingValidations=function(e){return[(0,r.validateField)(a.PLEDGE_AMOUNT,"pledge_value_presence",function(){return e.id===a.NO_REWARD||e.totalCost&&+e.totalCost>0}),(0,r.validateField)(a.PLEDGE_AMOUNT,"pledge_value_sufficient",function(){return e.id===a.NO_REWARD||e.totalCost&&+e.totalCost>=+e.pledgeCost+e.shippingCost}),(0,r.validateField)(a.PLEDGE_NO_REWARD,"pledge_value_presence",function(){return e.id!==a.NO_REWARD||e.totalCost&&+e.totalCost>0}),(0,r.validateField)(a.PLEDGE_NO_REWARD,"pledge_value_sufficient",function(){return e.totalCost&&+e.totalCost>=+e.projectMin}),(0,r.validateField)(a.SHIPPING_LOCATION,"shipping_country_presence",function(){return!e.shippingRequired||!!e.shippingLocation})]}},pJzG:function(e,t,n){"use strict";var i=l(n("l/Rs")),r=l(n("shXp")),a=l(n("8NzR")),o=l(n("wmCY")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),n("FJRQ"),n("p44K"),(0,a.default)("#credit_card_form.js-ksr-stripe",function(e){if(0===(0,i.default)("#react-payments-form").length){var t=e.find("form"),n=(0,i.default)("#saving-layer"),a=e.find(".errored"),l=t.find("#name"),d=t.find("#number"),c=t.find("#cvc"),u=t.find("#exp_month"),f=t.find("#exp_year"),h=t.find("#reusable"),p=(0,i.default)("#js-stripe_form"),m=p.find("#stripe_token"),g=p.find("#stripe_reusable"),v=p.find("#payment_type"),_=e.data("checkout-reward-id"),y=parseFloat(e.data("checkout-amount")),b=e.data("checkout-id"),w=""===e.data("checkout-is-guest"),E=t.data("accepted-card-types"),C={name_presence:o.default.t("onloads.views.credit_cards.form.Cardholder_name_must_be_present"),number_presence:o.default.t("onloads.views.credit_cards.form.Card_number_must_be_present"),number_invalid:o.default.t("onloads.views.credit_cards.form.Card_number_format_is_invalid"),type_invalid:o.default.t("onloads.views.credit_cards.form.Card_type_is_not_accepted"),security_code_presence:o.default.t("onloads.views.credit_cards.form.Card_security_code_must_be_present"),security_code_invalid:o.default.t("onloads.views.credit_cards.form.Card_security_code_format_is_invalid"),exp_month_presence:o.default.t("onloads.views.credit_cards.form.Card_expiration_month_must_be_present"),exp_month_invalid:o.default.t("onloads.views.credit_cards.form.Card_expiration_month_must_be_valid"),exp_year_presence:o.default.t("onloads.views.credit_cards.form.Card_expiration_year_must_be_present"),exp_year_invalid:o.default.t("onloads.views.credit_cards.form.Card_expiration_date_must_be_in_the_future"),stripe_timeout:o.default.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")},k="new";l.validates_presence({error:"name_presence"}),d.validates_presence({error:"number_presence"}),d.validates_custom(function(e){return R(e)},{error:"number_invalid",when:function(){return i.default.trim(d.val()).length>0}}),d.validates_custom(function(e){return t=A(e),r.default.include(E,t);var t},{error:"type_invalid",when:function(){return i.default.trim(d.val()).length>0&&R(d.val())}}),c.validates_presence({error:"security_code_presence"}),c.validates_custom(function(e){return t=e,n=A(d.val()),i.default.payment.validateCardCVC(t,n);var t,n},{error:"security_code_invalid",when:function(){return i.default.trim(c.val()).length>0}}),u.validates_presence({error:"exp_month_presence"}),u.validates_custom(function(e){return parseInt(e,10)>=(new Date).getMonth()+1},{error:"exp_month_invalid",when:function(){return parseInt(f.val(),10)<=(new Date).getFullYear()}}),f.validates_presence({error:"exp_year_presence"}),f.validates_custom(function(e){return parseInt(e,10)>=(new Date).getFullYear()},{error:"exp_year_invalid"}),l.add(d).add(c).on("keyup input paste cut",function(){(0,i.default)(this).validate()}).on("blur",function(){T((0,i.default)(this))}),u.on("change",function(){u.validate(),T(u),f.validate(),T(f)}),f.on("change",function(){f.validate(),T(f),u.validate(),T(u)}),t.find(":input").on("validate:valid",function(){(0,i.default)(this).data("error",null).attr("aria-invalid",!1).closest("li").removeClass("invalid")}).on("validate:invalid",function(e,t){(0,i.default)(this).data("error",t)}),d.on("validate:valid",function(){e.find("#js-card_type_list").addClass("selected").find(".js-"+A(d.val())).addClass("selected")}).on("validate:invalid",function(){e.find("#js-card_type_list").removeClass("selected").find("li").removeClass("selected")}),d.payment("formatCardNumber"),c.payment("formatCardCVC"),t.on("submit",function(e){if(e.preventDefault(),t.validate()){a.html("").addClass("hide"),n.show();var r=setTimeout(function(){n.find(".modal_dialog_body").html(C.stripe_timeout),n.removeClass("spinning"),(0,s.track)("Checkout Error",{type:"stripe_timeout",checkout_reward_id:_,checkout_id:b,checkout_is_guest:w})},3e4);Stripe.setPublishableKey(t.data("public-key")),Stripe.card.createToken({name:S(l.val()),number:S(d.val()),exp_month:S(u.val()),exp_year:S(f.val()),cvc:S(c.val())},function(e,t){t.error?(clearTimeout(r),n.hide(),a.html("<li>"+t.error.message+"</li>").removeClass("hide"),(0,s.track)("Checkout Error",{type:"stripe_token",context:t.error.message,checkout_reward_id:_,checkout_id:b,checkout_is_guest:w})):(m.val(t.id),g.val(h.is(":checked")),v.val("credit_card"),p.submit())})}else t.find(":input").each(function(){T((0,i.default)(this))})}),function(){var e=(0,i.default)("#new_card_form").find("form"),t=(0,i.default)(".selected input.card_toggle");(0,i.default)("#credit_card_form .errored").not(".hide").length&&(t=(0,i.default)("#new-card input.card_toggle")),t.length||(t=(0,i.default)("input.card_toggle:first")),(0,i.default)(document).on("change click","input.card_toggle",function(t){t.preventDefault();var n,r=(0,i.default)(this),a=(0,i.default)("#new_card_form");r.is("input.card_toggle")||(r=r.find("input.card_toggle")),(n=(0,i.default)("input.card_toggle").not(r)).prop("checked",!1),r.prop("checked",!0),n.closest(".payment_option").removeClass("selected"),r.closest(".payment_option").addClass("selected"),r.closest("#new-card").length?(a.slideDown(400),e=a.find("form"),k="new"):(a.slideUp(400),e=r.closest("form"),k="stored"),(0,s.track)("Selected Payment Source",{type:k,checkout_reward_id:_,checkout_id:b,checkout_is_guest:w})}),(0,i.default)(document).on("click",".js-pledge-submit",function(t){t.preventDefault(),(0,i.default)(".payment_option.selected").find(".account_toggle.radio").length?e=(0,i.default)("#sepa-account-info"):(0,i.default)(".js-credit-card-choice").length||(e=(0,i.default)("#new_card_form").find("form")),(0,s.track)("Submitted Payment Source Form",{type:k,checkout_reward_id:_,checkout_amount:y}),e.submit()}),t.prop("checked",!0).trigger("change")}()}function S(e){return"string"==typeof e?i.default.trim(e):e}function T(e){var t=e.data("error");void 0!==t&&C.hasOwnProperty(t)&&(e.attr("aria-invalid",!0).closest("li").addClass("invalid").find(".js-error-messages").html("<li>"+C[t]+"</li>"),(0,s.track)("Checkout Error",{type:t,checkout_reward_id:_,checkout_id:b,checkout_is_guest:w}))}function A(e){return/^(450823|450875|450878)/.test(e)?"visa":i.default.payment.cardType(e)}function R(e){return i.default.payment.validateCardNumber(e)}})},pqDf:function(e,t,n){"use strict";var i=a(n("8NzR")),r=a(n("+bVi"));function a(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,i.default)("body#help_images",function(){r.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},pxxf:function(e,t,n){"use strict";var i=u(n("l/Rs")),r=u(n("shXp")),a=u(n("Ae7L")),o=u(n("8NzR")),s=u(n("+bVi")),l=n("Tvaj"),d=u(n("MA+5")),c=n("4RZc");function u(e){return e&&e.__esModule?e:{default:e}}(0,o.default)("#NS_discover__locations",function(e){var t,n,o,u,f,h,p,m=e.hasClass("refresh_enabled"),g=e.find("form"),v=g.find("input"),_=500;function y(e){var t;t=m?(0,i.default)((0,d.default)("discover/_location_refresh_li",e)):(0,i.default)((0,d.default)("discover/_location_li",e)),o.empty(),n.children("li:not(:first-child)").remove(),n.append(t),m?(u.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),t.find("a").addClass("ksr-green-500").removeClass("black")):(u.find("li.selected").removeClass("selected"),t.addClass("selected")),(0,i.default)(document).trigger("discovery:locations:updated",e),(0,i.default)(document).trigger("discovery:locations:changed",e),h&&h.abort(),h=i.default.ajax({url:e.urls.web.location,dataType:"json",success:function(e){o.children().remove(),r.default.each(e.nearby_locations,function(e){m?o.append((0,d.default)("discover/_location_refresh_li",e)):o.append((0,d.default)("discover/_location_li",e))}),n.children("li:not(:first-child)").remove(),r.default.each(e.ancestor_locations.reverse(),function(e){m?n.append((0,d.default)("discover/_location_refresh_li",e)):n.append((0,d.default)("discover/_location_li",e))}),n.append(t),(0,i.default)(document).trigger("discovery:locations:updated",e)},complete:function(){h=!1}})}m?(t=g.find(".js-results"),n=e.find(".js-broader-locations ul"),o=e.find(".js-nearby-locations ul"),u=e.find(".js-broader-locations ul, .js-nearby-locations ul")):(t=g.find("ul.results"),n=e.find(".broader-locations ul"),o=e.find(".nearby-locations ul"),u=e.find(".broader-locations ul, .nearby-locations ul")),g.on("submit",function(e){e.preventDefault()}),u.on("click","li > a",function(t){var n=(0,i.default)(this),r=n.closest("li"),a=r.data("location")||{};m?(u.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),n.addClass("ksr-green-500").removeClass("black")):(u.find(".selected").removeClass("selected"),r.addClass("selected")),(0,i.default)(document).trigger("discovery:locations:changed",a),e.trigger("ksr_popover:close"),t.preventDefault()}),v.on("blur",function(){setTimeout(function(){m?t.addClass("display-none").removeClass("block"):g.removeClass("results_visible")},500)}),v.on("cut paste input keydown",function(e){e.keyCode===l.ESC?((0,i.default)(this).val(""),m?t.addClass("display-none").removeClass("block"):g.removeClass("results_visible")):-1===r.default.indexOf(l.NOT_INPUT,e.keyCode)&&function(){f&&f.abort();g.addClass("loading"),clearTimeout(p),p=setTimeout(function(){f=i.default.ajax({url:g.attr("action"),dataType:"json",data:g.serialize(),success:function(e){m?t.removeClass("display-none").addClass("block"):g.addClass("results_visible"),t.empty(),r.default.each(e.locations,function(e){m?t.append((0,d.default)("discover/_search_location_refresh_li",e)):t.append((0,d.default)("discover/_search_location_li",e))}),(0,c.track)("Discover Location Search Results",{discover_location_search_term:v.val(),discover_location_search_hits:e.total_hits})},complete:function(){g.removeClass("loading"),f=!1}})},_)}()}),e.on("ksr_popover:opened",function(){s.default["not-touchable"]&&v.focus()}),e.find(".current_location, .js-current_location").on("click",function(e){e.preventDefault(),y(a.default.get()),v.val(""),(0,c.track)("Discovery Current Location Click",{discover_used_html5:!1})}),t.on("click","li > a",function(e){y((0,i.default)(this).closest("li").data("location")||{}),m?t.addClass("display-none").removeClass("block"):g.removeClass("results_visible"),(0,c.track)("Discover Location Search Click",{discover_location_search_term:v.val()}),e.preventDefault()}),(0,i.default)(document).on("discovery:sentence:changed",function(t,n){m?(e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),n.woe_id&&parseInt(n.woe_id,10)>0?e.find("#location_"+n.woe_id+" a").addClass("ksr-green-500").removeClass("black"):e.find("li:first a").addClass("ksr-green-500").removeClass("black")):(e.find(".selected").removeClass("selected"),n.woe_id&&parseInt(n.woe_id,10)>0?e.find("#location_"+n.woe_id).addClass("selected"):e.find("li:first").addClass("selected"))}),(0,i.default)(document).on("discovery:locations:load_sample",function(e,t){t.location&&y(t.location),e.preventDefault()})})},"q1R/":function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#jobs_index",function(){(0,i.default)(".js-current-openings").click(function(){i.default.scrollTo((0,i.default)((0,i.default)(this).attr("href")),{duration:3e3}),(0,a.track)("About KSR Jobs Current Openings Click")}),(0,i.default)(".js-charter-link").click(function(){(0,a.track)("About KSR Jobs Charter Click")}),(0,i.default)(".js-team-link").click(function(){(0,a.track)("About KSR Jobs Team Click")}),(0,i.default)(".js-job-section a").click(function(){(0,a.track)("About KSR Jobs Posting Click")})})},q1oh:function(e,t,n){"use strict";var i,r=n("8NzR"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)("body#survey_responses_new",function(e){var t=e.find("input:hidden#dirty");e.length&&(e.on("keydown","input:text",function(e){13===e.which&&e.preventDefault()}),"0"===t.val()?t.val("1"):(0,o.track)("Back to Survey Response Page"),(0,o.track)("Survey Response Page"))})},"qBp/":function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){var t=e('<div id="jquery-clipster-overlay"><div><p>Press C to copy</p><p><textarea></textarea></p></div></div>'),n=t.find("textarea");function i(e,t){t||(t={}),this.text=t.text||e.data("text")||e.text(),this.$elem=e,this.is_on=!1,this.bind()}t.hide(),e(function(){e("body").append(t)}),e.clipster=function(t,n){e(document).on("click",t,function(t){e(this).clipster(n).data("clipster").activate(),t.preventDefault()})},e.fn.clipster=function(t){return this.each(function(){var n=e(this),r=n.data("clipster");r||(r=new i(n,t),n.data("clipster",r))})},i.prototype.bind=function(){var t=this;this.$elem.on("click",function(e){t.activate(),e.preventDefault()}),e(document).on("copy click",function(i){var r=e(i.target);r.closest(t.$elem).length||"click"===i.type&&r.is(n)||t.deactivate()}),e(document).on("keydown",function(e){27===e.which&&t.deactivate()})},i.prototype.activate=function(){this.active||(t.show(),n.val(this.text),n[0].select(),n.focus(),this.active=!0)},i.prototype.deactivate=function(){this.active&&(setTimeout(function(){t.hide()}),this.active=!1)}}(i)},qQYM:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("click",".activity_mini_comment .excerpt a",function(e){e.preventDefault();var t=(0,a.default)(this).parents("blockquote.excerpt"),n=t.siblings("blockquote.everything");t.hide(),n.css("display","inline")})})},qxrp:function(e,t,n){"use strict";var i,r=n("rXeC"),a=(i=r)&&i.__esModule?i:{default:i};n("obSy"),(0,a.default)(".editor").livequery("wym-postIframeInitialization",function(){var e=a.default.wymeditors((0,a.default)(this).data("wym_index"));(0,a.default)(e._doc.body).ksrSelect()})},rI7t:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend({tablesorter:new function(){var t=this;function n(){var e=arguments.length>1?Array.prototype.slice.call(arguments):arguments[0];"undefined"!=typeof console&&void 0!==console.log?console.log(e):alert(e)}function i(e,t){n(e+" ("+((new Date).getTime()-t.getTime())+"ms)")}function r(e){for(var t in e)return!1;return!0}function a(t,n,i){if(!n)return"";var r=t.config,a=r.textExtraction,o="";return o="simple"===a?r.supportsTextContent?n.textContent:e(n).text():"function"==typeof a?a(n,t,i):"object"==typeof a&&a.hasOwnProperty(i)?a[i](n,t,i):r.supportsTextContent?n.textContent:e(n).text(),e.trim(o)}function o(e,i,r,o){for(var s,l=t.parsers.length,d=!1,c="",u=!0;""===c&&u;)i[++r]?(c=a(e,d=i[r].cells[o],o),e.config.debug&&n("Checking if value was empty on row "+r+", column: "+o+': "'+c+'"')):u=!1;for(;--l>=0;)if((s=t.parsers[l])&&"text"!==s.id&&s.is&&s.is(c,e,d))return s;return t.getParserById("text")}function s(e){var r,a,s,l,d,c,u,f,h=e.config,p=h.$tbodies=h.$table.children("tbody:not(."+h.cssInfoBlock+")"),m="";if(0===p.length)return h.debug?n("*Empty table!* Not building a parser cache"):"";if(h.debug&&(f=new Date,n("Detecting parsers for each column")),(r=p[0].rows)[0])for(a=[],s=r[0].cells.length,l=0;l<s;l++)d=(d=h.$headers.filter(":not([colspan])")).add(h.$headers.filter('[colspan="1"]')).filter('[data-column="'+l+'"]:last'),c=h.headers[l],u=t.getParserById(t.getData(d,c,"sorter")),h.empties[l]=t.getData(d,c,"empty")||h.emptyTo||(h.emptyToBottom?"bottom":"top"),h.strings[l]=t.getData(d,c,"string")||h.stringTo||"max",u||(u=o(e,r,-1,l)),h.debug&&(m+="column:"+l+"; parser:"+u.id+"; string:"+h.strings[l]+"; empty: "+h.empties[l]+"\n"),a.push(u);h.debug&&(n(m),i("Completed detecting parsers",f)),h.parsers=a}function l(r){var o,s,l,d,c,u,f,h,p,m,g=r.tBodies,v=r.config,_=v.parsers,y=[];if(v.cache={},!_)return v.debug?n("*Empty table!* Not building a cache"):"";for(v.debug&&(m=new Date),v.showProcessing&&t.isProcessing(r,!0),f=0;f<g.length;f++)if(v.cache[f]={row:[],normalized:[]},!e(g[f]).hasClass(v.cssInfoBlock)){for(o=g[f]&&g[f].rows.length||0,s=g[f].rows[0]&&g[f].rows[0].cells.length||0,c=0;c<o;++c)if(p=[],(h=e(g[f].rows[c])).hasClass(v.cssChildRow))v.cache[f].row[v.cache[f].row.length-1]=v.cache[f].row[v.cache[f].row.length-1].add(h);else{for(v.cache[f].row.push(h),u=0;u<s;++u)l=a(r,h[0].cells[u],u),d=_[u].format(l,r,h[0].cells[u],u),p.push(d),"numeric"===(_[u].type||"").toLowerCase()&&(y[u]=Math.max(Math.abs(d)||0,y[u]||0));p.push(v.cache[f].normalized.length),v.cache[f].normalized.push(p)}v.cache[f].colMax=y}v.showProcessing&&t.isProcessing(r),v.debug&&i("Building cache for "+o+" rows",m)}function d(n,a){var o,s,l,d,c,u,f,h,p,m,g,v,_=n.config,y=_.widgetOptions,b=n.tBodies,w=[],E=_.cache;if(!r(E)){for(_.debug&&(v=new Date),p=0;p<b.length;p++)if((c=e(b[p])).length&&!c.hasClass(_.cssInfoBlock)){for(u=t.processTbody(n,c,!0),o=E[p].row,d=(l=(s=E[p].normalized).length)?s[0].length-1:0,f=0;f<l;f++)if(g=s[f][d],w.push(o[g]),!_.appender||_.pager&&(!_.pager.removeRows||!y.pager_removeRows)&&!_.pager.ajax)for(m=o[g].length,h=0;h<m;h++)u.append(o[g][h]);t.processTbody(n,u,!1)}_.appender&&_.appender(n,w),_.debug&&i("Rebuilt table",v),a||_.appender||t.applyWidget(n),e(n).trigger("sortEnd",n),e(n).trigger("updateComplete",n)}}function c(e){return/^d/i.test(e)||1===e}function u(r){var a,o,s,l,d,u,f,p=function(t){var n,i,r,a,o,s,l,d,c,u,f,h,p=[],m={},g=0,v=e(t).find("thead:eq(0), tfoot").children("tr");for(n=0;n<v.length;n++)for(s=v[n].cells,i=0;i<s.length;i++){for(d=(l=(o=s[i]).parentNode.rowIndex)+"-"+o.cellIndex,c=o.rowSpan||1,u=o.colSpan||1,void 0===p[l]&&(p[l]=[]),r=0;r<p[l].length+1;r++)if(void 0===p[l][r]){f=r;break}for(m[d]=f,g=Math.max(f,g),e(o).attr({"data-column":f}),r=l;r<l+c;r++)for(void 0===p[r]&&(p[r]=[]),h=p[r],a=f;a<f+u;a++)h[a]="x"}return t.config.columns=g+1,m}(r),m=r.config;m.headerList=[],m.headerContent=[],m.debug&&(f=new Date),l=m.cssIcon?'<i class="'+m.cssIcon+" "+t.css.icon+'"></i>':"",m.$headers=e(r).find(m.selectorHeaders).each(function(n){o=e(this),a=m.headers[n],m.headerContent[n]=e(this).html(),d=m.headerTemplate.replace(/\{content\}/g,e(this).html()).replace(/\{icon\}/g,l),m.onRenderTemplate&&(s=m.onRenderTemplate.apply(o,[n,d]))&&"string"==typeof s&&(d=s),e(this).html('<div class="tablesorter-header-inner">'+d+"</div>"),m.onRenderHeader&&m.onRenderHeader.apply(o,[n]),this.column=p[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=c(t.getData(o,a,"sortInitialOrder")||m.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,void 0!==(u=t.getData(o,a,"lockedOrder")||!1)&&!1!==u&&(this.order=this.lockedOrder=c(u)?[1,1,1]:[0,0,0]),o.addClass(t.css.header+" "+m.cssHeader),m.headerList[n]=this,o.parent().addClass(t.css.headerRow+" "+m.cssHeaderRow),o.attr("tabindex",0)}),h(r),m.debug&&(i("Built headers:",f),n(m.$headers))}function f(e,t,n){var i=e.config;i.$table.find(i.selectorRemove).remove(),s(e),l(e),_(i.$table,t,n)}function h(n){var i,r=n.config;r.$headers.each(function(n,a){i="false"===t.getData(a,r.headers[n],"sorter"),a.sortDisabled=i,e(a)[i?"addClass":"removeClass"]("sorter-false")})}function p(n){var i,r,a,o,s=n.config,l=s.sortList,d=[t.css.sortAsc+" "+s.cssAsc,t.css.sortDesc+" "+s.cssDesc],c=e(n).find("tfoot tr").children().removeClass(d.join(" "));for(s.$headers.removeClass(d.join(" ")),o=l.length,r=0;r<o;r++)if(2!==l[r][1]&&(i=s.$headers.not(".sorter-false").filter('[data-column="'+l[r][0]+'"]'+(1===o?":last":""))).length)for(a=0;a<i.length;a++)i[a].sortDisabled||(i.eq(a).addClass(d[l[r][1]]),c.length&&c.filter('[data-column="'+l[r][0]+'"]').eq(a).addClass(d[l[r][1]]))}function m(e,t){return e&&e[t]&&e[t].type||""}function g(e){var n,a,o,s,l,d,c,u,f,h,p,g,v,_=0,y=e.config,b=y.textSorter||"",w=y.sortList,E=w.length,C=e.tBodies.length;if(!y.serverSideSorting&&!r(y.cache)){for(y.debug&&(h=new Date),a=0;a<C;a++)d=y.cache[a].colMax,(c=y.cache[a].normalized).length,f=c&&c[0]?c[0].length-1:0,c.sort(function(i,r){for(n=0;n<E;n++){if(l=w[n][0],u=w[n][1],g=(_=0===u)?i:r,v=_?r:i,o=y.string[y.empties[l]||y.emptyTo],""===g[l]&&0!==o)return("boolean"==typeof o?o?-1:1:o||1)*(_?1:-1);if(""===v[l]&&0!==o)return("boolean"==typeof o?o?1:-1:-o||-1)*(_?1:-1);if((s=/n/i.test(m(y.parsers,l)))&&y.strings[l]?(s="boolean"==typeof y.string[y.strings[l]]?(_?1:-1)*(y.string[y.strings[l]]?-1:1):y.strings[l]&&y.string[y.strings[l]]||0,p=y.numberSorter?y.numberSorter(g[l],v[l],_,d[l],e):t.sortNumeric(g[l],v[l],s,d[l])):p="function"==typeof b?b(g[l],v[l],_,l,e):"object"==typeof b&&b.hasOwnProperty(l)?b[l](g[l],v[l],_,l,e):t.sortNatural(g[l],v[l]),p)return p}return i[f]-r[f]});y.debug&&i("Sorting on "+w.toString()+" and dir "+u+" time",h)}}function v(e,t){var n=e[0].config;n.pager&&!n.pager.ajax&&e.trigger("updateComplete"),"function"==typeof t&&t(e[0])}function _(e,t,n){!1===t||e[0].isProcessing?v(e,n):e.trigger("sorton",[e[0].config.sortList,function(){v(e,n)}])}function y(n){var i,o,c=n.config,m=c.$table;c.$headers.find(c.selectorSort).add(c.$headers.filter(c.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(i,a){if(!(1!==(i.which||i.button)&&!/sort|keypress/.test(i.type)||"keypress"===i.type&&13!==i.which||"mouseup"===i.type&&!0!==a&&(new Date).getTime()-o>250)){if("mousedown"===i.type)return o=(new Date).getTime(),"INPUT"===i.target.tagName?"":!c.cancelSelection;c.delayInit&&r(c.cache)&&l(n);var s=(/TH|TD/.test(this.tagName)?e(this):e(this).parents("th, td").filter(":first"))[0];s.sortDisabled||function(n,i,r){var a,o,s,l,c,u=n.config,f=!r[u.sortMultiSortKey],h=e(n);if(h.trigger("sortStart",n),i.count=r[u.sortResetKey]?2:(i.count+1)%(u.sortReset?3:2),u.sortRestart&&(o=i,u.$headers.each(function(){this===o||!f&&e(this).is("."+t.css.sortDesc+",."+t.css.sortAsc)||(this.count=-1)})),o=i.column,f){if(u.sortList=[],null!==u.sortForce)for(a=u.sortForce,s=0;s<a.length;s++)a[s][0]!==o&&u.sortList.push(a[s]);if((l=i.order[i.count])<2&&(u.sortList.push([o,l]),i.colSpan>1))for(s=1;s<i.colSpan;s++)u.sortList.push([o+s,l])}else if(u.sortAppend&&u.sortList.length>1&&t.isValueInArray(u.sortAppend[0][0],u.sortList)&&u.sortList.pop(),t.isValueInArray(o,u.sortList))for(s=0;s<u.sortList.length;s++)c=u.sortList[s],l=u.$headers[c[0]],c[0]===o&&(c[1]=l.order[i.count],2===c[1]&&(u.sortList.splice(s,1),l.count=-1));else if((l=i.order[i.count])<2&&(u.sortList.push([o,l]),i.colSpan>1))for(s=1;s<i.colSpan;s++)u.sortList.push([o+s,l]);if(null!==u.sortAppend)for(a=u.sortAppend,s=0;s<a.length;s++)a[s][0]!==o&&u.sortList.push(a[s]);h.trigger("sortBegin",n),setTimeout(function(){p(n),g(n),d(n)},1)}(n,s,i)}}),c.cancelSelection&&c.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"}),m.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(e){e.stopPropagation(),c.sortList=[],p(n),g(n),d(n)}).bind("updateAll.tablesorter",function(e,i,r){e.stopPropagation(),t.refreshWidgets(n,!0,!0),t.restoreHeaders(n),u(n),y(n),f(n,i,r)}).bind("update.tablesorter updateRows.tablesorter",function(e,t,i){e.stopPropagation(),h(n),f(n,t,i)}).bind("updateCell.tablesorter",function(t,i,r,o){t.stopPropagation(),m.find(c.selectorRemove).remove();var s,l,d,u=m.find("tbody"),f=u.index(e(i).parents("tbody").filter(":first")),h=e(i).parents("tr").filter(":first");i=e(i)[0],u.length&&f>=0&&(l=u.eq(f).find("tr").index(h),d=i.cellIndex,s=c.cache[f].normalized[l].length-1,c.cache[f].row[n.config.cache[f].normalized[l][s]]=h,c.cache[f].normalized[l][d]=c.parsers[d].format(a(n,i,d),n,i,d),_(m,r,o))}).bind("addRows.tablesorter",function(e,t,r,o){e.stopPropagation();var l,d=t.filter("tr").length,u=[],f=t[0].cells.length,h=m.find("tbody").index(t.parents("tbody").filter(":first"));for(c.parsers||s(n),l=0;l<d;l++){for(i=0;i<f;i++)u[i]=c.parsers[i].format(a(n,t[l].cells[i],i),n,t[l].cells[i],i);u.push(c.cache[h].row.length),c.cache[h].row.push([t[l]]),c.cache[h].normalized.push(u),u=[]}_(m,r,o)}).bind("sorton.tablesorter",function(t,i,a,o){var s=n.config;t.stopPropagation(),m.trigger("sortStart",this),function(t,n){var i,r,a,o=t.config,s=n||o.sortList;o.sortList=[],e.each(s,function(t,n){i=[parseInt(n[0],10),parseInt(n[1],10)],(a=o.$headers[i[0]])&&(o.sortList.push(i),r=e.inArray(i[1],a.order),a.count=r>=0?r:i[1]%(o.sortReset?3:2))})}(n,i),p(n),s.delayInit&&r(s.cache)&&l(n),m.trigger("sortBegin",this),g(n),d(n,o),"function"==typeof a&&a(n)}).bind("appendCache.tablesorter",function(e,t,i){e.stopPropagation(),d(n,i),"function"==typeof t&&t(n)}).bind("applyWidgetId.tablesorter",function(e,i){e.stopPropagation(),t.getWidgetById(i).format(n,c,c.widgetOptions)}).bind("applyWidgets.tablesorter",function(e,i){e.stopPropagation(),t.applyWidget(n,i)}).bind("refreshWidgets.tablesorter",function(e,i,r){e.stopPropagation(),t.refreshWidgets(n,i,r)}).bind("destroy.tablesorter",function(e,i,r){e.stopPropagation(),t.destroy(n,i,r)})}t.version="2.13.3",t.parsers=[],t.widgets=[],t.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},t.css={table:"tablesorter",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc"},t.log=n,t.benchmark=i,t.construct=function(n){return this.each(function(){var i=e.extend(!0,{},t.defaults,n);!this.hasInitialized&&t.buildTable&&"TABLE"!==this.tagName&&t.buildTable(this,i),t.setup(this,i)})},t.setup=function(i,r){if(!i||!i.tHead||0===i.tBodies.length||!0===i.hasInitialized)return r.debug?n("stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var a,o="",d=e(i),c=e.metadata;i.hasInitialized=!1,i.isProcessing=!0,i.config=r,e.data(i,"tablesorter",r),r.debug&&e.data(i,"startoveralltimer",new Date),r.supportsTextContent="x"===e("<span>x</span>")[0].textContent,r.supportsDataObject=((a=e.fn.jquery.split("."))[0]=parseInt(a[0],10),a[0]>1||1===a[0]&&parseInt(a[1],10)>=4),r.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,null:0,top:!0,bottom:!1},/tablesorter\-/.test(d.attr("class"))||(o=""!==r.theme?" tablesorter-"+r.theme:""),r.$table=d.addClass(t.css.table+" "+r.tableClass+o),r.$tbodies=d.children("tbody:not(."+r.cssInfoBlock+")"),r.widgetInit={},u(i),function(t){if(t.config.widthFixed&&0===e(t).find("colgroup").length){var n=e("<colgroup>"),i=e(t).width();e(t.tBodies[0]).find("tr:first").children("td:visible").each(function(){n.append(e("<col>").css("width",parseInt(e(this).width()/i*1e3,10)/10+"%"))}),e(t).prepend(n)}}(i),s(i),r.delayInit||l(i),y(i),r.supportsDataObject&&void 0!==d.data().sortlist?r.sortList=d.data().sortlist:c&&d.metadata()&&d.metadata().sortlist&&(r.sortList=d.metadata().sortlist),t.applyWidget(i,!0),r.sortList.length>0?d.trigger("sorton",[r.sortList,{},!r.initWidgets]):r.initWidgets&&t.applyWidget(i),r.showProcessing&&d.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(e){t.isProcessing(i,"sortBegin"===e.type)}),i.hasInitialized=!0,i.isProcessing=!1,r.debug&&t.benchmark("Overall initialization time",e.data(i,"startoveralltimer")),d.trigger("tablesorter-initialized",i),"function"==typeof r.initialized&&r.initialized(i)},t.isProcessing=function(n,i,r){var a=(n=e(n))[0].config,o=r||n.find("."+t.css.header);i?(a.sortList.length>0&&(o=o.filter(function(){return!this.sortDisabled&&t.isValueInArray(parseFloat(e(this).attr("data-column")),a.sortList)})),o.addClass(t.css.processing+" "+a.cssProcessing)):o.removeClass(t.css.processing+" "+a.cssProcessing)},t.processTbody=function(t,n,i){var r;if(i)return t.isProcessing=!0,n.before('<span class="tablesorter-savemyplace"/>'),r=e.fn.detach?n.detach():n.remove();r=e(t).find("span.tablesorter-savemyplace"),n.insertAfter(r),r.remove(),t.isProcessing=!1},t.clearTableBody=function(t){e(t)[0].config.$tbodies.empty()},t.restoreHeaders=function(t){var n=t.config;n.$table.find(n.selectorHeaders).each(function(t){e(this).find(".tablesorter-header-inner").length&&e(this).html(n.headerContent[t])})},t.destroy=function(n,i,r){if((n=e(n)[0]).hasInitialized){t.refreshWidgets(n,!0,!0);var a=e(n),o=n.config,s=a.find("thead:first"),l=s.find("tr."+t.css.headerRow).removeClass(t.css.headerRow+" "+o.cssHeaderRow),d=a.find("tfoot:first > tr").children("th, td");s.find("tr").not(l).remove(),a.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter ")),o.$headers.add(d).removeClass([t.css.header,o.cssHeader,o.cssAsc,o.cssDesc,t.css.sortAsc,t.css.sortDesc].join(" ")).removeAttr("data-column"),l.find(o.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter"),t.restoreHeaders(n),!1!==i&&a.removeClass(t.css.table+" "+o.tableClass+" tablesorter-"+o.theme),n.hasInitialized=!1,"function"==typeof r&&r(n)}},t.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i},t.sortNatural=function(e,n){if(e===n)return 0;var i,r,a,o,s,l,d,c,u=t.regex;if(u.hex.test(n)){if((r=parseInt(e.match(u.hex),16))<(o=parseInt(n.match(u.hex),16)))return-1;if(r>o)return 1}for(i=e.replace(u.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),a=n.replace(u.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),c=Math.max(i.length,a.length),d=0;d<c;d++){if(s=isNaN(i[d])?i[d]||0:parseFloat(i[d])||0,l=isNaN(a[d])?a[d]||0:parseFloat(a[d])||0,isNaN(s)!==isNaN(l))return isNaN(s)?1:-1;if(typeof s!=typeof l&&(s+="",l+=""),s<l)return-1;if(s>l)return 1}return 0},t.sortText=function(e,t){return e>t?1:e<t?-1:0},t.getTextValue=function(e,t,n){if(n){var i,r=e?e.length:0,a=n+t;for(i=0;i<r;i++)a+=e.charCodeAt(i);return t*a}return 0},t.sortNumeric=function(e,n,i,r){return e===n?0:(isNaN(e)&&(e=t.getTextValue(e,i,r)),isNaN(n)&&(n=t.getTextValue(n,i,r)),e-n)},t.characterEquivalents={a:"",A:"",c:"",C:"",e:"",E:"",i:"",I:"",o:"",O:"",ss:"",SS:"",u:"",U:""},t.replaceAccents=function(e){var n,i="[",r=t.characterEquivalents;if(!t.characterRegex){for(n in t.characterRegexArray={},r)"string"==typeof n&&(i+=r[n],t.characterRegexArray[n]=new RegExp("["+r[n]+"]","g"));t.characterRegex=new RegExp(i+"]")}if(t.characterRegex.test(e))for(n in r)"string"==typeof n&&(e=e.replace(t.characterRegexArray[n],n));return e},t.isValueInArray=function(e,t){var n,i=t.length;for(n=0;n<i;n++)if(t[n][0]===e)return!0;return!1},t.addParser=function(e){var n,i=t.parsers.length,r=!0;for(n=0;n<i;n++)t.parsers[n].id.toLowerCase()===e.id.toLowerCase()&&(r=!1);r&&t.parsers.push(e)},t.getParserById=function(e){var n,i=t.parsers.length;for(n=0;n<i;n++)if(t.parsers[n].id.toLowerCase()===e.toString().toLowerCase())return t.parsers[n];return!1},t.addWidget=function(e){t.widgets.push(e)},t.getWidgetById=function(e){var n,i,r=t.widgets.length;for(n=0;n<r;n++)if((i=t.widgets[n])&&i.hasOwnProperty("id")&&i.id.toLowerCase()===e.toLowerCase())return i},t.applyWidget=function(n,r){var a,o,s,l=(n=e(n)[0]).config,d=l.widgetOptions,c=[];l.debug&&(a=new Date),l.widgets.length&&(l.widgets=e.grep(l.widgets,function(t,n){return e.inArray(t,l.widgets)===n}),e.each(l.widgets||[],function(e,n){(s=t.getWidgetById(n))&&s.id&&(s.priority||(s.priority=10),c[e]=s)}),c.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),e.each(c,function(t,i){i&&(!r&&l.widgetInit[i.id]||(i.hasOwnProperty("options")&&(d=n.config.widgetOptions=e.extend(!0,{},i.options,d),l.widgetInit[i.id]=!0),i.hasOwnProperty("init")&&i.init(n,i,l,d)),!r&&i.hasOwnProperty("format")&&i.format(n,l,d,!1))})),l.debug&&(o=l.widgets.length,i("Completed "+(!0===r?"initializing ":"applying ")+o+" widget"+(1!==o?"s":""),a))},t.refreshWidgets=function(i,r,a){var o,s=(i=e(i)[0]).config,l=s.widgets,d=t.widgets,c=d.length;for(o=0;o<c;o++)d[o]&&d[o].id&&(r||e.inArray(d[o].id,l)<0)&&(s.debug&&n("Refeshing widgets: Removing "+d[o].id),d[o].hasOwnProperty("remove")&&(d[o].remove(i,s,s.widgetOptions),s.widgetInit[d[o].id]=!1));!0!==a&&t.applyWidget(i,r)},t.getData=function(t,n,i){var r,a,o="",s=e(t);return s.length?(r=!!e.metadata&&s.metadata(),a=" "+(s.attr("class")||""),void 0!==s.data(i)||void 0!==s.data(i.toLowerCase())?o+=s.data(i)||s.data(i.toLowerCase()):r&&void 0!==r[i]?o+=r[i]:n&&void 0!==n[i]?o+=n[i]:" "!==a&&a.match(" "+i+"-")&&(o=a.match(new RegExp("\\s"+i+"-([\\w-]+)"))[1]||""),e.trim(o)):""},t.formatFloat=function(t,n){return"string"!=typeof t||""===t?t:(t=(n&&n.config?!1!==n.config.usNumberFormat:void 0===n||n)?t.replace(/,/g,""):t.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(t)&&(t=t.replace(/^\s*\(([.\d]+)\)/,"-$1")),i=parseFloat(t),isNaN(i)?e.trim(t):i);var i},t.isDigit=function(e){return!isNaN(e)||/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,""))}}});var t=e.tablesorter;e.fn.extend({tablesorter:t.construct}),t.addParser({id:"text",is:function(){return!0},format:function(n,i){var r=i.config;return n&&(n=e.trim(r.ignoreCase?n.toLocaleLowerCase():n),n=r.sortLocaleCompare?t.replaceAccents(n):n),n},type:"text"}),t.addParser({id:"digit",is:function(e){return t.isDigit(e)},format:function(n,i){var r=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof r?r:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[,. ]/g,""))},format:function(n,i){var r=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof r?r:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,n){var i,r=e?e.split("."):"",a="",o=r.length;for(i=0;i<o;i++)a+=("00"+r[i]).slice(-3);return e?t.formatFloat(a,n):e},type:"numeric"}),t.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(t){return t?e.trim(t.replace(/(https?|ftp|file):\/\//,"")):t},type:"text"}),t.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,n){return e?t.formatFloat(""!==e&&new Date(e.replace(/-/g,"/")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,n){return e?t.formatFloat(e.replace(/%/g,""),n):e},type:"numeric"}),t.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,n,i,r){if(e){var a=n.config,o=a.headerList[r],s=o.dateFormat||t.getData(o,a.headers[r],"dateFormat")||a.dateFormat;e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===s&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return e?t.formatFloat(new Date(e).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,n,i){var r=n.config,a=r.parserMetadataName?r.parserMetadataName:"sortValue";return e(i).metadata()[a]},type:"numeric"}),t.addWidget({id:"zebra",priority:90,format:function(n,i,r){var a,o,s,l,d,c,u=new RegExp(i.cssChildRow,"i"),f=i.$tbodies;for(i.debug&&(d=new Date),c=0;c<f.length;c++)(a=f.eq(c)).children("tr").length>1&&(s=0,a.children("tr:visible").each(function(){o=e(this),u.test(this.className)||s++,l=s%2==0,o.removeClass(r.zebra[l?1:0]).addClass(r.zebra[l?0:1])}));i.debug&&t.benchmark("Applying Zebra widget",d)},remove:function(t,n,i){var r,a,o=n.$tbodies,s=(i.zebra||["even","odd"]).join(" ");for(r=0;r<o.length;r++)(a=e.tablesorter.processTbody(t,o.eq(r),!0)).children().removeClass(s),e.tablesorter.processTbody(t,a,!1)}})}(i)},rNU7:function(e,t,n){"use strict";e.exports=n("HHS1")},rRm2:function(e,t,n){"use strict";n("obSy"),n("VgM/"),n("cE9f"),n("Ayny"),n("fhGM"),n("3Vd3"),n("SMwB"),n("qxrp"),n("Mu/c"),n("eIYa"),n("cOfE"),n("IjdK"),n("mZAn"),n("lk0j"),n("vWMs"),n("QEM/"),n("iis7"),n("AXgT"),n("Gx1m"),n("JXF+"),n("YmKE"),n("zn/B"),n("mCzb"),n("BPub"),n("Nkse"),n("ucfE"),n("tI6b"),n("YOqD"),n("IAwM"),n("IuCL"),n("EUhg"),n("kwpy"),n("Fvwm")},rXeC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("Vh6Q"),n("CCL3"),n("v4vi"),n("A/M2"),n("IhN0"),n("RIos"),n("UBnO"),n("+V2Z"),n("FPSz"),n("CuRd"),n("HW66"),n("BQ76"),n("kUTX"),n("SzcX"),n("vf3z"),n("k7Hi"),n("iUX3"),n("6TZa"),n("l8Wg"),n("E7OR"),n("Y0+b"),n("ybIR"),n("RORv"),n("h1HY"),n("sWK4"),n("0JET"),n("DXZ8"),n("c1YT"),n("LOOJ"),n("6CtT"),n("Tqsz"),n("oAbu"),n("oTWu"),n("zx33"),n("lRBY"),n("mZAT"),n("98MR"),n("thKT"),n("M99n"),n("p44K"),n("h8C7"),n("GCDY"),n("iptH"),n("91We"),n("MfwZ"),n("7HQH"),n("EZtX"),n("mvPF"),n("45vE"),n("grXb"),n("5Sqs"),n("LNuh"),n("jN36"),n("jAPW"),n("orei");var o=a.default;t.default=o},rbUO:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("MA+5")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,i.default)(".widget_show").livequery(function(){var e=(0,i.default)(this),t=e.find(".size form"),n=e.find(".video .code"),o=t.find(".custom"),s=n.data("path");function l(e,t){var i=(0,r.default)("widgets/_video_embed_code",{width:e,height:t,path:s});o.find("input#width").val(e),o.find("input#height").val(t),n.find("textarea").val(i)}l(480,Math.ceil(270)),t.find("input.radio").on("change",function(){var e=(0,i.default)("input.radio:checked"),r=e.closest("label");t.find("label").removeClass("selected"),r.addClass("selected"),l(r.data("width"),r.data("height")),n.find("textarea").select(),e.is("#widget-size_size-custom")&&r.find("input.text").val("").eq(0).select()}),o.find("input").on("keyup input cut paste",function(e){var t=(0,i.default)(e.target),n=o.find("input#width").val(),r=o.find("input#height").val();t.is("#width")?r=Math.ceil(n/(16/9)):n=Math.ceil(r*(16/9)),l(n,r)}),e.find("#video_embed").on("click",function(){(0,a.track)("Project Share",{share_type:"video_embed"})}),e.find("#widget_embed").on("click",function(){(0,a.track)("Project Share",{share_type:"widget_embed"})}),e.find("#shortlink_embed").on("click",function(){(0,a.track)("Project Share",{share_type:"shortlink_embed"})})})})},rmI3:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=".NS_backings__info";(0,i.default)(document).on("message_sent",e+" .messages_panel",function(t,n,a){(0,i.default)(this).closest(e).find(".messages_link").html(r.default.t("onloads.views.backings.info.Messages_count",{count:a}))}),(0,i.default)(document).on("click",e+" .js-backing-complete form",function(t){var n=(0,i.default)(this),r=n.find("label.with_data"),a=n.find(".checkbox"),o=!r.data("completed");t.preventDefault(),i.default.ajax({url:n.attr("action"),data:{"backing[backer_completed]":o},dataType:"json",type:"PUT",success:function(t){n.trigger("backer_completed",[n.closest(e).data("backing_id"),t.backing.backer_completed_at]),a.prop("checked",o),r.data("completed",o),r.toggleClass("js-completed",o)}})})})},s94J:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){e.jGrowl=function(t,n){0===e("#jGrowl").length&&e('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:e.jGrowl.defaults.position).appendTo(n&&n.appendTo?n.appendTo:e.jGrowl.defaults.appendTo),e("#jGrowl").jGrowl(t,n)},e.fn.jGrowl=function(t,n){if(void 0===n&&e.isPlainObject(t)&&(t=(n=t).message),e.isFunction(this.each)){var i=arguments;return this.each(function(){void 0===e(this).data("jGrowl.instance")&&(e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null})),e(this).data("jGrowl.instance").startup(this)),e.isFunction(e(this).data("jGrowl.instance")[t])?e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(i).slice(1)):e(this).data("jGrowl.instance").create(t,n)})}},e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",appendTo:"body",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,n){var i=e.extend({},this.defaults,n);void 0!==i.speed&&(i.openDuration=i.speed,i.closeDuration=i.speed),this.notifications.push({message:t,options:i}),i.log.apply(this.element,[this.element,t,i])},render:function(t){var n=this,i=t.message,r=t.options;r.themeState=""===r.themeState?"":"ui-state-"+r.themeState;var a=e("<div/>").addClass("jGrowl-notification alert "+r.themeState+" ui-corner-all"+(void 0!==r.group&&""!==r.group?" "+r.group:"")).append(e("<button/>").addClass("jGrowl-close").html(r.closeTemplate)).append(e("<div/>").addClass("jGrowl-header").html(r.header)).append(e("<div/>").addClass("jGrowl-message").html(i)).data("jGrowl",r).addClass(r.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return e(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();e(a).bind("mouseover.jGrowl",function(){e(".jGrowl-notification",n.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){e(".jGrowl-notification",n.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){!1!==r.beforeOpen.apply(a,[a,i,r,n.element])&&e(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){!1!==r.open.apply(a,[a,i,r,n.element])&&("after"==r.glue?e(".jGrowl-notification:last",n.element).after(a):e(".jGrowl-notification:first",n.element).before(a),e(this).animate(r.animateOpen,r.openDuration,r.easing,function(){!1===e.support.opacity&&this.style.removeAttribute("filter"),null!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl")&&(e(this).data("jGrowl").created=new Date),e(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){r.afterOpen.apply(a,[a,i,r,n.element])}).bind("click",function(){r.click.apply(a,[a,i,r,n.element])}).bind("jGrowl.beforeClose",function(){!1!==r.beforeClose.apply(a,[a,i,r,n.element])&&e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",!0),e(this).animate(r.animateClose,r.closeDuration,r.easing,function(){e.isFunction(r.close)?!1!==r.close.apply(a,[a,i,r,n.element])&&e(this).remove():e(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==r.corners&&void 0!==e.fn.corner&&e(a).corner(r.corners),e(".jGrowl-notification:parent",n.element).length>1&&0===e(".jGrowl-closer",n.element).length&&!1!==this.defaults.closer&&e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose"),e.isFunction(n.defaults.closer)&&n.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])})},update:function(){e(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl").created&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life,10)<(new Date).getTime()&&!0!==e(this).data("jGrowl").sticky&&(void 0===e(this).data("jGrowl.pause")||!0!==e(this).data("jGrowl.pause"))&&e(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||e(this.element).find(".jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),e(this.element).find(".jGrowl-notification:parent").length<2&&e(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})},startup:function(t){this.element=e(t).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){var n=e(t).data("jGrowl.instance");void 0!==n&&n.update()},parseInt(this.defaults.check,10))},shutdown:function(){e(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){e(this.element).find(".jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}}),e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults}(i)},sSrd:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("wmCY")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,a.trackLinks)(".js-switch-to-login","Signup to Login Switch"),(0,i.default)(document).on("blur","#new_user input#user_email",function(){(0,i.default)(this).mailcheck({suggested:function(e,t){var n=(0,i.default)('<div class="mailcheck_suggestion f5 grey-dark mb1">'+r.default.t("onloads.views.users.new.Did_you_mean",{suggestion:t.full})+"</div>");e.siblings(".mailcheck_suggestion").remove(),n.find("a").on("click",function(n){n.preventDefault(),e.val(t.full)}),e.before(n),n.slideDown(),"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors","Invalid domain or TLD detected",e.val())},ignoreTLDs:!0})})})},sWK4:function(e,t,n){"use strict";var i=s(n("DkOX")),r=s(n("I1z3")),a=s(n("wmCY")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}var l=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.$close_a=t.find("a.modal_dialog_close");var i=t.children(),r=i.children(),a=r.children(),o=t.add(i).add(r).add(a).add(this.$close_a);this.options=e.extend({close_link:o,scroll_margin:20,ignore_parent:!1,prevent_close:!1},n),this.prevent_close=this.options.prevent_close,this.prevent_close&&this.$close_a.hide(),this.options.ignore_parent||this._bind_parent_modal(),this._remember_original_css(),this._attach()}e.fn.modal_dialog=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("modal_dialog");i||(i=new t(e(this),n),e(this).data("modal_dialog",i)),i.open()})};var n={};e.create_modal_dialog=function(n,i,r){r=r||{},n.length&&(n="<h4>"+n+"</h4>");var a,o=e('<div class="modal_dialog '+(void 0!==r.theme?r.theme:"dark")+(void 0!==r.class_name?" "+r.class_name:"")+'"'+(void 0!==r.id?' id="'+r.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+n+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+i+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');return e("body").append(o),a=new t(o,r),o.data("modal_dialog",a),o},e.create_login_modal=function(t,n){(0,o.track)("Application Login or Signup",{context:"Login",type:"modal",intent:n});var i=e.create_modal_dialog("",t);i.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(i.find(".modal_dialog_body")[0])},e.open_remote_modal_dialog=function(t,r){var a=e(".modal_dialog:visible");if(!a.data("modal_dialog")||a.data("modal_dialog").remote_url!==t){var o=function(t,r){var a,o=e([]);return e.each(n,function(e){(0,i.default)(t,e,{include_query:!0})&&(a=this)}),a||((o=e.create_modal_dialog(r.title||"","spinner",r)).addClass("spinning"),(a=o.data("modal_dialog")).remote_url=t,a.remote_xhr=e.ajax({url:t,type:"get",dataType:r.dataType,beforeSend:r.beforeSend,success:function(n){var i=e(n);r.remote_modal_dialog_contents_loaded&&r.remote_modal_dialog_contents_loaded.apply(this,[i,r,t]),o.find(".modal_dialog_body").html(i),o.removeClass("spinning"),o.trigger("size_change"),o.trigger("modal_dialog:remote_dialog_loaded")},error:function(){o.trigger("modal_dialog:errored",arguments),o.remove(),delete n[t]}}),r.do_not_cache||(n[t]=a)),a}(t,r=r||{});return o.open(),o}},e.extend(t.prototype,{_attach:function(){if(!this._attached){var t=this,n=e(this.options.close_link);this._attached=!0,this.overflow_scroll="scroll"===this.$elem.css("overflow"),this.$elem.on("close.modal_dialog",function(){t.close()}),this.$elem.on("size_change.modal_dialog",function(){t._on_size_changed()}),this.$elem.on("prevent_close.modal_dialog",function(){t._set_prevent_close(!0)}),this.$elem.on("allow_close.modal_dialog",function(){t._set_prevent_close(!1)}),e(window).on("resize.modal_dialog",function(){t._on_size_changed()}),n.on("click.modal_dialog",function(e){-1!==n.index(e.target)&&(t.close(e),e.preventDefault())}),this.$elem.keydown(function(e){27===e.keyCode&&(t.close(e),e.preventDefault())})}},_detach:function(){this._attached=!1,e(this.options.close_link).off("click.modal_dialog"),this.$elem.off("size_change.modal_dialog"),e(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=e([]),this.$elem.on("before_close.modal_dialog",function(){var t=e(this).data("modal_dialog").$parent_modal;t.show(),t=e([])})},_on_size_changed:function(e){var t=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&t.height()>this._get_viewport_height()?this._resize_to_position_absolute(e):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(t){var n=e(document).height(),i=document.documentElement&&document.documentElement.scrollTop||e("body")[0].scrollTop+e("html")[0].scrollTop,r=this.$elem.find("div.modal_dialog_inner"),a=r.height(),o=this.options.scroll_margin,s=i+a+2*o,l=(s>n?s:n)-i-a-2*o,d="absolute"===this.$elem.css("position");this.$elem.css("position","absolute"),this.$elem.css("top","0"),this.$elem.css("height",n),d&&!t||(r.css("margin-top",i+o),r.css("margin-bottom",l))},_remember_original_css:function(){this._elem_original_css={},this._inner_original_css={};var t=this.$elem.find("div.modal_dialog_inner"),n=["position","top"],i=["margin-top","margin-bottom"],r=this;e.each(n,function(e){var t=n[e];r._elem_original_css[t]=r.$elem.css(t)}),e.each(i,function(e){var n=i[e];r._inner_original_css[n]=t.css(n)})},_get_viewport_height:function(){return r.default.msie?window.document.documentElement.clientHeight:window.innerHeight},_apply_original_css:function(){var e,t,n=this.$elem.find("div.modal_dialog_inner");for(e in this._elem_original_css)this._elem_original_css.hasOwnProperty(e)&&(t=this._elem_original_css[e],this.$elem.css(e,t));for(e in this._inner_original_css)this._inner_original_css.hasOwnProperty(e)&&(t=this._inner_original_css[e],n.css(e,t));this.$elem.css("height","100%")},_set_prevent_close:function(e){this.prevent_close=e,e?this.$close_a.hide():this.$close_a.show()},open:function(){var t=this.$elem.parents("body");t.length&&t.append(this.$elem),this.options.ignore_parent||(this.$parent_modal=e(".modal_dialog:visible"),this.$parent_modal.hide()),this.$elem.show(),this._on_size_changed(!0),this.overflow_scroll&&e("html").css("overflow","hidden"),this.$elem.trigger("modal_dialog:opened",[this]),this._attach()},close:function(t){this.prevent_close||(this.$elem.trigger("before_close.modal_dialog",[t]),t&&t.isDefaultPrevented()||(this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&e("html").css("overflow","scroll"),this.$elem.trigger("closed.modal_dialog",[t])))}}),e.modal_confirm=function(t,n){var i,r,o,s={message:a.default.t("library.modal_dialog.Do_you_really_want_to_do_this"),confirm_text:a.default.t("library.modal_dialog.Confirm"),cancel_text:a.default.t("library.modal_dialog.Cancel"),title:a.default.t("library.modal_dialog.Are_you_sure")};i='<div style="max-width:600px;">'+(n=e.extend({},s,n)).message+'<p class="clearfix"><a class="confirm btn btn--blue left" href="#">'+n.confirm_text+'</a><a class="cancel button-space left ml1 lh40 grey-dark" href="#">'+n.cancel_text+"</a></p></div>",r=e.create_modal_dialog(n.title,i),o=r.data("modal_dialog"),r.find(".cancel").click(function(e){e.preventDefault(),o.close()}),r.find(".confirm").click(function(e){e.preventDefault(),t.call(r),o.close()}),o.open()}}(l)},sWQm:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("9VV1")),a=n("ZG75"),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,i.default)(document).on("project_added_to_curated_page",function(e,t){var n=(0,i.default)("#add_to_curated_page_widget .button-curate");n.addClass("on"),n.attr("href",t.edit_url)}),void 0!==o.default&&o.default.on_change("pledged",function(){var e=(0,i.default)("#stats"),t=e[0].className.match(/digits_\d+/),n="digits_"+Math.floor(o.default.get("pledged")).toString().length;t&&t[0]!==n&&e.removeClass(t[0]).addClass(n)}),(0,i.default)(".js-checkout-poller").livequery(function(){var e=(0,i.default)(this),t=(0,i.default)('<span class="spinner" />').spin("ksr","#333");e.append(t),i.default.pollster(e.data("href"),function(t){return"successful"===t.state?(window.location.reload(),!0):"failed"===t.state?((0,r.default)({error:t.state_reason}),e.closest(".notification-message").remove(),!0):void 0},{delay:2500})});var e={};(0,i.default)(".poll[data-dynamic]").livequery(function(){var t,n=(0,i.default)(this),r=parseInt(n.data("dynamic"),10),o=n.data("poll_url"),s=5,l=60;function d(e){var n,i=e.responseText;if("string"==typeof i)try{i=JSON.parse(i)}catch(e){i={}}i.project&&(n=a.Project.find(i.project.id),r=i.poll_interval_override||function(e,t,n){var i;return t.get("pledged")!==n.pledged||t.get("comments_count")!==n.comments_count?(i=e-Math.ceil((e-s)/2),Math.max(i,s)):(i=e+10,Math.min(i,l))}(r,n,i.project),n.set(i.project)),t(r)}o&&"number"==typeof r&&!isNaN(r)&&(t=function(t){e[o]=setTimeout(function(){e[o]=i.default.ajax({global:!1,url:o,complete:d})},1e3*t)})(r)},function(){var t=e[(0,i.default)(this).data("poll_url")];"number"==typeof t?clearTimeout(t):"function"==typeof t.abort&&t.abort()})})},sYfk:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("submit","#beneficiary_container form.beneficiary_reset",function(e){var t=(0,a.default)(this),n=(0,a.default)('<div class="spinner" />').spin("ksr","#fff");t.closest("#beneficiary_container").append(n),a.default.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"html",success:function(e){t.closest("#account-setup-panel").html(e)}}),e.preventDefault()})})},sZX6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},"slH/":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};(0,a.default)(function(){(0,a.default)(document).on("submit","ol.admin-notes form",function(){var e,t=(0,a.default)("#admin-menu .note_count"),n=t.text().match(/^(\d+)/);n&&(e=parseInt(n[1],10),t.text(e+1+" notes"))})})},stBO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var i,r=n("TXOG"),a=(i=r)&&i.__esModule?i:{default:i}},sxpx:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i},o=n("4RZc");(0,a.default)(function(){(0,a.default)(document).on("click",".js-tabbed-nav-link",function(e){(0,a.default)(".js-tabbed-nav-link").removeClass("is-active"),(0,a.default)(this).addClass("is-active"),(0,a.default)(".js-tabbed-nav-panel").removeClass("is-active"),(0,a.default)(".js-tabbed-nav-panel[data-panel="+(0,a.default)(this).data("panel")+"]").addClass("is-active"),(0,o.track)((0,a.default)(this).closest(".js-tabbed-nav").data("tracking_name"),{toggled_to:(0,a.default)(this).data("panel")}),e.preventDefault()})})},tAtq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notify=t.reducer=void 0;var i=n("EIRz"),r=n("tryQ"),a=n("tV3C"),o=(t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"APPLE_PAY_CHECKOUT_FAILURE":case"APPLE_PAY_REQ_FAILURE":case"APPLE_PAY_VENDOR_ERROR":case"APPLE_PAY_TRACKING_ERROR":return s(e,t);case"CHECK_INIT_APPLE_PAY":return o(e,t);default:return e}},function(e,t){var n=(0,a.checkApplePay)(t.window,t.stripeQualified);return(0,i.loop)(e,i.Cmd.run(a.initApplePay,{args:[t.dispatch,n]}))}),s=function(e,t){return(0,i.loop)(e,i.Cmd.run(l,{args:[t.error]}))},l=t.notify=function(e){Array.isArray(e)?e.forEach(function(e){return r.Honeybadger.notify(e)}):r.Honeybadger.notify(e)}},tI6b:function(e,t,n){"use strict";var i=a(n("rXeC")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("5Sqi"),(0,r.default)("body#projects_dashboard",function(){var e=(0,i.default)("#projects_dashboard #activity").find(".mobius").data("mobius");if(void 0===e)return!1;e.current_page=0,(0,i.default)(document).on("click","#projects_dashboard .activity-filters a",function(t){var n=(0,i.default)(this);n.closest(".activity-filters").find("a").removeClass("current"),n.addClass("current"),i.default.ajax({type:"get",dataType:"html",url:n.attr("href"),success:function(t){var r=(0,i.default)(t).find(".mobius").children();(0,i.default)("#activity .mobius").html(r).trigger("mobius:loaded_page",[1,r]),e.clear_extra_params(),e.add_param("cat",n.data("filter")),e.current_page=1}}),t.preventDefault()})})},tRFe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCheckout=t.redirectTo=t.generateTotalCost=t.reducer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("EIRz"),a=n("tryQ"),o=n("m+pb"),s=n("Z6GA"),l=n("oLWu"),d=n("Tvr3"),c=n("IPoO"),u=n("OXrv"),f=n("3e15"),h=n("dY/E"),p=n("NBJa"),m=n("c3QO"),g=n("pJCm"),v=n("49v0");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.reducer=function(e,t){switch(t.type){case"ASYNC_LOAD_SUCCESS":return S(e,t.data);case"SELECT_ON_VALUE_UPDATE":return D(e,t);case"ON_BLUR":return x(e,t);case"APPLE_PAY_CHECKOUT_FAILURE":case"APPLE_PAY_REQ_FAILURE":case"APPLE_PAY_VENDOR_ERROR":return C(e);case"ADD_MEMOIZED_SHIPPING_TO_SELECTED_REWARD":return E(e,t);case"REWARD_APPLE_PAY":return T(e,t.dispatch,(0,s.partial)(g.shippingValidations,e.selectedReward));case"REWARD_CHECKOUT_FAILURE":return y(e,t.err);case"REWARD_CONTINUE":return A(e,(0,s.partial)(g.shippingValidations,e.selectedReward));case"REWARD_REQUEST_REDIRECT":return R(e,t.path);case"REWARD_NEW_PLEDGE_VALUE":return i({},e,{selectedReward:i({},e.selectedReward,{totalCost:t.newValue})});case"REWARD_SAVE_OFFSET":return i({},e,{rewardsList:i({},e.rewardsList,_({},t.rewardId,i({},e.rewardsList[t.rewardId],{offsetHeight:t.offsetHeight})))});case"REWARD_SET_SELECTED_REWARD":return I(e,t.rewardFacts);case"REWARD_TOUCH_FIELD":return i({},e,{validation:(0,r.getModel)((0,p.handleTouchField)(e.validation,t.fieldName,(0,s.partial)(g.shippingValidations,e.selectedReward)))});case"REWARD_TRUNCATE_DESCRIPTION":return i({},e,{selectedReward:i({},e.selectedReward,{truncated:c.CLOSED})});case"REWARD_TRUNCATION_TOGGLE":var n=e.selectedReward.truncated===c.CLOSED?c.EXPANDED:c.CLOSED;return i({},e,{selectedReward:i({},e.selectedReward,{truncated:n})});case"REWARD_UPDATE_APPLE_PAY":return k(e,t);case"REWARD_FREEZE_PIN":return i({},e,{selectedReward:i({},e.selectedReward,{doNotPin:!0})});case"NOOP":default:return e}};var y=function(e,t){return i({},e,{validation:i({},e.validation,{serverErrors:t})})},b=t.generateTotalCost=function(e,t){return(+(0,l.digitsOnly)(e)||0)+(+(0,l.digitsOnly)(t)||0)},w=t.redirectTo=function(e){window.location.href=window.location.pathname.replace(location.pathname,e)},E=function(e,t){var n=(0,r.getModel)(D(e,t)),i=(0,h.namespaceActionFactory)(t.namespace)(f.changeSelectedIndex)(t.userLocationIndex,"Selected from user location");return(0,r.loop)(n,r.Cmd.batch([r.Cmd.action((0,m.validateField)(c.SHIPPING_LOCATION)),r.Cmd.action(i)]))},C=function(e){return y(e,[{message:"We're sorry. Something went wrong with Apple Pay. Please try another payment option or try again."}])},k=function(e,t){var n=i({},e,{pledgeData:i({},e.pledgeData,{applePayCapable:t.newValue})});return t.newValue?(0,r.loop)(n,r.Cmd.run(v.toggleApplePayClasses)):n},S=function(e,t){var n=t.reward.shippingRules.nodes.map(function(t){var n=t.cost.symbol||e.pledgeData.currencySymbol,i=+t.cost.amount>0?"(+ "+n+Math.round(+t.cost.amount)+")":"";return{label:t.location.name+" "+i,value:+t.cost.amount,shippingLocation:t.location.id}}),a=e.selectedReward.id,o=i({},e,{rewardsList:i({},e.rewardsList,_({},a,i({},e.rewardsList[a],{shippingRulesStatus:d.LOADED,shippingRules:i({},e.rewardsList[a].shippingRules,{options:n})})))}),l=n.findIndex(function(t){return(0,s.decodeId)(t.shippingLocation)==e.currentUser.location});if(l>-1){var c=n[l].value,u=b(e.selectedReward.pledgeCost,c);o=i({},o,{selectedReward:i({},o.selectedReward,{shippingLocation:n[l].shippingLocation,shippingCost:c,totalCost:u}),rewardsList:i({},o.rewardsList,_({},a,i({},o.rewardsList[a],{memoizedShippingOption:{value:n[l],userLocationIndex:l}})))})}var p=(0,h.namespaceActionFactory)(a)(f.changeSelectedIndex)(l,"Selected from user location");return(0,r.loop)(o,r.Cmd.action(p))},T=function(e,t,n){return(0,p.isValid)(n)?(0,r.loop)(e,r.Cmd.run(v.createApplePayCheckout,{args:[e,t],successActionCreator:s.identity,failActionCreator:function(e){return(0,v.onApplePayVendorErrors)(e)}})):i({},e,{validation:(0,r.getModel)((0,p.handleTouchAllFields)(e.validation,n))})},A=function(e,t){return(0,p.isValid)(t)?(0,r.loop)(e,r.Cmd.batch([r.Cmd.run(N,{args:[e],successActionCreator:s.identity,failActionCreator:s.identity}),r.Cmd.action((0,o.track)("Checkout Reward Continue Click"))])):i({},e,{validation:(0,r.getModel)((0,p.handleTouchAllFields)(e.validation,t))})},R=function(e,t){return(0,r.loop)(e,r.Cmd.run(w,{args:[t]}))},x=function(e,t){return t.namespace&&t.namespace===e.selectedReward.id?(0,r.loop)(e,r.Cmd.action((0,m.validateField)(c.SHIPPING_LOCATION))):e},I=function(e,t){var n=t.minPledge,a=t.id,s=t.shippingEnabled;if(a===e.selectedReward.id)return e;var l=s,c=n.amount,u=b(c,0),f=i({},e,{selectedReward:i({},e.selectedReward,{id:a,pledgeCost:c,shippingRequired:l,totalCost:u,shippingCost:0,shippingLocation:null,truncated:null,doNotPin:!1}),validation:i({},e.validation,{touched:{},errors:{},serverErrors:[]})}),h=e.rewardsList[a]?e.rewardsList[a].shippingRulesStatus:null,p=e.rewardsList[a]?e.rewardsList[a].memoizedShippingOption:null,g=l&&h===d.LOADED?r.Cmd.batch([r.Cmd.action((0,o.track)("Checkout Reward Click")),r.Cmd.action((0,m.addMemoizedShippingLocation)(p,a))]):r.Cmd.action((0,o.track)("Checkout Reward Click"));return(0,r.loop)(f,g)},D=function(e,t){var n=e.selectedReward,a=n.id,o=n.pledgeCost,s=n.totalCost,l=t.namespace,d=t.value,u=d.shippingLocation,f=d.value;if(l!==a)return e;var h=b(o,f),p=h>s?h:s;return(0,r.loop)(i({},e,{selectedReward:i({},e.selectedReward,{shippingCost:f,totalCost:p,shippingLocation:u})}),r.Cmd.action((0,m.validateField)(c.SHIPPING_LOCATION)))},N=t.createCheckout=function(e){var t=e.selectedReward,n=t.id,i=t.shippingLocation,r=t.totalCost,o=i?(0,s.decodeId)(i):void 0,l=e.projectId,d=r.toString();return(0,u.createCheckout)({projectId:l,amount:d,rewardId:n,locationId:o}).then(function(t){if(t.errors)return Promise.reject(t.errors);var n=(0,s.decodeId)(t.data.createCheckout.checkout.id),i=e.currentUser?"/checkouts/"+n+"/payments/new?clicked_reward=true":"/checkouts/"+n+"/guest/new?clicked_reward=true";return w(i),(0,m.noopAction)()}).catch(function(e){return e.forEach(function(e){return a.Honeybadger.notify(e)}),(0,m.onCheckoutFailure)(e)})}},tV3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createApplePayCheckout=t.paymentCompletion=t.thanksPage=t.finalizeCharge=t.createPledge=t.buildRequest=t.paddedString=t.initApplePay=t.canMakePaymentsWithApplePayCard=t.toggleApplePayClasses=t.checkApplePay=void 0;var i=n("Z6GA"),r=n("Z5jf"),a=n("twwy"),o=n("3+HK"),s=n("OXrv"),l=n("IPoO"),d=(t.checkApplePay=function(e,t){return!!(e&&t&&void 0!==e.current_user&&void 0!==e.current_project&&void 0!==e.apple_pay_countries&&"live"===e.current_project.get("state")&&!/\/retry$/.test(e.location.pathname)&&"pledges_edit"!==document.body.id&&e.apple_pay_countries.indexOf(e.current_project.get("country"))>=0)},t.toggleApplePayClasses=function(){document&&(document.body.classList.remove("not-apple-pay-capable"),document.body.classList.add("apple-pay-capable"))},t.canMakePaymentsWithApplePayCard=function(e,t){return function(n){return n?e():t()}}),c=(t.initApplePay=function(e,t){var n=function(e,t){return e((0,o.updateApplePayCapable)(t))};t&&"undefined"!=typeof Stripe?(Stripe.setPublishableKey(window.STRIPE_PUBLISHABLE_KEY),Stripe.applePay.checkAvailability(d((0,i.partial)(n,e,!0),(0,i.partial)(n,e,!1)))):n(e,!1)},void 0),u=t.paddedString=function(e){var t=e.toString();return t.includes(".")?t:t.concat(".00")},f=t.buildRequest=function(e){var t=e.selectedReward.id,n=t===l.NO_REWARD?e.projectName+": No reward":e.rewardsList[t].title,i=u(e.selectedReward.totalCost);return{countryCode:e.pledgeData.projectCountry,currencyCode:e.pledgeData.projectCurrency,lineItems:[{label:""+(""===n?e.projectName:n),amount:i}],total:{label:"Kickstarter, PBC. ("+(0,r.boundT)("project_page.reward_form.applepay.if_funded")+")",amount:i}}},h=t.createPledge=function(e,t){var n=e.selectedReward,r=n.id,a=n.shippingLocation,o=n.totalCost,s=a?(0,i.decodeId)(a):void 0;return t({projectId:e.projectId,amount:o.toString(),rewardId:r,locationId:s}).then(function(e){return e.errors?Promise.reject(e.errors):{data:{checkoutURL:"/checkouts/"+(0,i.decodeId)(e.data.createCheckout.checkout.id)+"/payments"}}})},p=t.finalizeCharge=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fetch,r={token:e,payment_type:"apple_pay",apple_pay_capable:"1",authenticity_token:n},a={method:"POST",body:JSON.stringify(r),credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}};return i(t.data.checkoutURL,a).then(function(e){return e.json()})},m=t.thanksPage=function(e,t){if(200!==e.status)return Promise.reject(e.data.message);t(ApplePaySession.STATUS_SUCCESS),window.location.pathname=""+e.data.thankyou_url.replace(/\?.*$/,"")},g=t.paymentCompletion=function(e,t,n){return function(i,r){try{(0,a.trackApplePayTokenCreated)()}catch(e){t((0,o.onApplePayTrackingError)(e))}h(e,n).then(function(t){return p(i.token.id,t,e.currentUser.authToken)}).then(function(e){m(e,r)}).catch(function(e){t((0,o.onApplePayCheckoutFailure)(e)),r(ApplePaySession.STATUS_FAILURE)})}};t.createApplePayCheckout=function(e,t){(c=Stripe.applePay.buildSession(function(e,t){var n=void 0;try{n=f(e)}catch(e){t((0,o.onApplePayRequestFailure)(e))}return n}(e,t),g(e,t,s.createCheckout),(0,i.partial)(function(e,t){return e((0,o.onApplePayVendorErrors)(t))},t))).oncancel=a.trackApplePayCancelled,(0,a.trackApplePayShowSheet)(),c.begin()}},tW2u:function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=l(n("zcFO")),a=l(n("GiK3")),o=l(n("KSGD")),s=(l(n("GvBW")),n("1olO"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.any,o.default.func,o.default.node;var d=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.performAppear=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(a._handleDoneAppearing.bind(a,e,t)):a._handleDoneAppearing(e,t)},a._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performEnter=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(a._handleDoneEntering.bind(a,e,t)):a._handleDoneEntering(e,t)},a._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performLeave=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(a._handleDoneLeaving.bind(a,e,t)):a._handleDoneLeaving(e,t)},a._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)?a.keysToEnter.push(e):a.setState(function(t){var n=i({},t.children);return delete n[e],{children:n}})},a.childRefs=Object.create(null),a.state={children:(0,s.getChildMapping)(n.children)},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var i in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var r=n&&n.hasOwnProperty(i);!t[i]||r||this.currentlyTransitioningKeys[i]||this.keysToEnter.push(i)}for(var a in n){var o=t&&t.hasOwnProperty(a);!n[a]||o||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var i=e.state.children[n];if(i){var o="string"!=typeof i.ref,s=e.props.childFactory(i),l=function(t){e.childRefs[n]=t};s===i&&o&&(l=(0,r.default)(i.ref,l)),t.push(a.default.cloneElement(s,{key:n,ref:l}))}};for(var o in this.state.children)n(o);var s=i({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,a.default.createElement(this.props.component,s,t)},t}(a.default.Component);d.displayName="TransitionGroup",d.propTypes={},d.defaultProps={component:"span",childFactory:function(e){return e}},t.default=d,e.exports=t.default},thKT:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n("l/Rs");!function(e){function t(t,n){this.$field=t,this.options=e.extend({on_invalid:null,format:"%H:%M %z",am:"am",pm:"pm"},n),this._value=this._current_time_from_field(),this._attach()}e.fn.time_field=function(n){return e(this).each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;e.$field.bind("blur",function(){e._handle_edit()}),this.$field.bind("time_field:set_time",function(t,n){e.set_time(n)})},_s_to_time:function(e){if("object"===i(Date.Parsing)){var t=Date.parse(e);return t?t.toString("HH:mm"):this.options.on_invalid}var n,r=e.match(/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i),a=!r;if(!a){var o=+r[1]%12,s=+r[3]||0,l=(r[4]||"").match(/p/i);r[4]||(l=+r[1]>=12),+r[1]>23&&(a=!0),+r[1]>12&&r[4]&&(a=!0),s>59&&(a=!0),+r[1]<1&&r[4]&&(a=!0);var d=""+(o+(l?12:0));1===d.length&&(d="0"+d);var c=""+s;1===c.length&&(c="0"+c),n=d+":"+c}return a?this.options.on_invalid:n},_time_to_s:function(t){if("object"===i(Date.Parsing)){var n=Date.parse(t);return n?n.toString("h:mm tt"):this.options.on_invalid}var r=t&&t.match(/(\d\d):(\d\d)/);if(r){var a=this.options.format,o=+r[1],s=+r[2],l=o>=12?this.options.pm:this.options.am,d=""+(o%12?o%12:12),c=""+s;return 1===c.length&&(c="0"+c),e([["%Hh",o],["%H",d],["%M",c],["%z",l]]).each(function(e,t){a=a.replace(t[0],t[1])}),a}return""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(e){e!==this._value&&(this._value=e,this.$field.trigger("time_field:time_changed",this._value)),this._reset_field_value()},_handle_edit:function(){var e=this._current_time_from_field();this.set_time(e)}})}(n("l/Rs"))},thyB:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};function o(e){var t=e.find(".js-block-user").data("is-blocking"),n=e.find(".js-follow-user");t?n.addClass("hidden"):n.removeClass("hidden")}n("LNuh"),(0,a.default)(".js-social-actions").livequery(function(){var e=(0,a.default)(this);o(e),e.on("ksr:block_user ksr:unblock_user",function(){e.find(".js-follow-user").trigger("ksr:set_to_follow"),o(e)})})},tryQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Honeybadger=void 0;var i=o(n("tskP")),r=o(n("c5nH")),a=o(n("eF8u"));function o(e){return e&&e.__esModule?e:{default:e}}if(window.honeybadger_configuration){var s=window.honeybadger_configuration;i.default.configure(s),i.default.setContext({user_id:a.default&&a.default.get?a.default.get("id"):null,project_id:r.default&&r.default.get?r.default.get("id"):null})}"function"==typeof i.default.beforeNotify&&i.default.beforeNotify(function(e){return!0===/(ksr|drip)\.test/.test(window.location.hostname)?(console.error("Honeybadger in development",e),!1):!1!==/kickstarter\.com$/.test(window.location.hostname)&&void 0}),t.Honeybadger=i.default},tskP:function(e,t,n){var i,r,a;!function(n,o){"use strict";var s={};!function(){var e=document.getElementsByTagName("script"),t=e[e.length-1];if(t)for(var n,i=t.attributes,r=0,a=i.length;r<a;r++)/data-(\w+)$/.test(i[r].nodeName)&&("false"===(n=i[r].nodeValue)&&(n=!1),s[RegExp.$1]=n)}();var l=function(){var e=function(){var e,t,n={name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:"0.5.2",language:"javascript"},i=!1,r=!1;function a(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}function o(t){return!!e&&(e.name===t.name&&(e.message===t.message&&e.stack===t.stack))}function s(e){return e.stacktrace||e.stack||void 0}return function(l){var d=[],c=[],u={context:{},beforeNotifyHandlers:[],errorsSent:0};if("object"==typeof l)for(var f in l)u[f]=l[f];function h(){if(this.console){var e=Array.prototype.slice.call(arguments);e.unshift("[Honeybadger]"),console.log.apply(console,e)}}function p(){if(m("debug"))return h.apply(this,arguments)}function m(e,t){var n=u[e];return void 0===n&&(n=u[e.toLowerCase()]),"false"===n&&(n=!1),void 0!==n?n:t}function g(e){return!/function|symbol/.test(typeof e)&&("object"!=typeof e||void 0!==e.hasOwnProperty)}function v(e){if(m("disabled",!1))return!1;if((t=m("maxErrors"))&&u.errorsSent>=t)return!1;var t;try{var n=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");return n.open("GET",e,m("async",!0)),n.send(),void u.errorsSent++}catch(e){h("Error encountered during XHR request (will retry): "+e)}var i=new Image;i.src=e}function _(n){e=t=null;var i=m("apiKey",m("api_key"));if(!i)return h("Unable to send error report: no API key has been configured."),!1;var r="http"+(m("ssl",!0)?"s":"")+"://"+m("host","api.honeybadger.io")+"/v1/notices/js.gif?"+function e(t,n,i){var r,a,o,s;o=[];i||(i=0);if(i>=m("max_depth",8))return encodeURIComponent(n)+"=[MAX DEPTH REACHED]";for(r in t)s=t[r],t.hasOwnProperty(r)&&null!=r&&null!=s&&(g(s)||(s=Object.prototype.toString.call(s)),a=n?n+"["+r+"]":r,o.push("object"==typeof s?e(s,a,i+1):encodeURIComponent(a)+"="+encodeURIComponent(s)));return o.join("&")}({notice:n})+"&api_key="+i+"&t="+(new Date).getTime();return v(r),!0}function y(r,l){if(r||(r={}),"[object Error]"===Object.prototype.toString.call(r)){var d=r;r=a(r,{name:d.name,message:d.message,stack:s(d)})}if("object"!=typeof r){var f=String(r);r={message:f}}if(o(r))return!1;if(t&&i&&_(t),0===function(){var e,t;for(e in t=[],r)({}).hasOwnProperty.call(r,e)&&t.push(e);return t}().length)return!1;if(l&&(r=a(r,l)),function(e,t){var n=e.message;for(var i in t)if(n.match(t[i]))return!0;return!1}(r,m("ignorePatterns")))return!1;if(function(e,t){var n,i;for(n=0,i=e.length;n<i;n++)if(!1===(0,e[n])(t))return!0;return!1}(u.beforeNotifyHandlers,r))return!1;var h=function(){var e={};e.HTTP_USER_AGENT=navigator.userAgent,document.referrer.match(/\S/)&&(e.HTTP_REFERER=document.referrer);return e}();"string"==typeof r.cookies?h.HTTP_COOKIE=r.cookies:"object"==typeof r.cookies&&(h.HTTP_COOKIE=function(e){if("object"!=typeof e)return;var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join(";")}(r.cookies));var g={notifier:n,error:{class:r.name||"Error",message:r.message,backtrace:r.stack,generator:r.generator,fingerprint:r.fingerprint},request:{url:r.url||document.URL,component:r.component||m("component"),action:r.action||m("action"),context:a(u.context,r.context),cgi_data:h,params:r.params},server:{project_root:r.projectRoot||r.project_root||m("projectRoot",m("project_root",window.location.protocol+"//"+window.location.host)),environment_name:r.environment||m("environment"),revision:r.revision||m("revision")}};return t=g,e=r,i?(p("Deferring notice.",r,g),window.setTimeout(function(){o(r)&&_(g)})):(p("Queuing notice.",r,g),c.push(g)),r}var b=!0;if(window.atob||(b=!1),window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(b=!1)}catch(e){}function w(e,t){try{return"function"!=typeof e?e:function(e){if("function"!=typeof Object.isExtensible)return!0;return Object.isExtensible(e)}(e)?(e.___hb||(e.___hb=function(){var n=m("onerror",!0);if(!(b&&(n||t)||t&&!n))return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(e){throw y(e),e}}),e.___hb.___hb=e.___hb,e.___hb):e}catch(t){return e}}u.notify=function(e,t,n){if(e||(e={}),"[object Error]"===Object.prototype.toString.call(e)){var i=e;e=a(e,{name:i.name,message:i.message,stack:s(i)})}if("object"!=typeof e){var r=String(e);e={message:r}}if(t&&"object"!=typeof t){var o=String(t);t={name:o}}return t&&(e=a(e,t)),"object"==typeof n&&(e=a(e,n)),y(e,function(e){var t;if(e&&(t=s(e)))return{stack:t,generator:void 0};try{throw new Error("")}catch(e){if(t=s(e))return{stack:t,generator:"throw"}}t=["<call-stack>"];var n=arguments.callee;for(;n&&t.length<10;){/function(?:\s+([\w$]+))+\s*\(/.test(n.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{n=n.caller}catch(e){break}}return{stack:t.join("\n"),generator:"walk"}}(e))},u.wrap=function(e){return w(e,!0)},u.setContext=function(e){return"object"==typeof e&&(u.context=a(u.context,e)),u},u.resetContext=function(e){return u.context="object"==typeof e?a({},e):{},u},u.configure=function(e){for(var t in e)u[t]=e[t];return u},u.beforeNotify=function(e){return u.beforeNotifyHandlers.push(e),u};var E=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};function C(e,t,n){if(!r&&e&&t&&n){var i=e[t];e[t]=n(i)}}u.reset=function(){for(var e in u.context={},u.beforeNotifyHandlers=[],u)-1==E.call(d,e)&&(u[e]=void 0);return u.resetMaxErrors(),u},u.resetMaxErrors=function(){return u.errorsSent=0},u.getVersion=function(){return"0.5.2"};var k=function(e){return function(t,n){if("function"==typeof t){var i=Array.prototype.slice.call(arguments,2);return t=w(t),e(function(){t.apply(null,i)},n)}return e(t,n)}};for(var f in C(window,"setTimeout",k),C(window,"setInterval",k),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){var t=window[e]&&window[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(C(t,"addEventListener",function(e){return function(t,n,i,r){try{n&&null!=n.handleEvent&&(n.handleEvent=w(n.handleEvent))}catch(e){h(e)}return e.call(this,t,w(n),i,r)}}),C(t,"removeEventListener",function(e){return function(t,n,i,r){return e.call(this,t,n,i,r),e.call(this,t,w(n),i,r)}}))}),C(window,"onerror",function(t){return function(n,i,r,a,o){return function(t,n,i,r,a){if(p("window.onerror callback invoked.",arguments),e)return;if(!m("onerror",!0))return;if(0===i&&/Script error\.?/.test(t))return void h("Ignoring cross-domain script error. Use CORS to enable tracking of these types of errors.",arguments);var o=[t,"\n    at ? (",n||"unknown",":",i||0,":",r||0,")"].join("");if(a){var l={stack:s(a)};return l.stack||(l={stack:o}),void y(a,l)}y({name:"window.onerror",message:t,stack:o})}(n,i,r,a,o),"function"==typeof t&&t.apply(this,arguments)}}),r=!0,u)d.push(f);if(p("Initializing honeybadger.js 0.5.2"),/complete|interactive|loaded/.test(document.readyState))i=!0,p("honeybadger.js 0.5.2 ready");else{p("Installing ready handler");var S=function(){var e;for(i=!0,p("honeybadger.js 0.5.2 ready");e=c.pop();)_(e)};document.addEventListener?document.addEventListener("DOMContentLoaded",S,!0):window.attachEvent("onload",S)}return u}}(),t=e(s);return t.factory=e,t};r=[],void 0===(a="function"==typeof(i=l)?i.apply(t,r):i)||(e.exports=a)}()},twwy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackApplePayTokenCreated=t.trackApplePayShowSheet=t.trackApplePayShowButtons=t.trackApplePayErroredStripe=t.trackApplePayErroredShippingSelection=t.trackApplePayErroredReward=t.trackApplePayErroredKSR=t.trackApplePayCancelled=void 0;var i=n("orEx"),r=n("4RZc");t.trackApplePayCancelled=function(){(0,r.track)("Canceled Apple Pay Sheet",{context:(0,i.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredKSR=function(e){var t=e.type;(0,r.track)("Apple Pay Kickstarter Errored",{type:t,context:(0,i.getContextFromPathName)(window.location.pathname)}),(0,r.track)("Errored Apple Pay Kickstarter",{type:t,context:(0,i.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredReward=function(e){var t=e.type;(0,r.track)("Apple Pay Errored Reward Continue",{type:t,context:(0,i.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredShippingSelection=function(){(0,r.track)("Apple Pay Shipping Selection Errored",{context:(0,i.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredStripe=function(e){var t=e.type;(0,r.track)("Apple Pay Stripe Token Errored",{type:t,context:(0,i.getContextFromPathName)(window.location.pathname)}),(0,r.track)("Errored Apple Pay Stripe Token",{type:t,context:(0,i.getContextFromPathName)(window.location.pathname)})},t.trackApplePayShowButtons=function(){(0,r.track)("Showed Apple Pay Buttons",{context:(0,i.getContextFromPathName)(window.location.pathname)})},t.trackApplePayShowSheet=function(){(0,r.track)("Apple Pay Show Sheet",{context:(0,i.getContextFromPathName)(window.location.pathname)}),(0,r.track)("Showed Apple Pay Sheet",{context:(0,i.getContextFromPathName)(window.location.pathname)})},t.trackApplePayTokenCreated=function(){(0,r.track)("Apple Pay Stripe Token Created",{context:(0,i.getContextFromPathName)(window.location.pathname)}),(0,r.track)("Created Apple Pay Stripe Token",{context:(0,i.getContextFromPathName)(window.location.pathname)})}},txGb:function(e,t,n){"use strict";var i=d(n("l/Rs")),r=d(n("8NzR")),a=d(n("+bVi")),o=d(n("9VV1")),s=d(n("wmCY")),l=n("4RZc");function d(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#mobile_index",function(){var e,t=(0,i.default)(".js-device-container"),n=1,r=1,d=!1;function c(){var e,t,n,r=(0,i.default)(".js-tablet"),a=(0,i.default)(".js-tablet-item"),o=(0,i.default)(".js-tablet-screenshots"),s=.875*(0,i.default)(".js-device-container").outerWidth();.75*(0,i.default)(window).width()<=640?(0,i.default)(".js-device-container").css({width:"100%",height:Math.round(.65625*(0,i.default)(".js-device-container").width())}):(0,i.default)(".js-device-container").css({width:640,height:Math.round(420)}),r.css({width:s}),o.css({width:"100"*a.length+"%"}),a.css({width:100/a.length+"%"}),e=(0,i.default)(".js-phone"),t=(0,i.default)(".js-phone-item"),n=(0,i.default)(".js-phone-screenshots"),e.css({height:.78*(0,i.default)(".js-tablet").outerHeight(),width:Math.round(.78*(0,i.default)(".js-tablet").outerHeight()*.5625)}),n.css({width:"100"*t.length+"%"}),t.css({width:100/t.length+"%"})}(0,i.default)(document).on("submit",".js-send-mobile-link-form",function(e){e.preventDefault();var t=(0,i.default)(this);""===t.find(".js-email-or-phone").val()?(0,o.default)({error:s.default.t("onloads.views.mobile.index.phone_cant_be_blank")}):d||(d=!0,i.default.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find(".js-email-or-phone").val(),platform:t.find(".js-platform").val()},success:function(e){e.success?(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().removeClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.success),t.closest(".js-get-the-app-form-container").find(".js-form-retry").hide(),t.hide()):e.error&&(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().addClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.error))},complete:function(){d=!1}}))}),a.default["not-ios"]&&((0,i.default)(".js-get-the-app-button").on("click",function(e){var t=(0,i.default)(this).closest(".js-get-the-app-container");(0,l.track)("Mobile Promo Reveal Form"),t.find(".js-get-the-app-button-container").css({marginTop:-(0,i.default)(this).outerHeight()}),t.addClass("is-open"),setTimeout(function(){t.find(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),(0,i.default)(".js-email-or-phone").on("focusout",function(){var e=(0,i.default)(this).closest(".js-get-the-app-container");""===(0,i.default)(this).val()&&e.is(".is-open")&&(e.find(".js-get-the-app-button-container").css({marginTop:0}),e.removeClass("is-open"),(0,l.track)("Mobile Promo Close Form"))}),(0,i.default)(".js-form-retry").on("click",function(e){var t=(0,i.default)(this).closest(".js-get-the-app-container");t.find(".js-get-the-app-button-container").css({marginTop:-(0,i.default)(".js-get-the-app-button").outerHeight()}),t.removeClass("is-open"),t.find(".js-form-text").html(""),t.find(".js-form-message").hide(),(0,l.track)("Mobile Promo Form Retry"),e.preventDefault()})),(0,i.default)(document).resize(function(){c()}),setTimeout(function(){c(),t.removeClass("is-loading")},1400),clearInterval(e),e=setInterval(function(){(0,i.default)(".js-tablet-screenshots").css({marginLeft:-100*n+"%"}),(n+=1)>=(0,i.default)(".js-tablet-item").length&&(n=0),(0,i.default)(".js-phone-screenshots").css({marginLeft:-100*r+"%"}),(r+=1)>=(0,i.default)(".js-phone-item").length&&(r=0)},5e3)})},"uA/L":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Strong=t.Em=t.Div=t.Span=t.Label=t.Paragraph=t.Heading=t.FONTS=t.DEFAULT_FONT=void 0;var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i};var s=t.DEFAULT_FONT="helvetica",l=t.FONTS={helvetica:{sizes:{"headline-500":"type-38 type-48-sm type-60-md type-100-lg","headline-400":"type-38 type-48-sm type-60-md type-80-lg","headline-300":"type-21 type-38-md type-48-lg","headline-200":"type-24 type-28-md type-38-lg","headline-100":"type-21 type-24-md type-28-lg","subhead-600":"type-18 type-21-md","subhead-500":"type-16 type-21-md","subhead-400":"type-14 type-21-md","subhead-300":"type-16 type-18-md","subhead-200":"type-14 type-18-md","body-200":"type-14 type-16-md","body-100":"type-13 type-14-md","caption-200":"type-12 type-13-md","caption-100":"type-12"},variants:{italic:"text-italic"},weights:{light:"light",normal:"normal",medium:"medium",bold:"bold"}}},d=function(e){var t=e.atoms,n=void 0===t?[]:t,i=e.children,r=e.color,a=e.font,d=void 0===a?l[s]:a,c=e.italic,u=void 0!==c&&c,f=e.level,h=e.style,p=e.tag,m=e.type,g=e.weight,v=f?"h"+f:p,_=(m?[d.sizes[m]]:[]).concat(r?[r]:[]).concat(u?[d.variants.italic]:[]).concat(g?[d.weights[g]]:[]).concat(n).join(" ");return o.default.createElement(v,{style:h,className:_},i)};t.Heading=function(e){var t=e.level,n=void 0===t?3:t,i=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["level"]);return o.default.createElement(d,r({level:n},i),i.children)};t.Paragraph=function(e){return o.default.createElement(d,r({},e,{tag:"p"}),e.children)},t.Label=function(e){return o.default.createElement(d,r({},e,{tag:"label"}),e.children)},t.Span=function(e){return o.default.createElement(d,r({},e,{tag:"span"}),e.children)},t.Div=function(e){return o.default.createElement(d,r({},e,{tag:"div"}),e.children)},t.Em=function(e){return o.default.createElement(d,r({},e,{tag:"em",italic:!0}),e.children)},t.Strong=function(e){return o.default.createElement(d,r({},e,{tag:"strong",weight:"medium"}),e.children)}},uAjV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.projectCardFragment="\n  fragment projectCardFragment on Project {\n    backers {\n      totalCount\n    }\n    canceledAt\n    category {\n      name\n      url\n    }\n    creator {\n      imageUrl(width: $imageWidth)\n      name\n      url\n    }\n    deadlineAt\n    description\n    friends {\n      nodes {\n        imageUrl(width: $imageWidth)\n        name\n      }\n    }\n    id\n    imageUrl(width: $imageWidth)\n    isProjectWeLove\n    isProjectOfTheDay\n    name\n    percentFunded\n    pid\n    pledged {\n      amount\n      currency\n    }\n    profile {\n      blurb\n      featureImageUrl(width: $imageWidth)\n      name\n    }\n    slug\n    state\n    url\n  }\n"},uQxE:function(e,t,n){"use strict";var i=h(n("l/Rs")),r=h(n("shXp")),a=h(n("9VV1")),o=h(n("wmCY")),s=n("Tvaj"),l=h(n("xgGG")),d=h(n("MA+5")),c=h(n("WO7S")),u=n("4RZc"),f=h(n("hBlz"));function h(e){return e&&e.__esModule?e:{default:e}}n("hsYx"),n("452R"),n("v6Dq"),n("mjY1"),(0,i.default)(function(){function e(){return(0,f.default)(window.location)}if(window.backers){var t,n=[],h=e(),p=!1,m=h.query(!0).show_responses||KSR.store.getItem("backer_report_show_responses");t=new l.default(null,(0,i.default)("#main"),"backer_report/_index",{mobius_on:"backers"}),(0,u.track)("Backer Report View"),r.default.has(h.query(!0),"show_responses")&&KSR.store.setItem("backer_report_show_responses",h.query(!0).show_responses),"string"==typeof m&&(m="true"===m),t.on_change_params(function(){n=[],(0,i.default)("form.term").term_form().bind("submit",function(e){e.preventDefault();var n=(0,i.default)(this);t.set_params(n.serialize_without_blank()),(0,u.track)("Backer Report Search",{term:n.find(":input").val()})}),function(){var t=e().query(!0).reward_id,n=(0,i.default)(".NS-backer_report__header .remote_modal_dialog");if(t&&n.length>0){var r=(0,f.default)(n.attr("href")).removeSearch("reward_id").addSearch("reward_id",t);n.attr("href",r)}}(),(0,i.default)("form.term .text").trigger("keydown"),t.get("params.reward_id")||"dropped"===t.get("params.status")||((0,i.default)("#reward, #reward_message, ul.dropdown li.all").remove(),(0,i.default)(".reward_tiers .title > span.reward b").text(o.default.t("onloads.views.backer_report.index.All_rewards")));var r=(0,i.default)("#main input[name=note]:visible, #main input[name=note_not]:visible");r.focus(),r.val(r.val()),t.change()}),(0,i.default)(document).on("click","#main table th",function(n){var r,a=(0,i.default)(this).data("sort"),o=e(),s=o.search(!0);a&&(n.preventDefault(),"asc"===s.asc_or_desc&&s.sort_by===a?(r="desc",o.removeSearch("asc_or_desc").addSearch("asc_or_desc",r)):(r="asc",o.removeSearch("asc_or_desc").addSearch("asc_or_desc",r)),o.removeSearch("sort_by").addSearch("sort_by",a),(0,u.track)("Backer Report Sort",{selected_sort:a,selected_order:r}),t.set_params(o.query()))}),t.on_change(function(){var e=(0,i.default)("#main");r.default.each(this.get("backers"),function(i){r.default.contains(n,i.id)||(n.push(i.id),i.project_is_successful="successful"===t.get("project.state"),i.showMessages=t.get("showMessages"),i.showRewards=t.get("showRewards"),i.show_responses=m,i.disputed_filter_enabled="true"===t.get("params.disputed"),i.dispute_status=t.get("dispute_statuses")[i.id],e.find("table tbody").append((0,d.default)("backer_report/_row",i)))})}),(0,i.default)(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.params&&t.set_params(e.params),"string"==typeof e.modal_url?i.default.open_remote_modal_dialog(e.modal_url):(p=!0,(0,i.default)(".modal_dialog:has(.NS_backers__info):visible").trigger("close"),p=!1))}),(0,i.default)(window).on("set_params",function(e,n){t.set_params(n)}),(0,i.default)(document).on("click","#main .dropdown a",function(e){var n,a=(0,i.default)(this),o=a.closest(".dropdown"),s=o.closest(".ksr-dropdown");o.find("a").removeClass("selected"),a.addClass("selected"),n={},(0,i.default)(".dropdown a.selected").each(function(){var e=(0,i.default)(this);r.default.extend(n,(0,f.default)(e.attr("href")).query(!0))}),t.set_params(i.default.param(n),!0),e.preventDefault(),s.hasClass("reward_tiers")?(0,u.track)("Backer Report Reward Filter",{selected_tier:i.default.trim((0,i.default)(this).find("b").text())}):s.hasClass("views")&&(0,u.track)("Backer Report Views Filter",{selected_tier:i.default.trim((0,i.default)("#main .reward_tiers .title b").text()),selected_view:i.default.trim((0,i.default)(this).find("span").text())})}),(0,i.default)(document).on("keyup","form.aggregations input[name=note], form.aggregations input[name=note_not]",function(e){13===e.which&&(0,i.default)(this).trigger("change")}),(0,i.default)(document).on("click","#main table tbody tr a",function(){g((0,i.default)(this).closest("tr"))}),(0,i.default)(window).on("backer_completed",function(e,t,n){(0,i.default)("#main table tbody tr td.completed a, .NS_backers__info a.completed_toggle").filter("[data-backer_id="+t+"]").toggleClass("completed",n)}),(0,i.default)(window).on("creator_backing_note:added",function(e,t,n){(0,i.default)("#main table tbody tr[data-backing_id="+t+"] td.notes a").text(n)}),(0,i.default)(window).on("message_sent",function(e,t,n){(0,i.default)("#main table tbody tr[data-backing_id="+t+"] td.actions a").html('<span class="ss-icon ss-mail"></span> ('+n+")")}),(0,i.default)(window).on("modal_dialog:opened",function(t){var n=(0,i.default)(t.target).data("modal_dialog");History.busy()||History.pushState({modal_url:n.remote_url},null,e().hash("").toString())}),(0,i.default)(window).on("modal_dialog:remote_dialog_loaded",function(e){var t=(0,i.default)(e.target),n=t.data("modal_dialog").$elem.find("div[data-backing_id]").data("backing_id"),r=(0,i.default)('tr[data-backing_id="'+n+'"]'),a=r.prev("tr"),o=r.next("tr"),s=t.find(".NS_backers__info");o.length&&(0,i.default)('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),v(),(0,u.track)("Backer Info Modal Next",{event_type:"click"})}).prependTo(s.find(".controls")),a.length&&(0,i.default)('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),_(),(0,u.track)("Backer Info Modal Previous",{event_type:"click"})}).prependTo(s.find(".controls"))}),(0,i.default)(window).on("closed.modal_dialog",function(){if(!p){var e=i.default.param(t.get("params")),n=h.clone();History.pushState({params:e},null,n.query(e).hash("").toString())}}),(0,i.default)(window).on("keydown",function(e){if(!(0,i.default)(e.target).is(":input"))switch(e.keyCode){case s.J:case s.RIGHT:v(),(0,u.track)("Backer Info Modal Next",{event_type:"keyboard"});break;case s.K:case s.LEFT:_(),(0,u.track)("Backer Info Modal Previous",{event_type:"keyboard"});break;case s.ENTER:(0,i.default)(".NS_backers__info:visible").trigger("close").length||(0,i.default)("#main tbody tr.selected td.backer a").click();break;case s.ESC:(0,i.default)(".NS_backers__info:visible").trigger("close")}}),(0,i.default)(window).on("message_thread_read",function(e,t){(0,i.default)("#backer_report_backing_"+t.backing.id+" .notification-indicator").removeClass("notification-indicator--active")}),(0,i.default)(window).on("message_thread_unread",function(e,t){(0,i.default)("#backer_report_backing_"+t.backing.id+" .notification-indicator").addClass("notification-indicator--active")}),(0,i.default)(".NS_message_batches__new").livequery(function(){var e=(0,i.default)(".NS_message_batches__new"),t=e.find("form");t.find("textarea").validates_presence(),t.on("submit",function(n){n.preventDefault(),t.validate()&&((0,u.track)("Message Tier Sent"),i.default.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(){e.find("textarea").val(""),t.hide(),e.find(".success").show()},error:function(e){(0,a.default)({error:e.statusText})}}))})}),t.set((0,c.default)(window.backers)),t.change_params(h.query()),window.backers=t}function g(e){e.is(".selected")||((0,i.default)("#main tbody tr").removeClass("selected"),e.addClass("selected"),p=!0,(0,i.default)(".NS_backers__info:visible").trigger("close").length&&e.find(".backer a").click(),p=!1,e.index()>e.parent().children().length-10&&!t.mobius.paused&&t.mobius.load_next())}function v(){var e=(0,i.default)("#main tbody tr.selected");e.length?g(e.next()):g((0,i.default)("#main tbody tr:first"))}function _(){var e=(0,i.default)("#main tbody tr.selected");e.length?g(e.prev()):g((0,i.default)("#main tbody tr:last"))}})},uVjx:function(e,t,n){n("l/Rs"),n("l/Rs");(function(e){var t,n=0,i=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(n){var i,r,a;for(a=0;null!=(r=n[a]);a++)try{(i=e._data(r,"events"))&&i.remove&&e(r).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var r,a,o,s,l={},d=t.split(".")[0];return t=t.split(".")[1],r=d+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[d]=e[d]||{},a=e[d][t],o=e[d][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,function(t,i){var r,a;e.isFunction(i)?l[t]=(r=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)},function(){var e,t=this._super,n=this._superApply;return this._super=r,this._superApply=a,e=i.apply(this,arguments),this._super=t,this._superApply=n,e}):l[t]=i}),o.prototype=e.widget.extend(s,{widgetEventPrefix:a&&s.widgetEventPrefix||t},l,{constructor:o,namespace:d,widgetName:t,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete a._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,a=i.call(arguments,1),o=0,s=a.length;o<s;o++)for(n in a[o])r=a[o][n],a[o].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,s=i.call(arguments,1),l=this;return o?this.each(function(){var n,i=e.data(this,r);return"instance"===a?(l=i,!1):i?e.isFunction(i[a])&&"_"!==a.charAt(0)?(n=i[a].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):(s.length&&(a=e.widget.extend.apply(null,[a].concat(s))),this.each(function(){var t=e.data(this,r);t?(t.option(a||{}),t._init&&t._init()):e.data(this,r,new n(a,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(r=o[t]=e.widget.extend({},this.options[t]),a=0;a<i.length-1;a++)r[i[a]]=r[i[a]]||{},r=r[i[a]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var r,a=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,o){function s(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+a.eventNamespace,c=l[2];c?r.delegate(c,d,s):n.bind(d,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,a,o=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,a){"string"==typeof r&&(r={effect:r});var o,s=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=a,r.delay&&i.delay(r.delay),o&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,a):i.queue(function(n){e(this)[t](),a&&a.call(i[0]),n()})}});e.widget})(n("l/Rs"))},uWqJ:function(e,t,n){"use strict";var i=g(n("MA+5")),r=g(n("l/Rs")),a=g(n("shXp")),o=n("ZG75"),s=g(n("WoYN")),l=g(n("Eaq5")),d=g(n("8NzR")),c=g(n("L3hI")),u=n("Tvaj"),f=n("4RZc"),h=g(n("hBlz")),p=n("Z6GA"),m=g(n("8lQX"));function g(e){return e&&e.__esModule?e:{default:e}}n("452R"),n("v6Dq"),n("mjY1"),(0,d.default)("#backings_index",function(e){function t(){return(0,h.default)(History.getState().url)}var n,d=!1,g=t();function v(e){return e.closest("section").data("collection_state")}function _(e){return e.closest("section").find("table")}function y(t){e.find("#backing_"+t.get("id")).each(function(){var e=(0,r.default)(this),n=v(e);e.replaceWith(b(t,n))})}function b(e,t){return(0,i.default)("backings/_row_"+t,(0,s.default)(r.default.extend({},e.get())))}function w(e){return _(e).hasClass("table_loading")}function E(e){w(e)||e.is(".selected")||((0,r.default)("#main tbody tr").removeClass("selected"),e.addClass("selected"),d=!0,(0,r.default)(".NS_backings__info:visible").trigger("close").length&&e.find("a.more").click(),d=!1)}function C(){var e=(0,r.default)("#main tbody tr.selected");e.length?E(e.next()):E((0,r.default)("#main tbody tr:first"))}function k(){var e=(0,r.default)("#main tbody tr.selected");e.length?E(e.prev()):E((0,r.default)("#main tbody tr:last"))}e.on("backer_completed",function(e,t,n){var i=o.Backing.find(t);i.set("backer_completed_at",n),y(i)});var S=!1;e.on("click","a.backer_completed_at",function(e){e.preventDefault(),setTimeout(function(){S=!0,e.target.checked=!e.target.checked,(0,r.default)(e.target).change()},0)}),e.on("change","a.backer_completed_at input.checkbox",function(e){if(S){S=!1;var t=(0,r.default)(this),n=t.closest("a"),i=t.is(":checked");w(t)||r.default.ajax({url:n.attr("href"),data:{"backing[backer_completed]":i},dataType:"json",type:"PUT",success:function(e){e.backing&&n.trigger("backer_completed",[e.backing.id,e.backing.backer_completed_at])}})}else e.preventDefault()}),e.on("message_sent",function(e,t,n){var i=o.Backing.find(t);i.set("messages",{count:n,last_activity_at:(0,m.default)(new Date)}),y(i)}),e.on("click","#main table tbody tr",function(e){var t=(0,r.default)(this),n=(0,r.default)(e.target);w(t)?e.preventDefault():n.closest("input, label, a.more, a.messages").length>0||((0,f.track)("Backings Show Modal",{how_triggered:"row"}),t.find("td a.more").click())}),e.on("click","a.more span.ss-icon",function(){(0,f.track)("Backings Show Modal",{how_triggered:"icon"})}),e.on("click","table th.sortable",function(e){var t=(0,r.default)(this),i=t.closest("table"),s=v(t),l=t.hasClass("asc")?"asc":"desc",d=Math.min(i.find("tbody tr").length,150),u=t.data("sort"),p=(0,h.default)(i.data("url"));e.preventDefault(),(0,f.track)("Backings "+c.default.capitalize(s)+" Sort",{selected_sort:u}),p.addSearch({direction:l,sort:u,page:1,per_page:d}),n&&n.abort(),n=r.default.ajax({url:p.toString(),dataType:"json",beforeSend:function(){_(t).addClass("table_loading")},complete:function(){_(t).removeClass("table_loading"),n=void 0},success:function(e){var n;n=a.default.map(e.backings,function(e){return b(new o.Backing(e),s)}),i.find("tbody").html(n),i.data({sort:u,direction:l}),i.find("th").not(t).removeClass("active asc").addClass("desc"),t.addClass("active").removeClass(l).addClass("desc"===l?"asc":"desc"),i.find("tbody tr").length<e.total&&t.closest("section").find("a.show_more_backings").show()}})}),(0,r.default)(document).on("click","a.show_more_backings",function(e){var t=(0,r.default)(this),i=_(t),s=v(t),l=i.data("sort");e.preventDefault(),w(t)||((0,f.track)("Backings "+c.default.capitalize(s)+" More",{selected_sort:l}),n&&n.abort(),n=r.default.ajax({url:i.data("url"),data:{direction:i.data("direction"),page:Math.floor(i.find("tbody tr").length/150)+1,per_page:150,sort:l},beforeSend:function(){t.addClass("loading")},complete:function(){t.removeClass("loading"),n=void 0},success:function(e){var n,r=v(t),s=i.find("tbody tr").length,l=0;s<150&&(l=s),n=a.default.chain(e.backings).rest(l).map(function(e){return b(new o.Backing(e),r)}).value(),i.find("tbody").append(n),i.find("tbody tr").length>=e.total&&t.hide()}}))}),(0,r.default)(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.modal_url?r.default.open_remote_modal_dialog(e.modal_url):(d=!0,(0,r.default)(".modal_dialog:has(.NS_backings__info):visible").trigger("close"),d=!1))}),e.on("click","#main table tbody tr a.remote_modal_dialog",function(){E((0,r.default)(this).closest("tr"))}),(0,r.default)(window).on("modal_dialog:opened",function(e){var n=(0,r.default)(e.target).data("modal_dialog");History.busy()||History.pushState({modal_url:n.remote_url},null,t().hash("").toString())}),(0,r.default)(window).on("modal_dialog:remote_dialog_loaded",function(t){var n=(0,r.default)(t.target),i=n.data("modal_dialog").$elem.find("div[data-backing_id]").data("backing_id"),a=e.find("#backing_"+i),o=a.prev("tr"),s=a.next("tr"),l=n.find(".NS_backings__info");s.length&&(0,r.default)('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),C()}).prependTo(l.find(".controls")),o.length&&(0,r.default)('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),k()}).prependTo(l.find(".controls"))}),(0,r.default)(window).on("closed.modal_dialog",function(){if(!d){var e=g.clone();History.pushState(null,null,e.hash("").toString())}}),(0,r.default)(window).on("keydown",function(e){if(!(0,r.default)(e.target).is(":input"))switch(e.keyCode){case u.J:case u.RIGHT:C();break;case u.K:case u.LEFT:k();break;case u.ENTER:(0,r.default)(".NS_backings__info:visible").trigger("close").length||(0,r.default)("#main tbody tr.selected td a.more").click()}}),a.default.each(["active","collected","uncollected"],function(e){var t=JSON.parse((0,p.unescape)(window[e]));t.backings=a.default.map(t.backings,function(e){return new o.Backing(e)}),(0,r.default)("#"+e).append(function(e,t){return(0,i.default)("backings/_"+t,(0,l.default)(r.default.extend({},e)),["backings/_row_"+t])}(t,e))})})},ubEc:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=n("8Ml/"),o=s(n("shXp"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body.country_signups",function(){(0,i.default)("input#signup_email").validates_presence().validates_email(),(0,i.default)("form#new_signup").on("submit",function(e){var t=(0,i.default)(this);if(e.preventDefault(),!t.validate())return(0,i.default)("#signup_email").addClass("errored"),(0,i.default)(".error_message").show(),!1;i.default.ajax({url:t.attr("action"),data:t.serialize(),type:t.attr("method"),dataType:"json",success:function(){(0,i.default)(".error_message").hide(),(0,i.default)(".submitting").hide(),(0,i.default)(".submitted").show()},error:function(){t.find("#signup_email").addClass("errored")}})}),(0,a.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=o.default.debounce(a.trackProjectCards,150)})},ucfE:function(e,t,n){"use strict";var i=a(n("l/Rs")),r=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,r.default)(".js-could-have-post-media",function(e){e.on("click",".js-post-media-link",function(e){var t=(0,i.default)(".js-post-media-content"),n=t.find(".js-image"),r=t.find(".js-link");n.html(""),r.text(""),n.append('<img src="'+(0,i.default)(this).data("large-image")+'" />'),r.text((0,i.default)(this).data("post-title")),r.attr("href",(0,i.default)(this).data("post-link")),(0,i.default)("#post_media").modal_dialog(),e.preventDefault()})})},"ug+k":function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("OH6m"),(0,a.default)(function(){(0,a.default)(document).tipsy({gravity:"s",html:!0,live:"a.tip",fade:!0}),(0,a.default)(document).tipsy({gravity:"n",html:!0,live:".tipsy_n",fade:!0}),(0,a.default)(document).tipsy({gravity:"s",html:!0,live:".tipsy_s",fade:!0}),(0,a.default)(document).tipsy({gravity:"se",html:!0,live:".tipsy_se",fade:!0})})},uxlr:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=n("4RZc"),o=s(n("hBlz"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#events_filmfest2014",function(){var e=document.location.protocol+"//",t=function(t,n){var r,a=(0,i.default)('iframe[src*="embed.vhx.tv"]');void 0===n&&(n=null),r=JSON.stringify({method:t,params:n}),a.length&&a[0].contentWindow.postMessage(r,e+"embed.vhx.tv")},n=function(){t("play")},r=function(){t("pause")};(0,i.default)(window).on("message",function(t){if(t.originalEvent.origin===e+"embed.vhx.tv")switch(JSON.parse(t.originalEvent.data).event_type){case"start":(0,a.track)("2014 Kickstarter Film Festival Start Program");break;case"play":(0,a.track)("2014 Kickstarter Film Festival Play Program");break;case"pause":(0,a.track)("2014 Kickstarter Film Festival Pause Program");break;case"finish":(0,a.track)("2014 Kickstarter Film Festival Finish Program");break;case"fullscreen":(0,a.track)("2014 Kickstarter Film Festival Fullscreen Program")}}),(0,a.trackLinks)(".download_booklet","2014 Kickstarter Film Festival Download Booklet"),(0,i.default)(".js-open_video").on("click",function(e){var t=(0,i.default)(this).closest("section");t.find(".js-content").fadeOut(600,function(){t.closest("section").find(".js-video").fadeIn(function(){var e=(0,o.default)(),t=(0,i.default)('<iframe width="100%" height="auto" frameborder="0" webkitallowfullscreen="" src="//embed.vhx.tv/videos/8138?parent_url='+e.protocol()+"://"+e.host()+'" mozallowfullscreen="" id="host_player" class="video" allowfullscreen=""></iframe>');(0,i.default)(this).find(".videowrapper").html(t),t.on("load",function(){n()})})}),e.preventDefault()}),(0,i.default)(".js-video_close").on("click",function(e){var t=(0,i.default)(this).closest("section");t.find(".js-video").fadeOut(600,function(){t.closest("section").find(".js-content").fadeIn()}),r(),e.preventDefault()})})},v4vi:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(t,n,i){var r,a,o,s,l={},d=t.split(".")[0];t=t.split(".")[1],r=d+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[d]=e[d]||{},a=e[d][t],o=e[d][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,function(t,i){var r,a;e.isFunction(i)?l[t]=(r=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)},function(){var e,t=this._super,n=this._superApply;return this._super=r,this._superApply=a,e=i.apply(this,arguments),this._super=t,this._superApply=n,e}):l[t]=i}),o.prototype=e.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix:t},l,{constructor:o,namespace:d,widgetName:t,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete a._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(t){for(var n,r,a=i.call(arguments,1),o=0,s=a.length;o<s;o++)for(n in a[o])r=a[o][n],a[o].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,s=i.call(arguments,1),l=this;return a=!o&&s.length?e.widget.extend.apply(null,[a].concat(s)):a,o?this.each(function(){var n,i=e.data(this,r);return i?e.isFunction(i[a])&&"_"!==a.charAt(0)?(n=i[a].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(a||{})._init():e.data(this,r,new n(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(r=o[t]=e.widget.extend({},this.options[t]),a=0;a<i.length-1;a++)r[i[a]]=r[i[a]]||{},r=r[i[a]];if(t=i.pop(),void 0===n)return void 0===r[t]?null:r[t];r[t]=n}else{if(void 0===n)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,a=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,o){function s(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),d=l[1]+a.eventNamespace,c=l[2];c?r.delegate(c,d,s):n.bind(d,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,a,o=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,a){"string"==typeof r&&(r={effect:r});var o,s=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=a,r.delay&&i.delay(r.delay),o&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,a):i.queue(function(n){e(this)[t](),a&&a.call(i[0]),n()})}})}(i)},v6Dq:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.document,i=e.setTimeout||i,r=e.clearTimeout||r,a=e.setInterval||a,o=e.History=e.History||{};if(void 0!==o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(void 0!==o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){return e===o.getHashByIndex()},o.isHashEqual=function(e,t){return(e=encodeURIComponent(e).replace(/%25/g,"%"))===(t=encodeURIComponent(t).replace(/%25/g,"%"))},o.saveHash=function(e){return!o.isLastHash(e)&&(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){return void 0===e?o.savedHashes[o.savedHashes.length-1]:e<0?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var i,r=o.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=i,!0},o.discardedState=function(e){var t=o.getHashByState(e);return o.discardedStates[t]||!1},o.discardedHash=function(e){return o.discardedHashes[e]||!1},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t,i,r,s,l="",d=Boolean(o.getHash());return o.isInternetExplorer()?(t="historyjs-iframe",(i=n.createElement("iframe")).setAttribute("id",t),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),r="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var t=o.getHash(),n=o.getHash(i.contentWindow.document);return t!==l?(l=t,n!==t&&(r=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(t)),o.Adapter.trigger(e,"hashchange")):n!==r&&(r=n,d&&""===n?o.back():o.setHash(n,!1)),s=!1,!0}):o.checkerFunction=function(){var t=o.getHash()||"";return t!==l&&(l=t,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(a(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n,i,r=t&&t.newURL||o.getLocationHref(),a=o.getHashByUrl(r);return o.isLastHash(a)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(a),a&&o.isTraditionalAnchor(a)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(n=o.extractState(o.getFullUrl(a||o.getLocationHref()),!0),o.isLastSavedState(n)?(o.busy(!1),!1):(o.getHashByState(n),(i=o.discardedState(n))?(o.getHashByIndex(-2)===o.getHashByState(i.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(n.data,n.title,encodeURI(n.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),l=o.getState(!1),d=o.getHashByState(l),c=o.getHash(),u=o.expectedStateId==a.id;return o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),s===d?(o.busy(!1),!1):(o.saveState(a),u||o.Adapter.trigger(e,"statechange"),o.isHashEqual(s,c)||o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))||o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),l=o.getState(!1),d=o.getHashByState(l),c=o.getStateByIndex(-2);return o.discardState(l,a,c),s===d?(o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),o.saveState(a),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(a.data,a.title,a.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},void 0!==o.init&&o.init()}}(window)},vWMs:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("9VV1"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("#admin-menu",function(e){var t=function(t,n){return i.default.ajax({url:t,data:{project:{ksr_rating:n}},type:"PUT",dataType:"JSON"}).then(function(){e.find(".rating .ss-star").removeClass("selected"),e.find(".rating .ss-star").slice(0,n).addClass("selected")})};(0,i.default)(document).on("keydown",function(n){var i,r;n.ctrlKey&&(n.which>=49&&n.which<=53&&(i=n.which-48,r=e.find(".rating a")[0].href,t(r,i).then(function(){(0,a.default)({info:i+""})})))}),e.find(".rating a").on("click",function(n){n.preventDefault(),t(this.href,(0,i.default)(this).data("rating")),e.trigger("ksr_admin:nav_open")})})},vf3z:function(e,t,n){"use strict";var i=n("l/Rs");n("l/Rs");!function(e){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e(document).on("click","a[data-method]",function(i){var r=e(this),a=r.prop("href"),o=r.data("method"),s=r.prop("target"),l=e('<form method="post" action="'+a+'"></form>'),d='<input name="_method" value="'+o+'" type="hidden" />';void 0!==n&&void 0!==t&&(d+='<input name="'+n+'" value="'+t+'" type="hidden" />'),s&&l.prop("target",s),l.hide().append(d).appendTo("body"),l[0].submit(),i.preventDefault()}),t&&e.ajaxPrefilter(function(e,n,i){e.crossDomain||i.setRequestHeader("X-CSRF-Token",t)})}(i)},w02R:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("8NzR")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("#help_stats",function(){var e=(0,i.default)(".bubble");function t(e){e.find(".category_row").slideToggle("fast"),e.find(".default_sort").toggleClass("tablesorter-headerDesc"),e.closest("table").toggleClass("collapsed"),e.find(".arrow").toggleClass("flipped"),e.hasClass("collapsed")?(e.find(".details").text(a.default.t("onloads.views.help.stats.See_Categories")),ga("send","event","Help Stats","Collapsed",e.attr("name"))):(e.find(".details").text(a.default.t("onloads.views.help.stats.Hide_Categories")),ga("send","event","Help Stats","Expanded",e.attr("name")))}function n(){e.fadeOut("fast")}function r(t,r,a){var o,s,l,d,c,u;void 0!==a?(e.find(".content").html('<span class="num date">'+r+"</span>"+a),o=(0,i.default)(t),s=o.offset(),l=o.closest("table, .explanation").offset(),d=e.width(),c=e.height(),u=parseInt(e.css("padding-right").replace("px",""),10),o.closest(".explanation").length&&(s.left=s.left-50),e.css({position:"absolute",left:s.left-d-(u-1)+90,top:l.top-c-20}),e.find(".nipple").css({left:d+5,top:c+12,position:"absolute"}),e.fadeIn("fast")):n()}(0,i.default)(".toggle_details").click(function(){t((0,i.default)(this).closest("table"))}),(0,i.default)("th").click(function(){var e=(0,i.default)(this).closest("table");e.hasClass("collapsed")&&t(e)}),(0,i.default)("td, th").hover(function(){var e=(0,i.default)(this).closest("table").find("th").eq((0,i.default)(this).index()),t=e.data("header-explanation");r(this,e.html().replace("<br>"," "),t)}),(0,i.default)(".explanation").hover(function(){var e=(0,i.default)(this),t=e.find("[data-header-explanation]"),n=t.data("header-explanation");r(t,e.find("p").text(),n)}),(0,i.default)("table, .explanation").mouseleave(function(){n()})})},w4by:function(e,t,n){var i=n("6Zhv"),r=36e5;e.exports=function(e,t){var n=Number(t);return i(e,n*r)}},w6g1:function(e,t,n){n("l/Rs"),n("l/Rs");(function(e,t){e.fn.spin=function(n,i){return this.each(function(){var r=e(this),a=r.data();a.spinner&&(a.spinner.stop(),delete a.spinner),!1!==n&&(n=e.extend({color:i||r.css("color")},e.fn.spin.presets[n]||n),a.spinner=new t(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}})(n("l/Rs"),n("lQ6a"))},wGdM:function(e,t,n){"use strict";var i=h(n("l/Rs")),r=h(n("shXp")),a=h(n("+bVi")),o=h(n("L3hI")),s=h(n("wmCY")),l=h(n("hBlz"));n("M99n"),n("aTdG");var d,c=h(n("YC2V")),u=h(n("c5nH")),f=n("yloT");function h(e){return e&&e.__esModule?e:{default:e}}(d=function(e,t){this.reward_data=t,this.id=this.reward_data.id||this.constants.NO_REWARD_ID,this.shipping_rules=this.reward_data.shipping_rules||[],this.pledge_url=t.urls?new l.default(t.urls.api.reward):void 0,this.shipping_enabled=this.reward_data.shipping_enabled||!1,this.index=t.index,this.closed_height=t.closed_height,this.prefilledNoRewardVal=e.data("prefillAmount");var n=e.find(".input__currency-conversion");this.el={$rw:e,$select:e.find("select"),$form:e.find("form"),$form_wrapper:e.find(".js-form-wrapper"),$description:e.find("div.pledge__reward-description"),$truncate_link:e.find("a.pledge__reward-description-toggle"),$truncate_link_span:e.find("a.pledge__reward-description-toggle span"),$pledge_input:e.find('input[name="backing[amount]"]'),$radio:e.find(".js-pledge-radio"),$submit:e.find(".js-reward-continue-button"),$continueAndApplePayButtons:e.find(".js-pledge-button"),$input_currency:e.find(".input__currency-conversion")},this.el.$pledge_input.on("keyup",function(){var e=(0,f.stringToMoney)((0,i.default)(this).val()),t=isNaN(e)?0:e,r=parseFloat(u.default.data.fx_rate,10),a=u.default.data.usd_type;if(isNaN(r))n.addClass("hide");else{var l=o.default.money(t*r,{currency:u.default.data.current_currency,usd_type:a,precision:t<=2?2:0});n.text(s.default.t("library.controllers.reward_controller.About")+l)}}),this.state={is_selected:!1,is_truncated:!1,is_truncate_worthy:this.el.$description.height()>=this.constants.TRUNCATE_HEIGHT,submit_halted:!1,is_shipping_populated:!!this.shipping_rules.length},e.data("reward",this),this.el.$form_wrapper.aria_set_hidden()}).prototype.constants=Object.freeze({MAX_FETCH_RETRIES:3,FETCH_TIMEOUT:1e3,TRUNCATE_HEIGHT:80,TRUNCATE_LINK_TEXT:s.default.t("library.controllers.reward_controller.Read_More"),UNTRUNCATE_LINK_TEXT:s.default.t("library.controllers.reward_controller.Less"),NO_REWARD_ID:0}),d.prototype.toggle_description_truncation=function(){var e=this.el.$truncate_link.text().trim();this.state.is_truncate_worthy||this.state.is_truncated?(this.state.is_truncated=!this.state.is_truncated,this.el.$description.toggleClass("pledge__reward-description--truncated"),this.el.$description.toggleClass("pledge__reward-description--expanded"),this.el.$truncate_link_span.text(e===this.constants.TRUNCATE_LINK_TEXT?this.constants.UNTRUNCATE_LINK_TEXT:this.constants.TRUNCATE_LINK_TEXT),this.el.$truncate_link.toggleClass("more")):this.el.$truncate_link.addClass("hide")},d.prototype.hide_truncation_link=function(){this.el.$truncate_link.addClass("hide")},d.prototype.show_truncation_link=function(){this.el.$truncate_link.removeClass("hide")},d.prototype.toggle_pledge_form=function(){if(this.state.is_selected=!this.state.is_selected,this.toggle_pledge_form_classes(),this.el.$radio.length&&this.toggle_checkout_elements(),this.state.is_selected){this.inject_csrf_token(),this.handle_shipping_rules();var e=(0,i.default)(document).scrollTop();this.preselect_shipping_country(),this.focus_shipping_select(),(0,i.default)(document).scrollTop(e),this.id===this.constants.NO_REWARD_ID&&((0,i.default)(".js-no-reward-form-input").val()||(0,i.default)(".js-no-reward-form-input").val(this.prefilledNoRewardVal).select())}else this.el.$form_wrapper.aria_deactivate_keyboard_tabindex().aria_set_hidden()},d.prototype.toggle_pledge_form_classes=function(){this.el.$rw.toggleClass("pledge--available").toggleClass("pledge--selected"),this.el.$form_wrapper.toggleClass("pledge__checkout--is-visible")},d.prototype.reset_pledge_form=function(){this.el.$pledge_input.hasClass("error")&&(this.el.$pledge_input.removeClass("error"),this.el.$submit.removeClass("disabled"),this.update_pledge_total())},d.prototype.toggle_checkout_elements=function(){this.state.is_selected?this.el.$radio.prop("checked")||(this.el.$radio.prop("checked",!0),this.el.$radio.trigger("change")):this.el.$radio.prop("checked",!1)},d.prototype.handle_shipping_rules=function(){!this.state.is_shipping_populated&&this.shipping_enabled&&(this.show_loader(),this.shipping_rules.length?this.render_reward_select():this.fetch_reward_shipping_rules())},d.prototype.fetch_reward_shipping_rules=function(e){e=e||0,i.default.ajax({url:this.pledge_url,type:"get",dataType:"json",timeout:this.constants.FETCH_TIMEOUT,success:function(e){this.shipping_rules=e.shipping_rules,this.render_reward_select()}.bind(this),error:function(t,n){"timeout"===n&&e<this.constants.MAX_FETCH_RETRIES&&this.fetch_reward_shipping_rules(e+1)}.bind(this)})},d.prototype.show_loader=function(){this.el.$submit.addClass("is-loading").prop("disabled",!0)},d.prototype.hide_loader=function(e){setTimeout(function(){this.el.$submit.removeClass("is-loading").prop("disabled",!1)}.bind(this),e)},d.prototype.render_reward_select=function(){var e={select:this.el.$select,reward:this};this.state.is_selected&&setTimeout(function(){(0,i.default)(document).trigger("render_shipping_select",e),this.state.is_shipping_populated=!0,this.hide_loader(300)}.bind(this),this.transition_duration())},d.prototype.validate=function(){var e=this.is_country_selected(),t=this.is_pledge_high_enough();return this.shipping_enabled&&!e?this.throw_country_error():this.reset_country_error(),t?this.reset_pledge_error():this.throw_pledge_error(),!(!e&&this.shipping_enabled||!t||(this.enable_submit_button(),0))},d.prototype.transition_duration=function(){if(!i.default.support.transitionEvent())return 0;var e=this.el.$form_wrapper.css("transition-duration");return/ms$/.test(e)?parseFloat(e,10)||0:1e3*parseFloat(e,10)||0},d.prototype.focus_shipping_select=function(){this.el.$form_wrapper.aria_activate_keyboard_tabindex().aria_set_visible(),a.default["not-mobile"]?(this.el.$pledge_input.focus(),this.el.$pledge_input.val(this.el.$pledge_input.val())):this.el.$submit.focus()},d.prototype.inject_csrf_token=function(){var e=(0,i.default)("meta[name=csrf-param]").attr("content"),t=(0,i.default)("meta[name=csrf-token]").attr("content");this.el.$form.find("input[name="+e+"]").length||this.el.$form.append((0,i.default)("<input />",{type:"hidden",name:e,value:t}))},d.prototype.preselect_shipping_country=function(){this.el.$select.val()||this.el.$select.val(c.default.get("location_id"))},d.prototype.update_pledge_total=function(e){var t;t=e&&e.amount?e.amount:this.reward_data.minimum;var n=parseInt(this.el.$select.val(),10),i=this.get_shipping_rule(n),r=t+(i.length?parseFloat(i[0].cost):0),a=o.default.format_number(r,{precision:0});if(this.id===this.constants.NO_REWARD_ID)this.el.$pledge_input.val("");else{this.el.$pledge_input.val(a);var l=(0,f.stringToMoney)(this.el.$pledge_input.val()),d=isNaN(l)?0:l,c=parseFloat(u.default.data.fx_rate,10),h=u.default.data.usd_type;if(isNaN(c))this.el.$input_currency.addClass("hide");else{var p=o.default.money(d*c,{currency:u.default.data.current_currency,usd_type:h,precision:0});this.el.$input_currency.text(s.default.t("library.controllers.reward_controller.About")+p)}}},d.prototype.get_shipping_rule=function(e){return r.default.filter(this.shipping_rules,function(t){return t.location_id===e})},d.prototype.get_current_pledge_amount=function(){return(0,f.stringToMoney)(this.el.$pledge_input.val())},d.prototype.is_country_selected=function(){return!!this.el.$select.val()},d.prototype.throw_country_error=function(){this.el.$select.parent().addClass("error"),this.disable_submit_button()},d.prototype.reset_country_error=function(){this.el.$select.parent().removeClass("error")},d.prototype.is_pledge_high_enough=function(){var e,t=this.get_current_pledge_amount();if(this.shipping_rules.length){var n=parseInt(this.el.$select.val(),10),i=this.get_shipping_rule(n),r=i.length?parseFloat(i[0].cost):0;e=this.reward_data.minimum+r}else e=this.reward_data.minimum;return t>=e},d.prototype.reset_pledge_error=function(){this.el.$pledge_input.removeClass("error")},d.prototype.throw_pledge_error=function(){this.el.$pledge_input.addClass("error"),this.disable_submit_button()},d.prototype.disable_submit_button=function(){this.el.$submit.addClass("disabled")},d.prototype.enable_submit_button=function(){this.el.$submit.removeClass("disabled")},window.RewardController=d},wJt9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlaggingWorkflow=void 0;var i,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n("GiK3"),o=(i=a)&&i.__esModule?i:{default:i},s=n("JIXV"),l=n("J1uj"),d=n("1B3E"),c=n("7fY0"),u=n("Z5jf"),f=n("7e+d"),h=n("Gks7");var p=function(e){return"project_page.flagging."+e},m=function(e){return(0,u.boundT)(p(e))},g=[{label:m("dropdown.prohibited_items"),value:"PROHIBITED_ITEMS",placeholder:m("dropdown.pi_placeholder")},{label:m("dropdown.charity"),value:"CHARITY",placeholder:m("dropdown.charity_placeholder")},{label:m("dropdown.resale"),value:"RESALE",placeholder:m("dropdown.resale_placeholder")},{label:m("dropdown.false_claims"),value:"FALSE_CLAIMS",placeholder:m("dropdown.false_claims_placeholder")},{label:m("dropdown.misrep_support"),value:"MISREP_SUPPORT",placeholder:m("dropdown.misrep_placeholder")},{label:m("dropdown.not_project"),value:"NOT_PROJECT",placeholder:m("dropdown.not_project_placeholder")}],v={name:"blue","primary-light":"blue","primary-dark":"blue","primary-accent":"ksr-green-400"};t.FlaggingWorkflow=function(e){var t=e.state,n=e.dispatch,i=e.DropdownComponent;return t.form.flaggingFormStatus===s.FLAGGING_CREATED?o.default.createElement("div",null,m("Flagging_success_message")):o.default.createElement(l.RadioGroup,{id:"project-flagging-radio-group",radioGroupOptions:function(e,t){var n,a=e.container,s=e.dropdown,l=e.form,v=a.hasBackedProject,_=a.projectState,y=(n=s.currentIndex,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.map(function(e){return null!==n?g[n][e]:null})})("value","placeholder"),b=r(y,2),w=b[0],E=b[1],C=void 0;return C=(0,h.showPostFundingOption)(v,_)?[{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:m("Post_funding_issues_heading"),labelBody:m("Post_funding_issues_body")}),expandedComponent:o.default.createElement("div",null,o.default.createElement(d.FlaggingForm,{kind:"POST_FUNDING_ISSUES",state:l,dispatch:t,placeholder:m("Post_funding_placeholder")})),value:"post-funding"}]:[],[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(C),[{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:o.default.createElement(u.BoundTranslate,{i18nKey:p("Our_rules_label_heading"),ourRulesLink:f.ourRulesLink}),labelBody:o.default.createElement(u.BoundTranslate,{i18nKey:p("Our_rules_label_body"),prohibitedItemsLink:f.prohibitedItemsLink})}),expandedComponent:o.default.createElement("div",null,o.default.createElement(i,{state:s,dispatch:t,options:g,placeholder:m("dropdown.Select_an_option"),size:"x-small"}),o.default.createElement(d.FlaggingForm,{kind:w,state:l,dispatch:t,placeholder:E})),value:"rules"},{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:o.default.createElement(u.BoundTranslate,{i18nKey:p("Community_guidelines_label_heading"),communityGuidelinesLink:f.communityGuidelinesLink}),labelBody:m("Community_guidelines_label_body")}),expandedComponent:o.default.createElement("div",null,o.default.createElement(d.FlaggingForm,{kind:"GUIDELINES_VIOLATION",state:l,dispatch:t,placeholder:m("Community_guidelines_placeholder")})),value:"guidelines"},{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:m("Intellect_prop_label_heading"),labelBody:m("Intellect_prop_label_body")}),expandedComponent:o.default.createElement("div",null,o.default.createElement("p",null,o.default.createElement(u.BoundTranslate,{i18nKey:p("Intellect_prop_expanded"),copyrightPolicyLink:f.copyrightPolicyLink,trademarkPolicyLink:f.trademarkPolicyLink}))),value:"ip"}])}(t,n),theme:v,state:t.radioButtons,dispatch:n})}},wWf7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initiateWatchingUpdate=function(e){return{type:"INITIATE_WATCHING_UPDATE",project:e}},t.updateField=function(e,t){return{type:"FIELD_CHANGED",field:e,value:t}},t.submitForm=function(){return{type:"FORM_SUBMITTED"}},t.touchField=function(e){return{type:"TOUCH_FIELD",field:e}},t.touchAllFields=function(){return{type:"TOUCH_ALL_FIELDS"}},t.updateWatch=function(){return{type:"WATCHING_UPDATE"}},t.mutationSucceeded=function(e,t){return{type:"WATCHING_UPDATE_SUCCESS",isWatching:e,pid:t}},t.closeAndDontShowModal=function(){return{type:"CONFIRM_MODAL"}},t.exitConfirmModal=function(){return{type:"EXIT_CONFIRM_MODAL"}},t.exitEmailModal=function(){return{type:"EXIT_EMAIL_MODAL"}},t.emailFormError=function(e){return{type:"EMAIL_FORM_ERROR",error:e}},t.requestError=function(e){return{type:"REQUEST_ERROR",error:e}},t.exitLogInModal=function(){return{type:"EXIT_LOGIN_MODAL"}},t.noopAction=function(){return{type:"NOOP"}},t.noopConfirm=function(){return{type:"NOOP_CONFIRM_BUTTON"}}},"wbn/":function(e,t,n){"use strict";var i=m(n("l/Rs")),r=m(n("shXp")),a=m(n("wmCY")),o=m(n("YC2V")),s=m(n("c5nH")),l=m(n("eF8u")),d=m(n("L3hI")),c=m(n("8NzR")),u=n("4RZc"),f=n("I2cB"),h=n("Z6GA"),p=n("yloT");function m(e){return e&&e.__esModule?e:{default:e}}(0,c.default)("body#pledges_edit",function(e){var t=e.find("#confirm-adjust-pledge"),n=e.selector+" form.manage_pledge";if((0,i.default)(n).length){var c,m="",g=["net_amount","shipping_amount","amount"],v=function(){return a.default.t("onloads.views.pledges.edit.No_change")},_=function(){return a.default.t("onloads.views.pledges.edit.No_thanks_I_just_want_to_help_the_project")},y={type:"truncate_zeros",currency:s.default.get("currency")},b={type:"truncate_zeros",currency:"USD"},w=r.default.clone(o.default.get()),E={reward:{$display_title:t.find("#js-pledge__reward-title"),$description:t.find("#js-pledge__reward-description"),$truncate_link:t.find("#js-modal-desc-toggle span"),changed:!1},net_amount:{$old:t.find("#js-confirm-adjust-pledge-amount__old"),$new:t.find("#js-confirm-adjust-pledge-amount__new"),$icon:t.find("#js-pledge__detail-comparison__icon"),$label:t.find("#js-pledge__detail-label__pledge"),labelText:a.default.t("onloads.views.pledges.edit.Pledge_amount"),changed:!1},shipping_amount:{$old:t.find("#js-confirm-adjust-shipping-amount__old"),$new:t.find("#js-confirm-adjust-shipping-amount__new"),$icon:t.find("#js-shipping__detail-comparison__icon"),$label:t.find("#js-pledge__detail-label__shipping"),labelText:a.default.t("onloads.views.pledges.edit.Shipping"),changed:!1},amount:{$old:t.find("#js-confirm-adjust-total-amount__old"),$new:t.find("#js-confirm-adjust-total-amount__new"),$icon:t.find("#js-total__detail-comparison__icon"),$label:t.find("#js-pledge__detail-label__total"),labelText:a.default.t("onloads.views.pledges.edit.Total"),changed:!1},converted_amount:{$container:t.find("#js-confirm-adjust-total-converted-amount"),$new:t.find("#js-confirm-adjust-total-converted-amount__new"),changed:!1}},C=e.hasClass("convert-currency"),k=f.maybe.fromNullable(l.default).chain(function(e){return f.maybe.fromNullable(e.get("location"))}).chain((0,h.maybeProp)("country")).getOrElse(null),S=s.default.get("country")!==k,T=s.default.get("currency_symbol")===a.default.t("number.currency.format.unit"),A=S&&T,R=a.default.t("onloads.views.pledges.edit.in_currency",{currency:s.default.get("currency")});void 0!==o.default&&(o.default.on_change("reward",function(e){E.reward.changed=e.reward.id!==w.reward.id}),o.default.on_change("shipping_amount",function(e){E.shipping_amount.changed=e.shipping_amount!==w.shipping_amount}),o.default.on_change("amount",function(e){E.net_amount.changed=o.default.get("net_amount")!==w.net_amount,E.amount.changed=e.amount!==w.amount})),(0,i.default)(document).on("submit",n,function(e){e.preventDefault(),c=(0,i.default)(e.target),I(),i.default.each(g,function(e,t){x(t)}),C&&function(){var e=E.converted_amount;if(E.amount.changed){var t=o.default.get("amount")*s.default.get("static_usd_rate"),n=d.default.money(t,b);e.$new.html(n),e.$container.removeClass("hide")}else e.$container.addClass("hide")}(),t.modal_dialog().find(".js-confirm-yes").focus(),E.reward.$description.prop("scrollHeight")<80?E.reward.$truncate_link.parent().addClass("hide"):E.reward.$truncate_link.parent().removeClass("hide")}),(0,i.default)(".flash-error").livequery(function(){var e,t=(0,p.stringToMoney)((0,i.default)(".text#backing_amount").attr("value"));e=void 0!==(0,i.default)(".radio:checked").attr("alt")?(0,p.stringToMoney)((0,i.default)(".radio:checked").attr("alt")):null,(0,u.track)("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:(0,i.default)(this).text(),pledge_input_amount:parseInt(t,10)})}),(0,i.default)(document).on("click","body#pledges_edit #js-modal-desc-toggle",function(e){e.preventDefault(),(0,i.default)(e.currentTarget).hasClass("more")?(E.reward.$description.removeClass("pledge__reward-description--truncated").addClass("pledge__reward-description--expanded"),E.reward.$truncate_link.text("Less"),E.reward.$truncate_link.parent().removeClass("more")):D()}),(0,i.default)(document).on("click","body#pledges_edit .js-confirm-yes",function(e){e.preventDefault(),c.removeClass("submitting-non-ajax"),(0,i.default)(document).off("submit",n),c.submit()}),(0,i.default)(document).on("before_close.modal_dialog",function(){c.removeClass("submitting-non-ajax"),D()})}function x(e){var t=E[e],n=t.labelText;if(t.changed){var i=d.default.money(o.default.get(e),y),r=d.default.money(w[e],y);t.$new.html(i),t.$old.html(r),n+=" "+R,function(e){E[e].$new.removeClass("hide"),m=E[e].$icon.attr("class").replace(/hide/g,""),E[e].$icon.attr("class",m)}(e)}else t.$old.html(v()),function(e){E[e].$new.addClass("hide"),m=E[e].$icon.attr("class")+" hide",E[e].$icon.attr("class",m)}(e);A&&t.$label.html(n)}function I(){var e,t=E.reward;t.changed?(e=o.default.get("reward").id?d.default.paragraphize(o.default.get("reward").description):_(),t.$description.html(e),t.$display_title.html(o.default.get("reward").title_for_backing_tier),E.reward.$description.parent().removeClass("pledge__detail-comparison__old").addClass("pledge__reward-description-wrap")):(t.$description.html(v()),E.reward.$description.parent().addClass("pledge__detail-comparison__old").removeClass("pledge__reward-description-wrap"))}function D(){E.reward.$description.addClass("pledge__reward-description--truncated").removeClass("pledge__reward-description--expanded"),E.reward.$truncate_link.text("More"),E.reward.$truncate_link.parent().addClass("more")}})},wgDV:function(e,t,n){n("l/Rs"),n("l/Rs");!function(){var e={version:"0.9.0",name:"PluginDetect",addPlugin:function(t,n){t&&e.isString(t)&&n&&e.isFunc(n.getVersion)&&(t=t.replace(/\s/g,"").toLowerCase(),e.Plugins[t]=n,e.isDefined(n.getVersionDone)||(n.installed=null,n.version=null,n.version0=null,n.getVersionDone=null,n.pluginName=t))},uniqueName:function(){return e.name+"998"},openTag:"<",hasOwnPROP:{}.constructor.prototype.hasOwnProperty,hasOwn:function(t,n){var i;try{i=e.hasOwnPROP.call(t,n)}catch(e){}return!!i},rgx:{str:/string/i,num:/number/i,fun:/function/i,arr:/array/i},toString:{}.constructor.prototype.toString,isDefined:function(e){return void 0!==e},isArray:function(t){return e.rgx.arr.test(e.toString.call(t))},isString:function(t){return e.rgx.str.test(e.toString.call(t))},isNum:function(t){return e.rgx.num.test(e.toString.call(t))},isStrNum:function(t){return e.isString(t)&&/\d/.test(t)},isFunc:function(t){return e.rgx.fun.test(e.toString.call(t))},getNumRegx:/[\d][\d\.\_,\-]*/,splitNumRegx:/[\.\_,\-]/g,getNum:function(t,n){var i=e.isStrNum(t)?(e.isDefined(n)?new RegExp(n):e.getNumRegx).exec(t):null;return i?i[0]:null},compareNums:function(t,n,i){var r,a,o,s=parseInt;if(e.isStrNum(t)&&e.isStrNum(n)){if(e.isDefined(i)&&i.compareNums)return i.compareNums(t,n);for(r=t.split(e.splitNumRegx),a=n.split(e.splitNumRegx),o=0;o<Math.min(r.length,a.length);o++){if(s(r[o],10)>s(a[o],10))return 1;if(s(r[o],10)<s(a[o],10))return-1}}return 0},formatNum:function(t,n){var i,r;if(!e.isStrNum(t))return null;for(e.isNum(n)||(n=4),n--,r=t.replace(/\s/g,"").split(e.splitNumRegx).concat(["0","0","0","0"]),i=0;i<4;i++)/^(0+)(.+)$/.test(r[i])&&(r[i]=RegExp.$2),(i>n||!/\d/.test(r[i]))&&(r[i]="0");return r.slice(0,4).join(",")},pd:{getPROP:function(e,t,n){try{e&&(n=e[t])}catch(e){}return n},findNavPlugin:function(t){if(t.dbug)return t.dbug;var n=null;if(window.navigator){var i,r,a,o,s,l,d={Find:e.isString(t.find)?new RegExp(t.find,"i"):t.find,Find2:e.isString(t.find2)?new RegExp(t.find2,"i"):t.find2,Avoid:t.avoid?e.isString(t.avoid)?new RegExp(t.avoid,"i"):t.avoid:0,Num:t.num?/\d/:0},c=navigator.mimeTypes,u=navigator.plugins;if(t.mimes&&c)for(o=e.isArray(t.mimes)?[].concat(t.mimes):e.isString(t.mimes)?[t.mimes]:[],i=0;i<o.length;i++){r=0;try{e.isString(o[i])&&/[^\s]/.test(o[i])&&(r=c[o[i]].enabledPlugin)}catch(e){}if(r&&((a=this.findNavPlugin_(r,d)).obj&&(n=a.obj),n&&!e.dbug))return n}if(t.plugins&&u){for(s=e.isArray(t.plugins)?[].concat(t.plugins):e.isString(t.plugins)?[t.plugins]:[],i=0;i<s.length;i++){r=0;try{s[i]&&e.isString(s[i])&&(r=u[s[i]])}catch(e){}if(r&&((a=this.findNavPlugin_(r,d)).obj&&(n=a.obj),n&&!e.dbug))return n}if(l=u.length,e.isNum(l))for(i=0;i<l;i++){r=0;try{r=u[i]}catch(e){}if(r&&((a=this.findNavPlugin_(r,d)).obj&&(n=a.obj),n&&!e.dbug))return n}}}return n},findNavPlugin_:function(e,t){var n=e.description||"",i=e.name||"",r={};return(!t.Find.test(n)||t.Find2&&!t.Find2.test(i)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))&&(!t.Find.test(i)||t.Find2&&!t.Find2.test(n)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))||t.Avoid&&(t.Avoid.test(n)||t.Avoid.test(i))||(r.obj=e),r},getVersionDelimiter:",",findPlugin:function(t){var n,i={status:-3,plugin:0};return e.isString(t)?1==t.length?(this.getVersionDelimiter=t,i):(t=t.toLowerCase().replace(/\s/g,""),(n=e.Plugins[t])&&n.getVersion?(i.plugin=n,i.status=1,i):i):i}},getPluginFileVersion:function(t,n){var i,r,a,o,s=-1;if(!t)return n;if(t.version&&(i=e.getNum(t.version+"")),!i||!n)return n||i||null;for(r=e.formatNum(n).split(e.splitNumRegx),a=e.formatNum(i).split(e.splitNumRegx),o=0;o<r.length;o++){if(s>-1&&o>s&&"0"!=r[o])return n;if(a[o]!=r[o]&&(-1==s&&(s=o),"0"!=r[o]))return n}return i},AXO:function(){var e;try{e=new window.ActiveXObject}catch(e){}return e?null:window.ActiveXObject}(),getAXO:function(t){var n=null;try{n=new e.AXO(t)}catch(t){e.errObj=t}return n&&(e.browser.ActiveXEnabled=!0),n},browser:{detectPlatform:function(){var t,n=window.navigator&&navigator.platform||"";if(e.OS=100,n){var i=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(t=i.length-2;t>=0;t-=2)if(i[t]&&new RegExp(i[t],"i").test(n)){e.OS=i[t+1];break}}},detectIE:function(){var t,n,i,r,a=this,o=document,s=window.navigator&&navigator.userAgent||"";a.ActiveXFilteringEnabled=!1,a.ActiveXEnabled=!1;try{a.ActiveXFilteringEnabled=!!window.external.msActiveXFilteringEnabled()}catch(e){}for(i=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","TDCCtl.TDCCtl","Shell.UIHelper","HtmlDlgSafeHelper.HtmlDlgSafeHelper","Scripting.Dictionary"].concat(r=["WMPlayer.OCX","ShockwaveFlash.ShockwaveFlash","AgControl.AgControl"]),t=0;t<i.length&&(!e.getAXO(i[t])||e.dbug);t++);if(a.ActiveXEnabled&&a.ActiveXFilteringEnabled)for(t=0;t<r.length;t++)if(e.getAXO(r[t])){a.ActiveXFilteringEnabled=!1;break}n=o.documentMode;try{o.documentMode=""}catch(e){}a.isIE=a.ActiveXEnabled,a.isIE=a.isIE||e.isNum(o.documentMode)||new Function("return/*@cc_on!@*/!1")();try{o.documentMode=n}catch(e){}a.verIE=null,a.isIE&&(a.verIE=(e.isNum(o.documentMode)&&o.documentMode>=7?o.documentMode:0)||(/^(?:.*?[^a-zA-Z])??(?:MSIE|rv\s*\:)\s*(\d+\.?\d*)/i.test(s)?parseFloat(RegExp.$1,10):7)),a.betterIE()},betterIE:function(){var t=this,n=document;if(t.verIEtrue=null,t.docModeIE=null,t.isIE){var i,r,a=n.createElement("div"),o=["{45EA75A0-A269-11D1-B5BF-0000F8051515}","{3AF36230-A269-11D1-B5BF-0000F8051515}","{89820200-ECBD-11CF-8B85-00AA005B4383}"];try{a.style.behavior="url(#default#clientcaps)"}catch(e){}for(r=0;r<o.length;r++){try{t.verIEtrue=a.getComponentVersion(o[r],"componentid").replace(/,/g,".")}catch(e){}if(t.verIEtrue&&!e.dbug)break}i=parseFloat(t.verIEtrue||"0",10),t.docModeIE=n.documentMode||(/back/i.test(n.compatMode||"")?5:i)||t.verIE,t.verIE=i||t.docModeIE}},detectNonIE:function(){var t=this,n=window.navigator?navigator:{},i=t.isIE?"":n.userAgent||"",r=n.vendor||"",a=n.product||"";t.isGecko=/Gecko/i.test(a)&&/Gecko\s*\/\s*\d/i.test(i),t.verGecko=t.isGecko?e.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(i)?RegExp.$1:"0.9"):null,t.isOpera=/(OPR\s*\/|Opera\s*\/\s*\d.*\s*Version\s*\/|Opera\s*[\/]?)\s*(\d+[\.,\d]*)/i.test(i),t.verOpera=t.isOpera?e.formatNum(RegExp.$2):null,t.isChrome=!t.isOpera&&/(Chrome|CriOS)\s*\/\s*(\d[\d\.]*)/i.test(i),t.verChrome=t.isChrome?e.formatNum(RegExp.$2):null,t.isSafari=!t.isOpera&&!t.isChrome&&(/Apple/i.test(r)||!r)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(i),t.verSafari=t.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(i)?e.formatNum(RegExp.$1):null},init:function(){var e=this;e.detectPlatform(),e.detectIE(),e.detectNonIE()}},init:{hasRun:0,library:function(){window[e.name]=e;var t=document;e.win.init(),e.head=t.getElementsByTagName("head")[0]||t.getElementsByTagName("body")[0]||t.body||null,e.browser.init(),this.hasRun=1}},ev:{addEvent:function(e,t,n){e&&t&&n&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=this.concatFn(n,e["on"+t]))},removeEvent:function(e,t,n){e&&t&&n&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n))},concatFn:function(e,t){return function(){e(),"function"==typeof t&&t()}},handler:function(e,t,n,i,r){return function(){e(t,n,i,r)}},handlerOnce:function(t,n,i,r){return function(){var a=e.uniqueName();t[a]||(t[a]=1,t(n,i,r))}},handlerWait:function(e,t,n,i,r){var a=this;return function(){a.setTimeout(a.handler(t,n,i,r),e)}},setTimeout:function(t,n){e.win&&e.win.unload||setTimeout(t,n)},fPush:function(t,n){e.isArray(n)&&(e.isFunc(t)||e.isArray(t)&&t.length>0&&e.isFunc(t[0]))&&n.push(t)},call0:function(t){var n=e.isArray(t)?t.length:-1;n>0&&e.isFunc(t[0])?t[0](e,n>1?t[1]:0,n>2?t[2]:0,n>3?t[3]:0):e.isFunc(t)&&t(e)},callArray0:function(t){var n;if(e.isArray(t))for(;t.length;)n=t[0],t.splice(0,1),e.win&&e.win.unload&&t!==e.win.unloadHndlrs||this.call0(n)},call:function(e){this.call0(e),this.ifDetectDoneCallHndlrs()},callArray:function(e){this.callArray0(e),this.ifDetectDoneCallHndlrs()},allDoneHndlrs:[],ifDetectDoneCallHndlrs:function(){var t,n,i=this;if(i.allDoneHndlrs.length&&(!e.win||e.win.loaded&&!e.win.loadPrvtHndlrs.length&&!e.win.loadPblcHndlrs.length)){if(e.Plugins)for(t in e.Plugins)if(e.hasOwn(e.Plugins,t)&&(n=e.Plugins[t])&&e.isFunc(n.getVersion)&&(3==n.OTF||n.DoneHndlrs&&n.DoneHndlrs.length||n.BIHndlrs&&n.BIHndlrs.length))return;i.callArray0(i.allDoneHndlrs)}}},getVersion:function(t,n,i){var r,a,o=e.pd.findPlugin(t);return o.status<0?null:(1!=(r=o.plugin).getVersionDone&&(r.getVersion(null,n,i),null===r.getVersionDone&&(r.getVersionDone=1)),a=(a=r.version||r.version0)?a.replace(e.splitNumRegx,e.pd.getVersionDelimiter):a)},hasMimeType:function(t){if(t&&window.navigator&&navigator.mimeTypes){var n,i,r,a,o=navigator.mimeTypes,s=e.isArray(t)?[].concat(t):e.isString(t)?[t]:[];for(a=s.length,r=0;r<a;r++){n=0;try{e.isString(s[r])&&/[^\s]/.test(s[r])&&(n=o[s[r]])}catch(e){}if((i=n?n.enabledPlugin:0)&&(i.name||i.description))return n}}return null},getInfo:function(t,n,i){var r,a=null,o=e.pd.findPlugin(t);return o.status<0?a:(r=o.plugin,e.isFunc(r.getInfo)&&(null===r.getVersionDone&&(e.getVersion?e.getVersion(t,n,i):e.isMinVersion(t,"0",n,i)),a=r.getInfo()),a)},onDetectionDone:function(t,n,i,r){var a,o=e.pd.findPlugin(t);return-3==o.status?-1:(a=o.plugin,e.isArray(a.DoneHndlrs)||(a.DoneHndlrs=[]),1!=a.getVersionDone&&(e.getVersion?e.getVersion(t,i,r):e.isMinVersion(t,"0",i,r)),-.5!=a.installed&&.5!=a.installed?(e.ev.call(n),1):(e.ev.fPush(n,a.DoneHndlrs),0))},codebase:{isDisabled:function(){return e.browser.ActiveXEnabled&&e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?0:1},isMin:function(e,t){return 0},search:function(t){var n,i=this,r=(t.$$,0);if(n=t.searchHasRun||i.isDisabled()?1:0,t.searchHasRun=1,n)return t.version||null;i.init(t);var a,o,s,l,d,c=t.DIGITMAX,u=99999999,f=[0,0,0,0],h=[0,0,0,0],p=function(e,n){var a,o=[].concat(f);return o[e]=n,(a=i.isActiveXObject(t,o.join(",")))?(r=1,f[e]=n):h[e]=n,a};for(a=0;a<h.length;a++){for(f[a]=Math.floor(t.DIGITMIN[a])||0,l=f.join(","),d=f.slice(0,a).concat([u,u,u,u]).slice(0,f.length).join(","),s=0;s<c.length;s++)e.isArray(c[s])&&(c[s].push(0),c[s][a]>h[a]&&e.compareNums(d,t.Lower[s])>=0&&e.compareNums(l,t.Upper[s])<0&&(h[a]=Math.floor(c[s][a])));for(o=0;o<30;o++){if(h[a]-f[a]<=16){for(s=h[a];s>=f[a]+(a?1:0)&&!p(a,s);s--);break}p(a,Math.round((h[a]+f[a])/2))}if(!r)break;h[a]=f[a]}return r&&(t.version=i.convert(t,f.join(",")).v),t.version||null},emptyNode:function(e){try{e.innerHTML=""}catch(e){}},HTML:[],len:0,onUnload:function(e,t){var n,i,r=t.HTML;for(n=0;n<r.length;n++)(i=r[n])&&(r[n]=0,t.emptyNode(i.span()),i.span=0,i.spanObj=0,i=0);t.iframe=0},init:function(t){var n,i,r=this;if(!r.iframe){var a,o=e.DOM;a=o.iframe.insert(0,"$.codebase{ }"),r.iframe=a,o.iframe.write(a," "),o.iframe.close(a)}if(!t.init)for(t.init=1,e.ev.fPush([r.onUnload,r],e.win.unloadHndlrs),t.tagA='<object width="1" height="1" style="display:none;" codebase="#version=',i=t.classID||t.$$.classID||"",t.tagB='" '+(/clsid\s*:/i.test(i)?'classid="':'type="')+i+'">'+e.openTag+"/object>",n=0;n<t.Lower.length;n++)t.Lower[n]=e.formatNum(t.Lower[n]),t.Upper[n]=e.formatNum(t.Upper[n])},isActiveXObject:function(t,n){var i=this,r=0,a=(t.$$,(e.DOM.iframe.doc(i.iframe)||document).createElement("span"));return t.min&&e.compareNums(n,t.min)<=0?1:t.max&&e.compareNums(n,t.max)>=0?0:(a.innerHTML=t.tagA+n+t.tagB,e.pd.getPROP(a.firstChild,"object")&&(r=1),r?(t.min=n,i.HTML.push({spanObj:a,span:i.span})):(t.max=n,a.innerHTML=""),r)},span:function(){return this.spanObj},convert_:function(t,n,i,r){var a=t.convert[n];return a?e.isFunc(a)?e.formatNum(a(i.split(e.splitNumRegx),r).join(",")):i:a},convert:function(t,n,i){var r,a,o,s=this;if(a={v:n=e.formatNum(n),x:-1},n)for(r=0;r<t.Lower.length;r++)if((o=s.convert_(t,r,t.Lower[r]))&&e.compareNums(n,i?o:t.Lower[r])>=0&&(!r||e.compareNums(n,i?s.convert_(t,r,t.Upper[r]):t.Upper[r])<0)){a.v=s.convert_(t,r,n,i),a.x=r;break}return a},z:0},win:{disable:function(){this.cancel=!0},cancel:!1,loaded:!1,unload:!1,hasRun:0,init:function(){var t=this;t.hasRun||(t.hasRun=1,/complete/i.test(document.readyState||"")?t.loaded=!0:e.ev.addEvent(window,"load",t.onLoad),e.ev.addEvent(window,"unload",t.onUnload))},loadPrvtHndlrs:[],loadPblcHndlrs:[],unloadHndlrs:[],onUnload:function(){var t=e.win;t.unload||(t.unload=!0,e.ev.removeEvent(window,"load",t.onLoad),e.ev.removeEvent(window,"unload",t.onUnload),e.ev.callArray(t.unloadHndlrs))},onLoad:function(){var t=e.win;t.loaded||t.unload||t.cancel||(t.loaded=!0,e.ev.callArray(t.loadPrvtHndlrs),e.ev.callArray(t.loadPblcHndlrs))}},DOM:{isEnabled:{objectTag:function(){var t=e.browser,n=t.isIE?0:1;return t.ActiveXEnabled&&(n=1),!!n},objectTagUsingActiveX:function(){var t=0;return e.browser.ActiveXEnabled&&(t=1),!!t},objectProperty:function(t){return t&&t.tagName&&e.browser.isIE?/applet/i.test(t.tagName)?!this.objectTag()||e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?1:0:e.isDefined(e.pd.getPROP(document.createElement(t.tagName),"object"))?1:0:0}},HTML:[],div:null,divID:"plugindetect",divWidth:500,getDiv:function(){return this.div||document.getElementById(this.divID)||null},initDiv:function(){var t,n=this;n.div||((t=n.getDiv())?n.div=t:(n.div=document.createElement("div"),n.div.id=n.divID,n.setStyle(n.div,n.getStyle.div()),n.insertDivInBody(n.div)),e.ev.fPush([n.onUnload,n],e.win.unloadHndlrs)),t=0},pluginSize:1,iframeWidth:40,iframeHeight:10,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(t){if(t&&/div|span/i.test(t.tagName||"")){e.browser.isIE&&this.setStyle(t,["display","none"]);try{t.innerHTML=""}catch(e){}}},removeNode:function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}},onUnload:function(e,t){var n,i,r,a=t.HTML,o=a.length;if(o)for(i=o-1;i>=0;i--)(r=a[i])&&(a[i]=0,t.emptyNode(r.span()),t.removeNode(r.span()),r.span=0,r.spanObj=0,r.doc=0,r.objectProperty=0);n=t.getDiv(),t.emptyNode(n),t.removeNode(n),r=0,n=0,t.div=0},span:function(){var e=this;return e.spanObj||(e.spanObj=e.doc.getElementById(e.spanId)),e.spanObj||null},width:function(){var t,n,i=this.span();return t=i&&e.isNum(i.scrollWidth)?i.scrollWidth:-1,n=i&&e.isNum(i.offsetWidth)?i.offsetWidth:-1,i=0,n>0?n:t>0?t:Math.max(n,t)},obj:function(){var e=this.span();return e&&e.firstChild||null},readyState:function(){return e.browser.isIE&&e.isDefined(e.pd.getPROP(this.span(),"readyState"))?e.pd.getPROP(this.obj(),"readyState"):e.UNDEFINED},objectProperty:function(){var t,n=this;return n.DOM.isEnabled.objectProperty(n)&&(t=e.pd.getPROP(n.obj(),"object")),t},onLoadHdlr:function(e,t){t.loaded=1},getTagStatus:function(t,n,i,r,a,o,s){if(!t||!t.span())return-2;var l=t.width(),d=t.obj()?1:0,c=t.readyState(),u=t.objectProperty();if(u)return 1.5;var f=/clsid\s*\:/i,h=i&&f.test(i.outerHTML||"")?i:r&&f.test(r.outerHTML||"")?r:0,p=i&&!f.test(i.outerHTML||"")?i:r&&!f.test(r.outerHTML||"")?r:0,m=t&&f.test(t.outerHTML||"")?h:p;if(!(n&&n.span()&&m&&m.span()))return-2;var g=m.width(),v=n.width(),_=m.readyState();return l<0||g<0||v<=this.pluginSize?0:(s&&!t.pi&&e.isDefined(u)&&e.browser.isIE&&t.tagName==m.tagName&&t.time<=m.time&&l===g&&0===c&&0!==_&&(t.pi=1),g<v||!t.loaded||!n.loaded||!m.loaded?t.pi?-.1:0:l!=v&&d?l!=this.pluginSize||!d||e.isNum(c)&&4!==c?t.pi?-.5:-1:1:t.pi?-.5:-1)},setStyle:function(e,t){var n,i=e.style;if(i&&t)for(n=0;n<t.length;n+=2)try{i[t[n]]=t[n+1]}catch(e){}e=0,i=0},getStyle:{iframe:function(){return this.span()},span:function(t){var n=e.DOM;return t?this.plugin():[].concat(this.Default).concat(["display","inline","fontSize",n.pluginSize+3+"px","lineHeight",n.pluginSize+3+"px"])},div:function(){var t=e.DOM;return[].concat(this.Default).concat(["display","block","width",t.divWidth+"px","height",t.pluginSize+3+"px","fontSize",t.pluginSize+3+"px","lineHeight",t.pluginSize+3+"px","position","absolute","right","9999px","top","-9999px"])},plugin:function(t){var n=e.DOM;return"background-color:transparent;background-image:none;vertical-align:baseline;outline-style:none;border-style:none;padding:0px;margin:0px;visibility:"+(t?"hidden;":"visible;")+"display:inline;font-size:"+(n.pluginSize+3)+"px;line-height:"+(n.pluginSize+3)+"px;"},Default:["backgroundColor","transparent","backgroundImage","none","verticalAlign","baseline","outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"]},insertDivInBody:function(t,n){var i="pd33993399",r=null,a=n?window.top.document:window.document,o=a.getElementsByTagName("body")[0]||a.body;if(!o)try{a.write('<div id="'+i+'">.'+e.openTag+"/div>"),r=a.getElementById(i)}catch(e){}(o=a.getElementsByTagName("body")[0]||a.body)&&(o.insertBefore(t,o.firstChild),r&&o.removeChild(r)),t=0},iframe:{onLoad:function(t,n){e.ev.callArray(t)},insert:function(t,n){var i,r=this,a=e.DOM,o=document.createElement("iframe");a.setStyle(o,a.getStyle.iframe()),o.width=a.iframeWidth,o.height=a.iframeHeight,a.initDiv(),a.getDiv().appendChild(o);try{r.doc(o).open()}catch(e){}return o[e.uniqueName()]=[],i=e.ev.handlerOnce(e.isNum(t)&&t>0?e.ev.handlerWait(t,r.onLoad,o[e.uniqueName()],n):e.ev.handler(r.onLoad,o[e.uniqueName()],n)),e.ev.addEvent(o,"load",i),o.onload||(o.onload=i),e.ev.addEvent(r.win(o),"load",i),o},addHandler:function(t,n){t&&e.ev.fPush(n,t[e.uniqueName()])},close:function(e){try{this.doc(e).close()}catch(e){}},write:function(e,t){try{this.doc(e).write(t)}catch(e){}},win:function(e){try{return e.contentWindow}catch(e){}return null},doc:function(e){var t;try{t=e.contentWindow.document}catch(e){}try{t||(t=e.contentDocument)}catch(e){}return t||null}},insert:function(t,n,i,r,a,o,s){var l,d,c,u,f,h=this;if(s||(h.initDiv(),s=h.getDiv()),s&&(/div/i.test(s.tagName)&&(u=s.ownerDocument),/iframe/i.test(s.tagName)&&(u=h.iframe.doc(s))),u&&u.createElement||(u=document),e.isDefined(r)||(r=""),e.isString(t)&&/[^\s]/.test(t)){t=t.toLowerCase().replace(/\s/g,""),l=e.openTag+t+" ",l+='style="'+h.getStyle.plugin(o)+'" ';var p=1,m=1;for(f=0;f<n.length;f+=2)/[^\s]/.test(n[f+1])&&(l+=n[f]+'="'+n[f+1]+'" '),/width/i.test(n[f])&&(p=0),/height/i.test(n[f])&&(m=0);if(l+=(p?'width="'+h.pluginSize+'" ':"")+(m?'height="'+h.pluginSize+'" ':""),"embed"==t||"img"==t)l+=" />";else{for(l+=">",f=0;f<i.length;f+=2)/[^\s]/.test(i[f+1])&&(l+=e.openTag+'param name="'+i[f]+'" value="'+i[f+1]+'" />');l+=r+e.openTag+"/"+t+">"}}else t="",l=r;if(d={spanId:"",spanObj:null,span:h.span,loaded:null,tagName:t,outerHTML:l,DOM:h,time:(new Date).getTime(),width:h.width,obj:h.obj,readyState:h.readyState,objectProperty:h.objectProperty,doc:u},s&&s.parentNode)if(/iframe/i.test(s.tagName))h.iframe.addHandler(s,[h.onLoadHdlr,d]),d.loaded=0,d.spanId=e.name+"Span"+h.HTML.length,c='<span id="'+d.spanId+'" style="'+h.getStyle.span(1)+'">'+l+"</span>",h.iframe.write(s,c);else if(/div/i.test(s.tagName)){c=u.createElement("span"),h.setStyle(c,h.getStyle.span()),s.appendChild(c);try{c.innerHTML=l}catch(e){}d.spanObj=c}return c=0,s=0,h.HTML.push(d),d}},file:{any:"fileStorageAny999",valid:"fileStorageValid999",save:function(t,n,i){var r,a=this;t&&e.isDefined(i)&&(t[a.any]||(t[a.any]=[]),t[a.valid]||(t[a.valid]=[]),t[a.any].push(i),(r=a.split(n,i))&&t[a.valid].push(r))},getValidLength:function(e){return e&&e[this.valid]?e[this.valid].length:0},getAnyLength:function(e){return e&&e[this.any]?e[this.any].length:0},getValid:function(e,t){var n=this;return e&&e[n.valid]?n.get(e[n.valid],t):null},getAny:function(e,t){var n=this;return e&&e[n.any]?n.get(e[n.any],t):null},get:function(t,n){var i=t.length-1,r=e.isNum(n)?n:i;return r<0||r>i?null:t[r]},split:function(t,n){var i,r,a=null;return t=t?t.replace(".","\\."):"",r=new RegExp("^(.*[^\\/])("+t+"\\s*)$"),e.isString(n)&&r.test(n)&&(a={name:(i=RegExp.$1.split("/"))[i.length-1],ext:RegExp.$2,full:n},i[i.length-1]="",a.path=i.join("/")),a}},Plugins:{}};e.init.library();var t={setPluginStatus:function(t,n,i){var r=this;r.version=n?e.formatNum(n,3):null,r.installed=r.version?1:i?i>0?.7:-.1:t?0:-1,r.getVersionDone=.7==r.installed||-.1==r.installed||0===r.nav.done?0:1},getVersion:function(t,n){var i,r=this,a=null,o=0;n=e.browser.isIE?0:n,o&&!e.dbug||!r.nav.query(n).installed||(o=1),a&&!e.dbug||!r.nav.query(n).version||(a=r.nav.version),(i=a?0:r.codebase.isMin(t))?r.setPluginStatus(0,0,i):(a&&!e.dbug||(i=r.codebase.search())&&(o=1,a=i),o&&!e.dbug||!r.axo.query().installed||(o=1),a&&!e.dbug||!r.axo.query().version||(a=r.axo.version),r.setPluginStatus(o,a))},nav:{done:null,installed:0,version:null,result:[0,0],mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime","application/x-rtsp","application/x-sdp","application/sdp","audio/vnd.qcelp","video/sd-video","audio/mpeg","video/mp4","video/3gpp2","application/x-mpeg","audio/x-m4b","audio/x-aac","video/flc"],find:"QuickTime.*Plug-?in",find2:"QuickTime.*Plug-?in",find3filename:"QuickTime|QT",avoid:"Totem|VLC|RealPlayer|Helix|MPlayer|Windows\\s*Media\\s*Player",plugins:"QuickTime Plug-in",detect:function(t){var n,i,r=this,a={installed:0,version:null,plugin:null};return(n=e.pd.findNavPlugin({find:r.find,find2:t?0:r.find2,avoid:t?0:r.avoid,mimes:r.mimeType,plugins:r.plugins}))&&(a.plugin=n,a.installed=1,i=new RegExp(r.find,"i"),n.name&&i.test(n.name+"")&&(a.version=e.getNum(n.name+""))),a},query:function(t){var n,i,r=this;if(t=t?1:0,null===r.done){if(e.hasMimeType(r.mimeType)){(i=r.detect(1)).installed&&(n=r.detect(0),r.result=[n,n.installed?n:i]);var a,o=r.result[0],s=r.result[1],l=new RegExp(r.avoid,"i"),d=new RegExp(r.find3filename,"i");o=o?o.plugin:0,s=s?s.plugin:0,o||!s||!s.name||s.description&&!/^[\s]*$/.test(s.description+"")||l.test(s.name+"")||(a=(s.filename||"")+"",/^.*[\\\/]([^\\\/]*)$/.test(a)&&(a=RegExp.$1),a&&d.test(a)&&!l.test(a)&&(r.result[0]=r.result[1]))}r.done=r.result[0]===r.result[1]?1:0}return r.result[t]&&(r.installed=r.result[t].installed,r.version=r.result[t].version),r}},codebase:{classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",isMin:function(n){var i,r=0;return this.$$=t,e.isStrNum(n)&&((i=n.split(e.splitNumRegx)).length>3&&parseInt(i[3],10)>0&&(i[3]="9999"),n=i.join(","),r=e.codebase.isMin(this,n)),r},search:function(){return this.$$=t,e.codebase.search(this)},DIGITMAX:[[12,11,11],[7,60],[7,11,11],0,[7,11,11]],DIGITMIN:[5,0,0,0],Upper:["999","7,60","7,50","7,6","7,5"],Lower:["7,60","7,50","7,6","7,5","0"],convert:[1,function(e,t){return t?[e[0],e[1]+e[2],e[3],"0"]:[e[0],e[1].charAt(0),e[1].charAt(1),e[2]]},1,0,1]},axo:{hasRun:0,installed:0,version:null,progID:["QuickTimeCheckObject.QuickTimeCheck","QuickTimeCheckObject.QuickTimeCheck.1"],progID0:"QuickTime.QuickTime",query:function(){var t,n,i,r=this,a=r.hasRun||!e.browser.ActiveXEnabled;if(r.hasRun=1,a)return r;for(n=0;n<r.progID.length&&(!(t=e.getAXO(r.progID[n]))||(r.installed=1,!(i=e.pd.getPROP(t,"QuickTimeVersion"))||!i.toString||(i=i.toString(16),r.version=parseInt(i.charAt(0)||"0",16)+"."+parseInt(i.charAt(1)||"0",16)+"."+parseInt(i.charAt(2)||"0",16),e.dbug)));n++);return r}}};e.addPlugin("quicktime",t);var n={mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeType_dummy:"application/dummymimejavaapplet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",classID_dummy:"clsid:8AD9C840-044E-11D1-B3E9-BA9876543210",navigator:{init:function(){var t=this,i=n;t.mimeObj=e.hasMimeType(i.mimeType),t.mimeObj&&(t.pluginObj=t.mimeObj.enabledPlugin)},a:function(){try{return window.navigator.javaEnabled()}catch(e){}return 1}(),javaEnabled:function(){return!!this.a},mimeObj:0,pluginObj:0},OTF:null,info:{pluginObj:null,getPluginObj:function(){var e=this;return null===e.pluginObj&&(e.pluginObj=n.navMime.pluginObj||n.navigator.pluginObj||0),e.pluginObj},getNavPluginName:function(){var e=this.getPluginObj();return e&&e.name||""},getNavPluginDescription:function(){var e=this.getPluginObj();return e&&e.description||""},Plugin2Status:0,setPlugin2Status:function(t){e.isNum(t)&&(this.Plugin2Status=t)},getPlugin2Status:function(){var t,n,i,r,a,o=this;return 0===o.Plugin2Status&&(n=/Next.*Generation.*Java.*Plug-?in|Java.*Plug-?in\s*2\s/i,i=/Classic.*Java.*Plug-?in/i,r=o.getNavPluginDescription(),a=o.getNavPluginName(),n.test(r)||n.test(a)?o.setPlugin2Status(1):i.test(r)||i.test(a)?o.setPlugin2Status(-1):e.browser.isIE&&/Sun|Oracle/i.test(o.getVendor())&&((t=o.isMinJre4Plugin2())>0?o.setPlugin2Status(1):t<0&&o.setPlugin2Status(-1))),o.Plugin2Status},isMinJre4Plugin2:function(t){var i,r=n,a="",o=r.applet.getResult()[0];return a=1==e.OS?"1,6,0,10":2==e.OS?"1,6,0,12":(e.OS,"1,6,0,10"),t||(t=(o&&!r.applet.isRange(o)?o:0)||r.version,i=r.applet.codebase,t=t||(i.min&&a?i.isMin(a)>0?a:"0,0,0,0":0)),(t=e.formatNum(e.getNum(t)))?e.compareNums(t,a)>=0?1:-1:0},BrowserForbidsPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,0,0")<0||t.isOpera&&e.compareNums(t.verOpera,"10,50,0,0")<0?1:0},BrowserRequiresPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,2,0")>=0||t.isChrome||1==e.OS&&t.isOpera&&e.compareNums(t.verOpera,"10,60,0,0")>=0?1:0},VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc.","Oracle Corporation","IBM Corporation"],VENDORS_reg:[/Sun/i,/Apple/i,/Oracle/i,/IBM/i],getNavVendor:function(){var e,t=this,n=t.getNavPluginName(),i=t.getNavPluginDescription(),r="";if(n||i)for(e=0;e<t.VENDORS.length;e++)if(t.VENDORS_reg[e].test(n)||t.VENDORS_reg[e].test(i)){r=t.VENDORS[e];break}return r},OracleMin:"1,7,0,0",OracleOrSun:function(t){return this.VENDORS[e.compareNums(e.formatNum(t),this.OracleMin)<0?0:2]},OracleOrApple:function(t){return this.VENDORS[e.compareNums(e.formatNum(t),this.OracleMin)<0?1:2]},getVendor:function(){var t,i,r=this,a=n,o=a.vendor||a.applet.getResult()[1]||"";return o||(i=a.DTK.version,t=a.applet.codebase,(i=i||t.version||(t.min?t.isMin(r.OracleMin)>0?r.OracleMin:"0,0,0,0":0))?o=r.OracleOrSun(i):(o=r.getNavVendor()||"")||a.version&&(2==e.OS?o=r.OracleOrApple(a.version):1!=e.OS&&3!=e.OS||(o=r.OracleOrSun(a.version)))),o},isPlugin2InstalledEnabled:function(){var e=this,t=-1,i=n.installed,r=e.getPlugin2Status(),a=e.BrowserRequiresPlugin2(),o=e.BrowserForbidsPlugin2(),s=e.isMinJre4Plugin2();return null!==i&&i>=-.1&&(r>=3?t=1:r<=-3||(2==r?t=1:-2==r||(a&&r>=0&&s>0?t=1:o&&r<=0&&s<0||(a?t=1:o||(r>0?t=1:r<0||s<0||(t=0)))))),t},result:{getDeploymentToolkitObj:function(){var e=n,t=e.info,i=e.DTK;return i.query(1),t.updateResult(),i.status&&i.HTML?i.HTML.obj():i.status}},updateResult:function(){var t,i=this,r=n,a=r.applet,o=r.installed,s=r.DTK,l=a.results,d=i.result;for(d.DeployTK_versions=[].concat(e.isArray(s.VERSIONS)?s.VERSIONS:[]),d.vendor=i.getVendor(),d.isPlugin2=i.isPlugin2InstalledEnabled(),d.OTF=r.OTF<3?0:3==r.OTF?1:2,d.JavaAppletObj=null,t=0;t<l.length;t++)if(l[t][0]&&a.HTML[t]&&a.HTML[t].obj()){d.JavaAppletObj=a.HTML[t].obj();break}var c=[null,null,null,null];for(t=0;t<l.length;t++)l[t][0]?c[t]=1:null!==l[t][0]?(r.NOTF&&r.NOTF.isAppletActive(t),a.active[t]>0?c[t]=0:a.allowed[t]>=1&&3!=r.OTF&&(a.isDisabled.single(t)||-.2==o||-1==o||a.active[t]<0||3==t&&/Microsoft/i.test(d.vendor))&&(c[t]=-1)):3==t&&l[0][0]?c[t]=0:a.isDisabled.single(t)&&(c[t]=-1);d.objectTag=c[1],d.appletTag=c[2],d.objectTagActiveX=c[3],d.name=i.getNavPluginName(),d.description=i.getNavPluginDescription(),d.All_versions=[].concat(d.DeployTK_versions.length?d.DeployTK_versions:e.isString(r.version)?[r.version]:[]);var u=d.All_versions;for(t=0;t<u.length;t++)u[t]=e.formatNum(e.getNum(u[t]));return d}},getInfo:function(){var e=this.info;return e.updateResult(),e.result},getVerifyTagsDefault:function(){return[1,this.applet.isDisabled.VerifyTagsDefault_1()?0:1,1]},getVersion:function(t,n,i){var r,a=this,o=a.applet,s=a.verify,l=a.navigator,d=null,c=null,u=null;null===a.getVersionDone&&(a.OTF=0,l.init(),s&&s.init()),o.setVerifyTagsArray(i),e.file.save(a,".jar",n),0!==a.getVersionDone?(d&&!e.dbug||!a.navMime.query().version||(d=a.navMime.version),d&&!e.dbug||!a.navPlugin.query().version||(d=a.navPlugin.version),d&&!e.dbug||!a.DTK.query().version||(d=a.DTK.version),a.nonAppletDetectionOk(d)&&(u=d),a.setPluginStatus(u,c,d,t),o.should_Insert_Query_Any()&&(r=o.insert_Query_Any(t))[0]&&(u=r[0],c=r[1]),a.setPluginStatus(u,c,d,t)):o.should_Insert_Query_Any()&&(r=o.insert_Query_Any(t),a.setPluginStatus(r[0],r[1],d,t))},nonAppletDetectionOk:function(t){var n=this.navigator,i=e.browser,r=1;return t&&n.javaEnabled()&&(i.isIE||n.mimeObj)||(r=0),r},setPluginStatus:function(t,n,i,r){var a,o=this,s=0,l=o.applet;i=i||o.version0,(a=l.isRange(t))&&(l.setRange(a,r)==t&&(s=a),t=0),o.OTF<3&&(o.installed=s?s>0?.7:-.1:t?1:i?-.2:-1),2==o.OTF&&o.NOTF&&!o.applet.getResult()[0]&&(o.installed=i?-.2:-1),3==o.OTF&&-.5!=o.installed&&.5!=o.installed&&(o.installed=o.NOTF.isJavaActive(1)>=1?.5:-.5),4!=o.OTF||-.5!=o.installed&&.5!=o.installed||(t?o.installed=1:s?o.installed=s>0?.7:-.1:o.NOTF.isJavaActive(1)>=1?i?(o.installed=1,t=i):o.installed=0:o.installed=i?-.2:-1),i&&(o.version0=e.formatNum(e.getNum(i))),t&&!s&&(o.version=e.formatNum(e.getNum(t))),n&&e.isString(n)&&(o.vendor=n),o.vendor||(o.vendor=""),o.verify&&o.verify.isEnabled()?o.getVersionDone=0:1!=o.getVersionDone&&(o.OTF<2?o.getVersionDone=0:o.getVersionDone=o.applet.can_Insert_Query_Any()?0:1)},DTK:{hasRun:0,status:null,VERSIONS:[],version:"",HTML:null,Plugin2Status:null,classID:["clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA","clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA"],mimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],isDisabled:function(t){return this.HTML?1:t||e.dbug?0:this.hasRun||!e.DOM.isEnabled.objectTagUsingActiveX()?1:0},query:function(t){var i,r,a,o=this,s=n,l=e.DOM.altHTML,d={},c=null,u=null,f=o.isDisabled(t);if(o.hasRun=1,f)return o;if(o.status=0,e.DOM.isEnabled.objectTagUsingActiveX())for(i=0;i<o.classID.length&&(o.HTML=e.DOM.insert("object",["classid",o.classID[i]],[],l),c=o.HTML.obj(),!e.pd.getPROP(c,"jvms"));i++);else(r=e.hasMimeType(o.mimeType))&&r.type&&(o.HTML=e.DOM.insert("object",["type",r.type],[],l),c=o.HTML.obj());if(c){try{Math.abs(s.info.getPlugin2Status())<2&&(o.Plugin2Status=c.isPlugin2())}catch(e){}null!==o.Plugin2Status&&(o.Plugin2Status?s.info.setPlugin2Status(2):(e.DOM.isEnabled.objectTagUsingActiveX()||s.info.getPlugin2Status()<=0)&&s.info.setPlugin2Status(-2));try{if((a=e.pd.getPROP(c,"jvms"))&&(u=a.getLength(),e.isNum(u)))for(o.status=u>0?1:-1,i=0;i<u;i++)(r=e.getNum(a.get(u-1-i).version))&&(o.VERSIONS.push(r),d["a"+e.formatNum(r)]=1)}catch(e){}o.VERSIONS.length&&(o.version=e.formatNum(o.VERSIONS[0]))}return o}},navMime:{hasRun:0,mimetype:"",version:"",mimeObj:0,pluginObj:0,regexJPI:/^\s*application\/x-java-applet;jpi-version\s*=\s*(\d.*)$/i,isDisabled:function(){var e=n;return this.hasRun||!e.navigator.mimeObj?1:0},update:function(t){var n=this,i=t?t.enabledPlugin:0,r=t&&n.regexJPI.test(t.type||"")?e.formatNum(e.getNum(RegExp.$1)):0;r&&i&&(i.description||i.name)&&e.compareNums(r,n.version||e.formatNum("0"))>0&&(n.version=r,n.mimeObj=t,n.pluginObj=i,n.mimetype=t.type)},query:function(){var t,i,r,a,o,s,l=this,d=n,c=navigator.mimeTypes,u=l.isDisabled();if(l.hasRun=1,u)return l;if(s=c.length,e.isNum(s))for(t=0;t<s;t++){r=0;try{r=c[t]}catch(e){}l.update(r)}if(!l.version||e.dbug)for(o=e.isArray(d.mimeType)?d.mimeType:[d.mimeType],t=0;t<o.length;t++){r=0;try{r=c[o[t]]}catch(e){}if(s=(a=r?r.enabledPlugin:0)?a.length:null,e.isNum(s))for(i=0;i<s;i++){r=0;try{r=a[i]}catch(e){}l.update(r)}}return l}},navPlugin:{hasRun:0,version:"",getPlatformNum:function(){var t=n,i=0,r=/Java.*TM.*Platform[^\d]*(\d+)[\.,_]?(\d*)\s*U?(?:pdate)?\s*(\d*)/i,a=e.pd.findNavPlugin({find:r,mimes:t.mimeType,plugins:1});return a&&(r.test(a.name||"")||r.test(a.description||""))&&parseInt(RegExp.$1,10)>=5&&(i="1,"+RegExp.$1+","+(RegExp.$2?RegExp.$2:"0")+","+(RegExp.$3?RegExp.$3:"0")),i},getPluginNum:function(){var t,i,r,a,o=this,s=n,l=0;return r=/Java[^\d]*Plug-in/i,(a=e.pd.findNavPlugin({find:r,num:1,mimes:s.mimeType,plugins:1,dbug:0}))&&(t=o.checkPluginNum(a.description,r),i=o.checkPluginNum(a.name,r),l=t&&i?e.compareNums(t,i)>0?t:i:t||i),l||(r=/Java.*\d.*Plug-in/i,(a=e.pd.findNavPlugin({find:r,mimes:s.mimeType,plugins:1,dbug:0}))&&(t=o.checkPluginNum(a.description,r),i=o.checkPluginNum(a.name,r),l=t&&i?e.compareNums(t,i)>0?t:i:t||i)),l},checkPluginNum:function(t,n){var i,r;return(i=n.test(t)?e.formatNum(e.getNum(t)):0)&&e.compareNums(i,e.formatNum("10"))>=0&&(r=i.split(e.splitNumRegx),i=e.formatNum("1,"+(parseInt(r[0],10)-3)+",0,"+r[1])),i&&(e.compareNums(i,e.formatNum("1,3"))<0||e.compareNums(i,e.formatNum("2"))>=0)&&(i=0),i},query:function(){var t,i=this,r=n,a=0,o=i.hasRun||!r.navigator.mimeObj;return i.hasRun=1,o?i:(a&&!e.dbug||(t=i.getPlatformNum())&&(a=t),a&&!e.dbug||(t=i.getPluginNum())&&(a=t),a&&(i.version=e.formatNum(a)),i)}},applet:{codebase:{isMin:function(t){return this.$$=n,e.codebase.isMin(this,t)},search:function(){return this.$$=n,e.codebase.search(this)},DIGITMAX:[[15,128],[6,0,512],0,[1,5,2,256],0,[1,4,1,1],[1,4,0,64],[1,3,2,32]],DIGITMIN:[1,0,0,0],Upper:["999","10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4"],Lower:["10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4","0"],convert:[function(e,t){return t?[parseInt(e[0],10)>1?"99":parseInt(e[1],10)+3+"",e[3],"0","0"]:["1",parseInt(e[0],10)-3+"","0",e[1]]},function(e,t){return t?[e[1],e[2],e[3]+"0","0"]:["1",e[0],e[1],e[2].substring(0,e[2].length-1||1)]},0,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},0,1,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},1]},results:[[null,null],[null,null],[null,null],[null,null]],getResult:function(){var e,t=this.results,n=[];for(e=t.length-1;e>=0&&!(n=t[e])[0];e--);return n=[].concat(n)},DummySpanTagHTML:0,HTML:[0,0,0,0],active:[0,0,0,0],DummyObjTagHTML:0,DummyObjTagHTML2:0,allowed:[1,1,1,1],VerifyTagsHas:function(e){var t;for(t=0;t<this.allowed.length;t++)if(this.allowed[t]===e)return 1;return 0},saveAsVerifyTagsArray:function(t){var n,i=this;if(e.isArray(t)){for(n=1;n<i.allowed.length;n++)t.length>n-1&&e.isNum(t[n-1])&&(t[n-1]<0&&(t[n-1]=0),t[n-1]>3&&(t[n-1]=3),i.allowed[n]=t[n-1]);i.allowed[0]=i.allowed[3]}},setVerifyTagsArray:function(t){var i=this,r=n;null===r.getVersionDone&&i.saveAsVerifyTagsArray(r.getVerifyTagsDefault()),e.dbug?i.saveAsVerifyTagsArray([3,3,3]):t&&i.saveAsVerifyTagsArray(t)},isDisabled:{single:function(t){return this.all()?1:1==t?!e.DOM.isEnabled.objectTag():2==t?this.AppletTag():0===t?e.codebase.isDisabled():3==t?!e.DOM.isEnabled.objectTagUsingActiveX():1},all_:null,all:function(){var t,i=this,r=n.navigator,a=e.browser;return null===i.all_&&(t=a.isOpera&&e.compareNums(a.verOpera,"13,0,0,0")<0&&!r.javaEnabled()||i.AppletTag()&&!e.DOM.isEnabled.objectTag()||!r.mimeObj&&!a.isIE?1:0,i.all_=t),i.all_},AppletTag:function(){var t=n.navigator;return e.browser.isIE?!t.javaEnabled():0},VerifyTagsDefault_1:function(){var t=e.browser,n=1;return t.isIE&&!t.ActiveXEnabled&&(n=0),(t.isIE&&t.verIE<9||t.verGecko&&e.compareNums(t.verGecko,e.formatNum("2"))<0||t.isSafari&&(!t.verSafari||e.compareNums(t.verSafari,e.formatNum("4"))<0)||t.isOpera&&e.compareNums(t.verOpera,e.formatNum("11"))<0)&&(n=0),n}},can_Insert_Query:function(e){var t=this,n=t.results[0][0],i=t.getResult()[0];return t.HTML[e]||0===e&&null!==n&&!t.isRange(n)||0===e&&i&&!t.isRange(i)?0:!t.isDisabled.single(e)},can_Insert_Query_Any:function(){var e;for(e=0;e<this.results.length;e++)if(this.can_Insert_Query(e))return 1;return 0},should_Insert_Query:function(e){var t=this,i=t.allowed,r=n,a=t.getResult()[0];return a=a&&(e>0||!t.isRange(a)),t.can_Insert_Query(e)&&0!==i[e]?3==i[e]||2.8==i[e]&&!a?1:r.nonAppletDetectionOk(r.version0)||2!=i[e]&&(1!=i[e]||a)?0:1:0},should_Insert_Query_Any:function(){var e;for(e=0;e<this.allowed.length;e++)if(this.should_Insert_Query(e))return 1;return 0},query:function(t){var i,r,a=this,o=n,s=null,l=null,d=a.results,c=a.HTML[t];if(c&&c.obj()&&!d[t][0]&&!o.bridgeDisabled&&(i=c.obj(),r=c.readyState(),!e.isNum(r)||4==r)){try{s=e.getNum(i.getVersion()+""),l=i.getVendor()+"",i.statusbar((e.win.loaded," "))}catch(e){}!s||!e.isStrNum(s)||e.dbug&&o.OTF<3||(d[t]=[s,l],a.active[t]=2)}},isRange:function(e){return/^[<>]/.test(e||"")?">"==e.charAt(0)?1:-1:0},setRange:function(t,n){return(t?t>0?">":"<":"")+(e.isString(n)?n:"")},insertJavaTag:function(t,i,r,a,o){var s=n,l=e.file.getValid(s),d=l.name+l.ext,c=l.path,u=["archive",d,"code","A.class"],f=(a?["width",a]:[]).concat(o?["height",o]:[]),h=["mayscript","true"],p=["scriptable","true","codebase_lookup","false"].concat(h),m=s.navigator,g=!e.browser.isIE&&m.mimeObj&&m.mimeObj.type?m.mimeObj.type:s.mimeType[0];return 1==t?(e.browser.isIE,e.DOM.insert("object",["type",g].concat(f),["codebase",c].concat(u).concat(p),r,s,0,i)):2==t?e.browser.isIE?e.DOM.insert("applet",["alt",r].concat(h).concat(u).concat(f),["codebase",c].concat(p),r,s,0,i):e.DOM.insert("applet",["codebase",c,"alt",r].concat(h).concat(u).concat(f),[].concat(p),r,s,0,i):3==t?e.browser.isIE?e.DOM.insert("object",["classid",s.classID].concat(f),["codebase",c].concat(u).concat(p),r,s,0,i):e.DOM.insert():4==t?e.DOM.insert("embed",["codebase",c].concat(u).concat(["type",g]).concat(p).concat(f),[],r,s,0,i):e.DOM.insert()},insertIframe:function(t){return e.DOM.iframe.insert(99,t)},insert_Query_Any:function(t){var i,r,a=this,o=n,s=e.DOM,l=a.results,d=a.HTML,c=s.altHTML,u=e.file.getValid(o);return a.should_Insert_Query(0)&&(o.OTF<2&&(o.OTF=2),l[0]=[0,0],(i=t?a.codebase.isMin(t):a.codebase.search())&&(l[0][0]=t?a.setRange(i,t):i),a.active[0]=i?1.5:-1),u?(a.DummySpanTagHTML||(r=a.insertIframe("applet.DummySpanTagHTML"),a.DummySpanTagHTML=s.insert("",[],[],c,0,0,r),s.iframe.close(r)),a.should_Insert_Query(1)&&(o.OTF<2&&(o.OTF=2),r=a.insertIframe("applet.HTML[1]"),d[1]=a.insertJavaTag(1,r,c),s.iframe.close(r),l[1]=[0,0],a.query(1)),a.should_Insert_Query(2)&&(o.OTF<2&&(o.OTF=2),r=a.insertIframe("applet.HTML[2]"),d[2]=a.insertJavaTag(2,r,c),s.iframe.close(r),l[2]=[0,0],a.query(2)),a.should_Insert_Query(3)&&(o.OTF<2&&(o.OTF=2),r=a.insertIframe("applet.HTML[3]"),d[3]=a.insertJavaTag(3,r,c),s.iframe.close(r),l[3]=[0,0],a.query(3)),s.isEnabled.objectTag()&&(a.DummyObjTagHTML||!d[1]&&!d[2]||(r=a.insertIframe("applet.DummyObjTagHTML"),a.DummyObjTagHTML=s.insert("object",["type",o.mimeType_dummy],[],c,0,0,r),s.iframe.close(r)),!a.DummyObjTagHTML2&&d[3]&&(r=a.insertIframe("applet.DummyObjTagHTML2"),a.DummyObjTagHTML2=s.insert("object",["classid",o.classID_dummy],[],c,0,0,r),s.iframe.close(r))),o.NOTF.init(),a.getResult()):a.getResult()}},NOTF:{count:0,count2:0,countMax:25,intervalLength:250,init:function(){var t=this,i=n;i.OTF<3&&t.shouldContinueQuery()&&(i.OTF=3,e.ev.setTimeout(t.onIntervalQuery,t.intervalLength))},allHTMLloaded:function(){var e,t=n.applet,i=[t.DummySpanTagHTML,t.DummyObjTagHTML,t.DummyObjTagHTML2].concat(t.HTML);for(e=0;e<i.length;e++)if(i[e]&&null!==i[e].loaded&&!i[e].loaded)return 0;return 1},shouldContinueQuery:function(){var e,t=this,i=n.applet,r=0;if(t.allHTMLloaded()){if(t.count-t.count2>2)return r}else t.count2=t.count;for(e=0;e<i.results.length;e++)i.HTML[e]&&!i.results[e][0]&&(i.allowed[e]>=2||1==i.allowed[e]&&!i.getResult()[0])&&(!t.count||t.isAppletActive(e)>=0)&&(r=1);return r},isJavaActive:function(e){var t,i,r=n,a=-9;for(t=0;t<r.applet.HTML.length;t++)(i=this.isAppletActive(t,e))>a&&(a=i);return a},isAppletActive:function(t,i){var r,a,o=n,s=o.navigator,l=o.applet,d=l.HTML[t],c=l.active,u=0,f=c[t];if(i||f>=1.5||!d||!d.span())return f;for(a=e.DOM.getTagStatus(d,l.DummySpanTagHTML,l.DummyObjTagHTML,l.DummyObjTagHTML2,this.count),r=0;r<c.length;r++)c[r]>0&&(u=1);return f=1!=a?a:e.browser.isIE||o.version0&&s.javaEnabled()&&s.mimeObj&&("object"==d.tagName||u)?1:0,c[t]=f,f},onIntervalQuery:function(){var t,i=n.NOTF;i.count++,3==n.OTF&&(t=i.queryAllApplets(),i.shouldContinueQuery()||i.queryCompleted(t)),3==n.OTF&&e.ev.setTimeout(i.onIntervalQuery,i.intervalLength)},queryAllApplets:function(){var e,t=n.applet;for(e=0;e<t.results.length;e++)t.query(e);return t.getResult()},queryCompleted:function(t){var i=n;i.OTF>=4||(i.OTF=4,this.isJavaActive(),i.setPluginStatus(t[0],t[1],0),e.ev.callArray(i.DoneHndlrs))}}};e.addPlugin("java",n);var i={mimeType:"application/x-shockwave-flash",setPluginStatus:function(t,n){var i,r=this;r.installed=n?1:t?0:-1,r.version=e.formatNum(n),i=(i=-1==r.installed||r.instance.version)||r.axo.version,r.getVersionDone=i?1:0},getVersion:function(t,n){var i=this,r=null,a=0;a&&!e.dbug||!i.navPlugin.query().installed||(a=1),r&&!e.dbug||!i.navPlugin.query().version||(r=i.navPlugin.version),a&&!e.dbug||!i.axo.query().installed||(a=1),r&&!e.dbug||!i.axo.query().version||(r=i.axo.version),(!a&&!r||n||e.dbug)&&i.instance.query().version&&(a=1,r=i.instance.version),i.setPluginStatus(a,r)},navPlugin:{hasRun:0,installed:0,version:null,getNum:function(e){if(!e)return null;var t=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e);return t?t[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},query:function(){var t,n,r=this,a=i,o=r.hasRun||!e.hasMimeType(a.mimeType);return r.hasRun=1,o?r:((n=e.pd.findNavPlugin({find:"Shockwave.*Flash",mimes:a.mimeType,plugins:["Shockwave Flash"]}))&&(r.installed=1,n.description&&(t=r.getNum(n.description))),t&&(t=e.getPluginFileVersion(n,t)),t&&(r.version=t),r)}},axo:{hasRun:0,installed:0,version:null,progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",query:function(){var t,n,i,r=this,a=r.hasRun;if(r.hasRun=1,a)return r;for(n=0;n<10;n++)if(i=e.getAXO(r.progID+(n?"."+n:""))){r.installed=1,t=0;try{t=e.getNum(i.GetVariable("$version")+"")}catch(e){}if(t&&(r.version=t,!e.dbug))break}return r}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=i,n=1;return!this.hasRun&&!e.DOM.isEnabled.objectTagUsingActiveX()&&e.DOM.isEnabled.objectTag()&&e.hasMimeType(t.mimeType)||(n=0),n},query:function(){var t=this,n=i,r=t.isEnabled();if(t.hasRun=1,r){t.HTML=e.DOM.insert("object",["type",n.mimeType],["play","false","menu","false"],"",n);try{t.version=e.getNum(t.HTML.obj().GetVariable("$version")+"")}catch(e){}}return t}}};e.addPlugin("flash",i);var r={getVersion:function(){var t,n=this,i=null;t&&!e.dbug||!n.nav.query().installed||(t=1),i&&!e.dbug||!n.nav.query().version||(i=n.nav.version),t&&!e.dbug||!n.axo.query().installed||(t=1),i&&!e.dbug||!n.axo.query().version||(i=n.axo.version),n.installed=i?1:t?0:-1,n.version=e.formatNum(i)},nav:{hasRun:0,installed:0,version:null,mimeType:"application/x-director",query:function(){var t,n,i=this,r=i.hasRun||!e.hasMimeType(i.mimeType);return i.hasRun=1,r?i:((n=e.pd.findNavPlugin({find:"Shockwave\\s*for\\s*Director",mimes:i.mimeType,plugins:"Shockwave for Director"}))&&n.description&&(t=e.getNum(n.description+"")),t&&(t=e.getPluginFileVersion(n,t)),n&&(i.installed=1),t&&(i.version=t),i)}},axo:{hasRun:0,installed:null,version:null,progID:["SWCtl.SWCtl","SWCtl.SWCtl.1","SWCtl.SWCtl.7","SWCtl.SWCtl.8","SWCtl.SWCtl.11","SWCtl.SWCtl.12"],classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",query:function(){var t,n,i,r,a,o=this,s=!o.hasRun;if(o.hasRun=1,s)for(n=0;n<o.progID.length;n++)if(t=e.getAXO(o.progID[n])){o.installed=1,r="";try{r=t.ShockwaveVersion("")+""}catch(e){}if(/(\d[\d\.\,]*)(?:\s*r\s*(\d+))?/i.test(r)&&(a=RegExp.$2,i=e.formatNum(RegExp.$1),a&&((i=i.split(e.splitNumRegx))[3]=a,i=i.join(","))),i&&(o.version=i,!e.dbug))break}return o}}};e.addPlugin("shockwave",r);var a={setPluginStatus:function(t,n){var i=this;t&&(i.version=e.formatNum(t)),i.installed=i.version?1:n?0:-1,i.getVersionDone=0===i.installed?0:1},getVersion:function(t,n){var i,r=this,a=null;i&&!e.dbug||!r.nav.query().installed||(i=1),i&&!e.dbug||!r.axo.query().installed||(i=1),a&&!e.dbug||!r.axo.query().version||(a=r.axo.version),(!i&&!a||n||e.dbug)&&r.FirefoxPlugin.query().version&&(i=1,a=r.FirefoxPlugin.version),r.setPluginStatus(a,i)},mimeType:["application/x-ms-wmp","application/asx","application/x-mplayer2","video/x-ms-asf","video/x-ms-wm","video/x-ms-asf-plugin"],find:["Microsoft.*Windows\\s*Media\\s*Player.*Firefox.*Plug-?in","Windows\\s*Media\\s*Player\\s*Plug-?in\\s*Dynamic\\s*Link\\s*Library","Flip4Mac.*Windows\\s*Media.*Plug-?in|Flip4Mac.*WMV.*Plug-?in"],avoid:"Totem|VLC|RealPlayer|Helix",plugins:["Microsoft"+String.fromCharCode(174)+" Windows Media Player Firefox Plugin","Windows Media Player Plug-in Dynamic Link Library"],nav:{hasRun:0,installed:0,query:function(){var t=this,n=a,i=t.hasRun||!e.hasMimeType(n.mimeType);return t.hasRun=1,i?t:(e.pd.findNavPlugin({find:n.find.join("|"),avoid:n.avoid,mimes:n.mimeType,plugins:n.plugins})&&(t.installed=1),t)}},FirefoxPlugin:{hasRun:0,version:null,isDisabled:function(){var t=a,n=e.browser;return this.hasRun||n.isGecko&&e.compareNums(n.verGecko,e.formatNum("1.8"))<0||n.isOpera&&e.compareNums(n.verOpera,e.formatNum("10"))<0||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(t.mimeType)||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})?1:0},query:function(){var t,n=this,i=a,r=n.isDisabled();return n.hasRun=1,r?n:((t=e.pd.getPROP(e.DOM.insert("object",["type",e.hasMimeType(i.mimeType).type,"data",""],["src",""],"",i).obj(),"versionInfo"))&&(n.version=e.getNum(t)),n)}},axo:{hasRun:0,installed:null,version:null,progID:["WMPlayer.OCX","WMPlayer.OCX.7"],classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",query:function(){var t,n,i,r=this,a=!r.hasRun;if(r.hasRun=1,a)for(n=0;n<r.progID.length&&(!(t=e.getAXO(r.progID[n]))||(r.installed=1,(i=e.pd.getPROP(t,"versionInfo",0))&&(i=e.getNum(i)),!i||(r.version=i,e.dbug)));n++);return r}},result:0,getInfo:function(){var t=this,n=t.installed;return t.result||(t.result={ActiveXPlugin:!!t.axo.version,FirefoxPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})),DllPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[1],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[1]})),Flip4macPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[2],avoid:t.avoid,mimes:t.mimeType,plugins:1}))},t.result.Scriptable=!(1!=n&&!t.result.FirefoxPlugin)),t.result}};e.addPlugin("windowsmediaplayer",a);var o={getVersion:function(){var t=this,n=null,i=0;i&&!e.dbug||!t.nav.query().installed||(i=1),n&&!e.dbug||!t.nav.query().version||(n=t.nav.version),i&&!e.dbug||!t.axo.query().installed||(i=1),n&&!e.dbug||!t.axo.query().version||(n=t.axo.version),t.version=e.formatNum(n),t.installed=n?1:i?0:-1},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-silverlight","application/x-silverlight-2"],query:function(){var t,n,i,r=this,a=r.hasRun||!e.hasMimeType(r.mimeType);return r.hasRun=1,a?r:((i=e.pd.findNavPlugin({find:"Silverlight.*Plug-?in",mimes:r.mimeType,plugins:"Silverlight Plug-In"}))&&(r.installed=1),i&&i.description&&(n=e.formatNum(e.getNum(i.description+""))),n&&(t=n.split(e.splitNumRegx),parseInt(t[0],10)<2&&parseInt(t[2],10)>=30226&&(t[0]="2"),n=t.join(",")),n&&(r.version=n),r)}},axo:{hasRun:0,installed:0,version:null,progID:"AgControl.AgControl",maxdigit:[20,10,10,100,100,10],mindigit:[0,0,0,0,0,0],IsVersionSupported:function(t,n){var i=this;try{return i.testVersion?e.compareNums(e.formatNum(i.testVersion.join(",")),e.formatNum(n.join(",")))>=0:t.IsVersionSupported(i.format(n))}catch(e){}return 0},format:function(e){return e[0]+"."+e[1]+"."+e[2]+this.make2digits(e[3])+this.make2digits(e[4])+"."+e[5]},make2digits:function(e){return(e<10?"0":"")+e},query:function(){var t,n,i=this,r=i.hasRun;if(i.hasRun=1,r)return i;if((n=e.getAXO(i.progID))&&(i.installed=1),n&&i.IsVersionSupported(n,i.mindigit)){var a,o=[].concat(i.mindigit);for(t=0;t<i.maxdigit.length;t++){for(a=0;i.maxdigit[t]-i.mindigit[t]>1&&a<20;)a++,0,o[t]=Math.round((i.maxdigit[t]+i.mindigit[t])/2),i.IsVersionSupported(n,o)?i.mindigit[t]=o[t]:i.maxdigit[t]=o[t];o[t]=i.mindigit[t]}i.version=i.format(o)}return i}}};e.addPlugin("silverlight",o);var s={compareNums:function(t,n){var i,r,a,o,s,l=t.split(e.splitNumRegx),d=n.split(e.splitNumRegx);for(i=0;i<Math.min(l.length,d.length);i++){if(/([\d]+)([a-z]?)/.test(l[i]),r=parseInt(RegExp.$1,10),o=2==i&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,/([\d]+)([a-z]?)/.test(d[i]),a=parseInt(RegExp.$1,10),s=2==i&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,r!=a)return r>a?1:-1;if(2==i&&o!=s)return o>s?1:-1}return 0},setPluginStatus:function(t,n,i){var r=this;r.installed=n?1:i?i>0?.7:-.1:t?0:-1,n&&(r.version=e.formatNum(n)),r.getVersionDone=.7==r.installed||-.1==r.installed?0:1},getVersion:function(t){var n,i,r=this,a=null;n&&!e.dbug||!r.nav.query().installed||(n=1),a&&!e.dbug||!r.nav.query().version||(a=r.nav.version),n&&!e.dbug||!r.axo.query().installed||(n=1),a&&!e.dbug||!r.axo.query().version||(a=r.axo.version),a&&!e.dbug||!(i=r.codebase.isMin(t))?(a&&!e.dbug||(i=r.codebase.search())&&(n=1,a=i),r.setPluginStatus(n,a,0)):r.setPluginStatus(0,0,i)},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-vlc-plugin","application/x-google-vlc-plugin","application/mpeg4-muxcodetable","application/x-matroska","application/xspf+xml","video/divx","video/webm","video/x-mpeg","video/x-msvideo","video/ogg","audio/x-flac","audio/amr","audio/amr"],find:"VLC.*Plug-?in",find2:"VLC|VideoLAN",avoid:"Totem|Helix",plugins:["VLC Web Plugin","VLC Multimedia Plug-in","VLC Multimedia Plugin","VLC multimedia plugin"],query:function(){var t,n,i=this,r=i.hasRun||!e.hasMimeType(i.mimeType);return i.hasRun=1,r?i:((n=e.pd.findNavPlugin({find:i.find,avoid:i.avoid,mimes:i.mimeType,plugins:i.plugins}))&&(i.installed=1,n.description&&(t=e.getNum(n.description+"","[\\d][\\d\\.]*[a-z]*")),t&&(i.version=t)),i)}},axo:{hasRun:0,installed:0,version:null,progID:"VideoLAN.VLCPlugin",query:function(){var t,n,i=this,r=i.hasRun;return i.hasRun=1,r?i:((t=e.getAXO(i.progID))&&(i.installed=1,(n=e.getNum(e.pd.getPROP(t,"VersionInfo"),"[\\d][\\d\\.]*[a-z]*"))&&(i.version=n)),i)}},codebase:{classID:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",isMin:function(t){return this.$$=s,e.codebase.isMin(this,t)},search:function(){return this.$$=s,e.codebase.search(this)},DIGITMAX:[[11,11,16]],DIGITMIN:[0,0,0,0],Upper:["999"],Lower:["0"],convert:[1]}};e.addPlugin("vlc",s);var l={OTF:null,setPluginStatus:function(){var t=this,n=t.OTF,i=t.nav.detected,r=t.nav.version,a=t.nav.precision,o=r,s=i>0,l=t.axo.detected,d=t.axo.version,c=t.axo.precision,u=t.doc.detected,f=t.doc.version,h=t.doc.precision,p=t.doc2.detected,m=t.doc2.version,g=t.doc2.precision;o=m||o||d||f,a=g||a||c||h,s=p>0||s||l>0||u>0,o=o||null,t.version=e.formatNum(o),t.precision=a;var v=-1;if(3==n?v=t.version?.5:-.5:o?v=1:s?v=0:-.5==l||-.5==u?v=-.15:!e.browser.isIE||e.browser.ActiveXEnabled&&!e.browser.ActiveXFilteringEnabled||(v=-1.5),t.installed=v,1!=t.getVersionDone){var _=1;t.verify&&t.verify.isEnabled()||.5==t.installed||-.5==t.installed?_=0:1==t.doc2.isDisabled()&&(_=0),t.getVersionDone=_}},getVersion:function(t,n){var i=this,r=0,a=i.verify;if(null===i.getVersionDone&&(i.OTF=0,a&&a.init()),e.file.save(i,".pdf",n),0===i.getVersionDone)return i.doc2.insertHTMLQuery(),void i.setPluginStatus();r&&!e.dbug||!i.nav.query().version||(r=1),r&&!e.dbug||!i.axo.query().version||(r=1),r&&!e.dbug||!i.doc.query().version||(r=1),i.doc2.insertHTMLQuery(),i.setPluginStatus()},getPrecision:function(t,n,i){if(e.isString(t)){n=n||"",i=i||"";var r,a="\\d+",o=[a,a,a,a];for(r=4;r>0;r--)if(new RegExp(n+o.slice(0,r).join("[\\.]")+i).test(t))return r}return 0},nav:{detected:0,version:null,precision:0,mimeType:["application/pdf","application/vnd.adobe.pdfxml"],find:"Adobe.*PDF.*Plug-?in|Adobe.*Acrobat.*Plug-?in|Adobe.*Reader.*Plug-?in",plugins:["Adobe Acrobat","Adobe Acrobat and Reader Plug-in","Adobe Reader Plugin"],query:function(){var t,n=this,i=null;return n.detected||!e.hasMimeType(n.mimeType)?n:(t=e.pd.findNavPlugin({find:n.find,mimes:n.mimeType,plugins:n.plugins}),n.detected=t?1:-1,t&&(i=e.getNum(t.description)||e.getNum(t.name),(i=e.getPluginFileVersion(t,i))||(i=n.attempt3()),i&&(n.version=i,n.precision=l.getPrecision(i))),n)},attempt3:function(){var t=null;return 1==e.OS&&(e.hasMimeType("application/vnd.adobe.pdfxml")?t="9":e.hasMimeType("application/vnd.adobe.x-mars")?t="8":e.hasMimeType("application/vnd.adobe.xfdf")&&(t="6")),t}},activexQuery:function(t){var n,i,r,a,o="",s={precision:0,version:null};try{t&&(o=t.GetVersions()+"")}catch(e){}if(o&&e.isString(o)&&(n=/\=\s*[\d\.]+/g,a=o.match(n))){for(i=0;i<a.length;i++)(r=e.formatNum(e.getNum(a[i])))&&(!s.version||e.compareNums(r,s.version)>0)&&(s.version=r);s.precision=l.getPrecision(o,"\\=\\s*")}return s},axo:{detected:0,version:null,precision:0,progID:["AcroPDF.PDF","AcroPDF.PDF.1","PDF.PdfCtrl","PDF.PdfCtrl.5","PDF.PdfCtrl.1"],progID_dummy:"AcroDUMMY.DUMMY",query:function(){var t,n,i,r,a,o,s=this,d=l;if(s.detected)return s;for(s.detected=-1,(n=e.getAXO(s.progID_dummy))||(o=e.errObj),a=0;a<s.progID.length;a++)if(n=e.getAXO(s.progID[a])){if(s.detected=1,i=(t=d.activexQuery(n)).version,r=t.precision,!e.dbug&&i)break}else o&&e.errObj&&o!==e.errObj&&o.message!==e.errObj.message&&(s.detected=-.5);return i&&(s.version=i),r&&(s.precision=r),s}},doc:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",classID_dummy:"clsid:CA8A9780-280D-11CF-A24D-BA9876543210",DummySpanTagHTML:0,HTML:0,DummyObjTagHTML1:0,DummyObjTagHTML2:0,isDisabled:function(){var t=0;return this.HTML?t=1:e.dbug||e.DOM.isEnabled.objectTagUsingActiveX()||(t=1),t},query:function(){var t,n,i,r,a,o=this,s=l,d=e.DOM.altHTML;return o.isDisabled()?o:(t=e.DOM.iframe.insert(99,"Adobe Reader"),o.DummySpanTagHTML=e.DOM.insert("",[],[],d,s,1,t),o.HTML=e.DOM.insert("object",["classid",o.classID],[],d,s,1,t),o.DummyObjTagHTML2=e.DOM.insert("object",["classid",o.classID_dummy],[],d,s,1,t),e.DOM.iframe.close(t),a=e.DOM.getTagStatus(o.HTML,o.DummySpanTagHTML,o.DummyObjTagHTML1,o.DummyObjTagHTML2,0,0,1),i=(n=s.activexQuery(o.HTML.obj())).version,r=n.precision,o.detected=a>0||i?1:-.1==a||-.5==a?-.5:-1,i&&(o.version=i),r&&(o.precision=r),o)}},doc2:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",mimeType:"application/pdf",HTML:0,count:0,count2:0,time2:0,intervalLength:50,maxCount:150,isDisabled:function(){var t,n,i,r=l,a=r.axo,o=r.nav,s=r.doc,d=0;return this.HTML?d=2:e.dbug||(e.DOM.isEnabled.objectTagUsingActiveX()?(t=(o?o.version:0)||(a?a.version:0)||(s?s.version:0)||0,n=(o?o.precision:0)||(a?a.precision:0)||(s?s.precision:0)||0,(!t||!n||n>2||e.compareNums(e.formatNum(t),e.formatNum("11"))<0)&&(d=2)):d=2),d<2&&((i=e.file.getValid(r))&&i.full||(d=1)),d},handlerSet:0,onMessage:function(){var t=this;return function(n){t.version||(t.detected=1,e.isArray(n)&&(n=n[0]),(n=e.getNum(n+""))&&(/[.,_]/.test(n)||(n+="."),/^(\d+)[.,_](\d)(\d\d)(\d\d)/.test(n+="00000")&&(n=RegExp.$1+","+RegExp.$2+","+RegExp.$3+","+RegExp.$4),t.version=e.formatNum(n),t.precision=3,l.setPluginStatus()))}},isDefinedMsgHandler:function(e,t){try{return e?e.messageHandler!==t:0}catch(e){}return 1},queryObject:function(){var e=this,t=e.HTML,n=t?t.obj():0;if(n){if(!e.handlerSet&&e.isDefinedMsgHandler(n)){try{n.messageHandler={onMessage:e.onMessage()}}catch(e){}e.handlerSet=1,e.count2=e.count,e.time2=(new Date).getTime()}e.detected||(e.count>3&&!e.handlerSet?e.detected=-1:e.time2&&e.count-e.count2>=e.maxCount&&(new Date).getTime()-e.time2>=e.intervalLength*e.maxCount&&(e.detected=-.5)),e.detected&&e.detected}},insertHTMLQuery:function(){var t,n,i=this,r=l,a=e.DOM.altHTML;return i.isDisabled()?i:(r.OTF<2&&(r.OTF=2),t=e.file.getValid(r).full,n=e.DOM.iframe.insert(0,"Adobe Reader"),e.DOM.iframe.write(n,'<script type="text/javascript"><\/script>'),i.HTML=e.DOM.insert("object",["data",t].concat(e.browser.isIE?["classid",i.classID]:["type",i.mimeType]),["src",t],a,r,0,n),e.DOM.iframe.addHandler(n,i.onIntervalQuery),r.OTF<3&&i.HTML&&(r.OTF=3),e.DOM.iframe.close(n),i)},onIntervalQuery:function(){var t=l,n=t.doc2;n.count++,3==t.OTF&&(n.queryObject(),n.detected&&n.queryCompleted()),3==t.OTF&&e.ev.setTimeout(n.onIntervalQuery,n.intervalLength)},queryCompleted:function(){var t=l;4!=t.OTF&&(t.OTF=4,t.setPluginStatus(),e.ev.callArray(t.DoneHndlrs))},z:0},getInfo:function(){var e=this;e.setPluginStatus();var t={OTF:e.OTF<3?0:3==e.OTF?1:2,DummyPDFused:!1,version:e.version,precision:e.precision};return 1!=e.doc2.detected&&-.5!=e.doc2.detected||(t.DummyPDFused=!0),t}};e.addPlugin("adobereader",l);var d={mimeType:["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"],classID:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",setPluginStatus:function(t,n){var i,r=this;n&&(r.version=e.formatNum(e.getNum(n))),r.installed=r.version?1:t?0:-1,i=(i=-1==r.installed||r.instance.version)||r.axo.version,r.getVersionDone=i?1:0},navObj:{hasRun:0,installed:null,version:null,find:"RealPlayer.*Plug-?in",avoid:"Totem|QuickTime|Helix|VLC|Download",plugins:["RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (32-bit) ","RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (64-bit) ","RealPlayer Plugin"],query:function(){var t,n=this,i=d,r=!n.hasRun&&e.hasMimeType(i.mimeType);return n.hasRun=1,r&&(t=e.pd.findNavPlugin({find:n.find,avoid:n.avoid,mimes:i.mimeType,plugins:n.plugins}),n.installed=t?1:0,(t=e.getPluginFileVersion(t))&&e.compareNums(e.formatNum(t),e.formatNum("15"))>=0&&(n.version=t)),n}},JS:{hasRun:0,version:null,regStr:"RealPlayer.*Version.*Plug-?in",mimetype:"application/vnd.rn-realplayer-javascript",q1:[[11,0,0],[999],[663],[663],[663],[660],[468],[468],[468],[468],[468],[468],[431],[431],[431],[372],[180],[180],[172],[172],[167],[114],[0]],q3:[[6,0],[12,99],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,46],[12,46],[12,46],[11,3006],[11,2806],[11,2806],[11,2804],[11,2804],[11,2799],[11,2749],[11,2700]],compare:function(e,t){var n,i,r,a=e.length,o=t.length;for(n=0;n<Math.max(a,o);n++){if((i=n<a?e[n]:0)>(r=n<o?t[n]:0))return 1;if(i<r)return-1}return 0},convertNum:function(t,n,i){var r,a,o,s=this,l=null;if(!t||!(r=e.formatNum(t)))return l;for(r=r.split(e.splitNumRegx),o=0;o<r.length;o++)r[o]=parseInt(r[o],10);if(0!==s.compare(r.slice(0,Math.min(n[0].length,r.length)),n[0]))return l;if(a=r.length>n[0].length?r.slice(n[0].length):[],s.compare(a,n[1])>0||s.compare(a,n[n.length-1])<0)return l;for(o=n.length-1;o>=1&&1!=o&&(0!==s.compare(n[o],a)||0!==s.compare(n[o],n[o-1]))&&!(s.compare(a,n[o])>=0&&s.compare(a,n[o-1])<0);o--);return i[0].join(".")+"."+i[o].join(".")},isEnabled:function(){return!this.hasRun&&1==e.OS&&e.hasMimeType(this.mimetype)?1:0},query:function(){var t,n,i,r=this,a=r.isEnabled();if(r.hasRun=1,a&&((n=e.pd.findNavPlugin({find:r.regStr,mimes:r.mimetype}))&&(t=e.formatNum(e.getNum(n.description))),t)){var o=t.split(e.splitNumRegx);i=1,r.compare(o,[6,0,12,200])<0?i=-1:r.compare(o,[6,0,12,1739])<=0&&r.compare(o,[6,0,12,857])>=0&&(i=-1),i<0&&(n=r.convertNum(t,r.q3,r.q1),r.version=n||t)}return r}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=d,n=1;return e.DOM.isEnabled.objectTag()?e.dbug||(this.hasRun||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(t.mimeType)||e.browser.isGecko&&e.compareNums(e.browser.verGecko,e.formatNum("1,8"))<0||e.browser.isOpera&&e.compareNums(e.browser.verOpera,e.formatNum("10"))<0)&&(n=0):n=0,n},query:function(){var t,n=this,i=d,r=n.isEnabled();if(n.hasRun=1,r){n.HTML=e.DOM.insert("object",["type",i.mimeType[0]],["src","","autostart","false","imagestatus","false","controls","stopbutton"],"",i),t=n.HTML.obj();try{n.version=e.getNum(t.GetVersionInfo())}catch(e){}e.DOM.setStyle(t,["display","none"])}return n}},axo:{hasRun:0,installed:null,version:null,progID:["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],query:function(){var t,n,i,r=this;if(!r.hasRun)for(r.hasRun=1,n=0;n<r.progID.length;n++)if(t=e.getAXO(r.progID[n])){r.installed=1,i=0;try{i=t.GetVersionInfo()+""}catch(e){}if(i&&(r.version=i,!e.dbug))break}return r}},getVersion:function(t,n){var i=this,r=null,a=0;a&&!e.dbug||!i.axo.query().installed||(a=1),r&&!e.dbug||!i.axo.query().version||(r=i.axo.version),a&&!e.dbug||!i.navObj.query().installed||(a=1),r&&!e.dbug||!i.navObj.query().version||(r=i.navObj.version),r&&!e.dbug||!i.JS.query().version||(a=1,r=i.JS.version),(!a&&!r||n||e.dbug)&&i.instance.query().version&&(a=1,r=i.instance.version),i.setPluginStatus(a,r)}};e.addPlugin("realplayer",d);var c={storage:{},codebase:{isMin:function(t){return this.$$=c,e.codebase.isMin(this,t)},search:function(){return this.$$=c,e.codebase.search(this)},classID:"",DIGITMAX:[[100,100,100,0]],DIGITMIN:[0,0,0,0],Upper:["99999"],Lower:["0"],convert:[1]},clone:function(t,n){var i,r;if(e.isNum(t)||e.isString(t)||null===t||e.isFunc(t)||t===e||t===e.Plugins||t===this)return t;if(t.window||t.firstChild||t.appendChild)return t;for(i in e.isArray(t)?r=[]:t&&(r={}),t)e.hasOwn(t,i)&&(0,r[i]=this.clone(t[i],i));return r},setPluginStatus:function(t,n,i){var r=this;r.getVersionDone=0,r.version=e.formatNum(n),r.installed=n?1:t?t>0?.7:-.1:i?-3:-1},getVersion:function(t,n,i){var r,a,o,s=this,l=null,d=null,c="";if(e.codebase.isDisabled())s.setPluginStatus(0,0);else if(n&&e.isString(n)&&/[^\s]+/.test(n)){if(c=(n=n.replace(/\s/g,"")).replace(/[\:\-\/]/g,"$"),e.isArray(i)){for(i.length||i.push(0),r=0;r<i.length;r++)if(e.isDefined(i[r])||(i[r]=0),!e.isNum(i[r])||i[r]<0||i[r]>99999999)return void s.setPluginStatus(0,0,1);if(c&&s.storage[c]){for(a=s.storage[c].codebase,o=0,r=0;r<Math.max(i.length,a.DIGITMAX[0].length);r++)if((r<i.length?i[r]:0)>(r<a.DIGITMAX[0].length?a.DIGITMAX[0][r]:0)){o=1;break}if(o&&a.version)for(o=a.version.split(e.splitNumRegx),r=0;r<Math.max(o.length,a.DIGITMAX[0].length);r++)if((r<o.length?o[r]:0)===(r<a.DIGITMAX[0].length?a.DIGITMAX[0][r]:0)){s.storage[c]=null;break}}}else i=[0];c&&!s.storage[c]&&(s.storage[c]={codebase:s.clone(s.codebase)},s.storage[c].codebase.classID=n,e.isArray(i)&&i.length&&(s.storage[c].codebase.DIGITMAX=[[].concat(i)])),t?(l=s.storage[c].codebase.isMin(t),d=s.storage[c].codebase.version):(l=0,d=s.storage[c].codebase.search()),s.setPluginStatus(l,d)}else s.setPluginStatus(0,0,1)}};e.addPlugin("activex",c)}()},whut:function(e,t,n){"use strict";var i=o(n("rXeC")),r=o(n("8NzR")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("FD+P"),(0,r.default)(".NS-forms_categorization_field",function(e){e.each(function(){var e=(0,i.default)(this),t=e.find(".template"),n=e.find("ol.selected");n.find("li").each(function(){var e,t;e=(0,i.default)(this),t=(0,i.default)('<a class="remove" href="#">'+a.default.t("onloads.views.forms.categorization_field.remove")+"</a>"),e.append(t)}),n.on("click","a.remove",function(e){var t=(0,i.default)(this).closest("li"),n=t.find(".destroy");e.preventDefault(),t.fadeOut(function(){n.length?n.val("1"):t.remove()})}),e.find(".new a").on("click",function(e){e.preventDefault(),n.append(t.clone_form_template())})})})},wtjs:function(e,t,n){"use strict";var i=o(n("l/Rs")),r=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),n("jN36"),(0,i.default)(function(){(0,i.default)("#account-setup-panel .NS_accounts__edit .account-pending").livequery(function(){i.default.pollster((0,i.default)(this).attr("data-url"),function(e){var t=e.identity.state;if("passed"===t)(0,r.default)({success:a.default.t("onloads.views.accounts.processing_state.Your_identity_and_banking_information_has_been_approved")});else{if("failed"!==t)return!1;(0,r.default)({error:a.default.t("onloads.views.accounts.processing_state.We_need_more_information_to_verify_your_identity")})}return(0,i.default)("#account-setup-panel").trigger("project_build:refresh"),!0})})})},wun9:function(e,t,n){"use strict";var i=o(n("rXeC")),r=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("#projects_learn_refresh",function(){(0,i.default)(".js-category-link").on("click",function(e){(0,i.default)(".js-category-link").removeClass("selected"),(0,i.default)(".js-category-link").addClass("o-medium"),(0,i.default)(this).addClass("selected"),(0,i.default)(this).removeClass("o-medium"),(0,i.default)(".js-category-panel").addClass("hide"),(0,i.default)('.js-category-panel[data-name="'+(0,i.default)(this).data("name")+'"]').removeClass("hide"),(0,a.track)("Learn More Project Category Select",{category_name:(0,i.default)(this).text()}),e.preventDefault()}),(0,i.default)(".js-category-link").first().click()})},xQXO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initFlaggingAction=function(e){return{type:"INIT_FLAGGING",projectSlug:e}},t.flaggingFetchSuccessAction=function(e){return{type:"FLAGGING_FETCH_SUCCESS",response:e}},t.flaggingFetchFailAction=function(e){return{type:"FLAGGING_FETCH_FAIL",error:e}}},xZTV:function(e,t,n){"use strict";var i=r(n("l/Rs"));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n("8NzR")).default)("body#country_signups_netherlands",function(e){var t=e.find(".video-banner");function n(){var e=(0,i.default)(window).height()-(0,i.default)("#header-wrap").height(),n=(0,i.default)(window).width(),r=n/e;t.css({height:e,"min-height":"660px"}),r<1.777777?t.find("video").css({height:e,width:"auto",left:"50%",top:0,"margin-top":0,"margin-left":-t.find("video").width()/2}):(t.find("video").css({height:"auto",width:n,left:0,"margin-left":0,top:"50%","margin-top":-t.find("video").height()/2}),e<620&&t.find("video").css({"margin-top":-360}))}(0,i.default)(document).resize(function(){n()}),n()})},xgGG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(n("l/Rs")),r=d(n("shXp")),a=d(n("9VV1")),o=d(n("XDtq")),s=d(n("MA+5")),l=d(n("hBlz"));function d(e){return e&&e.__esModule?e:{default:e}}n("452R"),n("v6Dq"),n("mjY1");var c=o.default.extend();function u(){return(0,l.default)(window.location.href)}c.uri=c.prototype.uri=function(){return u()},c.on_initialize(function(e,t,n,i){this.$view=t,this.template=n,i.url?(0,l.default)(i.url).equals(u().clone().query(""))?this.original_uri=u():this.original_uri=(0,l.default)(i.url):this.original_uri=u(),this.current_params="",this.param_change_listeners=[],this.options=i,u().equals(window.location.href)?e&&this.change_params(u().query()):this.set_params(u().query(),!0),this.bind_events()}),c.prototype.on_change_params=function(e){this.param_change_listeners.push(e)},c.prototype.change_params=function(e){this.$view.html((0,s.default)(this.template,this.get())),this.options.mobius_on&&!this.mobius&&(this.mobius=this.init_mobius(this.options.mobius_on)),this.current_params=e,e!==u().query()?history.pushState({params:e},null,this.original_uri.query(e).hash("").toString()):history.replaceState({params:e},null,u().query(e).hash("").toString()),this.mobius&&function(){var t=this.$mobius_context();this.mobius.current_page=1,this.mobius.set_extra_params(e),this.mobius.$elem=this.$mobius_on(),t.get(0)!==this.mobius.options.$context.get(0)&&(this.mobius.options.$context=t,this.mobius.bind_events()),this.get("total_pages")>1?(this.mobius.play(),this.mobius.check_for_more(),(0,i.default)(".mobius_load_more").show()):(this.mobius.pause(),(0,i.default)(".mobius_load_more").hide())}.apply(this),r.default.each(this.param_change_listeners,function(t){"function"==typeof t&&t(e)}),this.change()},c.prototype.set_params=function(e,t){var n=this.original_uri.clone().query(e||!1),r=this;return!(!t&&e===this.current_params)&&(i.default.ajax({url:n.suffix("json").toString(),dataType:"json",success:function(t){r.set(t,{overwrite:!0}),r.change_params(e)},error:function(e){(0,a.default)({error:e.responseText})}}),!0)},c.prototype.bind_events=function(){var e=this;(0,i.default)(window).on("statechange",function(){var t=History.getState().data;t&&"string"==typeof t.params&&e.set_params(t.params)})},c.prototype.$mobius_on=function(){var e=this.$view.find(".mobius_on");return e.length||(e=this.$view),e},c.prototype.$mobius_context=function(){var e=this.$view.find(".mobius_context");return e.length||(e=(0,i.default)(window)),e},c.prototype.init_mobius=function(e){var t=this,n=this.$mobius_on(),r=this.$mobius_context();return this.$view.on("mobius:loaded_page",function(n,r,a){a[e]=t.get(e).concat(a[e]),r>=a.total_pages?(t.mobius.pause(),(0,i.default)(".mobius_load_more").hide()):(t.mobius.play(),(0,i.default)(".mobius_load_more").show()),delete a.params.page,t.set(a,{overwrite:!0})}),n.mobius({dataType:"json",url:this.original_uri.clone().query("").toString(),$context:r,paused:!0}).data("mobius")},window.Location=c,t.default=c},xgez:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focusPreviousOption=t.focusNextOption=t.radioGroupReducer=t.radioGroupOptionSelected=t.radioGroupKeydown=t.initialRadioGroupState=t.radioGroupWillHandleKey=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("EIRz"),a=n("Tvaj"),o=[a.DOWN,a.LEFT,a.RIGHT,a.SPACE,a.UP],s=(t.radioGroupWillHandleKey=function(e){return o.includes(e)},t.initialRadioGroupState={selectedOptionIndex:null}),l=(t.radioGroupKeydown=function(e,t,n,i){return{type:"RADIO_GROUP_KEYDOWN",keycode:e,target:t,currentIndex:n,maximumIndex:i}},t.radioGroupOptionSelected=function(e,t){return{type:"RADIO_GROUP_OPTION_SELECTED",index:t}},t.radioGroupReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"NOOP":return e;case"RADIO_GROUP_KEYDOWN":var n=t.currentIndex,r=t.keycode,a=t.target,o=t.maximumIndex;return c(r,a,n,o,e);case"RADIO_GROUP_OPTION_SELECTED":return i({},e,{selectedOptionIndex:t.index});default:return e}},t.focusNextOption=function(e){var t=e.nextElementSibling;t?t.focus():e.parentNode.firstChild.focus()}),d=t.focusPreviousOption=function(e){var t=e.previousElementSibling;t?t.focus():e.parentNode.lastChild.focus()},c=function(e,t,n,o,s){switch(e){case a.LEFT:case a.UP:return(0,r.loop)(i({},s,{selectedOptionIndex:f(s.selectedOptionIndex,o)}),r.Cmd.run(d,{args:[t]}));case a.RIGHT:case a.DOWN:return(0,r.loop)(i({},s,{selectedOptionIndex:u(s.selectedOptionIndex,o)}),r.Cmd.run(l,{args:[t]}));case a.SPACE:return i({},s,{selectedOptionIndex:n});default:return s}},u=function(e,t){return e>=t?0:e+1},f=function(e,t){return!e||e<1?t:e-1}},y96e:function(e,t,n){var i=n("l/Rs");n("l/Rs");WYMeditor.DocumentStructureManager=function(e,t){this._wym=e,this.structureRules=WYMeditor.DocumentStructureManager.DEFAULTS,this.setDefaultRootContainer(t)},i.extend(WYMeditor.DocumentStructureManager,{VALID_DEFAULT_ROOT_CONTAINERS:["p","div"],DEFAULT_ROOT_CONTAINER_TITLES:{p:"Paragraph",div:"Division"},CONTAINERS_BLOCKING_NAVIGATION:["table","blockquote","pre"],DEFAULTS:{defaultRootContainer:"p",notValidRootContainers:["div"],validRootContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","table","ol","ul"],convertIfRootContainers:["div"],validListConversionTargetContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","td","th"],wrapContentsInList:["td","th"]}}),WYMeditor.DocumentStructureManager.prototype.setDefaultRootContainer=function(e){var t,n;if(this.structureRules.defaultRootContainer!==e){if(t=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,-1===(n=i.inArray(e,t)))throw new Error("a defaultRootContainer of '"+e+"' is not supported");this.structureRules.defaultRootContainer=e,this.structureRules.notValidRootContainers=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,this.structureRules.notValidRootContainers.splice(n,1),this.adjustDefaultRootContainerUI()}},WYMeditor.DocumentStructureManager.prototype.adjustDefaultRootContainerUI=function(){var e,t,n,r,a,o,s,l=this._wym,d=this.structureRules.defaultRootContainer;for(e=i(l._box).find(l._options.containersSelector).find("li"),r=!0,o=0;o<e.length;++o)n=e.eq(o).find("a").attr("name").toLowerCase(),i.inArray(n,this.structureRules.notValidRootContainers)>-1&&e.eq(o).remove(),n===d&&(r=!1);r&&(a=l._options.containersItemHtml,a=WYMeditor.Helper.replaceAll(a,WYMeditor.CONTAINER_NAME,d.toUpperCase()),s=WYMeditor.DocumentStructureManager,a=WYMeditor.Helper.replaceAll(a,WYMeditor.CONTAINER_TITLE,s.DEFAULT_ROOT_CONTAINER_TITLES[d]),a=WYMeditor.Helper.replaceAll(a,WYMeditor.CONTAINER_CLASS,"wym_containers_"+d),t=i(a),(e=i(l._box).find(l._options.containersSelector).find("li")).eq(0).before(t),t.find("a").click(function(){return l.container(i(this).attr(WYMeditor.NAME)),!1}))}},yQDW:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){e.fn.unveil=function(t,n){var i,r=e(window),a=t||0,o=window.devicePixelRatio>1?"data-src-retina":"data-src",s=this;function l(){var t=s.filter(function(){var t=e(this);if(!t.is(":hidden")){var n=r.scrollTop(),i=n+r.height(),o=t.offset().top;return o+t.height()>=n-a&&o<=i+a}});i=t.trigger("unveil"),s=s.not(i)}return this.one("unveil",function(){var e=this.getAttribute(o);(e=e||this.getAttribute("data-src"))&&(this.setAttribute("src",e),"function"==typeof n&&n.call(this))}),r.scroll(l),r.resize(l),l(),this}}(window.jQuery||window.Zepto)},yYdC:function(e,t,n){"use strict";var i,r=n("l/Rs"),a=(i=r)&&i.__esModule?i:{default:i};n("6TZa"),(0,a.default)(function(){(0,a.default)(document).ksrSelect()})},ybIR:function(e,t,n){"use strict";var i,r=n("wmCY"),a=(i=r)&&i.__esModule?i:{default:i};n("l/Rs");var o=n("l/Rs");!function(){function e(e){return e.html}o.fn.loadMore=function(t){o(this).each(function(){var n=o(this),i=n.find(".js-load-more--appendable"),r=n.find(".js-load-more--removable"),s=n.find(".js-load-more--button");r.length||(r=s),function(t,n,i,r,s){var l=t.mobius(o.extend({url:function(e){return e.data("href")||e.prop("href")}(n),dataType:"json",trigger_next:n,load_next_after:i},s)).data("mobius");t.on("mobius:loading_page",function(){var e=t.attr("data-exclude-ids"),i=l.options.perPage||6;e&&l.add_param("exclude_ids[]",e.split(",")),i&&l.add_param("per_page",i),n.prop("disabled",!0),n.data("previousHTML",n.html()),n.html(a.default.t("library.load_more.Loading"))}),t.on("mobius:loaded_page",function(t,a,s){var d=(l.options.responseToHTML||e)(s),c=o(d).hide();i.append(c),c.slideDown(),n.html(n.data("previousHTML")),n.prop("disabled",!1),"has_more"in s&&!s.has_more&&r.remove()})}(n,s,i,r,t)})}}()},yloT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.stringToMoney=function(e,t){if(!e)return 0;t=i({precision:2},t);var n=Math.max(2,t.precision);return parseFloat(e.replace(/[^0-9.,-]/g,"").replace(new RegExp("[\\.,](\\d{1,"+n+"}$)","g"),".$1").replace(new RegExp("[\\.,](?!\\d{1,"+n+"}$)","g"),""))}},ymRo:function(e,t,n){"use strict";var i=s(n("l/Rs")),r=s(n("8NzR")),a=n("16WZ"),o=n("Tvaj");function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_layouts__admin_navigation",function(e){var t=(0,i.default)("a.open_panel",e),n=(0,i.default)("#admin_panel"),r=(0,i.default)("#admin-nav-prop"),s=(0,i.default)("#admin_panel_wrap");function l(){var t;s.is(":hidden")?(t=(0,i.default)("#admin_wrap"),e.detach().prependTo("body"),0!==s.offsetParent().scrollTop()&&s.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad"),s.trigger("opened"),s.slideDown(function(){r.height(t.height()),(0,a.rebindScroll)()})):s.slideUp(function(){(0,a.rebindScroll)()})}e.on("ksr_admin:nav_open",function(){s.is(":hidden")&&l()}),t.click(function(e){l(),e.preventDefault()}),(0,i.default)(window).on("keydown",function(e){if(e.which===o.SPACE&&!(0,i.default)(e.target).is(":input")&&!(0,i.default)(e.target).is("[contenteditable]"))if(s.is(":visible")){var t,a=n.find("details[open]").add("#running-board-wrap"),d=0;a.each(function(e){window.scrollY>=this.offsetTop-r.height()&&(d=e)}),(t=d===a.length-1?a.get(0):a.get(d+1))&&window.scrollTo(0,t.offsetTop-r.height()),e.preventDefault()}else l()}),"#admin_panel"===window.location.hash&&(i.default.fx.off=!0,l(),i.default.fx.off=!1)})},yqLu:function(e,t,n){"use strict";var i=l(n("l/Rs"));n("LNuh");var r,a,o=l(n("YC2V")),s=l(n("c5nH"));function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(document).on("livesearch:results",function(e,t){var n,a=(0,i.default)(e.target).val();n=t.projects?t.projects.length:t.length,r=(0,i.default)(e.target).attr("data-tracker-name"),"undefined"!=typeof ga&&ga("send","event",r,"Term",a,parseInt(n,10))}),(0,i.default)(document).on("livesearch:searching",function(){a=!0}),(0,i.default)(document).on("livesearch:cancel",function(){a&&("undefined"!=typeof ga&&ga("send","event",r,"Cancels"),a=!1)}),(0,i.default)(document).ready(function(){(0,i.default)(".home-editorial-title").on("click",function(){var e=(0,i.default)(this).html();"undefined"!=typeof ga&&ga("send","event","Faux-Category on Homepage Clicks",e)})}),(0,i.default)(document).ready(function(){(0,i.default)(".export").find("a").on("click",function(){"undefined"!=typeof ga&&ga("send","event","Export Reward Report","Download Click")})}),(0,i.default)(document).ready(function(){(0,i.default)("#results_properties").livequery(function(){var e=(0,i.default)(this).children("#number_of_results").text(),t=(0,i.default)(this).children("#term").text();"undefined"!=typeof ga&&ga("send","event","Search Results","Term",t,parseInt(e,10))})}),(0,i.default)(document).ready(function(){(0,i.default)("#pledges_login_or_signup #growl_section .error").livequery(function(){var e=(0,i.default)(this).children(".message").html(),t=(0,i.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Checkout Login Errors",e,t)}),(0,i.default)("#checkout-signup .fieldset-errors").livequery(function(){var e=(0,i.default)(this).children("ul").children(),t=(0,i.default)(document).attr("URL");i.default.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Checkout Signup Errors",n,t)})}),(0,i.default)("#sessions_new #growl_section .error").livequery(function(){var e=(0,i.default)(this).children(".message").html(),t=(0,i.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Regular Login Errors",e,t)}),(0,i.default)("#new_user .fieldset-errors").livequery(function(){var e=(0,i.default)(this).children("ul").children(),t=(0,i.default)(document).attr("URL");i.default.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors",n,t)})})}),(0,i.default)(document).ready(function(){(0,i.default)(".share-box").on("click","a",function(){var e=(0,i.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,i.default)("#checkout-project-share").on("click","a",function(){var e=(0,i.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,i.default)(document).on("click",".clipster",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Copied Link")}),(0,i.default)(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Facebook Like")})})}),(0,i.default)(function(){var e;(0,i.default)("#video-section object").livequery(function(){e=(0,i.default)(this)[0],(0,i.default)(document).attr("URL")}),(0,i.default)(document).on("click","#video-section",function(){(0,i.default)(document).attr("URL"),e&&("Project Page Video",function(e){e.addModelListener("TIME","timeStats"),e.addModelListener("STATE","getState")}(e))}),(0,i.default)(window).on("beforeunload",function(){0})}),(0,i.default)(document).on("modal_dialog:opened",function(e){var t=(0,i.default)(e.target).find(".modal_dialog_head h4").text();"undefined"!=typeof ga&&ga("send","event","Modal Dialog","Opened",t)}),(0,i.default)(document).ready(function(){(0,i.default)(".faq-question a").click(function(){var e=(0,i.default)("body[id]").length?(0,i.default)("body").attr("id"):"No ID",t=(0,i.default)(this).closest(".faq"),n=(0,i.default)(this).find(".question").text();"undefined"==typeof ga||t.hasClass("expanded")||ga("send","event","FAQ","Expanded - "+e,n)})}),(0,i.default)(document).ready(function(){(0,i.default)(document).on("click","a#edit_survey_response",function(){"undefined"!=typeof ga&&ga("send","event","Surveys","Click","Edit Survey Response")})}),(0,i.default)(document).ready(function(){(0,i.default)(document).on("click","ul#admin-menu > li > a",function(){"undefined"!=typeof ga&&ga("send","event","Admin","Nav Click",(0,i.default)(this).text())})}),(0,i.default)(document).ready(function(){var e=0;(0,i.default)(".scissors").on("click",function(){e<2?("undefined"!=typeof ga&&ga("send","event","Scissors","Clicks"),e+=1):"undefined"!=typeof ga&&ga("send","event","Scissors","Chops")})}),(0,i.default)(document).ready(function(){if((0,i.default)("#checkouts_thanks").length&&"undefined"!=typeof ga&&o.default&&s.default){ga("require","ecommerce"),ga("ecommerce:addTransaction",{id:o.default.get("id"),affiliation:s.default.get("slug"),revenue:o.default.get("net_amount"),shipping:o.default.get("shipping"),currency:s.default.get("currency")});var e=[s.default.get("name"),o.default.get("reward").title_for_backing_tier||"No Reward"].join("-");ga("ecommerce:addItem",{id:o.default.get("id"),name:e,sku:o.default.get("reward").id,category:s.default.get("category").name,price:o.default.get("reward").minimum,quantity:"1",currency:s.default.get("currency")}),ga("ecommerce:send")}}),(0,i.default)(document).ready(function(){var e=1;(0,i.default)(document).on("infinite_scroll:scrolled_to",function(t,n){if(n>e){var i=window.location.pathname+window.location.search+window.location.hash;"undefined"!=typeof ga&&ga("send","pageview",i),e=n}})})},zOWE:function(e,t,n){"use strict";var i=l(n("8NzR")),r=l(n("l/Rs")),a=l(n("+bVi")),o=l(n("wmCY")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_mobile__universal_app_hero",function(e){var t,n=(0,r.default)(".js-ipad-frame"),i=1,l=1,d=(0,r.default)(".js-form-message",e),c=!1;function u(){var e=(0,r.default)(".js-ipad-inner"),t=.81836*n.outerWidth(),i=.86634*n.outerHeight(),a=(0,r.default)(".js-ipad-inner-content"),o=(0,r.default)(".js-ipad-inner-content > div");e.css({width:t,height:i,left:(n.outerWidth()-t)/2,top:(n.outerHeight()-i)/2}),a.css({width:t*o.length}),o.css({width:t,height:i}),function(){var e=(0,r.default)(".js-iphone-container"),t=(0,r.default)(".js-iphone-frame"),i=(0,r.default)(".js-iphone-inner"),a=(0,r.default)(".js-iphone-inner-content"),o=(0,r.default)(".js-iphone-inner-content > div");(0,r.default)(window).width()<(0,r.default)(".js-device-container").width()+.35*t.outerWidth()?e.css({right:0}):e.css({right:-.35*t.outerWidth()});t.css({height:.8141*n.outerHeight(),right:-.35*t.outerWidth()});var s=.86585*t.outerWidth(),l=.7537*t.outerHeight();i.css({width:s,height:l,left:(t.outerWidth()-s)/2,top:(t.outerHeight()-l)/2}),a.css({width:s*o.length}),o.css({width:s,height:l}),(0,r.default)(".js-iphone-video").css({width:s,height:l})}()}(0,r.default)(document).on("submit","#send_mobile_link_form",function(e){e.preventDefault();var t=(0,r.default)(this);c||(c=!0,r.default.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find("#email_or_phone").val()},success:function(e){e.success?(d.show().removeClass("error").html(e.success),t.remove()):e.error&&d.show().addClass("error").html(e.error)},complete:function(){c=!1}}))}),(0,r.default)(document).on("closed.modal_dialog","#send_mobile_link_dialog",function(t){t.preventDefault(),(0,r.default)("#send_mobile_link_form",e).length||d.html(o.default.t("onloads.views.mobile.universal_app_hero.You_should_already_have_a_link_from_us"))}),a.default["not-ios"]&&(0,r.default)(".js-get-the-app-button").on("click",function(e){(0,s.track)("Mobile Promo Reveal Form"),(0,r.default)(".js-get-the-app-button-container").css({marginTop:-(0,r.default)(this).outerHeight()}),setTimeout(function(){(0,r.default)(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),(0,r.default)(document).resize(function(){u()}),setTimeout(function(){u(),e.removeClass("loading")},500),clearInterval(t),t=setInterval(function(){(0,r.default)(".js-ipad-inner-content").css({marginLeft:-100*i+"%"}),(i+=1)>=(0,r.default)(".js-ipad-inner-content > div").length&&(i=0),(0,r.default)(".js-iphone-inner-content").css({marginLeft:-100*l+"%"}),(l+=1)>=(0,r.default)(".js-iphone-inner-content > div").length&&(l=0)},5e3)})},zZ2s:function(e,t,n){"use strict";var i=d(n("l/Rs")),r=d(n("8NzR")),a=d(n("9VV1")),o=d(n("wmCY")),s=n("Tvaj"),l=n("4RZc");function d(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#survey_editability_edit",function(e){var t=(0,i.default)("form#disable_survey_editability_form",e),n=(0,i.default)("#send_editable_address_preview",e),r=(0,i.default)("form#enable_survey_editability_form",e),d=t.find("#disable_confirm_text").html(),c=r.find("#enable_confirm_text").html();(0,i.default)("input:text",e).on("keydown",function(e){e.which===s.ENTER&&e.preventDefault()}),n.on("click",function(e){e.preventDefault();var t=(0,i.default)(this);t.data("loading")||(t.data("loading",!0),i.default.post(t.attr("href"),{},function(e,n){"success"===n&&((0,a.default)({success:o.default.t("onloads.views.surveys.editability_form.A_preview_has_been_sent_to_your_email_address")}),t.data("loading",!1))})),(0,l.track)("Survey Editability Deadline Preview Sent")}),t.confirm_submit({title:o.default.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:d,yes_copy:o.default.t("onloads.views.surveys.editability_form.Send_notifications_now"),no_copy:o.default.t("onloads.views.surveys.editability_form.Cancel")}),r.confirm_submit({title:o.default.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:c,yes_copy:o.default.t("onloads.views.surveys.editability_form.Allow_changes_now"),no_copy:o.default.t("onloads.views.surveys.editability_form.Cancel")})})},zcFO:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter(function(e){return null!=e})).length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},zcvo:function(e,t,n){var i=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Cancel",target_input:!1},t),e(this).each(function(){var n,i=e(this),r=i.find('input[type="text"]'),a=t.target_input||i.find('input[type="hidden"]'),o=r.siblings(".ss-search");function s(){r.hide(),r.attr("disabled","disabled"),r.siblings(".ss-delete, .ss-search").hide();var n=e('<div class="field-selected"><span class="value">'+r.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a></div>");r.siblings("div.field-selected").remove(),r.after(n),r.siblings(".results").slideUp(),r.trigger("livesearch_selector:select",[r.val()]),n.find("a.cancel-link").click(function(e){e.preventDefault(),r.val(""),n.remove(),r.removeAttr("disabled"),r.siblings(".ss-delete, .ss-search").show(),r.show(),r.focus(),a.val(""),r.trigger("dirty"),r.trigger("livesearch_selector:unselect")})}i.addClass("search"),a.val()&&r.val()&&s(),t.url=t.url||i.closest("form").attr("action"),i.livesearch_pretty_input_dropdown(t),n=r.data("livesearch.input_dropdown"),r.on("livesearch:searching",function(){o.removeClass("ss-search").addClass("icon-loading-small")}),r.on("livesearch:results livesearch:ajax_error",function(){o.removeClass("icon-loading-small").addClass("ss-search")}),r.on("livesearch:results",function(){var e=r.siblings(".results");n.select(e.find("li:first"))}),i.on("livesearch:selected",function(e,t){t&&(r.val(t[0]),a.val(t[1]),s())})})}}(i)},"zn/B":function(e,t,n){"use strict";var i=f(n("l/Rs")),r=f(n("shXp")),a=f(n("+bVi")),o=n("4RZc"),s=n("16WZ"),l=n("dvbw"),d=f(n("hBlz"));n("M1ti");var c=n("ABD9"),u=n("nh5m");function f(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=(0,i.default)(".NS_projects__project_nav"),t=(0,i.default)(".NS_projects__content"),n=e.find(".js-load-project-content");if(e.length&&t.length){if((0,i.default)(document).on("projectnav:description",function(){(0,c.projectFlaggingInit)(),(0,u.backerRewardsInit)()}),(0,i.default)(window).on("resize",r.default.debounce(w,100)),function(){var e=window.location.pathname.replace(/\/\d*$/,""),t=r.default.map(n,function(e){return e.pathname.split("/").pop()});t.push("posts");var i=e.split("/").pop();r.default.contains(t,i)&&!window.location.hash&&E()}(),n.on("click",function(e){var t=(0,i.default)(this);if(e.preventDefault(),(0,d.default)(t.prop("href")).pathname()!==(0,d.default)(window.location).pathname()){var n=t.attr("data-content");b(t.attr("href"),n)}}),t.on("click",".js-faq-link",function(e){C(e,"Check")}),t.on("click",".js-add-faq-link",function(e){C(e,"Post")}),a.default["not-touchable"]){var f=skrollr.init({forceHeight:!1});(0,i.default)(document).one("ksr:video_player_resize",function(){f.refresh()})}(0,i.default)(document).resize(function(){w()});var h={about:!1,risks:!1,last_rewards:!1,recs:!1},p=r.default.debounce(function(){k("about",(0,i.default)(".js-project-nav"))&&T("about",S((0,i.default)(".js-project-nav"))),k("last_rewards",(0,i.default)(".js-project-rewards"),!0)&&T("last_rewards",S((0,i.default)(".js-project-rewards"))+(0,i.default)(".js-project-rewards").height()),k("risks",(0,i.default)(".js-risks"))&&T("risks",S((0,i.default)(".js-risks"))),k("recommended",(0,i.default)(".js-recs"))&&T("recommended",S((0,i.default)(".js-recs")))},1e3);if((0,i.default)(document).scroll(p),w(),a.default["not-touchable"]){var m=(0,i.default)("body"),g=(0,i.default)(".creator-nav"),v=(0,i.default)("#global-header"),_=m.hasClass("creator_nav_visible")?"calc(100% - "+g.width()+"px)":"100%",y=v.length&&v.css("position").includes("sticky")?[".js-admin-nav-wrap",".js-site-nav-container"]:[".js-admin-nav-wrap"];(0,s.setupScrollLocking)({offsets:y,element:".js-project-nav",styles:function(){return{onLock:{width:_,right:0},offLock:{width:"100%"}}}})}}function b(r,a){var o=".js-project-"+a+"-content",s=t.find(o);!function(e,t){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.hash=t}(r,a),function(t){var i=e.find(".js-load-project-"+t);n.removeClass("is-active"),i.addClass("is-active"),w()}(a),t.find(".js-project-content").removeClass("visible").fadeOut(200,function(){(0,i.default)(this).empty(),window.setTimeout(function(){s.fadeIn()},200)}),i.default.ajax({url:r,cache:!1,success:function(e){s.html(e),E(),(0,i.default)(document).trigger("projectnav:"+a)}})}function w(){var t=e.find("a.is-active");t.length?e.find(".js-selected-indicator").show().css({left:(0,i.default)(".js-project-nav-scroll").scrollLeft()+t.position().left+parseInt(t.css("marginLeft")||0,10)+parseInt(t.css("paddingLeft")||0,10),width:t.width()}):e.find(".js-selected-indicator").hide()}function E(){(0,l.coreScroller)({to:t.position().top,easing:"easeOutQuint",duration:200})}function C(e,t){e.preventDefault(),b((0,i.default)(e.target).attr("href"),"faqs"),(0,o.track)("Clicked"+t+"FAQ",{context:(0,i.default)(e.target).data("context")})}function k(e,t,n){if(!h[e]&&!function(e){return 0===e.length||e.is(":hidden")}(t)){var r=n?t.height():0;return(0,i.default)(this).scrollTop()+(0,i.default)(this).height()>=S(t)+r}}function S(e){return e.offset().top}function T(e,t){(0,o.track)("Viewed Project Page Section",{context:e,page_pixel_length:(0,i.default)(document).height(),pixel_position:t}),h[e]=!0}})},zx33:function(e,t,n){"use strict";n("l/Rs");var i=n("l/Rs");i(function(){i.fn.sync_form=function(e){var t=i(this),n=function(){};e=e||{},t.data("updating")?t.data("dirty",(t.data("dirty")||[]).concat(e)):(t.data("updating",!0),i.ajax({type:e.type||t.attr("method"),url:e.url||t.attr("action"),data:e.data||t.serialize(),dataType:"json",global:!1,context:t,beforeSend:e.beforeSend,success:function(r){(e.success||n).apply(this,arguments),t.trigger("form_synced",[r]),t.data("dirty")&&t.data("dirty").length&&setTimeout(function(){for(var e={};i.isEmptyObject(e)&&t.data("dirty").length;)e=t.data("dirty").shift();t.sync_form(e)},100),r.url&&t.attr("action",r.url)},error:e.error,complete:function(){(e.complete||n).apply(this,arguments),t.data("updating",!1)}}))}})}},[16]);